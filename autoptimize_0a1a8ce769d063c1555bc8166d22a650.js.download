;var MonsterInsights=function(){var e=[],a='',o=!1;this.setLastClicked=function(t,n,i){t=typeof t!=='undefined'?t:[];n=typeof n!=='undefined'?n:[];i=typeof i!=='undefined'?i:!1;e.valuesArray=t;e.fieldsArray=n};this.getLastClicked=function(){return e};this.setInternalAsOutboundCategory=function(e){a=e};this.getInternalAsOutboundCategory=function(){return a};this.sendEvent=function(e,n,i){t(e,n,i,[])};function u(){if(window.monsterinsights_debug_mode){return!0}
else{return!1}};function t(t,n,a,r){t=typeof t!=='undefined'?t:'event';n=typeof n!=='undefined'?n:'';r=typeof r!=='undefined'?r:[];a=typeof a!=='undefined'?a:{};__gtagTracker(t,n,a);e.valuesArray=r;e.fieldsArray=a;e.fieldsArray.event_action=n;e.tracked=!0;i('Tracked: '+r.type);i(e)};function n(t){t=typeof t!=='undefined'?t:[];e.valuesArray=t;e.fieldsArray=[];e.tracked=!1;i('Not Tracked: '+t.exit);i(e)};function i(e){if(u()){console.dir(e)}};function l(e){return e.replace(/^\s+|\s+$/gm,'')};function c(){var n=0,e=document.domain,i=e.split('.'),t='_gd'+(new Date()).getTime();while(n<(i.length-1)&&document.cookie.indexOf(t+'='+t)==-1){e=i.slice(-1-(++n)).join('.');document.cookie=t+'='+t+';domain='+e+';'};document.cookie=t+'=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain='+e+';';return e};function d(e){e=e.toString();e=e.substring(0,(e.indexOf('#')==-1)?e.length:e.indexOf('#'));e=e.substring(0,(e.indexOf('?')==-1)?e.length:e.indexOf('?'));e=e.substring(e.lastIndexOf('/')+1,e.length);if(e.length>0&&e.indexOf('.')!==-1){e=e.substring(e.indexOf('.')+1);return e}
else{return''}};function b(e){return e.which==1||e.which==2||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey};function h(){var e=[];if(typeof monsterinsights_frontend.download_extensions=='string'){e=monsterinsights_frontend.download_extensions.split(',')};return e};function g(){var e=[];if(typeof monsterinsights_frontend.inbound_paths=='string'){e=JSON.parse(monsterinsights_frontend.inbound_paths)};return e};function y(e){if(e.which==1){return'event.which=1'}
else if(e.which==2){return'event.which=2'}
else if(e.metaKey){return'metaKey'}
else if(e.ctrlKey){return'ctrlKey'}
else if(e.shiftKey){return'shiftKey'}
else if(e.altKey){return'altKey'}
else{return''}};function w(e){var f=h(),i=g(),t='unknown',u=e.href,p=d(e.href),v=c(),o=e.hostname,r=e.protocol,m=e.pathname;u=u.toString();var s,b,y=e.getAttribute('data-vars-ga-category');if(y){return y};if(u.match(/^javascript\:/i)){t='internal'}
else if(r&&r.length>0&&(l(r)=='tel'||l(r)=='tel:')){t='tel'}
else if(r&&r.length>0&&(l(r)=='mailto'||l(r)=='mailto:')){t='mailto'}
else if(o&&v&&o.length>0&&v.length>0&&!o.endsWith('.'+v)&&o!==v){t='external'}
else if(m&&JSON.stringify(i)!='{}'&&m.length>0){var w=i.length;for(var n=0;n<w;n++){if(i[n].path&&i[n].label&&i[n].path.length>0&&i[n].label.length>0&&m.startsWith(i[n].path)){t='internal-as-outbound';a='outbound-link-'+i[n].label;break}}}
else if(o&&window.monsterinsights_experimental_mode&&o.length>0&&document.domain.length>0&&o!==document.domain){t='cross-hostname'};if(p&&(t==='unknown'||'external'===t)&&f.length>0&&p.length>0){for(s=0,b=f.length;s<b;++s){if(f[s].length>0&&(u.endsWith(f[s])||f[s]==p)){t='download';break}}};if(t==='unknown'){t='internal'};return t};function x(e,t){var n=(e.target&&!e.target.match(/^_(self|parent|top)$/i))?e.target:!1;if(t.ctrlKey||t.shiftKey||t.metaKey||t.which==2){n='_blank'};return n};function v(e){if(e.getAttribute('data-vars-ga-label')&&e.getAttribute('data-vars-ga-label').replace(/\n/ig,'')){return e.getAttribute('data-vars-ga-label').replace(/\n/ig,'')}
else if(e.title&&e.title.replace(/\n/ig,'')){return e.title.replace(/\n/ig,'')}
else if(e.innerText&&e.innerText.replace(/\n/ig,'')){return e.innerText.replace(/\n/ig,'')}
else if(e.getAttribute('aria-label')&&e.getAttribute('aria-label').replace(/\n/ig,'')){return e.getAttribute('aria-label').replace(/\n/ig,'')}
else if(e.alt&&e.alt.replace(/\n/ig,'')){return e.alt.replace(/\n/ig,'')}
else if(e.textContent&&e.textContent.replace(/\n/ig,'')){return e.textContent.replace(/\n/ig,'')}
else{return undefined}};function k(e){var i=e.children,a=0,r,n;for(var t=0;t<i.length;t++){r=i[t];n=v(r);if(n){return n};if(a==99){return undefined};a++};return undefined};function p(i){var l=i.srcElement||i.target,e=[],f;e.el=l;e.click_type=y(i);if('undefined'===typeof __gtagTracker||!b(i)){e.exit='loaded';n(e);return}
while(l&&(typeof l.tagName=='undefined'||l.tagName.toLowerCase()!='a'||!l.href)){l=l.parentNode};if(l&&l.href&&!l.hasAttribute('xlink:href')){var A=l.href,I=d(l.href),M=h(),S=g(),L=monsterinsights_frontend.home_url,N=c(),r=w(l),K=x(l,i),T=l.getAttribute('data-vars-ga-action'),p=l.getAttribute('data-vars-ga-label');e.el=l;e.el_href=l.href;e.el_protocol=l.protocol;e.el_hostname=l.hostname;e.el_port=l.port;e.el_pathname=l.pathname;e.el_search=l.search;e.el_hash=l.hash;e.el_host=l.host;e.debug_mode=u();e.download_extensions=M;e.inbound_paths=S;e.home_url=L;e.link=A;e.extension=I;e.type=r;e.target=K;e.title=v(l);if(!e.label&&!e.title){e.title=k(l)};if(r!=='internal'&&r!=='javascript'){var O=!1,m=function(){if(O){return};s();O=!0;window.location.href=A},E=function(){e.exit='external';n(e)},D=function(){e.exit='internal-as-outbound';n(e)},C=function(){e.exit='cross-hostname';n(e)};if(K||r=='mailto'||r=='tel'){if(r=='download'){f={event_category:'download',event_label:p||e.title,}}
else if(r=='tel'){f={event_category:'tel',event_label:p||e.title.replace('tel:',''),}}
else if(r=='mailto'){console.log(p||e.title.replace('mailto:',''));f={event_category:'mailto',event_label:p||e.title.replace('mailto:',''),}}
else if(r=='internal-as-outbound'){f={event_category:a,event_label:p||e.title,}}
else if(r=='external'){f={event_category:'outbound-link',event_label:p||e.title,}}
else if(r=='cross-hostname'){f={event_category:'cross-hostname',event_label:p||e.title,}};if(f){t('event',T||A,f,e)}
else{if(r&&r!='internal'){f={event_category:r,event_label:p||e.title,};t('event',T||A,f,e)}
else{e.exit='type';n(e)}}}
else{if(r!='cross-hostname'&&r!='external'&&r!='internal-as-outbound'){if(!i.defaultPrevented){if(i.preventDefault){i.preventDefault()}
else{i.returnValue=!1}}};if(r=='download'){f={event_category:'download',event_label:p||e.title,event_callback:m,};t('event',T||A,f,e)}
else if(r=='internal-as-outbound'){o=!0;window.onbeforeunload=function(n){if(!i.defaultPrevented){if(i.preventDefault){i.preventDefault()}
else{i.returnValue=!1}};f={event_category:a,event_label:p||e.title,event_callback:m,};if(navigator.sendBeacon){f.transport='beacon'};t('event',T||A,f,e);setTimeout(m,1000)}}
else if(r=='external'){o=!0;window.onbeforeunload=function(n){if(!i.defaultPrevented){if(i.preventDefault){i.preventDefault()}
else{i.returnValue=!1}};f={event_category:'outbound-link',event_label:p||e.title,event_callback:m,};if(navigator.sendBeacon){f.transport='beacon'};t('event',T||A,f,e);setTimeout(m,1000)}}
else if(r=='cross-hostname'){o=!0;window.onbeforeunload=function(n){if(!i.defaultPrevented){if(i.preventDefault){i.preventDefault()}
else{i.returnValue=!1}};f={event_category:'cross-hostname',event_label:p||e.title,event_callback:m,};if(navigator.sendBeacon){f.transport='beacon'};t('event',T||A,f,e);setTimeout(m,1000)}}
else{if(r&&r!=='internal'){f={event_category:r,event_label:p||e.title,event_callback:m,};t('event',T||A,f,e)}
else{e.exit='type';n(e)}};if(r!='external'&&r!='cross-hostname'&&r!='internal-as-outbound'){setTimeout(m,1000)}
else{if(r=='external'){setTimeout(E,1100)}
else if(r=='cross-hostname'){setTimeout(C,1100)}
else{setTimeout(D,1100)}};setTimeout(s,100)}}
else{s();e.exit='internal';n(e)}}
else{e.exit='notlink';n(e)}};var f=window.location.hash;function m(){if(monsterinsights_frontend.hash_tracking==='true'&&f!=window.location.hash&&monsterinsights_frontend.ua){f=window.location.hash;__gtagTracker('config',monsterinsights_frontend.ua,{page_path:location.pathname+location.search+location.hash,});i('Hash change to: '+location.pathname+location.search+location.hash)}
else{i('Hash change to (untracked): '+location.pathname+location.search+location.hash)}};function s(){if(o){window.onbeforeunload=null}};var r=window;if(r.addEventListener){r.addEventListener('load',function(){document.body.addEventListener('click',p,!1)},!1);window.addEventListener('hashchange',m,!1)}
else{if(r.attachEvent){r.attachEvent('onload',function(){document.body.attachEvent('onclick',p)});window.attachEvent('onhashchange',m)}};if(typeof String.prototype.endsWith!=='function'){String.prototype.endsWith=function(e){return this.indexOf(e,this.length-e.length)!==-1}};if(typeof String.prototype.startsWith!=='function'){String.prototype.startsWith=function(e){return this.indexOf(e)===0}};if(typeof Array.prototype.lastIndexOf!=='function'){Array.prototype.lastIndexOf=function(e){'use strict';if(this===void 0||this===null){throw new TypeError()};var t,n,a=Object(this),i=a.length>>>0;if(i===0){return-1};t=i-1;if(arguments.length>1){t=Number(arguments[1]);if(t!=t){t=0}
else if(t!=0&&t!=(1/0)&&t!=-(1/0)){t=(t>0||-1)*Math.floor(Math.abs(t))}};for(n=t>=0?Math.min(t,i-1):i-Math.abs(t);n>=0;n--){if(n in a&&a[n]===e){return n}};return-1}}},MonsterInsightsObject=new MonsterInsights();
;window.Modernizr=function(a,b,c){function C(a){j.cssText=a}function D(a,b){return C(n.join(a+";")+(b||""))}function E(a,b){return typeof a===b}function F(a,b){return!!~(""+a).indexOf(b)}function G(a,b){for(var d in a){var e=a[d];if(!F(e,"-")&&j[e]!==c)return b=="pfx"?e:!0}return!1}function H(a,b,d){for(var e in a){var f=b[a[e]];if(f!==c)return d===!1?a[e]:E(f,"function")?f.bind(d||b):f}return!1}function I(a,b,c){var d=a.charAt(0).toUpperCase()+a.slice(1),e=(a+" "+p.join(d+" ")+d).split(" ");return E(b,"string")||E(b,"undefined")?G(e,b):(e=(a+" "+q.join(d+" ")+d).split(" "),H(e,b,c))}function J(){e.input=function(c){for(var d=0,e=c.length;d<e;d++)u[c[d]]=c[d]in k;return u.list&&(u.list=!!b.createElement("datalist")&&!!a.HTMLDataListElement),u}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),e.inputtypes=function(a){for(var d=0,e,f,h,i=a.length;d<i;d++)k.setAttribute("type",f=a[d]),e=k.type!=="text",e&&(k.value=l,k.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(f)&&k.style.WebkitAppearance!==c?(g.appendChild(k),h=b.defaultView,e=h.getComputedStyle&&h.getComputedStyle(k,null).WebkitAppearance!=="textfield"&&k.offsetHeight!==0,g.removeChild(k)):/^(search|tel)$/.test(f)||(/^(url|email)$/.test(f)?e=k.checkValidity&&k.checkValidity()===!1:e=k.value!=l)),t[a[d]]=!!e;return t}("search tel url email datetime date month week time datetime-local number range color".split(" "))}var d="2.6.2",e={},f=!0,g=b.documentElement,h="modernizr",i=b.createElement(h),j=i.style,k=b.createElement("input"),l=":)",m={}.toString,n=" -webkit- -moz- -o- -ms- ".split(" "),o="Webkit Moz O ms",p=o.split(" "),q=o.toLowerCase().split(" "),r={svg:"http://www.w3.org/2000/svg"},s={},t={},u={},v=[],w=v.slice,x,y=function(a,c,d,e){var f,i,j,k,l=b.createElement("div"),m=b.body,n=m||b.createElement("body");if(parseInt(d,10))while(d--)j=b.createElement("div"),j.id=e?e[d]:h+(d+1),l.appendChild(j);return f=["&#173;",'<style id="s',h,'">',a,"</style>"].join(""),l.id=h,(m?l:n).innerHTML+=f,n.appendChild(l),m||(n.style.background="",n.style.overflow="hidden",k=g.style.overflow,g.style.overflow="hidden",g.appendChild(n)),i=c(l,a),m?l.parentNode.removeChild(l):(n.parentNode.removeChild(n),g.style.overflow=k),!!i},z=function(){function d(d,e){e=e||b.createElement(a[d]||"div"),d="on"+d;var f=d in e;return f||(e.setAttribute||(e=b.createElement("div")),e.setAttribute&&e.removeAttribute&&(e.setAttribute(d,""),f=E(e[d],"function"),E(e[d],"undefined")||(e[d]=c),e.removeAttribute(d))),e=null,f}var a={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return d}(),A={}.hasOwnProperty,B;!E(A,"undefined")&&!E(A.call,"undefined")?B=function(a,b){return A.call(a,b)}:B=function(a,b){return b in a&&E(a.constructor.prototype[b],"undefined")},Function.prototype.bind||(Function.prototype.bind=function(b){var c=this;if(typeof c!="function")throw new TypeError;var d=w.call(arguments,1),e=function(){if(this instanceof e){var a=function(){};a.prototype=c.prototype;var f=new a,g=c.apply(f,d.concat(w.call(arguments)));return Object(g)===g?g:f}return c.apply(b,d.concat(w.call(arguments)))};return e}),s.flexbox=function(){return I("flexWrap")},s.flexboxlegacy=function(){return I("boxDirection")},s.canvas=function(){var a=b.createElement("canvas");return!!a.getContext&&!!a.getContext("2d")},s.canvastext=function(){return!!e.canvas&&!!E(b.createElement("canvas").getContext("2d").fillText,"function")},s.webgl=function(){return!!a.WebGLRenderingContext},s.touch=function(){var c;return"ontouchstart"in a||a.DocumentTouch&&b instanceof DocumentTouch?c=!0:y(["@media (",n.join("touch-enabled),("),h,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(a){c=a.offsetTop===9}),c},s.geolocation=function(){return"geolocation"in navigator},s.postmessage=function(){return!!a.postMessage},s.websqldatabase=function(){return!!a.openDatabase},s.indexedDB=function(){return!!I("indexedDB",a)},s.hashchange=function(){return z("hashchange",a)&&(b.documentMode===c||b.documentMode>7)},s.history=function(){return!!a.history&&!!history.pushState},s.draganddrop=function(){var a=b.createElement("div");return"draggable"in a||"ondragstart"in a&&"ondrop"in a},s.websockets=function(){return"WebSocket"in a||"MozWebSocket"in a},s.rgba=function(){return C("background-color:rgba(150,255,150,.5)"),F(j.backgroundColor,"rgba")},s.hsla=function(){return C("background-color:hsla(120,40%,100%,.5)"),F(j.backgroundColor,"rgba")||F(j.backgroundColor,"hsla")},s.multiplebgs=function(){return C("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(j.background)},s.backgroundsize=function(){return I("backgroundSize")},s.borderimage=function(){return I("borderImage")},s.borderradius=function(){return I("borderRadius")},s.boxshadow=function(){return I("boxShadow")},s.textshadow=function(){return b.createElement("div").style.textShadow===""},s.opacity=function(){return D("opacity:.55"),/^0.55$/.test(j.opacity)},s.cssanimations=function(){return I("animationName")},s.csscolumns=function(){return I("columnCount")},s.cssgradients=function(){var a="background-image:",b="gradient(linear,left top,right bottom,from(#9f9),to(white));",c="linear-gradient(left top,#9f9, white);";return C((a+"-webkit- ".split(" ").join(b+a)+n.join(c+a)).slice(0,-a.length)),F(j.backgroundImage,"gradient")},s.cssreflections=function(){return I("boxReflect")},s.csstransforms=function(){return!!I("transform")},s.csstransforms3d=function(){var a=!!I("perspective");return a&&"webkitPerspective"in g.style&&y("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(b,c){a=b.offsetLeft===9&&b.offsetHeight===3}),a},s.csstransitions=function(){return I("transition")},s.fontface=function(){var a;return y('@font-face {font-family:"font";src:url("https://")}',function(c,d){var e=b.getElementById("smodernizr"),f=e.sheet||e.styleSheet,g=f?f.cssRules&&f.cssRules[0]?f.cssRules[0].cssText:f.cssText||"":"";a=/src/i.test(g)&&g.indexOf(d.split(" ")[0])===0}),a},s.generatedcontent=function(){var a;return y(["#",h,"{font:0/0 a}#",h,':after{content:"',l,'";visibility:hidden;font:3px/1 a}'].join(""),function(b){a=b.offsetHeight>=3}),a},s.video=function(){var a=b.createElement("video"),c=!1;try{if(c=!!a.canPlayType)c=new Boolean(c),c.ogg=a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),c.h264=a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),c.webm=a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,"")}catch(d){}return c},s.audio=function(){var a=b.createElement("audio"),c=!1;try{if(c=!!a.canPlayType)c=new Boolean(c),c.ogg=a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),c.mp3=a.canPlayType("audio/mpeg;").replace(/^no$/,""),c.wav=a.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),c.m4a=(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,"")}catch(d){}return c},s.localstorage=function(){try{return localStorage.setItem(h,h),localStorage.removeItem(h),!0}catch(a){return!1}},s.sessionstorage=function(){try{return sessionStorage.setItem(h,h),sessionStorage.removeItem(h),!0}catch(a){return!1}},s.webworkers=function(){return!!a.Worker},s.applicationcache=function(){return!!a.applicationCache},s.svg=function(){return!!b.createElementNS&&!!b.createElementNS(r.svg,"svg").createSVGRect},s.inlinesvg=function(){var a=b.createElement("div");return a.innerHTML="<svg/>",(a.firstChild&&a.firstChild.namespaceURI)==r.svg},s.smil=function(){return!!b.createElementNS&&/SVGAnimate/.test(m.call(b.createElementNS(r.svg,"animate")))},s.svgclippaths=function(){return!!b.createElementNS&&/SVGClipPath/.test(m.call(b.createElementNS(r.svg,"clipPath")))};for(var K in s)B(s,K)&&(x=K.toLowerCase(),e[x]=s[K](),v.push((e[x]?"":"no-")+x));return e.input||J(),e.addTest=function(a,b){if(typeof a=="object")for(var d in a)B(a,d)&&e.addTest(d,a[d]);else{a=a.toLowerCase();if(e[a]!==c)return e;b=typeof b=="function"?b():b,typeof f!="undefined"&&f&&(g.className+=" "+(b?"":"no-")+a),e[a]=b}return e},C(""),i=k=null,function(a,b){function k(a,b){var c=a.createElement("p"),d=a.getElementsByTagName("head")[0]||a.documentElement;return c.innerHTML="x<style>"+b+"</style>",d.insertBefore(c.lastChild,d.firstChild)}function l(){var a=r.elements;return typeof a=="string"?a.split(" "):a}function m(a){var b=i[a[g]];return b||(b={},h++,a[g]=h,i[h]=b),b}function n(a,c,f){c||(c=b);if(j)return c.createElement(a);f||(f=m(c));var g;return f.cache[a]?g=f.cache[a].cloneNode():e.test(a)?g=(f.cache[a]=f.createElem(a)).cloneNode():g=f.createElem(a),g.canHaveChildren&&!d.test(a)?f.frag.appendChild(g):g}function o(a,c){a||(a=b);if(j)return a.createDocumentFragment();c=c||m(a);var d=c.frag.cloneNode(),e=0,f=l(),g=f.length;for(;e<g;e++)d.createElement(f[e]);return d}function p(a,b){b.cache||(b.cache={},b.createElem=a.createElement,b.createFrag=a.createDocumentFragment,b.frag=b.createFrag()),a.createElement=function(c){return r.shivMethods?n(c,a,b):b.createElem(c)},a.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+l().join().replace(/\w+/g,function(a){return b.createElem(a),b.frag.createElement(a),'c("'+a+'")'})+");return n}")(r,b.frag)}function q(a){a||(a=b);var c=m(a);return r.shivCSS&&!f&&!c.hasCSS&&(c.hasCSS=!!k(a,"article,aside,figcaption,figure,footer,header,hgroup,nav,section{display:block}mark{background:#FF0;color:#000}")),j||p(a,c),a}var c=a.html5||{},d=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,e=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,f,g="_html5shiv",h=0,i={},j;(function(){try{var a=b.createElement("a");a.innerHTML="<xyz></xyz>",f="hidden"in a,j=a.childNodes.length==1||function(){b.createElement("a");var a=b.createDocumentFragment();return typeof a.cloneNode=="undefined"||typeof a.createDocumentFragment=="undefined"||typeof a.createElement=="undefined"}()}catch(c){f=!0,j=!0}})();var r={elements:c.elements||"abbr article aside audio bdi canvas data datalist details figcaption figure footer header hgroup mark meter nav output progress section summary time video",shivCSS:c.shivCSS!==!1,supportsUnknownElements:j,shivMethods:c.shivMethods!==!1,type:"default",shivDocument:q,createElement:n,createDocumentFragment:o};a.html5=r,q(b)}(this,b),e._version=d,e._prefixes=n,e._domPrefixes=q,e._cssomPrefixes=p,e.hasEvent=z,e.testProp=function(a){return G([a])},e.testAllProps=I,e.testStyles=y,g.className=g.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(f?" js "+v.join(" "):""),e}(this,this.document),function(a,b,c){function d(a){return"[object Function]"==o.call(a)}function e(a){return"string"==typeof a}function f(){}function g(a){return!a||"loaded"==a||"complete"==a||"uninitialized"==a}function h(){var a=p.shift();q=1,a?a.t?m(function(){("c"==a.t?B.injectCss:B.injectJs)(a.s,0,a.a,a.x,a.e,1)},0):(a(),h()):q=0}function i(a,c,d,e,f,i,j){function k(b){if(!o&&g(l.readyState)&&(u.r=o=1,!q&&h(),l.onload=l.onreadystatechange=null,b)){"img"!=a&&m(function(){t.removeChild(l)},50);for(var d in y[c])y[c].hasOwnProperty(d)&&y[c][d].onload()}}var j=j||B.errorTimeout,l=b.createElement(a),o=0,r=0,u={t:d,s:c,e:f,a:i,x:j};1===y[c]&&(r=1,y[c]=[]),"object"==a?l.data=c:(l.src=c,l.type=a),l.width=l.height="0",l.onerror=l.onload=l.onreadystatechange=function(){k.call(this,r)},p.splice(e,0,u),"img"!=a&&(r||2===y[c]?(t.insertBefore(l,s?null:n),m(k,j)):y[c].push(l))}function j(a,b,c,d,f){return q=0,b=b||"j",e(a)?i("c"==b?v:u,a,b,this.i++,c,d,f):(p.splice(this.i++,0,a),1==p.length&&h()),this}function k(){var a=B;return a.loader={load:j,i:0},a}var l=b.documentElement,m=a.setTimeout,n=b.getElementsByTagName("script")[0],o={}.toString,p=[],q=0,r="MozAppearance"in l.style,s=r&&!!b.createRange().compareNode,t=s?l:n.parentNode,l=a.opera&&"[object Opera]"==o.call(a.opera),l=!!b.attachEvent&&!l,u=r?"object":l?"script":"img",v=l?"script":u,w=Array.isArray||function(a){return"[object Array]"==o.call(a)},x=[],y={},z={timeout:function(a,b){return b.length&&(a.timeout=b[0]),a}},A,B;B=function(a){function b(a){var a=a.split("!"),b=x.length,c=a.pop(),d=a.length,c={url:c,origUrl:c,prefixes:a},e,f,g;for(f=0;f<d;f++)g=a[f].split("="),(e=z[g.shift()])&&(c=e(c,g));for(f=0;f<b;f++)c=x[f](c);return c}function g(a,e,f,g,h){var i=b(a),j=i.autoCallback;i.url.split(".").pop().split("?").shift(),i.bypass||(e&&(e=d(e)?e:e[a]||e[g]||e[a.split("/").pop().split("?")[0]]),i.instead?i.instead(a,e,f,g,h):(y[i.url]?i.noexec=!0:y[i.url]=1,f.load(i.url,i.forceCSS||!i.forceJS&&"css"==i.url.split(".").pop().split("?").shift()?"c":c,i.noexec,i.attrs,i.timeout),(d(e)||d(j))&&f.load(function(){k(),e&&e(i.origUrl,h,g),j&&j(i.origUrl,h,g),y[i.url]=2})))}function h(a,b){function c(a,c){if(a){if(e(a))c||(j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}),g(a,j,b,0,h);else if(Object(a)===a)for(n in m=function(){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b}(),a)a.hasOwnProperty(n)&&(!c&&!--m&&(d(j)?j=function(){var a=[].slice.call(arguments);k.apply(this,a),l()}:j[n]=function(a){return function(){var b=[].slice.call(arguments);a&&a.apply(this,b),l()}}(k[n])),g(a[n],j,b,n,h))}else!c&&l()}var h=!!a.test,i=a.load||a.both,j=a.callback||f,k=j,l=a.complete||f,m,n;c(h?a.yep:a.nope,!!i),i&&c(i)}var i,j,l=this.yepnope.loader;if(e(a))g(a,0,l,0);else if(w(a))for(i=0;i<a.length;i++)j=a[i],e(j)?g(j,0,l,0):w(j)?B(j):Object(j)===j&&h(j,l);else Object(a)===a&&h(a,l)},B.addPrefix=function(a,b){z[a]=b},B.addFilter=function(a){x.push(a)},B.errorTimeout=1e4,null==b.readyState&&b.addEventListener&&(b.readyState="loading",b.addEventListener("DOMContentLoaded",A=function(){b.removeEventListener("DOMContentLoaded",A,0),b.readyState="complete"},0)),a.yepnope=k(),a.yepnope.executeStack=h,a.yepnope.injectJs=function(a,c,d,e,i,j){var k=b.createElement("script"),l,o,e=e||B.errorTimeout;k.src=a;for(o in d)k.setAttribute(o,d[o]);c=j?h:c||f,k.onreadystatechange=k.onload=function(){!l&&g(k.readyState)&&(l=1,c(),k.onload=k.onreadystatechange=null)},m(function(){l||(l=1,c(1))},e),i?k.onload():n.parentNode.insertBefore(k,n)},a.yepnope.injectCss=function(a,c,d,e,g,i){var e=b.createElement("link"),j,c=i?h:c||f;e.href=a,e.rel="stylesheet",e.type="text/css";for(j in d)e.setAttribute(j,d[j]);g||(n.parentNode.insertBefore(e,n),m(c,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};
/*! jQuery Migrate v3.3.2 | (c) OpenJS Foundation and other contributors | jquery.org/license */
"undefined"==typeof jQuery.migrateMute&&(jQuery.migrateMute=!0),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],function(e){return t(e,window)}):"object"==typeof module&&module.exports?module.exports=t(require("jquery"),window):t(jQuery,window)}(function(s,n){"use strict";function e(e){return 0<=function(e,t){for(var r=/^(\d+)\.(\d+)\.(\d+)/,n=r.exec(e)||[],o=r.exec(t)||[],i=1;i<=3;i++){if(+o[i]<+n[i])return 1;if(+n[i]<+o[i])return-1}return 0}(s.fn.jquery,e)}s.migrateVersion="3.3.2",n.console&&n.console.log&&(s&&e("3.0.0")||n.console.log("JQMIGRATE: jQuery 3.0.0+ REQUIRED"),s.migrateWarnings&&n.console.log("JQMIGRATE: Migrate plugin loaded multiple times"),n.console.log("JQMIGRATE: Migrate is installed"+(s.migrateMute?"":" with logging active")+", version "+s.migrateVersion));var r={};function u(e){var t=n.console;s.migrateDeduplicateWarnings&&r[e]||(r[e]=!0,s.migrateWarnings.push(e),t&&t.warn&&!s.migrateMute&&(t.warn("JQMIGRATE: "+e),s.migrateTrace&&t.trace&&t.trace()))}function t(e,t,r,n){Object.defineProperty(e,t,{configurable:!0,enumerable:!0,get:function(){return u(n),r},set:function(e){u(n),r=e}})}function o(e,t,r,n){e[t]=function(){return u(n),r.apply(this,arguments)}}s.migrateDeduplicateWarnings=!0,s.migrateWarnings=[],void 0===s.migrateTrace&&(s.migrateTrace=!0),s.migrateReset=function(){r={},s.migrateWarnings.length=0},"BackCompat"===n.document.compatMode&&u("jQuery is not compatible with Quirks Mode");var i,a,c,d={},l=s.fn.init,p=s.find,f=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/,y=/\[(\s*[-\w]+\s*)([~|^$*]?=)\s*([-\w#]*?#[-\w#]*)\s*\]/g,m=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;for(i in s.fn.init=function(e){var t=Array.prototype.slice.call(arguments);return"string"==typeof e&&"#"===e&&(u("jQuery( '#' ) is not a valid selector"),t[0]=[]),l.apply(this,t)},s.fn.init.prototype=s.fn,s.find=function(t){var r=Array.prototype.slice.call(arguments);if("string"==typeof t&&f.test(t))try{n.document.querySelector(t)}catch(e){t=t.replace(y,function(e,t,r,n){return"["+t+r+'"'+n+'"]'});try{n.document.querySelector(t),u("Attribute selector with '#' must be quoted: "+r[0]),r[0]=t}catch(e){u("Attribute selector with '#' was not fixed: "+r[0])}}return p.apply(this,r)},p)Object.prototype.hasOwnProperty.call(p,i)&&(s.find[i]=p[i]);o(s.fn,"size",function(){return this.length},"jQuery.fn.size() is deprecated and removed; use the .length property"),o(s,"parseJSON",function(){return JSON.parse.apply(null,arguments)},"jQuery.parseJSON is deprecated; use JSON.parse"),o(s,"holdReady",s.holdReady,"jQuery.holdReady is deprecated"),o(s,"unique",s.uniqueSort,"jQuery.unique is deprecated; use jQuery.uniqueSort"),t(s.expr,"filters",s.expr.pseudos,"jQuery.expr.filters is deprecated; use jQuery.expr.pseudos"),t(s.expr,":",s.expr.pseudos,"jQuery.expr[':'] is deprecated; use jQuery.expr.pseudos"),e("3.1.1")&&o(s,"trim",function(e){return null==e?"":(e+"").replace(m,"")},"jQuery.trim is deprecated; use String.prototype.trim"),e("3.2.0")&&(o(s,"nodeName",function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},"jQuery.nodeName is deprecated"),o(s,"isArray",Array.isArray,"jQuery.isArray is deprecated; use Array.isArray")),e("3.3.0")&&(o(s,"isNumeric",function(e){var t=typeof e;return("number"==t||"string"==t)&&!isNaN(e-parseFloat(e))},"jQuery.isNumeric() is deprecated"),s.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){d["[object "+t+"]"]=t.toLowerCase()}),o(s,"type",function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?d[Object.prototype.toString.call(e)]||"object":typeof e},"jQuery.type is deprecated"),o(s,"isFunction",function(e){return"function"==typeof e},"jQuery.isFunction() is deprecated"),o(s,"isWindow",function(e){return null!=e&&e===e.window},"jQuery.isWindow() is deprecated")),s.ajax&&(a=s.ajax,c=/(=)\?(?=&|$)|\?\?/,s.ajax=function(){var e=a.apply(this,arguments);return e.promise&&(o(e,"success",e.done,"jQXHR.success is deprecated and removed"),o(e,"error",e.fail,"jQXHR.error is deprecated and removed"),o(e,"complete",e.always,"jQXHR.complete is deprecated and removed")),e},e("4.0.0")||s.ajaxPrefilter("+json",function(e){!1!==e.jsonp&&(c.test(e.url)||"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&c.test(e.data))&&u("JSON-to-JSONP auto-promotion is deprecated")}));var g=s.fn.removeAttr,h=s.fn.toggleClass,v=/\S+/g;function j(e){return e.replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})}s.fn.removeAttr=function(e){var r=this;return s.each(e.match(v),function(e,t){s.expr.match.bool.test(t)&&(u("jQuery.fn.removeAttr no longer sets boolean properties: "+t),r.prop(t,!1))}),g.apply(this,arguments)};var Q,b=!(s.fn.toggleClass=function(t){return void 0!==t&&"boolean"!=typeof t?h.apply(this,arguments):(u("jQuery.fn.toggleClass( boolean ) is deprecated"),this.each(function(){var e=this.getAttribute&&this.getAttribute("class")||"";e&&s.data(this,"__className__",e),this.setAttribute&&this.setAttribute("class",!e&&!1!==t&&s.data(this,"__className__")||"")}))}),w=/^[a-z]/,x=/^(?:Border(?:Top|Right|Bottom|Left)?(?:Width|)|(?:Margin|Padding)?(?:Top|Right|Bottom|Left)?|(?:Min|Max)?(?:Width|Height))$/;s.swap&&s.each(["height","width","reliableMarginRight"],function(e,t){var r=s.cssHooks[t]&&s.cssHooks[t].get;r&&(s.cssHooks[t].get=function(){var e;return b=!0,e=r.apply(this,arguments),b=!1,e})}),s.swap=function(e,t,r,n){var o,i,a={};for(i in b||u("jQuery.swap() is undocumented and deprecated"),t)a[i]=e.style[i],e.style[i]=t[i];for(i in o=r.apply(e,n||[]),t)e.style[i]=a[i];return o},e("3.4.0")&&"undefined"!=typeof Proxy&&(s.cssProps=new Proxy(s.cssProps||{},{set:function(){return u("JQMIGRATE: jQuery.cssProps is deprecated"),Reflect.set.apply(this,arguments)}})),s.cssNumber||(s.cssNumber={}),Q=s.fn.css,s.fn.css=function(e,t){var r,n,o=this;return e&&"object"==typeof e&&!Array.isArray(e)?(s.each(e,function(e,t){s.fn.css.call(o,e,t)}),this):("number"==typeof t&&(r=j(e),n=r,w.test(n)&&x.test(n[0].toUpperCase()+n.slice(1))||s.cssNumber[r]||u('Number-typed values are deprecated for jQuery.fn.css( "'+e+'", value )')),Q.apply(this,arguments))};var A,k,S,M,N=s.data;s.data=function(e,t,r){var n,o,i;if(t&&"object"==typeof t&&2===arguments.length){for(i in n=s.hasData(e)&&N.call(this,e),o={},t)i!==j(i)?(u("jQuery.data() always sets/gets camelCased names: "+i),n[i]=t[i]):o[i]=t[i];return N.call(this,e,o),t}return t&&"string"==typeof t&&t!==j(t)&&(n=s.hasData(e)&&N.call(this,e))&&t in n?(u("jQuery.data() always sets/gets camelCased names: "+t),2<arguments.length&&(n[t]=r),n[t]):N.apply(this,arguments)},s.fx&&(S=s.Tween.prototype.run,M=function(e){return e},s.Tween.prototype.run=function(){1<s.easing[this.easing].length&&(u("'jQuery.easing."+this.easing.toString()+"' should use only one argument"),s.easing[this.easing]=M),S.apply(this,arguments)},A=s.fx.interval||13,k="jQuery.fx.interval is deprecated",n.requestAnimationFrame&&Object.defineProperty(s.fx,"interval",{configurable:!0,enumerable:!0,get:function(){return n.document.hidden||u(k),A},set:function(e){u(k),A=e}}));var R=s.fn.load,H=s.event.add,C=s.event.fix;s.event.props=[],s.event.fixHooks={},t(s.event.props,"concat",s.event.props.concat,"jQuery.event.props.concat() is deprecated and removed"),s.event.fix=function(e){var t,r=e.type,n=this.fixHooks[r],o=s.event.props;if(o.length){u("jQuery.event.props are deprecated and removed: "+o.join());while(o.length)s.event.addProp(o.pop())}if(n&&!n._migrated_&&(n._migrated_=!0,u("jQuery.event.fixHooks are deprecated and removed: "+r),(o=n.props)&&o.length))while(o.length)s.event.addProp(o.pop());return t=C.call(this,e),n&&n.filter?n.filter(t,e):t},s.event.add=function(e,t){return e===n&&"load"===t&&"complete"===n.document.readyState&&u("jQuery(window).on('load'...) called after load event occurred"),H.apply(this,arguments)},s.each(["load","unload","error"],function(e,t){s.fn[t]=function(){var e=Array.prototype.slice.call(arguments,0);return"load"===t&&"string"==typeof e[0]?R.apply(this,e):(u("jQuery.fn."+t+"() is deprecated"),e.splice(0,0,t),arguments.length?this.on.apply(this,e):(this.triggerHandler.apply(this,e),this))}}),s.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(e,r){s.fn[r]=function(e,t){return u("jQuery.fn."+r+"() event shorthand is deprecated"),0<arguments.length?this.on(r,null,e,t):this.trigger(r)}}),s(function(){s(n.document).triggerHandler("ready")}),s.event.special.ready={setup:function(){this===n.document&&u("'ready' event is deprecated")}},s.fn.extend({bind:function(e,t,r){return u("jQuery.fn.bind() is deprecated"),this.on(e,null,t,r)},unbind:function(e,t){return u("jQuery.fn.unbind() is deprecated"),this.off(e,null,t)},delegate:function(e,t,r,n){return u("jQuery.fn.delegate() is deprecated"),this.on(t,e,r,n)},undelegate:function(e,t,r){return u("jQuery.fn.undelegate() is deprecated"),1===arguments.length?this.off(e,"**"):this.off(t,e||"**",r)},hover:function(e,t){return u("jQuery.fn.hover() is deprecated"),this.on("mouseenter",e).on("mouseleave",t||e)}});function T(e){var t=n.document.implementation.createHTMLDocument("");return t.body.innerHTML=e,t.body&&t.body.innerHTML}function P(e){var t=e.replace(O,"<$1></$2>");t!==e&&T(e)!==T(t)&&u("HTML tags must be properly nested and closed: "+e)}var O=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,q=s.htmlPrefilter;s.UNSAFE_restoreLegacyHtmlPrefilter=function(){s.htmlPrefilter=function(e){return P(e),e.replace(O,"<$1></$2>")}},s.htmlPrefilter=function(e){return P(e),q(e)};var D,_=s.fn.offset;s.fn.offset=function(){var e=this[0];return!e||e.nodeType&&e.getBoundingClientRect?_.apply(this,arguments):(u("jQuery.fn.offset() requires a valid DOM element"),arguments.length?this:void 0)},s.ajax&&(D=s.param,s.param=function(e,t){var r=s.ajaxSettings&&s.ajaxSettings.traditional;return void 0===t&&r&&(u("jQuery.param() no longer uses jQuery.ajaxSettings.traditional"),t=r),D.call(this,e,t)});var E,F,J=s.fn.andSelf||s.fn.addBack;return s.fn.andSelf=function(){return u("jQuery.fn.andSelf() is deprecated and removed, use jQuery.fn.addBack()"),J.apply(this,arguments)},s.Deferred&&(E=s.Deferred,F=[["resolve","done",s.Callbacks("once memory"),s.Callbacks("once memory"),"resolved"],["reject","fail",s.Callbacks("once memory"),s.Callbacks("once memory"),"rejected"],["notify","progress",s.Callbacks("memory"),s.Callbacks("memory")]],s.Deferred=function(e){var i=E(),a=i.promise();return i.pipe=a.pipe=function(){var o=arguments;return u("deferred.pipe() is deprecated"),s.Deferred(function(n){s.each(F,function(e,t){var r="function"==typeof o[e]&&o[e];i[t[1]](function(){var e=r&&r.apply(this,arguments);e&&"function"==typeof e.promise?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[t[0]+"With"](this===a?n.promise():this,r?[e]:arguments)})}),o=null}).promise()},e&&e.call(i,i),i},s.Deferred.exceptionHook=E.exceptionHook),s});
(function(){function aa(a,b,c){return a.call.apply(a.bind,arguments)}function ba(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}function p(a,b,c){p=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?aa:ba;return p.apply(null,arguments)}var q=Date.now||function(){return+new Date};function ca(a,b){this.a=a;this.m=b||a;this.c=this.m.document}var da=!!window.FontFace;function t(a,b,c,d){b=a.c.createElement(b);if(c)for(var e in c)c.hasOwnProperty(e)&&("style"==e?b.style.cssText=c[e]:b.setAttribute(e,c[e]));d&&b.appendChild(a.c.createTextNode(d));return b}function u(a,b,c){a=a.c.getElementsByTagName(b)[0];a||(a=document.documentElement);a.insertBefore(c,a.lastChild)}function v(a){a.parentNode&&a.parentNode.removeChild(a)}
function w(a,b,c){b=b||[];c=c||[];for(var d=a.className.split(/\s+/),e=0;e<b.length;e+=1){for(var f=!1,g=0;g<d.length;g+=1)if(b[e]===d[g]){f=!0;break}f||d.push(b[e])}b=[];for(e=0;e<d.length;e+=1){f=!1;for(g=0;g<c.length;g+=1)if(d[e]===c[g]){f=!0;break}f||b.push(d[e])}a.className=b.join(" ").replace(/\s+/g," ").replace(/^\s+|\s+$/,"")}function y(a,b){for(var c=a.className.split(/\s+/),d=0,e=c.length;d<e;d++)if(c[d]==b)return!0;return!1}
function z(a){if("string"===typeof a.f)return a.f;var b=a.m.location.protocol;"about:"==b&&(b=a.a.location.protocol);return"https:"==b?"https:":"http:"}function ea(a){return a.m.location.hostname||a.a.location.hostname}
function A(a,b,c){function d(){k&&e&&f&&(k(g),k=null)}b=t(a,"link",{rel:"stylesheet",href:b,media:"all"});var e=!1,f=!0,g=null,k=c||null;da?(b.onload=function(){e=!0;d()},b.onerror=function(){e=!0;g=Error("Stylesheet failed to load");d()}):setTimeout(function(){e=!0;d()},0);u(a,"head",b)}
function B(a,b,c,d){var e=a.c.getElementsByTagName("head")[0];if(e){var f=t(a,"script",{src:b}),g=!1;f.onload=f.onreadystatechange=function(){g||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(g=!0,c&&c(null),f.onload=f.onreadystatechange=null,"HEAD"==f.parentNode.tagName&&e.removeChild(f))};e.appendChild(f);setTimeout(function(){g||(g=!0,c&&c(Error("Script load timeout")))},d||5E3);return f}return null};function C(){this.a=0;this.c=null}function D(a){a.a++;return function(){a.a--;E(a)}}function F(a,b){a.c=b;E(a)}function E(a){0==a.a&&a.c&&(a.c(),a.c=null)};function G(a){this.a=a||"-"}G.prototype.c=function(a){for(var b=[],c=0;c<arguments.length;c++)b.push(arguments[c].replace(/[\W_]+/g,"").toLowerCase());return b.join(this.a)};function H(a,b){this.c=a;this.f=4;this.a="n";var c=(b||"n4").match(/^([nio])([1-9])$/i);c&&(this.a=c[1],this.f=parseInt(c[2],10))}function fa(a){return I(a)+" "+(a.f+"00")+" 300px "+J(a.c)}function J(a){var b=[];a=a.split(/,\s*/);for(var c=0;c<a.length;c++){var d=a[c].replace(/['"]/g,"");-1!=d.indexOf(" ")||/^\d/.test(d)?b.push("'"+d+"'"):b.push(d)}return b.join(",")}function K(a){return a.a+a.f}function I(a){var b="normal";"o"===a.a?b="oblique":"i"===a.a&&(b="italic");return b}
function ga(a){var b=4,c="n",d=null;a&&((d=a.match(/(normal|oblique|italic)/i))&&d[1]&&(c=d[1].substr(0,1).toLowerCase()),(d=a.match(/([1-9]00|normal|bold)/i))&&d[1]&&(/bold/i.test(d[1])?b=7:/[1-9]00/.test(d[1])&&(b=parseInt(d[1].substr(0,1),10))));return c+b};function ha(a,b){this.c=a;this.f=a.m.document.documentElement;this.h=b;this.a=new G("-");this.j=!1!==b.events;this.g=!1!==b.classes}function ia(a){a.g&&w(a.f,[a.a.c("wf","loading")]);L(a,"loading")}function M(a){if(a.g){var b=y(a.f,a.a.c("wf","active")),c=[],d=[a.a.c("wf","loading")];b||c.push(a.a.c("wf","inactive"));w(a.f,c,d)}L(a,"inactive")}function L(a,b,c){if(a.j&&a.h[b])if(c)a.h[b](c.c,K(c));else a.h[b]()};function ja(){this.c={}}function ka(a,b,c){var d=[],e;for(e in b)if(b.hasOwnProperty(e)){var f=a.c[e];f&&d.push(f(b[e],c))}return d};function N(a,b){this.c=a;this.f=b;this.a=t(this.c,"span",{"aria-hidden":"true"},this.f)}function O(a){u(a.c,"body",a.a)}function P(a){return"display:block;position:absolute;top:-9999px;left:-9999px;font-size:300px;width:auto;height:auto;line-height:normal;margin:0;padding:0;font-variant:normal;white-space:nowrap;font-family:"+J(a.c)+";"+("font-style:"+I(a)+";font-weight:"+(a.f+"00")+";")};function Q(a,b,c,d,e,f){this.g=a;this.j=b;this.a=d;this.c=c;this.f=e||3E3;this.h=f||void 0}Q.prototype.start=function(){var a=this.c.m.document,b=this,c=q(),d=new Promise(function(d,e){function k(){q()-c>=b.f?e():a.fonts.load(fa(b.a),b.h).then(function(a){1<=a.length?d():setTimeout(k,25)},function(){e()})}k()}),e=new Promise(function(a,d){setTimeout(d,b.f)});Promise.race([e,d]).then(function(){b.g(b.a)},function(){b.j(b.a)})};function R(a,b,c,d,e,f,g){this.v=a;this.B=b;this.c=c;this.a=d;this.s=g||"BESbswy";this.f={};this.w=e||3E3;this.u=f||null;this.o=this.j=this.h=this.g=null;this.g=new N(this.c,this.s);this.h=new N(this.c,this.s);this.j=new N(this.c,this.s);this.o=new N(this.c,this.s);a=new H(this.a.c+",serif",K(this.a));a=P(a);this.g.a.style.cssText=a;a=new H(this.a.c+",sans-serif",K(this.a));a=P(a);this.h.a.style.cssText=a;a=new H("serif",K(this.a));a=P(a);this.j.a.style.cssText=a;a=new H("sans-serif",K(this.a));a=P(a);this.o.a.style.cssText=a;O(this.g);O(this.h);O(this.j);O(this.o)}var S={D:"serif",C:"sans-serif"},T=null;function U(){if(null===T){var a=/AppleWebKit\/([0-9]+)(?:\.([0-9]+))/.exec(window.navigator.userAgent);T=!!a&&(536>parseInt(a[1],10)||536===parseInt(a[1],10)&&11>=parseInt(a[2],10))}return T}R.prototype.start=function(){this.f.serif=this.j.a.offsetWidth;this.f["sans-serif"]=this.o.a.offsetWidth;this.A=q();la(this)};function ma(a,b,c){for(var d in S)if(S.hasOwnProperty(d)&&b===a.f[S[d]]&&c===a.f[S[d]])return!0;return!1}function la(a){var b=a.g.a.offsetWidth,c=a.h.a.offsetWidth,d;(d=b===a.f.serif&&c===a.f["sans-serif"])||(d=U()&&ma(a,b,c));d?q()-a.A>=a.w?U()&&ma(a,b,c)&&(null===a.u||a.u.hasOwnProperty(a.a.c))?V(a,a.v):V(a,a.B):na(a):V(a,a.v)}function na(a){setTimeout(p(function(){la(this)},a),50)}function V(a,b){setTimeout(p(function(){v(this.g.a);v(this.h.a);v(this.j.a);v(this.o.a);b(this.a)},a),0)};function W(a,b,c){this.c=a;this.a=b;this.f=0;this.o=this.j=!1;this.s=c}var X=null;W.prototype.g=function(a){var b=this.a;b.g&&w(b.f,[b.a.c("wf",a.c,K(a).toString(),"active")],[b.a.c("wf",a.c,K(a).toString(),"loading"),b.a.c("wf",a.c,K(a).toString(),"inactive")]);L(b,"fontactive",a);this.o=!0;oa(this)};W.prototype.h=function(a){var b=this.a;if(b.g){var c=y(b.f,b.a.c("wf",a.c,K(a).toString(),"active")),d=[],e=[b.a.c("wf",a.c,K(a).toString(),"loading")];c||d.push(b.a.c("wf",a.c,K(a).toString(),"inactive"));w(b.f,d,e)}L(b,"fontinactive",a);oa(this)};function oa(a){0==--a.f&&a.j&&(a.o?(a=a.a,a.g&&w(a.f,[a.a.c("wf","active")],[a.a.c("wf","loading"),a.a.c("wf","inactive")]),L(a,"active")):M(a.a))};function pa(a){this.j=a;this.a=new ja;this.h=0;this.f=this.g=!0}pa.prototype.load=function(a){this.c=new ca(this.j,a.context||this.j);this.g=!1!==a.events;this.f=!1!==a.classes;qa(this,new ha(this.c,a),a)};function ra(a,b,c,d,e){var f=0==--a.h;(a.f||a.g)&&setTimeout(function(){var a=e||null,k=d||null||{};if(0===c.length&&f)M(b.a);else{b.f+=c.length;f&&(b.j=f);var h,m=[];for(h=0;h<c.length;h++){var l=c[h],n=k[l.c],r=b.a,x=l;r.g&&w(r.f,[r.a.c("wf",x.c,K(x).toString(),"loading")]);L(r,"fontloading",x);r=null;null===X&&(X=window.FontFace?(x=/Gecko.*Firefox\/(\d+)/.exec(window.navigator.userAgent))?42<parseInt(x[1],10):!0:!1);X?r=new Q(p(b.g,b),p(b.h,b),b.c,l,b.s,n):r=new R(p(b.g,b),p(b.h,b),b.c,l,b.s,a,n);m.push(r)}for(h=0;h<m.length;h++)m[h].start()}},0)}function qa(a,b,c){var d=[],e=c.timeout;ia(b);var d=ka(a.a,c,a.c),f=new W(a.c,b,e);a.h=d.length;b=0;for(c=d.length;b<c;b++)d[b].load(function(b,d,c){ra(a,f,b,d,c)})};function sa(a,b){this.c=a;this.a=b}function ta(a,b,c){var d=z(a.c);a=(a.a.api||"fast.fonts.net/jsapi").replace(/^.*http(s?):(\/\/)?/,"");return d+"//"+a+"/"+b+".js"+(c?"?v="+c:"")}
sa.prototype.load=function(a){function b(){if(f["__mti_fntLst"+d]){var c=f["__mti_fntLst"+d](),e=[],h;if(c)for(var m=0;m<c.length;m++){var l=c[m].fontfamily;void 0!=c[m].fontStyle&&void 0!=c[m].fontWeight?(h=c[m].fontStyle+c[m].fontWeight,e.push(new H(l,h))):e.push(new H(l))}a(e)}else setTimeout(function(){b()},50)}var c=this,d=c.a.projectId,e=c.a.version;if(d){var f=c.c.m;B(this.c,ta(c,d,e),function(e){e?a([]):(f["__MonotypeConfiguration__"+d]=function(){return c.a},b())}).id="__MonotypeAPIScript__"+
d}else a([])};function ua(a,b){this.c=a;this.a=b}ua.prototype.load=function(a){var b,c,d=this.a.urls||[],e=this.a.families||[],f=this.a.testStrings||{},g=new C;b=0;for(c=d.length;b<c;b++)A(this.c,d[b],D(g));var k=[];b=0;for(c=e.length;b<c;b++)if(d=e[b].split(":"),d[1])for(var h=d[1].split(","),m=0;m<h.length;m+=1)k.push(new H(d[0],h[m]));else k.push(new H(d[0]));F(g,function(){a(k,f)})};function va(a,b,c){a?this.c=a:this.c=b+wa;this.a=[];this.f=[];this.g=c||""}var wa="//fonts.googleapis.com/css";function xa(a,b){for(var c=b.length,d=0;d<c;d++){var e=b[d].split(":");3==e.length&&a.f.push(e.pop());var f="";2==e.length&&""!=e[1]&&(f=":");a.a.push(e.join(f))}}
function ya(a){if(0==a.a.length)throw Error("No fonts to load!");if(-1!=a.c.indexOf("kit="))return a.c;for(var b=a.a.length,c=[],d=0;d<b;d++)c.push(a.a[d].replace(/ /g,"+"));b=a.c+"?family="+c.join("%7C");0<a.f.length&&(b+="&subset="+a.f.join(","));0<a.g.length&&(b+="&text="+encodeURIComponent(a.g));return b};function za(a){this.f=a;this.a=[];this.c={}}
var Aa={latin:"BESbswy","latin-ext":"\u00e7\u00f6\u00fc\u011f\u015f",cyrillic:"\u0439\u044f\u0416",greek:"\u03b1\u03b2\u03a3",khmer:"\u1780\u1781\u1782",Hanuman:"\u1780\u1781\u1782"},Ba={thin:"1",extralight:"2","extra-light":"2",ultralight:"2","ultra-light":"2",light:"3",regular:"4",book:"4",medium:"5","semi-bold":"6",semibold:"6","demi-bold":"6",demibold:"6",bold:"7","extra-bold":"8",extrabold:"8","ultra-bold":"8",ultrabold:"8",black:"9",heavy:"9",l:"3",r:"4",b:"7"},Ca={i:"i",italic:"i",n:"n",normal:"n"},Da=/^(thin|(?:(?:extra|ultra)-?)?light|regular|book|medium|(?:(?:semi|demi|extra|ultra)-?)?bold|black|heavy|l|r|b|[1-9]00)?(n|i|normal|italic)?$/;function Ea(a){for(var b=a.f.length,c=0;c<b;c++){var d=a.f[c].split(":"),e=d[0].replace(/\+/g," "),f=["n4"];if(2<=d.length){var g;var k=d[1];g=[];if(k)for(var k=k.split(","),h=k.length,m=0;m<h;m++){var l;l=k[m];if(l.match(/^[\w-]+$/)){var n=Da.exec(l.toLowerCase());if(null==n)l="";else{l=n[2];l=null==l||""==l?"n":Ca[l];n=n[1];if(null==n||""==n)n="4";else var r=Ba[n],n=r?r:isNaN(n)?"4":n.substr(0,1);l=[l,n].join("")}}else l="";l&&g.push(l)}0<g.length&&(f=g);3==d.length&&(d=d[2],g=[],d=d?d.split(","):g,0<d.length&&(d=Aa[d[0]])&&(a.c[e]=d))}a.c[e]||(d=Aa[e])&&(a.c[e]=d);for(d=0;d<f.length;d+=1)a.a.push(new H(e,f[d]))}};function Fa(a,b){this.c=a;this.a=b}var Ga={Arimo:!0,Cousine:!0,Tinos:!0};Fa.prototype.load=function(a){var b=new C,c=this.c,d=new va(this.a.api,z(c),this.a.text),e=this.a.families;xa(d,e);var f=new za(e);Ea(f);A(c,ya(d),D(b));F(b,function(){a(f.a,f.c,Ga)})};function Ha(a,b){this.c=a;this.a=b}Ha.prototype.load=function(a){var b=this.a.id,c=this.c.m;b?B(this.c,(this.a.api||"https://use.typekit.net")+"/"+b+".js",function(b){if(b)a([]);else if(c.Typekit&&c.Typekit.config&&c.Typekit.config.fn){b=c.Typekit.config.fn;for(var e=[],f=0;f<b.length;f+=2)for(var g=b[f],k=b[f+1],h=0;h<k.length;h++)e.push(new H(g,k[h]));try{c.Typekit.load({events:!1,classes:!1,async:!0})}catch(m){}a(e)}},2E3):a([])};function Ia(a,b){this.c=a;this.f=b;this.a=[]}Ia.prototype.load=function(a){var b=this.f.id,c=this.c.m,d=this;b?(c.__webfontfontdeckmodule__||(c.__webfontfontdeckmodule__={}),c.__webfontfontdeckmodule__[b]=function(b,c){for(var g=0,k=c.fonts.length;g<k;++g){var h=c.fonts[g];d.a.push(new H(h.name,ga("font-weight:"+h.weight+";font-style:"+h.style)))}a(d.a)},B(this.c,z(this.c)+(this.f.api||"//f.fontdeck.com/s/css/js/")+ea(this.c)+"/"+b+".js",function(b){b&&a([])})):a([])};var Y=new pa(window);Y.a.c.custom=function(a,b){return new ua(b,a)};Y.a.c.fontdeck=function(a,b){return new Ia(b,a)};Y.a.c.monotype=function(a,b){return new sa(b,a)};Y.a.c.typekit=function(a,b){return new Ha(b,a)};Y.a.c.google=function(a,b){return new Fa(b,a)};var Z={load:p(Y.load,Y)};"function"===typeof define&&define.amd?define(function(){return Z}):"undefined"!==typeof module&&module.exports?module.exports=Z:(window.WebFont=Z,window.WebFontConfig&&Y.load(window.WebFontConfig));}());
(function(){'use strict';var menu_font_fam=rockthemes.fonts.menu_font_family;if(menu_font_fam.indexOf('"')>-1){menu_font_fam=menu_font_fam.match(/".*?"/g).toString().split('"').join('');}else if(menu_font_fam.indexOf("'")>-1){menu_font_fam=menu_font_fam.match(/'.*?'/g).toString().split("'").join("");}
var all_fonts=[menu_font_fam];for(var f=0;f<rockthemes.fonts.font_families.length;f++){all_fonts.push(rockthemes.fonts.font_families[f]);}
var cfms=['icomoon'],cfus=[rockthemes.fonts.icomoon_url],dts={'icomoon':'\uE003\uE005','FontAwesome':'\uf000','Pe-icon-7-stroke':'\uf000',},nts={};nts.icomoon=dts.icomoon;if(typeof rockthemes.fonts.libs!='undefined'&&rockthemes.fonts.libs.length>0){for(var l=0;l<rockthemes.fonts.libs.length;l++){cfms.push(rockthemes.fonts.libs[l].name);cfus.push(rockthemes.fonts.libs[l].url);nts[rockthemes.fonts.libs[l].name]=dts[rockthemes.fonts.libs[l].name];}}
WebFont.load({google:{families:all_fonts,},custom:{families:cfms,testStrings:nts,urls:cfus},fontactive:function(font_name,fvd){},fontinactive:function(font_name,fvd){},active:function(){jQuery(document).trigger('rockthemes:mega_menu_resize');jQuery(document).trigger('rockthemes:all_fonts_loaded');jQuery('html').addClass('rockthemes_fonts_loaded');},inactive:function(){jQuery(document).trigger('rockthemes:mega_menu_resize');jQuery(document).trigger('rockthemes:all_fonts_loaded');jQuery('html').addClass('rockthemes_fonts_loaded');}});})();
/*!
 * imagesLoaded PACKAGED v3.1.8
 * JavaScript is all like "You images are done yet or what?"
 * MIT License
 */
(function(){function e(){}function t(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function n(e){return function(){return this[e].apply(this,arguments)}}var i=e.prototype,r=this,o=r.EventEmitter;i.getListeners=function(e){var t,n,i=this._getEvents();if("object"==typeof e){t={};for(n in i)i.hasOwnProperty(n)&&e.test(n)&&(t[n]=i[n])}else t=i[e]||(i[e]=[]);return t},i.flattenListeners=function(e){var t,n=[];for(t=0;e.length>t;t+=1)n.push(e[t].listener);return n},i.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},i.addListener=function(e,n){var i,r=this.getListenersAsObject(e),o="object"==typeof n;for(i in r)r.hasOwnProperty(i)&&-1===t(r[i],n)&&r[i].push(o?n:{listener:n,once:!1});return this},i.on=n("addListener"),i.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},i.once=n("addOnceListener"),i.defineEvent=function(e){return this.getListeners(e),this},i.defineEvents=function(e){for(var t=0;e.length>t;t+=1)this.defineEvent(e[t]);return this},i.removeListener=function(e,n){var i,r,o=this.getListenersAsObject(e);for(r in o)o.hasOwnProperty(r)&&(i=t(o[r],n),-1!==i&&o[r].splice(i,1));return this},i.off=n("removeListener"),i.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},i.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},i.manipulateListeners=function(e,t,n){var i,r,o=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(i=n.length;i--;)o.call(this,t,n[i]);else for(i in t)t.hasOwnProperty(i)&&(r=t[i])&&("function"==typeof r?o.call(this,i,r):s.call(this,i,r));return this},i.removeEvent=function(e){var t,n=typeof e,i=this._getEvents();if("string"===n)delete i[e];else if("object"===n)for(t in i)i.hasOwnProperty(t)&&e.test(t)&&delete i[t];else delete this._events;return this},i.removeAllListeners=n("removeEvent"),i.emitEvent=function(e,t){var n,i,r,o,s=this.getListenersAsObject(e);for(r in s)if(s.hasOwnProperty(r))for(i=s[r].length;i--;)n=s[r][i],n.once===!0&&this.removeListener(e,n.listener),o=n.listener.apply(this,t||[]),o===this._getOnceReturnValue()&&this.removeListener(e,n.listener);return this},i.trigger=n("emitEvent"),i.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},i.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},i._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},i._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return r.EventEmitter=o,e},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return e}):"object"==typeof module&&module.exports?module.exports=e:this.EventEmitter=e}).call(this),function(e){function t(t){var n=e.event;return n.target=n.target||n.srcElement||t,n}var n=document.documentElement,i=function(){};n.addEventListener?i=function(e,t,n){e.addEventListener(t,n,!1)}:n.attachEvent&&(i=function(e,n,i){e[n+i]=i.handleEvent?function(){var n=t(e);i.handleEvent.call(i,n)}:function(){var n=t(e);i.call(e,n)},e.attachEvent("on"+n,e[n+i])});var r=function(){};n.removeEventListener?r=function(e,t,n){e.removeEventListener(t,n,!1)}:n.detachEvent&&(r=function(e,t,n){e.detachEvent("on"+t,e[t+n]);try{delete e[t+n]}catch(i){e[t+n]=void 0}});var o={bind:i,unbind:r};"function"==typeof define&&define.amd?define("eventie/eventie",o):e.eventie=o}(this),function(e,t){"function"==typeof define&&define.amd?define(["eventEmitter/EventEmitter","eventie/eventie"],function(n,i){return t(e,n,i)}):"object"==typeof exports?module.exports=t(e,require("wolfy87-eventemitter"),require("eventie")):e.imagesLoaded=t(e,e.EventEmitter,e.eventie)}(window,function(e,t,n){function i(e,t){for(var n in t)e[n]=t[n];return e}function r(e){return"[object Array]"===d.call(e)}function o(e){var t=[];if(r(e))t=e;else if("number"==typeof e.length)for(var n=0,i=e.length;i>n;n++)t.push(e[n]);else t.push(e);return t}function s(e,t,n){if(!(this instanceof s))return new s(e,t);"string"==typeof e&&(e=document.querySelectorAll(e)),this.elements=o(e),this.options=i({},this.options),"function"==typeof t?n=t:i(this.options,t),n&&this.on("always",n),this.getImages(),a&&(this.jqDeferred=new a.Deferred);var r=this;setTimeout(function(){r.check()})}function f(e){this.img=e}function c(e){this.src=e,v[e]=this}var a=e.jQuery,u=e.console,h=u!==void 0,d=Object.prototype.toString;s.prototype=new t,s.prototype.options={},s.prototype.getImages=function(){this.images=[];for(var e=0,t=this.elements.length;t>e;e++){var n=this.elements[e];"IMG"===n.nodeName&&this.addImage(n);var i=n.nodeType;if(i&&(1===i||9===i||11===i))for(var r=n.querySelectorAll("img"),o=0,s=r.length;s>o;o++){var f=r[o];this.addImage(f)}}},s.prototype.addImage=function(e){var t=new f(e);this.images.push(t)},s.prototype.check=function(){function e(e,r){return t.options.debug&&h&&u.log("confirm",e,r),t.progress(e),n++,n===i&&t.complete(),!0}var t=this,n=0,i=this.images.length;if(this.hasAnyBroken=!1,!i)return this.complete(),void 0;for(var r=0;i>r;r++){var o=this.images[r];o.on("confirm",e),o.check()}},s.prototype.progress=function(e){this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded;var t=this;setTimeout(function(){t.emit("progress",t,e),t.jqDeferred&&t.jqDeferred.notify&&t.jqDeferred.notify(t,e)})},s.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";this.isComplete=!0;var t=this;setTimeout(function(){if(t.emit(e,t),t.emit("always",t),t.jqDeferred){var n=t.hasAnyBroken?"reject":"resolve";t.jqDeferred[n](t)}})},a&&(a.fn.imagesLoaded=function(e,t){var n=new s(this,e,t);return n.jqDeferred.promise(a(this))}),f.prototype=new t,f.prototype.check=function(){var e=v[this.img.src]||new c(this.img.src);if(e.isConfirmed)return this.confirm(e.isLoaded,"cached was confirmed"),void 0;if(this.img.complete&&void 0!==this.img.naturalWidth)return this.confirm(0!==this.img.naturalWidth,"naturalWidth"),void 0;var t=this;e.on("confirm",function(e,n){return t.confirm(e.isLoaded,n),!0}),e.check()},f.prototype.confirm=function(e,t){this.isLoaded=e,this.emit("confirm",this,t)};var v={};return c.prototype=new t,c.prototype.check=function(){if(!this.isChecked){var e=new Image;n.bind(e,"load",this),n.bind(e,"error",this),e.src=this.src,this.isChecked=!0}},c.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},c.prototype.onload=function(e){this.confirm(!0,"onload"),this.unbindProxyEvents(e)},c.prototype.onerror=function(e){this.confirm(!1,"onerror"),this.unbindProxyEvents(e)},c.prototype.confirm=function(e,t){this.isConfirmed=!0,this.isLoaded=e,this.emit("confirm",this,t)},c.prototype.unbindProxyEvents=function(e){n.unbind(e.target,"load",this),n.unbind(e.target,"error",this)},s});
(function(h,b){var g=function(a,b,d){var c;return function(){var e=this,f=arguments;c?clearTimeout(c):d&&a.apply(e,f);c=setTimeout(function(){d||a.apply(e,f);c=null},b||100)}};jQuery.fn[b]=function(a){return a?this.bind("resize",g(a)):this.trigger(b)}})(jQuery,"smartresize");
!function(e){function t(){var e=location.href;return hashtag=-1!==e.indexOf("#prettyPhoto")?decodeURI(e.substring(e.indexOf("#prettyPhoto")+1,e.length)):!1,hashtag&&(hashtag=hashtag.replace(/<|>/g,"")),hashtag}function i(){"undefined"!=typeof theRel&&(location.hash=theRel+"/"+rel_index+"/")}function p(){-1!==location.href.indexOf("#prettyPhoto")&&(location.hash="prettyPhoto")}function o(e,t){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i="[\\?&]"+e+"=([^&#]*)",p=new RegExp(i),o=p.exec(t);return null==o?"":o[1]}e.prettyPhoto={version:"3.1.6"},e.fn.prettyPhoto=function(a){function s(){e(".pp_loaderIcon").hide(),projectedTop=scroll_pos.scrollTop+(I/2-f.containerHeight/2),projectedTop<0&&(projectedTop=0),$ppt.fadeTo(settings.animation_speed,1),$pp_pic_holder.find(".pp_content").animate({height:f.contentHeight,width:f.contentWidth},settings.animation_speed),$pp_pic_holder.animate({top:projectedTop,left:j/2-f.containerWidth/2<0?0:j/2-f.containerWidth/2,width:f.containerWidth},settings.animation_speed,function(){$pp_pic_holder.find(".pp_hoverContainer,#fullResImage").height(f.height).width(f.width),$pp_pic_holder.find(".pp_fade").fadeIn(settings.animation_speed),isSet&&"image"==h(pp_images[set_position])?$pp_pic_holder.find(".pp_hoverContainer").show():$pp_pic_holder.find(".pp_hoverContainer").hide(),settings.allow_expand&&(f.resized?e("a.pp_expand,a.pp_contract").show():e("a.pp_expand").hide()),!settings.autoplay_slideshow||P||v||e.prettyPhoto.startSlideshow(),settings.changepicturecallback(),v=!0}),m(),a.ajaxcallback()}function n(t){$pp_pic_holder.find("#pp_full_res object,#pp_full_res embed").css("visibility","hidden"),$pp_pic_holder.find(".pp_fade").fadeOut(settings.animation_speed,function(){e(".pp_loaderIcon").show(),t()})}function r(t){t>1?e(".pp_nav").show():e(".pp_nav").hide()}function l(e,t){if(resized=!1,d(e,t),imageWidth=e,imageHeight=t,(k>j||b>I)&&doresize&&settings.allow_resize&&!$){for(resized=!0,fitting=!1;!fitting;)k>j?(imageWidth=j-200,imageHeight=t/e*imageWidth):b>I?(imageHeight=I-200,imageWidth=e/t*imageHeight):fitting=!0,b=imageHeight,k=imageWidth;(k>j||b>I)&&l(k,b),d(imageWidth,imageHeight)}return{width:Math.floor(imageWidth),height:Math.floor(imageHeight),containerHeight:Math.floor(b),containerWidth:Math.floor(k)+2*settings.horizontal_padding,contentHeight:Math.floor(y),contentWidth:Math.floor(w),resized:resized}}function d(t,i){t=parseFloat(t),i=parseFloat(i),$pp_details=$pp_pic_holder.find(".pp_details"),$pp_details.width(t),detailsHeight=parseFloat($pp_details.css("marginTop"))+parseFloat($pp_details.css("marginBottom")),$pp_details=$pp_details.clone().addClass(settings.theme).width(t).appendTo(e("body")).css({position:"absolute",top:-1e4}),detailsHeight+=$pp_details.height(),detailsHeight=detailsHeight<=34?36:detailsHeight,$pp_details.remove(),$pp_title=$pp_pic_holder.find(".ppt"),$pp_title.width(t),titleHeight=parseFloat($pp_title.css("marginTop"))+parseFloat($pp_title.css("marginBottom")),$pp_title=$pp_title.clone().appendTo(e("body")).css({position:"absolute",top:-1e4}),titleHeight+=$pp_title.height(),$pp_title.remove(),y=i+detailsHeight,w=t,b=y+titleHeight+$pp_pic_holder.find(".pp_top").height()+$pp_pic_holder.find(".pp_bottom").height(),k=t}function h(e){return e.match(/youtube\.com\/watch/i)||e.match(/youtu\.be/i)?"youtube":e.match(/vimeo\.com/i)?"vimeo":e.match(/\b.mov\b/i)?"quicktime":e.match(/\b.swf\b/i)?"flash":e.match(/\biframe=true\b/i)?"iframe":e.match(/\bajax=true\b/i)?"ajax":e.match(/\bcustom=true\b/i)?"custom":"#"==e.substr(0,1)?"inline":"image"}function c(){if(doresize&&"undefined"!=typeof $pp_pic_holder){if(scroll_pos=_(),contentHeight=$pp_pic_holder.height(),contentwidth=$pp_pic_holder.width(),projectedTop=I/2+scroll_pos.scrollTop-contentHeight/2,projectedTop<0&&(projectedTop=0),contentHeight>I)return;$pp_pic_holder.css({top:projectedTop,left:j/2+scroll_pos.scrollLeft-contentwidth/2})}}function _(){return self.pageYOffset?{scrollTop:self.pageYOffset,scrollLeft:self.pageXOffset}:document.documentElement&&document.documentElement.scrollTop?{scrollTop:document.documentElement.scrollTop,scrollLeft:document.documentElement.scrollLeft}:document.body?{scrollTop:document.body.scrollTop,scrollLeft:document.body.scrollLeft}:void 0}function g(){I=e(window).height(),j=e(window).width(),"undefined"!=typeof $pp_overlay&&$pp_overlay.height(e(document).height()).width(j)}function m(){isSet&&settings.overlay_gallery&&"image"==h(pp_images[set_position])?(itemWidth=57,navWidth="facebook"==settings.theme||"pp_default"==settings.theme?50:30,itemsPerPage=Math.floor((f.containerWidth-100-navWidth)/itemWidth),itemsPerPage=itemsPerPage<pp_images.length?itemsPerPage:pp_images.length,totalPage=Math.ceil(pp_images.length/itemsPerPage)-1,0==totalPage?(navWidth=0,$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").hide()):$pp_gallery.find(".pp_arrow_next,.pp_arrow_previous").show(),galleryWidth=itemsPerPage*itemWidth,fullGalleryWidth=pp_images.length*itemWidth,$pp_gallery.css("margin-left",-(galleryWidth/2+navWidth/2)).find("div:first").width(galleryWidth+5).find("ul").width(fullGalleryWidth).find("li.selected").removeClass("selected"),goToPage=Math.floor(set_position/itemsPerPage)<totalPage?Math.floor(set_position/itemsPerPage):totalPage,e.prettyPhoto.changeGalleryPage(goToPage),$pp_gallery_li.filter(":eq("+set_position+")").addClass("selected")):$pp_pic_holder.find(".pp_content").unbind("mouseenter mouseleave")}function u(){if(settings.social_tools&&(facebook_like_link=settings.social_tools.replace("{location_href}",encodeURIComponent(location.href))),settings.markup=settings.markup.replace("{pp_social}",""),e("body").append(settings.markup),$pp_pic_holder=e(".pp_pic_holder"),$ppt=e(".ppt"),$pp_overlay=e("div.pp_overlay"),isSet&&settings.overlay_gallery){currentGalleryPage=0,toInject="";for(var t=0;t<pp_images.length;t++)pp_images[t].match(/\b(jpg|jpeg|png|gif)\b/gi)?(classname="",img_src=pp_images[t]):(classname="default",img_src=""),toInject+="<li class='"+classname+"'><a href='#'><img src='"+img_src+"' width='50' alt='' /></a></li>";toInject=settings.gallery_markup.replace(/{gallery}/g,toInject),$pp_pic_holder.find("#pp_full_res").after(toInject),$pp_gallery=e(".pp_pic_holder .pp_gallery"),$pp_gallery_li=$pp_gallery.find("li"),$pp_gallery.find(".pp_arrow_next").click(function(){return e.prettyPhoto.changeGalleryPage("next"),e.prettyPhoto.stopSlideshow(),!1}),$pp_gallery.find(".pp_arrow_previous").click(function(){return e.prettyPhoto.changeGalleryPage("previous"),e.prettyPhoto.stopSlideshow(),!1}),$pp_pic_holder.find(".pp_content").hover(function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeIn()},function(){$pp_pic_holder.find(".pp_gallery:not(.disabled)").fadeOut()}),itemWidth=57,$pp_gallery_li.each(function(t){e(this).find("a").click(function(){return e.prettyPhoto.changePage(t),e.prettyPhoto.stopSlideshow(),!1})})}settings.slideshow&&($pp_pic_holder.find(".pp_nav").prepend('<a href="#" class="pp_play">Play</a>'),$pp_pic_holder.find(".pp_nav .pp_play").click(function(){return e.prettyPhoto.startSlideshow(),!1})),$pp_pic_holder.attr("class","pp_pic_holder "+settings.theme),$pp_overlay.css({opacity:0,height:e(document).height(),width:e(window).width()}).bind("click",function(){settings.modal||e.prettyPhoto.close()}),e("a.pp_close").bind("click",function(){return e.prettyPhoto.close(),!1}),settings.allow_expand&&e("a.pp_expand").bind("click",function(){return e(this).hasClass("pp_expand")?(e(this).removeClass("pp_expand").addClass("pp_contract"),doresize=!1):(e(this).removeClass("pp_contract").addClass("pp_expand"),doresize=!0),n(function(){e.prettyPhoto.open()}),!1}),$pp_pic_holder.find(".pp_previous, .pp_nav .pp_arrow_previous").bind("click",function(){return e.prettyPhoto.changePage("previous"),e.prettyPhoto.stopSlideshow(),!1}),$pp_pic_holder.find(".pp_next, .pp_nav .pp_arrow_next").bind("click",function(){return e.prettyPhoto.changePage("next"),e.prettyPhoto.stopSlideshow(),!1}),c()}a=jQuery.extend({hook:"rel",animation_speed:"fast",ajaxcallback:function(){},slideshow:5e3,autoplay_slideshow:!1,opacity:.8,show_title:!0,allow_resize:!0,allow_expand:!0,default_width:500,default_height:344,counter_separator_label:"/",theme:"pp_default",horizontal_padding:20,hideflash:!1,wmode:"opaque",autoplay:!0,modal:!1,deeplinking:!0,overlay_gallery:!0,overlay_gallery_max:30,keyboard_shortcuts:!0,changepicturecallback:function(){},callback:function(){},ie6_fallback:!0,markup:'<div class="pp_pic_holder">       <div class="ppt">&nbsp;</div>       <div class="pp_top">        <div class="pp_left"></div>        <div class="pp_middle"></div>        <div class="pp_right"></div>       </div>       <div class="pp_content_container">        <div class="pp_left">        <div class="pp_right">         <div class="pp_content">          <div class="pp_loaderIcon"></div>          <div class="pp_fade">           <a href="#" class="pp_expand" title="Expand the image">Expand</a>           <div class="pp_hoverContainer">            <a class="pp_next" href="#">next</a>            <a class="pp_previous" href="#">previous</a>           </div>           <div id="pp_full_res"></div>           <div class="pp_details">            <div class="pp_nav">             <a href="#" class="pp_arrow_previous">Previous</a>             <p class="currentTextHolder">0/0</p>             <a href="#" class="pp_arrow_next">Next</a>            </div>            <p class="pp_description"></p>            <div class="pp_social">{pp_social}</div>            <a class="pp_close" href="#">Close</a>           </div>          </div>         </div>        </div>        </div>       </div>       <div class="pp_bottom">        <div class="pp_left"></div>        <div class="pp_middle"></div>        <div class="pp_right"></div>       </div>      </div>      <div class="pp_overlay"></div>',gallery_markup:'<div class="pp_gallery">         <a href="#" class="pp_arrow_previous">Previous</a>         <div>          <ul>           {gallery}          </ul>         </div>         <a href="#" class="pp_arrow_next">Next</a>        </div>',image_markup:'<img id="fullResImage" src="{path}" />',flash_markup:'<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="{width}" height="{height}"><param name="wmode" value="{wmode}" /><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="{path}" /><embed src="{path}" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="{width}" height="{height}" wmode="{wmode}"></embed></object>',quicktime_markup:'<object classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab" height="{height}" width="{width}"><param name="src" value="{path}"><param name="autoplay" value="{autoplay}"><param name="type" value="video/quicktime"><embed src="{path}" height="{height}" width="{width}" autoplay="{autoplay}" type="video/quicktime" pluginspage="http://www.apple.com/quicktime/download/"></embed></object>',iframe_markup:'<iframe src ="{path}" width="{width}" height="{height}" frameborder="no"></iframe>',inline_markup:'<div class="pp_inline">{content}</div>',custom_markup:"",social_tools:'<div class="twitter"><a href="http://twitter.com/share" class="twitter-share-button" data-count="none">Tweet</a><script type="text/javascript" src="http://platform.twitter.com/widgets.js"></script></div><div class="facebook"><iframe src="//www.facebook.com/plugins/like.php?locale=en_US&href={location_href}&layout=button_count&show_faces=true&width=500&action=like&font&colorscheme=light&height=23" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:500px; height:23px;" allowTransparency="true"></iframe></div>'},a);var f,v,y,w,b,k,P,x=this,$=!1,I=e(window).height(),j=e(window).width();return doresize=!0,scroll_pos=_(),e(window).unbind("resize.prettyphoto").bind("resize.prettyphoto",function(){c(),g()}),a.keyboard_shortcuts&&e(document).unbind("keydown.prettyphoto").bind("keydown.prettyphoto",function(t){if("undefined"!=typeof $pp_pic_holder&&$pp_pic_holder.is(":visible"))switch(t.keyCode){case 37:e.prettyPhoto.changePage("previous"),t.preventDefault();break;case 39:e.prettyPhoto.changePage("next"),t.preventDefault();break;case 27:settings.modal||e.prettyPhoto.close(),t.preventDefault()}}),e.prettyPhoto.initialize=function(){return settings=a,"pp_default"==settings.theme&&(settings.horizontal_padding=16),theRel=e(this).attr(settings.hook),galleryRegExp=/\[(?:.*)\]/,isSet=galleryRegExp.exec(theRel)?!0:!1,pp_images=isSet?jQuery.map(x,function(t){return-1!=e(t).attr(settings.hook).indexOf(theRel)?e(t).attr("href"):void 0}):e.makeArray(e(this).attr("href")),pp_titles=isSet?jQuery.map(x,function(t){return-1!=e(t).attr(settings.hook).indexOf(theRel)?e(t).find("img").attr("alt")?e(t).find("img").attr("alt"):"":void 0}):e.makeArray(e(this).find("img").attr("alt")),pp_descriptions=isSet?jQuery.map(x,function(t){return-1!=e(t).attr(settings.hook).indexOf(theRel)?e(t).attr("title")?e(t).attr("title"):"":void 0}):e.makeArray(e(this).attr("title")),pp_images.length>settings.overlay_gallery_max&&(settings.overlay_gallery=!1),set_position=jQuery.inArray(e(this).attr("href"),pp_images),rel_index=isSet?set_position:e("a["+settings.hook+"^='"+theRel+"']").index(e(this)),u(this),settings.allow_resize&&e(window).bind("scroll.prettyphoto",function(){c()}),e.prettyPhoto.open(),!1},e.prettyPhoto.open=function(t){return"undefined"==typeof settings&&(settings=a,pp_images=e.makeArray(arguments[0]),pp_titles=e.makeArray(arguments[1]?arguments[1]:""),pp_descriptions=e.makeArray(arguments[2]?arguments[2]:""),isSet=pp_images.length>1?!0:!1,set_position=arguments[3]?arguments[3]:0,u(t.target)),settings.hideflash&&e("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility","hidden"),r(e(pp_images).size()),e(".pp_loaderIcon").show(),settings.deeplinking&&i(),settings.social_tools&&(facebook_like_link=settings.social_tools.replace("{location_href}",encodeURIComponent(location.href)),$pp_pic_holder.find(".pp_social").html(facebook_like_link)),$ppt.is(":hidden")&&$ppt.css("opacity",0).show(),$pp_overlay.show().fadeTo(settings.animation_speed,settings.opacity),$pp_pic_holder.find(".currentTextHolder").text(set_position+1+settings.counter_separator_label+e(pp_images).size()),"undefined"!=typeof pp_descriptions[set_position]&&""!=pp_descriptions[set_position]?$pp_pic_holder.find(".pp_description").show().html(unescape(pp_descriptions[set_position])):$pp_pic_holder.find(".pp_description").hide(),movie_width=parseFloat(o("width",pp_images[set_position]))?o("width",pp_images[set_position]):settings.default_width.toString(),movie_height=parseFloat(o("height",pp_images[set_position]))?o("height",pp_images[set_position]):settings.default_height.toString(),$=!1,-1!=movie_height.indexOf("%")&&(movie_height=parseFloat(e(window).height()*parseFloat(movie_height)/100-150),$=!0),-1!=movie_width.indexOf("%")&&(movie_width=parseFloat(e(window).width()*parseFloat(movie_width)/100-150),$=!0),$pp_pic_holder.fadeIn(function(){switch($ppt.html(settings.show_title&&""!=pp_titles[set_position]&&"undefined"!=typeof pp_titles[set_position]?unescape(pp_titles[set_position]):"&nbsp;"),imgPreloader="",skipInjection=!1,h(pp_images[set_position])){case"image":imgPreloader=new Image,nextImage=new Image,isSet&&set_position<e(pp_images).size()-1&&(nextImage.src=pp_images[set_position+1]),prevImage=new Image,isSet&&pp_images[set_position-1]&&(prevImage.src=pp_images[set_position-1]),$pp_pic_holder.find("#pp_full_res")[0].innerHTML=settings.image_markup.replace(/{path}/g,pp_images[set_position]),imgPreloader.onload=function(){f=l(imgPreloader.width,imgPreloader.height),s()},imgPreloader.onerror=function(){alert("Image cannot be loaded. Make sure the path is correct and image exist."),e.prettyPhoto.close()},imgPreloader.src=pp_images[set_position];break;case"youtube":f=l(movie_width,movie_height),movie_id=o("v",pp_images[set_position]),""==movie_id&&(movie_id=pp_images[set_position].split("youtu.be/"),movie_id=movie_id[1],movie_id.indexOf("?")>0&&(movie_id=movie_id.substr(0,movie_id.indexOf("?"))),movie_id.indexOf("&")>0&&(movie_id=movie_id.substr(0,movie_id.indexOf("&")))),movie="http://www.youtube.com/embed/"+movie_id,movie+=o("rel",pp_images[set_position])?"?rel="+o("rel",pp_images[set_position]):"?rel=1",settings.autoplay&&(movie+="&autoplay=1"),toInject=settings.iframe_markup.replace(/{width}/g,f.width).replace(/{height}/g,f.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,movie);break;case"vimeo":f=l(movie_width,movie_height),movie_id=pp_images[set_position];var t=/http(s?):\/\/(www\.)?vimeo.com\/(\d+)/,i=movie_id.match(t);movie="http://player.vimeo.com/video/"+i[3]+"?title=0&byline=0&portrait=0",settings.autoplay&&(movie+="&autoplay=1;"),vimeo_width=f.width+"/embed/?moog_width="+f.width,toInject=settings.iframe_markup.replace(/{width}/g,vimeo_width).replace(/{height}/g,f.height).replace(/{path}/g,movie);break;case"quicktime":f=l(movie_width,movie_height),f.height+=15,f.contentHeight+=15,f.containerHeight+=15,toInject=settings.quicktime_markup.replace(/{width}/g,f.width).replace(/{height}/g,f.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,pp_images[set_position]).replace(/{autoplay}/g,settings.autoplay);break;case"flash":f=l(movie_width,movie_height),flash_vars=pp_images[set_position],flash_vars=flash_vars.substring(pp_images[set_position].indexOf("flashvars")+10,pp_images[set_position].length),filename=pp_images[set_position],filename=filename.substring(0,filename.indexOf("?")),toInject=settings.flash_markup.replace(/{width}/g,f.width).replace(/{height}/g,f.height).replace(/{wmode}/g,settings.wmode).replace(/{path}/g,filename+"?"+flash_vars);break;case"iframe":f=l(movie_width,movie_height),frame_url=pp_images[set_position],frame_url=frame_url.substr(0,frame_url.indexOf("iframe")-1),toInject=settings.iframe_markup.replace(/{width}/g,f.width).replace(/{height}/g,f.height).replace(/{path}/g,frame_url);break;case"ajax":doresize=!1,f=l(movie_width,movie_height),doresize=!0,skipInjection=!0,e.get(pp_images[set_position],function(e){toInject=settings.inline_markup.replace(/{content}/g,e),$pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject,s()});break;case"custom":f=l(movie_width,movie_height),toInject=settings.custom_markup;break;case"inline":myClone=e(pp_images[set_position]).clone().append('<br clear="all" />').css({width:settings.default_width}).wrapInner('<div id="pp_full_res"><div class="pp_inline"></div></div>').appendTo(e("body")).show(),doresize=!1,f=l(e(myClone).width(),e(myClone).height()),doresize=!0,e(myClone).remove(),toInject=settings.inline_markup.replace(/{content}/g,e(pp_images[set_position]).html())}imgPreloader||skipInjection||($pp_pic_holder.find("#pp_full_res")[0].innerHTML=toInject,s())}),!1},e.prettyPhoto.changePage=function(t){currentGalleryPage=0,"previous"==t?(set_position--,set_position<0&&(set_position=e(pp_images).size()-1)):"next"==t?(set_position++,set_position>e(pp_images).size()-1&&(set_position=0)):set_position=t,rel_index=set_position,doresize||(doresize=!0),settings.allow_expand&&e(".pp_contract").removeClass("pp_contract").addClass("pp_expand"),n(function(){e.prettyPhoto.open()})},e.prettyPhoto.changeGalleryPage=function(e){"next"==e?(currentGalleryPage++,currentGalleryPage>totalPage&&(currentGalleryPage=0)):"previous"==e?(currentGalleryPage--,currentGalleryPage<0&&(currentGalleryPage=totalPage)):currentGalleryPage=e,slide_speed="next"==e||"previous"==e?settings.animation_speed:0,slide_to=currentGalleryPage*itemsPerPage*itemWidth,$pp_gallery.find("ul").animate({left:-slide_to},slide_speed)},e.prettyPhoto.startSlideshow=function(){"undefined"==typeof P?($pp_pic_holder.find(".pp_play").unbind("click").removeClass("pp_play").addClass("pp_pause").click(function(){return e.prettyPhoto.stopSlideshow(),!1}),P=setInterval(e.prettyPhoto.startSlideshow,settings.slideshow)):e.prettyPhoto.changePage("next")},e.prettyPhoto.stopSlideshow=function(){$pp_pic_holder.find(".pp_pause").unbind("click").removeClass("pp_pause").addClass("pp_play").click(function(){return e.prettyPhoto.startSlideshow(),!1}),clearInterval(P),P=void 0},e.prettyPhoto.close=function(){$pp_overlay.is(":animated")||(e.prettyPhoto.stopSlideshow(),$pp_pic_holder.stop().find("object,embed").css("visibility","hidden"),e("div.pp_pic_holder,div.ppt,.pp_fade").fadeOut(settings.animation_speed,function(){e(this).remove()}),$pp_overlay.fadeOut(settings.animation_speed,function(){settings.hideflash&&e("object,embed,iframe[src*=youtube],iframe[src*=vimeo]").css("visibility","visible"),e(this).remove(),e(window).unbind("scroll.prettyphoto"),p(),settings.callback(),doresize=!0,v=!1,delete settings}))},!pp_alreadyInitialized&&t()&&(pp_alreadyInitialized=!0,hashIndex=t(),hashRel=hashIndex,hashIndex=hashIndex.substring(hashIndex.indexOf("/")+1,hashIndex.length-1),hashRel=hashRel.substring(0,hashRel.indexOf("/")),setTimeout(function(){e("a["+a.hook+"^='"+hashRel+"']:eq("+hashIndex+")").trigger("click")},50)),this.unbind("click.prettyphoto").bind("click.prettyphoto",e.prettyPhoto.initialize)}}(jQuery);var pp_alreadyInitialized=!1;

!function(a){function b(b){var c,d=a("<div></div>").css({width:"100%"});return b.append(d),c=b.width()-d.width(),d.remove(),c}function c(d,e){var f=d.getBoundingClientRect(),g=f.top,h=f.bottom,i=f.left,j=f.right,k=a.extend({tolerance:0,viewport:window},e),l=!1,m=k.viewport.get?k.viewport:a(k.viewport);m.length||(console.warn("isInViewport: The viewport selector you have provided matches no element on page."),console.warn("isInViewport: Defaulting to viewport as window"),m=a(window));var n=m.height(),o=m.width(),p=m.get(0).toString();if("[object Window]"!==p&&"[object DOMWindow]"!==p){var q=m.offset();g-=q.top,h-=q.top,i-=q.left,j=i+o,c.scrollBarWidth=c.scrollBarWidth||b(m),o-=c.scrollBarWidth}return k.tolerance=~~Math.round(parseFloat(k.tolerance)),k.tolerance<0&&(k.tolerance=n+k.tolerance),Math.abs(i)>=o?l:l=k.tolerance?!!(g<=k.tolerance&&h>=k.tolerance):!!(h>0&&n>=g)}a.fn.do=function(b){if(1===arguments.length&&"function"==typeof b&&(b=[b]),!(b instanceof Array))throw new SyntaxError("isInViewport: Argument(s) passed to .do should be a function or an array of functions");for(var c=0;c<b.length;c++)if("function"==typeof b[c])for(var d=0;d<this.length;d++)b[c].call(a(this[d]));else console.warn("isInViewport: Argument(s) passed to .do should be a function or an array of functions"),console.warn("isInViewport: Ignoring non-function values in array and moving on");return this},a.extend(a.expr[":"],{"in-viewport":function(a,b,d){if(d[3]){var e=d[3].split(",");return 1===e.length&&isNaN(e[0])&&(e[1]=e[0],e[0]=void 0),c(a,{tolerance:e[0]?e[0].trim():void 0,viewport:e[1]?e[1].trim():void 0})}return c(a)}})}(jQuery);
(function($){var selectors=[];var check_binded=false;var check_lock=false;var defaults={interval:250,force_process:false}
var $window=$(window);var $prior_appeared;function process(){if(selectors.length<1)return;check_lock=false;var win={width:$window.width(),height:$window.height(),left:$window.scrollLeft(),top:$window.scrollTop()}
for(var index=0;index<selectors.length;index++){var $appeared=$(selectors[index]).filter(function(){var el=$(this);var offset=el.offset();var top=offset.top;var left=offset.left;if(top+el.height()>=win.top&&top-(el.data('appear-top-offset')||0)<=win.top+win.height&&left+el.width()>=win.left&&left-(el.data('appear-left-offset')||0)<=win.left+win.width){return true;}else{return false;}
offset=null;top=null;el=null;});$appeared.trigger('appear',[$appeared]);if($prior_appeared){var $disappeared=$prior_appeared.not($appeared);$disappeared.trigger('disappear',[$disappeared]);}
$prior_appeared=$appeared;}
win=null;}
$.expr[':']['appeared']=function(element){var $element=$(element);if(!$element.is(':visible')){return false;}
var window_left=$window.scrollLeft();var window_top=$window.scrollTop();var offset=$element.offset();var left=offset.left;var top=offset.top;if(top+$element.height()>=window_top&&top-($element.data('appear-top-offset')||0)<=window_top+$window.height()&&left+$element.width()>=window_left&&left-($element.data('appear-left-offset')||0)<=window_left+$window.width()){return true;}else{return false;}}
$.fn.extend({appear:function(options){var opts=$.extend({},defaults,options||{});var selector=this.selector||this;selectors.push(selector);if(!check_binded){var on_check=function(){if(check_lock){return;}
check_lock=true;process();};check_binded=true;}
process();return $(selector);}});$.fn.extend({appearOff:function(){var selector=this.selector||this;var exists_int=selectors.indexOf(selector);if(exists_int>1){selectors.splice(exists_int,1);}
return $(selector);}});var throt_func=process;$(window).load(function(){$(window).scroll(throt_func).resize(throt_func);setTimeout(throt_func,400);});})(jQuery);
jQuery(document).ready(function(){'use strict';rockthemes_extend_modernizr();var spfx='';switch(BrowserDetect.browser){case'Chrome':spfx='-webkit-';break;case'Explorer':spfx='-ms-';break;case'Firefox':spfx='-moz-';break;case'Safari':spfx='-webkit-';break;case'Opera':spfx='-o-';break;}
if(spfx!=''){rockthemes.frontend_options.style_prefix=spfx;}
if(Modernizr.ismobile){jQuery('html').addClass('disable-transition');}
if(rockthemes.frontend_options.activate_smooth_scroll==='true'){if(!(/Android|iPhone|iPad|iPod|BlackBerry|Windows Phone/i).test(navigator.userAgent||navigator.vendor||window.opera)&&!(navigator.userAgent.match(/msie|trident/i))){var rockthemes_nice_s_object={cursorcolor:typeof rockthemes.colors!=='undefined'&&rockthemes.colors?rockthemes.colors.main_color:"#9a56cc",cursorwidth:"14px",cursorborder:"none",cursorborderradius:"4px",zindex:"999999",bouncescroll:"true",cursoropacitymin:"0.3",background:"rgba(0,0,0,0.3)",horizrailenabled:(rockthemes.resposivity==='false')?true:false};rockthemes_nice_s_object.scrollspeed=98;rockthemes_nice_s_object.mousescrollstep=48;if(rockthemes.frontend_options.nicescroll_style_enabled!=='yes'){jQuery('html').addClass('nicescroll-style-disabled');rockthemes_nice_s_object.autohidemode='hidden';}
var rockthemes_nice_s=jQuery('html').niceScroll(rockthemes_nice_s_object);rockthemes.elements=new Object();rockthemes.elements.nice_scroll=rockthemes_nice_s;jQuery(document).on('rockthemes:nicescroll_enable',function(){rockthemes_nice_s.show();});jQuery(document).on('rockthemes:nicescroll_disable',function(){jQuery('html').css('transform','');rockthemes_nice_s.stop();rockthemes_nice_s.hide();});}}
rockthemes_scroll_events();if(typeof rockthemes.settings=="undefined"){rockthemes.settings=new Object();}
rockthemes.settings.undermenu_box_classes=['woocommerce-cart-active','search-box-active'];if(typeof rockthemes.init_queue=='undefined'){rockthemes.init_queue=new Object();rockthemes.init_queue.fullscreen_bg_videos=new Array();}
rockthemes_fullscreen_elements();jQuery(window).smartresize(rockthemes_fullscreen_elements);if(jQuery('.rockthemes-before-header.intro-effect-slide').children().length&&(jQuery(window).width()>=768||jQuery(window).height()>=768)){var eh=jQuery('.rockthemes-before-header.intro-effect-slide').height();if(eh<667)eh=667;jQuery('.rockthemes-before-header.intro-effect-slide').css('height',eh+'px');}else{jQuery('.rockthemes-before-header.intro-effect-slide').removeClass('intro-effect-slide');}
rockthemes_multi_bg_colors();jQuery(window).smartresize(function(){setTimeout(rockthemes_multi_bg_colors,180);});jQuery('.disable-link').click(function(e){e.preventDefault();});rocktheme_wrap_iframe_videos();rockthemes_main_menu();rockthemes_mobile_menu();rockthemes_menu_ajax_search();rockthemes_woocommerce_elements_init();rockthemes_menu_ajax_woocommerce_cart();rockthemes_check_bg_videos();rockthemes_responsive_flash();rockthemes_activate_hover();rockthemes_activate_load_more();rockthemes_activate_cat_filter_ajax();rockthemes_activate_elements_js();rockthemes_activate_down_arrows();rockthemes_activate_loader_motion();jQuery(document).on('rockthemes:all_fonts_loaded',function(){jQuery('body').css('visibility','visible');var hmf_elements=['.sticky-header-wrapper','.main-header-area','.header-top-2','.azoom-title-breadcrumbs'];for(var i=0;i<hmf_elements.length;i++){if(jQuery(hmf_elements[i]+'.not-visible').length){jQuery(hmf_elements[i]+'.not-visible').removeClass('not-visible');}}
jQuery(document).trigger('rockthemes:mega_menu_resize');});if(rockthemes.fonts.activate_font_loading==='true'){if(jQuery('html').hasClass('rockthemes_fonts_loaded')){jQuery(document).trigger('rockthemes:all_fonts_loaded');}else{var font_max_try=10,font_current_try=0,font_int=setInterval(function(){if(jQuery('html').hasClass('rockthemes_fonts_loaded')||font_current_try>=font_max_try){jQuery(document).trigger('rockthemes:all_fonts_loaded');clearInterval(font_int);}
font_current_try++;},500);}}else{jQuery(document).trigger('rockthemes:all_fonts_loaded');}});function rockthemes_main_menu(){var on_menu=false,temp_om=false,out_menu=false,t_time=180,o_time=300,h_timer=false,o_timer=false,nav=jQuery('#nav'),sel='#nav > ul > li.menu-item-has-children, ul#nav > li.menu-item-has-children';var mega={hover:function(that){on_menu=that.attr('id');that.addClass('hovering');clearTimeout(h_timer);h_timer=setTimeout(function(){if(!on_menu)return;if(on_menu!=that.attr('id')||!that.hasClass('hovering')){return;}
jQuery('#nav .hover, #nav .hovering').removeClass('hover hovering');that.addClass('hover');},t_time);},out:function(that){that.removeClass('hovering');on_menu=false;out_menu=that.attr('id');clearTimeout(o_timer);o_timer=setTimeout(function(){if(on_menu||that.hasClass('hovering'))return;jQuery('#nav .hover, #nav .hovering').removeClass('hover hovering');},o_time);}}
jQuery(document).on('mouseenter',sel,function(e){var that=jQuery(this);mega.hover(that);});jQuery(document).on('mouseleave',sel,function(e){var that=jQuery(this);mega.out(that);});if(1==1){if(typeof Modernizr!="undefined"&&Modernizr.touch){jQuery(document).on('touchend','#nav .menu-item-has-children > a',function(e){e.preventDefault();var that=jQuery(this).parent();if(that.hasClass('hover')){that.removeClass('hover');}else{that.siblings().removeClass('hover').end().addClass('hover');}});}}}
function rockthemes_activate_loader_motion(){var loader_classes=['.woocommerce-loader','.load-more-button-loader','.ajax-category-navigation-loader','.azoom-search-loader'];var use_gif=false;if(jQuery('html').hasClass('ie9')){use_gif=true;}
if(use_gif){if(jQuery('.rockthemes-css-loader').length){jQuery('.rockthemes-css-loader > div > div').remove();jQuery('.rockthemes-css-loader .gif-loader').removeClass('hidden');jQuery('.rockthemes-css-loader').removeClass('rockthemes-css-loader');}
if(jQuery('.azoom-search-loader').length){jQuery('.azoom-search-loader').after(rockthemes.gif_loader);}
for(var i=0;i<loader_classes.length;i++){if(jQuery(loader_classes[i]).length){jQuery(loader_classes[i]).remove();}}}else{if(jQuery('.rockthemes-css-loader .gif-loader').length){jQuery('.rockthemes-css-loader .gif-loader').remove();}}}
function rockthemes_scroll_events(){if(typeof rockthemes.events=='undefined'){rockthemes.events=new Object();}
rockthemes.events.scroll_keys=[37,38,39,40];var don_wheel=window.onwheel;jQuery(document).on('rockthemes:scroll_events_enable',function(){window.onwheel=don_wheel;if(rockthemes.frontend_options.activate_smooth_scroll==='true'){jQuery(document).trigger('rockthemes:nicescroll_enable');}
jQuery(document).off('wheel DOMMouseScroll onmousewheel',wheel);jQuery(window).off('onmousewheel onwheel',wheel);document.onkeydown=null;});jQuery(document).on('rockthemes:scroll_events_disable',function(){if(rockthemes.frontend_options.activate_smooth_scroll==='true'){jQuery(document).trigger('rockthemes:nicescroll_disable');}
jQuery(document).on('wheel DOMMouseScroll onmousewheel',wheel);jQuery(window).on('onmousewheel onwheel',wheel);document.onkeydown=keydown;});function rockthemes_preventDefault(e){e=e||window.event;if(e.preventDefault)
e.preventDefault();if(e.stopImmediatePropagation)
e.stopImmediatePropagation();e.returnValue=false;return false;}
function keydown(e){for(var i=rockthemes.events.scroll_keys.length;i--;){if(e.keyCode===rockthemes.events.scroll_keys[i]){rockthemes_preventDefault(e);return;}}}
function wheel(e){rockthemes_preventDefault(e);}}
function rockthemes_activate_animations(){if(!jQuery('.rockthemes-animate').length)return;if(Modernizr.ismobile||!Modernizr.cssanimations){jQuery('.rockthemes-animate').removeClass('rockthemes-animate');return;}
var ended_events='animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd';jQuery('.rockthemes-animate').each(function(){var that=jQuery(this);that.appear();that.on('appear',function(){that.off('appear');that.appearOff();setTimeout(function(){if(that.find('img').length){that.imagesLoaded(function(){setTimeout(function(){activate_animate_animation(that,ended_events);},180);});}else{activate_animate_animation(that,ended_events);}},parseInt(that.attr('data-animation-delay-time')));});});}
function activate_animate_animation(that,ended_events){that.addClass(that.attr('data-animation-class')+' animated');if(that.find(".rockthemes-list").length){rockthemes_ea_list(that,that.attr('data-animation-class')+' animated');}
that.on(ended_events,function(){that.removeClass('rockthemes-animate '+that.attr('data-animation-class')+' animated');that.off(ended_events);});}
function rockthemes_ea_list(el,anim){el.find("li").css("opacity","0");var latest_i=0;el.find(" ul > li").each(function(i){var that=jQuery(this);setTimeout(function(){that.addClass(anim);},300*i);latest_i=i;});}
function rockthemes_woocommerce_elements_init(){jQuery(document).on("click",".woocommerce-review-link",function(){var tab_id=jQuery(this).attr('href');var content=jQuery(tab_id+'.rock-tab-header')
if(typeof content=='undefined'||content.length<1)return;content.trigger('click');});}
function rocktheme_wrap_iframe_videos(){var elems=['iframe','embed','video','.video-player'];var dismiss=['.fp-player','.flowplayer-video','.curvyslider-video'];for(var i=0;i<elems.length;i++){jQuery(elems[i]).each(function(){;var that=jQuery(this),dismissed=false;if(that.parent().is('body')||that.parent().is('html')){return;}
for(var d=0;d<dismiss.length;d++){if(that.parents(dismiss[d]).length){dismissed=true;}}
if(!that.parents('.azoom-iframe-container').length&&!that.parent().hasClass('rockthemes-background-video')&&!dismissed){that.wrap('<div class="azoom-iframe-container"></div>');}});}}
function rockthemes_extend_modernizr(){if(Modernizr){Modernizr.addTest('ipad',function(){return!!navigator.userAgent.match(/iPad/i);});Modernizr.addTest('iphone',function(){return!!navigator.userAgent.match(/iPhone/i);});Modernizr.addTest('ipod',function(){return!!navigator.userAgent.match(/iPod/i);});Modernizr.addTest('appleios',function(){return(Modernizr.ipad||Modernizr.ipod||Modernizr.iphone);});Modernizr.addTest('android',function(){return!!navigator.userAgent.match(/Android/i);});Modernizr.addTest('iemobile',function(){return!!navigator.userAgent.match(/IEMobile/i);});Modernizr.addTest('ismobile',function(){return(Modernizr.ipad||Modernizr.ipod||Modernizr.iphone||Modernizr.android||Modernizr.iemobile);});}}
function rockthemes_activate_elements_js(){if(jQuery('.rock-toggles-container').length){rockthemes_ae_toggles();}
if(jQuery('.rock-tabs-container').length){rockthemes_ae_tabs();}
if(jQuery('.rock-achievement').length){rockthemes_ae_achievement();}
if(jQuery('.rock-iconictext-container').length){rockthemes_ae_iconictext();}
if(jQuery('.button[data-button-js-colors="true"]').length){rockthemes_ae_buttons();}
if(jQuery('.azoom-steps').length){rockthemes_ae_steps();}
if(jQuery('.azoom-skill').length){rockthemes_ae_skills();}
if(jQuery('.azoom-love-icon').length){rockthemes_ae_love_icon();}
if(jQuery('.rock-references-builder').length){rockthemes_ae_references();}
if(jQuery('.alert-box').length){rockthemes_ae_alertbox();}
if(jQuery('.azoom-team-members').length){rockthemes_ae_teammembers();}
if(jQuery('.azoom-single-image').length){rockthemes_ae_singleimage();}}
function rockthemes_ae_singleimage(){if(jQuery('.azoom-overflow-image').length){rockthemes_overflow_image();jQuery(window).smartresize(rockthemes_overflow_image);}
if(jQuery('.azoom-snap-image').length){rockthemes_snap_image();jQuery(window).smartresize(rockthemes_snap_image);}}
function rockthemes_overflow_image(){jQuery('.azoom-overflow-image').each(function(){if(jQuery(window).width()<=800){jQuery(this).css({'bottom':''});return;}
jQuery(this).parents('.columns').css({'min-height':'10px'});var image=jQuery(this),sg=jQuery(this).parents('.rockthemes-unique-grid'),vs=typeof sg!=='undefined'?sg.hasClass('rsb-vertical-space'):false,df=parseInt(image.attr('data-overflow')),th=image.parents('.row').outerHeight(true)+df-image.parents('.columns').outerHeight();if(vs&&!image.parents('.row').hasClass('rsb-vertical-space')){th+=105;}else if(vs){th-=105;}
image.css({'bottom':'-'+th+'px'});});}
function rockthemes_snap_image(){jQuery('.azoom-snap-image').each(function(){jQuery(this).css({'left':'','right':''});if(jQuery(window).width()<=800){return;}
var image=jQuery(this),m=jQuery(this).parents('.main-container').length?jQuery(this).parents('.main-container'):jQuery('body'),ds=image.attr('data-snap-image'),snap=0,le=image.hasClass('azoom-overflow-image')?parseInt(image.parent().css('padding-left')):0;switch(ds){case'left':snap=m.offset().left-image.offset().left+le;image.css({'left':snap+'px'});break;case'right':image.imagesLoaded(function(){snap=-((m.offset().left+m.width())-(image.offset().left+image.width())+le);image.css({'right':snap+'px'});});break;}});}
function rockthemes_ae_teammembers(){jQuery('.azoom-team-members').each(function(){var that=jQuery(this);that.find('.team-member-article').click(function(e){e.preventDefault();var id=jQuery(this).parents('.azoom-team-members').attr('id');var no_slide=false;var content=jQuery(this).find('.member-details').clone();if(jQuery('.'+id).length){no_slide=true;jQuery('.'+id).empty();jQuery('.'+id).append(jQuery('<div class="team-member-box-close"></div>'));jQuery('.'+id).append(content);}else{var box=jQuery('<div class="team-member-box '+id+'"><div class="team-member-box-close"></div></div>');box.append(content);that.prepend(box);that.find('.team-member-box').slideDown();}
var go_top=parseInt(jQuery('.'+id).offset().top)-30;if(jQuery('.header-sticky-active').length){go_top=go_top-parseInt(rockthemes.menu.sticky_height);}
if(jQuery('#wpadminbar').length){go_top=go_top-parseInt(jQuery('#wpadminbar').height());}
jQuery('html, body').animate({scrollTop:go_top},1000);jQuery(document).on('click touchend','.team-member-box-close',function(){var that_tm=jQuery(this).parents('.team-member-box');if(that_tm.length){that_tm.slideUp(480,function(){if(that_tm.length){that_tm.remove();}});}});});});}
function rockthemes_ae_alertbox(){jQuery('.alert-box').each(function(){var that=jQuery(this);if(that.find('.alert-box-close').length){that.on("click touchend",".alert-box-close",function(){that.slideUp();});}});}
function rockthemes_ae_references(){jQuery('.rock-references-builder').each(function(){var that=jQuery(this);that.rock_ref=new Object();that.rock_ref.time=parseInt(that.attr('data-time'));that.rock_ref.id=that.attr('id');that.rock_ref.timer;that.rock_ref.current_row=0;that.rock_ref.total_in_row=that.attr('data-total-in-row');that.rock_ref.auto_slide=that.attr('data-auto-slide');that.rock_ref.total_rows=jQuery('#'+that.rock_ref.id+' ul').length;if(that.rock_ref.auto_slide=='true'){that.rock_ref.timer=setInterval(function(){change_references(false,that);},that.rock_ref.time);}
jQuery('#'+that.rock_ref.id+' ul').each(function(i){jQuery(this).css({'margin-top':'-'+jQuery(this).position().top+'px'});});jQuery(document).on('click','#'+that.rock_ref.id+' .references_previous_button',function(){if(that.rock_ref.auto_slide=='true'){clearInterval(that.rock_ref.timer);}
change_references(true,that);if(that.rock_ref.auto_slide=='true'){that.rock_ref.timer=setInterval(function(){change_references(true,that);},that.rock_ref.time);}});jQuery(document).on('click','#'+that.rock_ref.id+' .references_next_button',function(){if(that.rock_ref.auto_slide=='true'){clearInterval(that.rock_ref.timer);}
change_references(false,that);if(that.rock_ref.auto_slide=='true'){that.rock_ref.timer=setInterval(function(){change_references(false,that);},that.rock_ref.time);}});var first_time=false;that.imagesLoaded(function(){rockthemes_references_resize(that.rock_ref.id,first_time);});jQuery(window).smartresize(function(){rockthemes_references_resize(that.rock_ref.id,first_time);});});}
function rockthemes_references_resize(id,first_time){jQuery('#'+id+' .absolute-class').first().find('li').css('margin-top','0');var height=jQuery('#'+id+' .absolute-class').first().height();jQuery('#'+id+' .rock-references-content').css('height',height);if(!first_time){height=jQuery('#'+id+' .absolute-class').first().find('li').first().height();jQuery('#'+id+' .azoom-element-responsive-header').css({top:height/2-13});first_time=true;}}
function change_references(previous,that){jQuery('#'+that.rock_ref.id+' .absolute-class').eq(that.rock_ref.current_row).find('li').each(function(i){jQuery(this).stop(true,true).animate({'margin-top':'-30px','opacity':'0'},(i*200)+100);});jQuery('#'+that.rock_ref.id+' .absolute-class').eq(that.rock_ref.current_row).css({'zIndex':'0'});if(typeof previous!=='undefined'&&previous===true){that.rock_ref.current_row--;if(that.rock_ref.current_row<0){that.rock_ref.current_row=that.rock_ref.total_rows-1;}}else{that.rock_ref.current_row++;if(that.rock_ref.current_row>=that.rock_ref.total_rows){that.rock_ref.current_row=0;}}
jQuery('#'+that.rock_ref.id+' .absolute-class').eq(that.rock_ref.current_row).css({'zIndex':'1'});jQuery('#'+that.rock_ref.id+' .absolute-class').eq(that.rock_ref.current_row).find('li').each(function(i){jQuery(this).css({'margin-top':'60px'});jQuery(this).stop(true,true).animate({'margin-top':'0px','opacity':'1'},(i*150)+250);});}
function rockthemes_ae_skills(){jQuery('.azoom-skill').each(function(){var that=jQuery(this);if(that.parents('.rockthemes-animate.skill-animating').length){return;}else if(that.parents('.rockthemes-animate').length){that.parents('.rockthemes-animate').addClass('skill-animating');var r=that.parents('.rockthemes-animate.skill-animating');r.appear();r.on('appear',function(){r.off('appear');r.appearOff();r.find('.azoom-skill').each(function(i){var t=jQuery(this);if(!t.find('.active').length){if(Modernizr.csstransitions){setTimeout(function(){t.addClass('active');t.off('appear');t.appearOff();},parseInt(i*600));}else{t.addClass('active');t.off('appear');t.appearOff();}}});});}else{that.appear();that.on('appear',function(){if(!that.find('.active').length){setTimeout(function(){that.addClass('active');that.off('appear');that.appearOff();},600);}});}});}
function rockthemes_ae_love_icon(){jQuery(document).on('click touchend','.azoom-love-icon',function(e){e.preventDefault();var that=jQuery(this);if(typeof that.attr('data-loved-this')!=='undefined'&&that.attr('data-loved-this')&&that.attr('data-loved-this')==='yes'){return;}
if(typeof that.attr('data-post-id')!=='undefined'&&that.attr('data-post-id')&&that.attr('data-post-id')!==''){var sd={post_id:that.attr('data-post-id')};jQuery.post(rockthemes.ajaxurl,{action:'azoom_love_ajax',_ajax_nonce:rockthemes.nonces.love,data:sd},function(data){if(data=='success'){var n=jQuery('.azoom-love-icon[data-post-id="'+that.attr('data-post-id')+'"]').attr('data-loved-this','yes');if(n.find('span').length){n.find('span').html(parseInt(n.find('span').html())+1);}}});}});}
function rockthemes_ae_steps(){rockthemes_ae_steps_init_resize();jQuery(window).smartresize(rockthemes_ae_steps_init_resize);jQuery('.azoom-steps .step-icon').click(function(){rockthemes_se_elem_clicked(jQuery(this));});jQuery('.azoom-steps').each(function(){var that=jQuery(this);var size=(parseInt(that.attr('data-min-width'))/that.find('li').length);var starting_x=0;var ending_x=0;var matrix=(that.css("transform")).substr(7,(that.css("transform")).length-8).split(', ');var last_size=matrix[4];var first_x_val=-(parseInt(that.find('li').first().offset().left+((parseInt(that.attr('data-min-width'))/that.find('li').length)/2))-35);first_x_val=first_x_val+Number(last_size);var first_x_val_desk=-(parseInt(that.find('li').first().position().left+((parseInt(that.attr('data-min-width'))/that.find('li').length)/2))-35);first_x_val_desk=first_x_val_desk+Number(last_size);that.on('touchstart',function(e){starting_x=e.originalEvent.touches[0].pageX;ending_x=parseInt(starting_x-e.originalEvent.touches[0].pageX);matrix=(that.css("transform")).substr(7,(that.css("transform")).length-8).split(', ');last_size=matrix[4];that.removeClass('azoom-transition');}).on("touchmove",function(e){e.preventDefault();ending_x=parseInt(starting_x-e.originalEvent.touches[0].pageX);var diff=parseInt(last_size-ending_x);if(Math.abs(ending_x)<5)return;that.css({'transform':'translateX('+diff+'px)','-webkit-transform':'translateX('+diff+'px)'});}).on("touchend",function(e){that.addClass('azoom-transition');if(Math.abs(ending_x)<5)return;var diff=parseInt(last_size-ending_x);var new_val=parseInt(last_size)-(ending_x+(size-((ending_x)%size)));if(ending_x<0){new_val=parseInt(new_val)+(size*2);}
if(new_val<-(parseInt(that.attr('data-min-width'))-(size/2))){new_val=first_x_val;}else if(new_val>(first_x_val-10)){new_val=first_x_val;}
that.css({'transform':'translateX('+new_val+'px)','-webkit-transform':'translateX('+new_val+'px)'});});that.on('mousedown',function(e){that.addClass('mousedown');starting_x=e.pageX-that.offset().left;ending_x=parseInt(starting_x-(e.pageX-that.offset().left));matrix=(that.css("transform")).substr(7,(that.css("transform")).length-8).split(', ');last_size=matrix[4];that.removeClass('azoom-transition');});jQuery('body').on("mousemove",function(e){if(!that.hasClass('mousedown')){return true;}
e.preventDefault();e.stopPropagation();ending_x=parseInt(starting_x-(e.pageX-that.offset().left));var diff=parseInt(last_size-ending_x);if(Math.abs(ending_x)<5)return;that.css({'transform':'translateX('+diff+'px)','-webkit-transform':'translateX('+diff+'px)'});});jQuery('body').on("mouseup",function(e){if(!that.hasClass('mousedown'))return;e.preventDefault();that.removeClass('mousedown');that.addClass('azoom-transition');if(Math.abs(ending_x)<5)return;var diff=parseInt(last_size-ending_x);var new_val=parseInt(last_size)-(ending_x+(size-((ending_x)%size)));if(ending_x<0){new_val=parseInt(new_val)+(size*2);}
if(new_val<-(parseInt(that.attr('data-min-width'))-(size/2))){new_val=first_x_val_desk;}else if(new_val>(first_x_val_desk-10)){new_val=first_x_val_desk;}
that.css({'transform':'translateX('+new_val+'px)','-webkit-transform':'translateX('+new_val+'px)'});});});jQuery('.azoom-steps .step-back').click(function(e){var t_steps=jQuery(this).parents('.azoom-steps');if(t_steps.parent().width()<parseInt(t_steps.attr('data-min-width'))&&t_steps.find('li.active').length>1){var size=t_steps.find('li').first().width()+20;var matrix=(t_steps.css("transform")).substr(7,(t_steps.css("transform")).length-8).split(', ');var last_size=matrix[4];t_steps.css({'transform':'translateX('+(parseInt(last_size)+size)+'px)','-webkit-transform':'translateX('+(parseInt(last_size)+size)+'px)','-ms-transform':'translateX('+(parseInt(last_size)+size)+'px)',});}
rockthemes_se_elem_clicked(jQuery(this).parents('li').find('.step-icon'));if(jQuery(this).parents('li').prev().length&&jQuery(this).parents('li').prev().hasClass('done')){jQuery(this).parents('li').prev().removeClass('done');}});jQuery('.azoom-steps .step-next').click(function(e){var t_steps=jQuery(this).parents('.azoom-steps');if(t_steps.parent().width()<parseInt(t_steps.attr('data-min-width'))&&t_steps.find('li.active').length<t_steps.find('li').length){var size=t_steps.find('li').first().width()+20;var matrix=(t_steps.css("transform")).substr(7,(t_steps.css("transform")).length-8).split(', ');var last_size=matrix[4];t_steps.css({'transform':'translateX('+(parseInt(last_size)-size)+'px)','-webkit-transform':'translateX('+(parseInt(last_size)-size)+'px)','-ms-transform':'translateX('+(parseInt(last_size)-size)+'px)',});}
if(jQuery(this).parents('li').next().length){rockthemes_se_elem_clicked(jQuery(this).parents('li').next().find('.step-icon'));}});jQuery('.azoom-steps').each(function(){var that=jQuery(this);if(that.attr('data-start_steps')==='none')return;that.appear();that.on('appear',function(){if(!that.find('.active').length){if(!Modernizr.touch&&that.attr('data-start_steps')==='all'&&parseInt(that.attr('data-min-width'))<jQuery(window).width()){rockthemes_se_elem_clicked(that.find('li .step-icon'));}else{rockthemes_se_elem_clicked(that.find('li').first().find('.step-icon'));}
that.off('appear');that.appearOff();}});});}
function rockthemes_ae_steps_init_resize(){jQuery('.azoom-steps').each(function(){var data_width=typeof jQuery(this).attr('data-min-width')!==''&&jQuery(this).attr('data-min-width')!==''?parseInt(jQuery(this).attr('data-min-width')):960;if(parseInt(jQuery(this).find(' > ul > li').length%2)===0){data_width+=jQuery(this).find(' > ul > li').first().width();}
if(jQuery(this).parent().width()<parseInt(data_width)){var f=jQuery(this).find('li').first();var x_val=-(parseInt(((parseInt(jQuery(this).attr('data-min-width'))/jQuery(this).find('li').length)/2))-35);if(jQuery(this).hasClass('responsive')){var matrix=(jQuery(this).css("transform")).substr(7,(jQuery(this).css("transform")).length-8).split(', ');var last_size=matrix[4];}
jQuery(this).addClass('responsive');jQuery(this).css({'min-width':jQuery(this).attr('data-min-width')+'px','transform':'translateX('+x_val+'px)','-webkit-transform':'translateX('+x_val+'px)','-moz-transform':'translateX('+x_val+'px)','-ms-transform':'translateX('+x_val+'px)'});}else if(jQuery(this).hasClass('responsive')){jQuery(this).removeClass('responsive');jQuery(this).css({'transform':'translateX(0px)','-webkit-transform':'translateX(0px)','-moz-transform':'translateX(0px)','-ms-transform':'translateX(0px)'});}});}
function rockthemes_se_elem_clicked(elem){var that=elem.parents('li');var steps=that.parents('.azoom-steps');var start_class=steps.attr('class');if(steps.hasClass('connect-steps')){var this_i=that.parents('ul').find('li').index(that);var not_connected=false;for(var b=0;b<this_i;b++){if(!steps.find('li:eq('+b+')').hasClass('active')){not_connected=true;break;}}
for(var a=this_i+1;a<steps.find('li').length;a++){if(steps.find('li:eq('+a+')').hasClass('active')){not_connected=true;break;}}
if(not_connected){return;}}
that.toggleClass('active');if(that.hasClass('done')){that.removeClass('done');}
if(that.hasClass('active')){elem.css({'background-color':that.attr('data-step-color')});that.css({'background-color':that.attr('data-step-color')});that.find('.step-details-line').css({'background-color':that.attr('data-step-color')});if(that.index()%2===0){that.parents('.azoom-steps').addClass('azoom-steps-margin-bottom');}else{that.parents('.azoom-steps').addClass('azoom-steps-margin-top');}}else{elem.css({'background-color':''});that.css({'background-color':''});that.find('.step-details-line').css({'background-color':''});}
if(elem.parents('.azoom-steps').hasClass('jump-steps')){if(that.hasClass('active')){for(var i=0;i<that.parents('ul').find('li').index(that);i++){steps.find('li:eq('+i+')').find('.step-icon').css({'background-color':steps.find('li:eq('+i+')').attr('data-step-color')});steps.find('li:eq('+i+')').css({'background-color':steps.find('li:eq('+i+')').attr('data-step-color')});steps.find('li:eq('+i+')').find('.step-details-line').css({'background-color':steps.find('li:eq('+i+')').attr('data-step-color')});steps.find('li:eq('+i+')').addClass('active done');if(i%2===0){steps.addClass('azoom-steps-margin-bottom');}else{steps.addClass('azoom-steps-margin-top');}}}else{for(var t=that.parents('ul').find('li').index(that);t<steps.find('li').length;t++){steps.find('li:eq('+t+')').removeClass('active done');steps.find('li:eq('+t+')').find('.step-icon').css({'background-color':''});steps.find('li:eq('+t+')').css({'background-color':''});steps.find('li:eq('+t+')').find('.step-details-line').css({'background-color':''});}}}else{if(that.prev().length){that.prev().addClass('done');}}
if(!that.parents('.azoom-steps').find('.active').length){that.parents('.azoom-steps').removeClass('azoom-steps-margin-top azoom-steps-margin-bottom');}}
function rockthemes_ae_buttons(){jQuery('.button[data-button-js-colors="true"]').each(function(){var that=jQuery(this);that.on('mouseenter',function(){var btn=jQuery(this);var bg_hover=btn.attr('data-bg_color_hover');var text_hover=btn.attr('data-text_color_hover');var border_hover=btn.attr('data-border_color_hover');if(btn.attr("data-bg-disabled")&&btn.attr("data-bg-disabled")=="true"){that.css({'border-color':border_hover,'color':text_hover,'background':bg_hover});}else if(btn.hasClass('button-border-bottom')){that.css({'background':bg_hover,'box-shadow':'0px 3px 0px '+border_hover,'-webkit-box-shadow':'0px 3px 0px '+border_hover,'-moz-box-shadow':'0px 3px 0px '+border_hover,'color':text_hover});}else{that.css({'background':bg_hover,'color':text_hover});}});that.on('mouseleave',function(){var btn=jQuery(this);var bg_default=btn.attr("data-bg_color_default");var text_default=btn.attr("data-text_color_default");var border_color=btn.attr('data-border_color');if(btn.attr("data-bg-disabled")&&btn.attr("data-bg-disabled")=="true"){that.css({'border-color':border_color,'color':text_default,'background':'none'});}else if(btn.hasClass('button-border-bottom')){that.css({'background':bg_default,'box-shadow':'0px 6px 0px '+border_color,'-webkit-box-shadow':'0px 6px 0px '+border_color,'-moz-box-shadow':'0px 6px 0px '+border_color,'color':text_default});}else{that.css({'background':bg_default,'color':text_default});}});});jQuery(document).trigger('rockthemes:activate_lightbox');}
function rockthemes_ae_iconictext(){jQuery('.rock-iconictext-container').each(function(){var that=jQuery(this);if(that.hasClass('full-width-box')&&that.hasClass('top')){return;}
that.on('mouseenter',function(){var icon=jQuery(this).find('.rockicon-container');var bg_color=icon.attr('data-bg-color');var bg_hover_color=icon.attr('data-bg-hover-color');var icon_color=icon.attr('data-icon-color');var icon_hover_color=icon.attr('data-icon-hover-color');if(typeof icon.attr('data-box-fill')!='undefined'&&icon.attr('data-box-fill').indexOf('border')>-1){icon.stop(true,true).animate({"border-color":bg_hover_color,"color":icon_hover_color},180);}else if(icon.attr("data-bg-disabled")&&icon.attr("data-bg-disabled")=="true"){icon.stop(true,true).animate({"color":icon_hover_color},280);}else{icon.stop(true,true).animate({"backgroundColor":bg_hover_color,"color":icon_hover_color},180);}});that.on('mouseleave',function(){var icon=jQuery(this).find(".rockicon-container");var bg_color=icon.attr('data-bg-color');var bg_hover_color=icon.attr('data-bg-hover-color');var icon_color=icon.attr('data-icon-color');var icon_hover_color=icon.attr('data-icon-hover-color');if(typeof icon.attr('data-box-fill')!='undefined'&&icon.attr('data-box-fill').indexOf('border')>-1){icon.stop(true,true).animate({"border-color":bg_color,"color":icon_color},180);}else if(icon.attr("data-bg-disabled")&&icon.attr("data-bg-disabled")=="true"){icon.stop(true,true).animate({"color":icon_color},180);}else{icon.stop(true,true).animate({"backgroundColor":bg_color,"color":icon_color},180);}});});}
function rockthemes_ae_achievement(){jQuery('.rock-achievement').each(function(){var that=jQuery(this),that_id=that.attr('id')+'_number',achievement=jQuery('#'+that_id);;if(Modernizr.ismobile){achievement.removeClass('odometer');}
switch(that.data('mode')){case'static':if(Modernizr.ismobile){achievement.html(that.attr('data-value'));}else{that.appear();jQuery(document).on('appear','#'+that.attr('id'),function(){var u=new CountUp(that_id,0,that.attr('data-value'));u.start();jQuery(document).off('appear','#'+that.attr('id'));that.appearOff();});}
break;case'function_php':if(Modernizr.ismobile){achievement.html(that.attr('data-value'));}else{that.appear();jQuery(document).on('appear','#'+that.attr('id'),function(){var u=new CountUp(that_id,0,that.attr('data-value'));u.start();jQuery(document).off('appear','#'+that.attr('id'));that.appearOff();});}
break;case'function_js':if(!Modernizr.ismobile){that.appear();}
var fn=window[that.data('function_js')];if(typeof fn==='function'){var number=fn();if(Modernizr.ismobile){achievement.html(number);}else{jQuery(document).on('appear','#'+that.attr('id'),function(){var u=new CountUp(that_id,0,number);u.start();jQuery(document).off('appear','#'+that.attr('id'));that.appearOff();});}}
break;case'function_ajax':if(!Modernizr.ismobile){that.appear();}
var fn=that.data('function_ajax');var data={function_name:fn};if(Modernizr.ismobile){jQuery.post(rockthemes.ajaxurl,{action:'rockthemes_achievement_ajax',_ajax_nonce:rockthemes.nonces.achievement,data:data},function(data){if(data&&typeof data.number!='undefined'){achievement.html(data.number);}});}else{jQuery(document).on('appear','#'+that.attr('id'),function(){jQuery.post(rockthemes.ajaxurl,{action:'rockthemes_achievement_ajax',_ajax_nonce:rockthemes.nonces.achievement,data:data},function(data){if(data&&typeof data.number!='undefined'){var u=new CountUp(that_id,0,data.number);u.start();}});jQuery(document).off('appear','#'+that.attr('id'));that.appearOff();});}
break;default:if(Modernizr.ismobile){achievement.html(that.attr('data-value'));}else{that.appear();jQuery(document).on('appear','#'+that.attr('id'),function(){var u=new CountUp(that_id,0,that.attr('data-value'));u.start();jQuery(document).off('appear','#'+that.attr('id'));that.appearOff();});}
break;}});}
function rockthemes_ae_tabs(){jQuery('.rock-tabs-container').each(function(){var tab=jQuery(this);var hash_on=tab.hasClass('tab-hash-active')?true:false;var address_hash=location.hash;if(address_hash.indexOf("/")>-1){address_hash=false;}
if(typeof address_hash!='undefined'&&address_hash&&tab.find(address_hash).length){tab.find('.tabs-motion-content.active').css('display','none').removeClass('active');tab.find('.rock-tab-header.active').removeClass('active');var ref='#'+jQuery(address_hash).attr('data-tab-ref')+' .'+jQuery(address_hash).attr('data-content-ref');var tabRef=jQuery(address_hash).attr('data-tab-ref');jQuery(address_hash).addClass('active');jQuery(ref).css({'opacity':'0.1','display':'block'}).addClass('active');jQuery(ref).stop(true,true).animate({'opacity':'1'},280);}
tab.on('click touchend','.rock-tab-header',function(e){var ref='#'+jQuery(this).attr('data-tab-ref')+' .'+jQuery(this).attr('data-content-ref');var tabRef=jQuery(this).attr('data-tab-ref');jQuery('#'+tabRef+' .tabs-motion-content.active').css('display','none').removeClass('active');jQuery('#'+tabRef+' .rock-tab-header.active').removeClass('active');jQuery(this).addClass('active');jQuery(ref).css({'opacity':'0.1','display':'block'}).addClass('active');jQuery(ref).stop(true,true).animate({'opacity':'1'},280);if(hash_on){var this_hash=typeof jQuery(this).attr('id')!='undefined'&&jQuery(this).attr('id')?jQuery(this).attr('id'):false;if(!this_hash)return;setTimeout(function(){if(history.pushState){history.pushState(null,null,'#'+this_hash);}else{location.hash=this_hash;}},100);}});});}
function rockthemes_ae_toggles(){var icon_lib=(typeof rockthemes.fonts.use_icomoon!='undefined'&&rockthemes.fonts.use_icomoon==='true')?'icomoon':'fontawesome';var address_hash=location.hash;if(address_hash.indexOf("/")>-1){address_hash=false;}
jQuery('.rock-toggles-container').each(function(){var toggle=jQuery(this);var hash_on=toggle.hasClass('toggle-hash-active')?true:false;if(typeof address_hash!='undefined'&&address_hash&&toggle.find(address_hash).length){if(toggle.hasClass('multiple-mode')){toggle.find('.active .rock-toggle-content').slideToggle(280);toggle.find('.active .rock-toggle-header .main-toggle-icon').removeClass(icon_lib==='icomoon'?'icomoon icomoon-icon-arrow-up6':'fa fa-chevron-up');toggle.find('.active .rock-toggle-header .main-toggle-icon').addClass(icon_lib==='icomoon'?'icomoon icomoon-icon-arrow-down6':'fa fa-chevron-down');toggle.find('.active').removeClass('active');}
jQuery(address_hash).addClass('active');jQuery(address_hash).find('.rock-toggle-content').slideToggle(280);jQuery(address_hash).find('.rock-toggle-header .main-toggle-icon').removeClass(icon_lib==='icomoon'?'icomoon icomoon-icon-arrow-down6':'fa fa-chevron-down');jQuery(address_hash).find('.rock-toggle-header .main-toggle-icon').addClass(icon_lib==='icomoon'?'icomoon icomoon-icon-arrow-up6':'fa fa-chevron-up');}
toggle.on('click touchend','.rock-toggle-header',function(e){e.preventDefault();if(toggle.hasClass('multiple-mode')){if(jQuery(this).parent().hasClass('active')&&jQuery(this).parent().find('.rock-toggle-content').css('display')!='none')return;toggle.find('.active .rock-toggle-content').slideToggle(280);toggle.find('.active .rock-toggle-header .main-toggle-icon').removeClass(icon_lib==='icomoon'?'icomoon icomoon-icon-arrow-up6':'fa fa-chevron-up');toggle.find('.active .rock-toggle-header .main-toggle-icon').addClass(icon_lib==='icomoon'?'icomoon icomoon-icon-arrow-down6':'fa fa-chevron-down');toggle.find('.active').removeClass('active');jQuery(this).parent().addClass('active');jQuery(this).parent().find('.rock-toggle-content').slideToggle(280);jQuery(this).parent().find('.rock-toggle-header .main-toggle-icon').removeClass(icon_lib==='icomoon'?'icomoon icomoon-icon-arrow-down6':'fa fa-chevron-down');jQuery(this).parent().find('.rock-toggle-header .main-toggle-icon').addClass(icon_lib==='icomoon'?'icomoon icomoon-icon-arrow-up6':'fa fa-chevron-up');}else{if(jQuery(this).parent().hasClass('active')){jQuery(this).parent().removeClass('active');jQuery(this).parent().find('.rock-toggle-header .main-toggle-icon').removeClass(icon_lib==='icomoon'?'icomoon icomoon-icon-arrow-up6':'fa fa-chevron-up');jQuery(this).parent().find('.rock-toggle-header .main-toggle-icon').addClass(icon_lib==='icomoon'?'icomoon icomoon-icon-arrow-down6':'fa fa-chevron-down');}else{jQuery(this).parent().addClass('active');jQuery(this).parent().find('.rock-toggle-header .main-toggle-icon').removeClass(icon_lib==='icomoon'?'icomoon icomoon-icon-arrow-down6':'fa fa-chevron-down');jQuery(this).parent().find('.rock-toggle-header .main-toggle-icon').addClass(icon_lib==='icomoon'?'icomoon icomoon-icon-arrow-up6':'fa fa-chevron-up');}
jQuery(this).parent().find('.rock-toggle-content').slideToggle(280);}
if(hash_on){var this_hash=typeof jQuery(this).parent().attr('id')!='undefined'&&jQuery(this).parent().attr('id')?jQuery(this).parent().attr('id'):false;if(!this_hash)return;setTimeout(function(){if(history.pushState){history.pushState(null,null,'#'+this_hash);}else{location.hash=this_hash;}},480);}});});}
function rockthemes_activate_down_arrows(){if(jQuery('.rockthemes-before-header.intro-effect-slide').length){jQuery(document).on('rockthemes:intro_effect_canvas_resize',function(){jQuery('.rockthemes-before-header.intro-effect-slide').css('height','');if(jQuery('.rockthemes-before-header.intro-effect-slide').children().length){jQuery('.rockthemes-before-header.intro-effect-slide').css('height',jQuery('.rockthemes-before-header.intro-effect-slide').children().outerHeight()+'px');}else{jQuery('.rockthemes-before-header.intro-effect-slide').css('height',jQuery('.rockthemes-before-header.intro-effect-slide').outerHeight()+'px');}});jQuery('.rockthemes-before-header.intro-effect-slide').appear();jQuery('div[data-rsb-fullscreen="true"], section[data-rsb-fullscreen="true"]').each(function(){if(jQuery(this).find('.rockthemes-curvy-slider').length<1){jQuery(this).addClass('header');}});jQuery('.rockthemes-curvy-slider').addClass('header');jQuery(document).trigger('rockthemes:intro_effect_canvas_resize');var timeOut=null;jQuery(document).on('appear','.rockthemes-before-header.intro-effect-slide',function(e,that){if(that.hasClass('modify')&&!that.hasClass('modify-motion')&&parseInt(that.offset().top+that.outerHeight())-40>jQuery(window).scrollTop()){jQuery(document).trigger('rockthemes:scroll_events_disable');rockthemes_overlay_transparent_enable();that.addClass('modify-motion').removeClass('modify');jQuery('html,body').stop(true,true).delay(400).animate({scrollTop:parseInt((that.offset().top))},1100,function(){that.removeClass('modify-motion');rockthemes_overlay_transparent_disable();jQuery(document).trigger('rockthemes:sticky_menu_resize');jQuery(document).trigger('rockthemes:scroll_events_enable');});}});jQuery(document).on('disappear','.rockthemes-before-header.intro-effect-slide',function(e,that){if(that.hasClass('modify-motion')&&!that.is(':appeared')){that.removeClass('modify-motion');jQuery(document).trigger('rockthemes:sticky_menu_resize');}});}
jQuery(document).on('click touchend','.azoom-down-arrow-container',function(e){var that=jQuery(this).parents('.rockthemes-unique-grid');if(that.parents('.rockthemes-before-header').length){jQuery(document).trigger('rockthemes:scroll_events_disable');rockthemes_overlay_transparent_enable();}
var next_el=null;var found=false;next_el=that.nextAll('.rockthemes-unique-grid');jQuery('.rockthemes-unique-grid').each(function(i){if(found){next_el=jQuery(this);found=false;}
if(typeof jQuery(this).attr('id')!=='undefined'&&jQuery(this).attr('id')==that.attr('id')){found=true;}});var use_intro_effect=false;if(that.parents('.rockthemes-before-header').length){if(jQuery('.header-top-2').length){next_el=jQuery('.header-top-2');}else{if(jQuery('.sticky-header-wrapper').length){next_el=jQuery('.sticky-header-wrapper');}else{if(jQuery('.main-header-area').length){next_el=jQuery('.main-header-area');}}}
if(that.parents('.rockthemes-before-header').hasClass('intro-effect-slide')){var header_that=that.parents('.rockthemes-before-header');if(!header_that.hasClass('modify-motion')&&!header_that.hasClass('modify')){header_that.addClass('modify modify-motion');use_intro_effect=true;if(timeOut)clearTimeout(timeOut);timeOut=setTimeout(function(){if(header_that.hasClass('modify-motion')){header_that.removeClass('modify-motion');}
jQuery(document).trigger('rockthemes:sticky_menu_resize');},1400);}}}
setTimeout(function(){if(that.parents('.rockthemes-before-header').length){jQuery(document).trigger('rockthemes:scroll_events_enable');rockthemes_overlay_transparent_disable();}},1500);if(typeof next_el=='undefined'||!next_el||typeof next_el.offset()=='undefined'||!next_el.offset())return;var wp_nav_height=0;if(rockthemes.frontend_options.is_admin_bar_showing){wp_nav_height=jQuery('#wpadminbar').outerHeight();}
var scrollTopVal=(parseInt(next_el.offset().top)-parseInt(wp_nav_height));if(jQuery('.main-header-area').length&&jQuery('.main-header-area').offset().top<scrollTopVal&&scrollTopVal-rockthemes.menu.sticky_height>0){scrollTopVal=scrollTopVal-parseInt(rockthemes.menu.sticky_height);}
jQuery('html, body').animate({'scrollTop':scrollTopVal},1000,function(){var this_hash=typeof next_el.attr('id')!='undefined'&&next_el.attr('id')?next_el.attr('id'):false;if(!this_hash)return;setTimeout(function(){if(history.pushState){history.pushState(null,null,'#'+this_hash);}
else{location.hash=this_hash;}},100);});});}
function rockthemes_overlay_transparent_enable(){if(jQuery('#azoom_overlay_transparent').length)return;jQuery('body').append(jQuery('<div id="azoom_overlay_transparent" class="azoom-fixed-overlay-transparent"></div>'));}
function rockthemes_overlay_transparent_disable(){if(jQuery('#azoom_overlay_transparent').length){jQuery('#azoom_overlay_transparent').remove();}}
function rockthemes_activate_lightbox(){jQuery(document).on('rockthemes:activate_lightbox',function(){jQuery('a[data-rel^="prettyPhoto"]').prettyPhoto({hook:'data-rel',overlay_gallery_max:9999});});jQuery(document).trigger('rockthemes:activate_lightbox');}
function rockthemes_activate_cat_filter_ajax(){if(jQuery('.ajax-category-navigation').length<1)return;var animate_active=true;var anim_obj={_out:'fadeOut',_in:'fadeIn'};jQuery('.ajax-category-navigation > ul > li').click(function(){var that=jQuery(this).parents('.ajax-category-navigation');var _this=jQuery(this);if(that.hasClass('loading'))return;that.addClass('loading');that.find('li a.active').removeClass('active');jQuery(this).find(' > a').addClass('active');var de=jQuery(this).parents('.ajax-category-navigation').find(".data-cat-details");var ds=de.data();de.attr('data-last_load','0');ds.last_load=0;ds.category=_this.attr('data-slug-holder');var elem_selector=jQuery('#'+ds.id_ref).parents('.azoom-portfolio-container').hasClass('list')?'div':'li';jQuery.post(rockthemes.ajaxurl,{data:ds,_ajax_nonce:rockthemes.nonces.portfolio,action:'rockthemes_portfolio_load_more'},function(data){if(!data||!data.body){that.removeClass('loading');return;}
var new_elems=jQuery(data.body);var holder=jQuery('#'+ds.id_ref);holder.find(' > '+elem_selector).remove();if(animate_active){new_elems.addClass('azoom-animate-queue');}
holder.append(new_elems);if(typeof ds.masonry!='undefined'&&(ds.masonry||ds.masonry=='true')){var mo;holder.masonry('appended',new_elems);rockthemes_init_single_masonry(holder,mo,true,true);}else if(animate_active){rockthemes_animate_queue(holder,'fadeIn');}
if(that.parents('.azoom-portfolio-container').find('.load-more').length){var lmb=that.parents('.azoom-portfolio-container').find('.load-more');var lmd=lmb.parent().find('.data-details');lmd.attr('data-last_load','0');lmd.attr('data-category',ds.category);if(!data.disable||data.disable!=='yes'){if(lmb.hasClass('hide'))lmb.removeClass('hide');}else if(data.disable&&data.disable==='yes'){lmb.addClass('hide');}}
jQuery(document).trigger('rockthemes:activate_lightbox');that.removeClass('loading');return;});});}
function rockthemes_activate_load_more(){if(jQuery('.load-more').length<1)return;var animate_active=true;var anim_obj={_out:'fadeOut',_in:'fadeIn'};jQuery('.load-more').click(function(){var that=jQuery(this);if(that.hasClass('loading'))return;that.addClass('loading');var de=jQuery(this).parent().find('.data-details');var ds=de.data();var ll=parseInt(parseInt(de.attr('data-last_load'))+parseInt(ds.load_amount));de.attr('data-last_load',ll);ds.last_load=ll;ds.category=de.attr('data-category');if(ds.archive_load_more==='true'||ds.archive_load_more===true){var alme=that.parent().find('.archive_load_more').find('.load-more-link').first();var alme_link=alme.attr('href');alme.remove();var data=Object();if(!that.parent().find('.archive_load_more').find('.load-more-link').length){data.disable='yes';}
var alme_id='#'+that.attr('data-id_ref');jQuery('<div>').load(alme_link+' '+alme_id,function(){rockthemes_portfolio_ajax_callback_add(that,ds,data,jQuery(jQuery(this).find(alme_id)));});return;}
jQuery.post(rockthemes.ajaxurl,{data:ds,_ajax_nonce:rockthemes.nonces.portfolio,action:'rockthemes_portfolio_load_more'},function(data){if(!data||!data.body){that.removeClass('loading');return;}
var new_elems=jQuery(data.body);rockthemes_portfolio_ajax_callback_add(that,ds,data,new_elems);});});}
function rockthemes_portfolio_ajax_callback_add(that,ds,data,new_elems){var holder=jQuery('#'+that.attr('data-id_ref'));var animate_active=true;if(typeof ds.masonry!='undefined'&&(ds.masonry||ds.masonry=='true')){holder.append(new_elems);holder.imagesLoaded(function(){holder.css({'width':''});holder.parent().css({'width':''});var col_size=rockthemes_masonry_get_col_size(holder);new_elems.filter('.azoom-default-item:not(.widetall):not(.wide)').css('width',(col_size.px)+'px');new_elems.filter('.widetall, .wide').css('width',(col_size.px*2)+'px');if(jQuery(window).width()<=parseInt(col_size.px*2)-30){new_elems.filter('.widetall, .wide').css('width','');new_elems.filter('.azoom-default-item:not(.widetall):not(.wide)').css('width','');}
holder.masonry('appended',new_elems);rockthemes_animate_queue(holder,'fadeIn');jQuery(document).trigger('rockthemes:activate_lightbox');that.removeClass('loading');if(data.disable&&data.disable==='yes'){that.addClass('hide');}});return;}else if(animate_active){if(new_elems.find('img').length){new_elems.imagesLoaded(function(){holder.append(new_elems);rockthemes_animate_queue(holder,'fadeIn');jQuery(document).trigger('rockthemes:activate_lightbox');that.removeClass('loading');if(data.disable&&data.disable==='yes'){that.addClass('hide');}
return;});}else{holder.append(new_elems);rockthemes_animate_queue(holder,'fadeIn');jQuery(document).trigger('rockthemes:activate_lightbox');that.removeClass('loading');if(data.disable&&data.disable==='yes'){that.addClass('hide');}
return;}}}
function rockthemes_activate_portfolio(){jQuery('.azoom-portfolio-container').each(function(){var that=jQuery(this);if(!that.hasClass('masonry-active')&&!that.find('.swiper-container').length){that.imagesLoaded(function(){rockthemes_animate_queue(that);});}});if(jQuery('.swiper-single-element').length){jQuery('.swiper-single-element').each(function(){if(!jQuery(this).parents('.masonry-active').length&&!jQuery(this).parents('.azoom-portfolio').length){var jt=jQuery(this);var side_arrows=jQuery(this).find('.side-arrow-left').length?true:false;rockthemes_activate_swiper(jQuery(this),side_arrows);jQuery(window).smartresize(function(){rockthemes_activate_swiper(jt,side_arrows);});}});};if(jQuery('.swiper-navigation-active').length){jQuery('.swiper-navigation-active').each(function(){var that=jQuery(this);if(!that.find('.rockthemes-masonry').length){rockthemes_activate_swiper(that);jQuery(window).smartresize(function(){rockthemes_activate_swiper(that);});}});jQuery(document).on('rockthemes:masonry_single_active',function(e,mas){var all_ready=true;jQuery('#'+mas).find('.azoom-default-item').each(function(){if(!jQuery(this).hasClass('masonry-brick')){all_ready=false;}});if(all_ready){rockthemes_activate_swiper(jQuery('#'+mas));}});}
if(jQuery('.rockthemes-masonry').length<1){return;}
jQuery('.rockthemes-masonry').each(function(){var that=jQuery(this);var selector=that.attr('data-masonry-elem');if(typeof selector=='undefined')return;var mo;rockthemes_init_single_masonry(that,mo,true,true);});jQuery(window).smartresize(function(){jQuery('.rockthemes-masonry').each(function(){var that=jQuery(this);var selector=that.attr('data-masonry-elem');if(typeof selector=='undefined')return;var mo;rockthemes_init_single_masonry(that,mo);});});}
function rockthemes_activate_swiper(that,side_arrows){var this_id='';if(typeof that.attr('id')!=='undefined'){this_id='#'+that.attr('id')+' ';}else if(typeof that.parent().attr('id')!=='undefined'){this_id='#'+that.parent().attr('id')+' ';}
if(that.hasClass('azoom-portfolio-container')){if(!that.hasClass('wall-mode-active')){that.css('width',(parseInt(that.width())+20)+'px');}else{that.css('width',(parseInt(that.width()))+'px');}}
if(that.hasClass('swiper-ready')){if(that.hasClass('swiper-single-element')||!that.find('.rockthemes-masonry').length){that.find('.swiper-container').find('.swiper-slide').css({'height':'','width':''});that.find('.swiper-wrapper').css({'height':'','width':'100%'});}
that.find('.swiper-container').data('swiper').resizeFix(true);if(that.parents('.rockthemes-unique-grid').length){if(that.parents('.rockthemes-unique-grid[data-rsb-fullscreen="true"]').length){jQuery(document).trigger('rockthemes:resize_rsb_fullscreen_grid',[that.parents('.rockthemes-unique-grid[data-rsb-fullscreen="true"]')]);}else if(that.parents('.rockthemes-video-bg').length){rockthemes_fullscreen_bg_video(that.parents('.rockthemes-video-bg'));}else if(that.parents('.rockthemes-parallax').length){rockthemes_parallax_bg_image(that.parents('.rockthemes-parallax'));}else if(that.parents('.rockthemes-static-bg-image').length){rockthemes_static_bg_image(that.parents('.rockthemes-static-bg-image'));}}
return;}
var swiper;if(!that.hasClass('swiper-ready')){var swiper_details_obj={mode:'horizontal',calculateHeight:true,roundLengths:true,grabCursor:false,autoResize:false,resizeReInit:false,moveStartThreshold:1,touchRatio:1,longSwipesRatio:0.3,loop:false,pagination:(typeof side_arrows!=='undefined'&&side_arrows==true)?'':this_id+'.swiper-pagination',centeredSlides:true,keyboardControl:true,onFirstInit:function(){if(that.find('.azoom-animate-queue').length){rockthemes_animate_queue(that);}
that.addClass('swiper-ready');if(that.parents('.rockthemes-unique-grid').length){setTimeout(function(){if(that.parents('.rockthemes-unique-grid[data-rsb-fullscreen="true"]').length){jQuery(document).trigger('rockthemes:resize_rsb_fullscreen_grid',[that.parents('.rockthemes-unique-grid[data-rsb-fullscreen="true"]')]);}else if(that.parents('.rockthemes-video-bg').length){rockthemes_fullscreen_bg_video(that.parents('.rockthemes-video-bg'));}else if(that.parents('.rockthemes-parallax').length){rockthemes_parallax_bg_image(that.parents('.rockthemes-parallax'));}else if(that.parents('.rockthemes-static-bg-image').length){rockthemes_static_bg_image(that.parents('.rockthemes-static-bg-image'));}},50);}}}
if(!Modernizr.ismobile){if(typeof that.attr('data-auto-play')!=='undefined'&&that.attr('data-auto-play')==='true'){var auto_play_time=typeof that.attr('data-auto-play-time')!=='undefined'&&that.attr('data-auto-play-time')?that.attr('data-auto-play-time'):5000;swiper_details_obj.autoplay=parseInt(auto_play_time);swiper_details_obj.speed=1000;}}
if(typeof that.attr('data-use-pagination')!=='undefined'&&that.attr('data-use-pagination')==='true'){swiper_details_obj.pagination=this_id+' .swiper-pagination';}
swiper=that.find('.swiper-container').swiper(swiper_details_obj);if(typeof side_arrows!=='undefined'&&side_arrows==true){if(typeof that.attr('data-use-pagination')!=='undefined'&&that.attr('data-use-pagination')==='true'){}else{that.find('.swiper-pagination').remove();}}
that.on('click touchend','.swiper-pagination .swiper-pagination-switch',function(){swiper.swipeTo(jQuery(this).index());});if(that.hasClass('azoom-portfolio-container')||that.parents('.azoom-portfolio-container').length){var main=that.hasClass('azoom-portfolio-container')?that:that.parents('.azoom-portfolio-container');main.on('click touchend','.swiper-arrow-left',function(){swiper.swipePrev();});main.on('click touchend','.swiper-arrow-right',function(){swiper.swipeNext();});}
if(typeof side_arrows!=='undefined'&&side_arrows==true){that.find('.side-arrow-left').click(function(e){e.preventDefault()
swiper.swipePrev();});that.find('.side-arrow-right').click(function(e){e.preventDefault()
swiper.swipeNext();});}
jQuery(document).trigger('rockthemes:activate_lightbox');}}
function rockthemes_init_single_masonry(that,mo,load_images,animate){animate=(typeof animate=='undefined'||!animate)?false:true;that.css({'height':''});that.parent().css({'width':'auto','position':'relative','display':'block'});if(that.parents('.swiper-slide').length){that.find('.azoom-animate-queue').removeClass('azoom-animate-queue');that.parent().css('width','100%');}
var upto_class=['.azoom-portfolio-container','.swiper-slide','.swiper-wrapper','.azoom-portfolio-container'];for(var u=0;u<upto_class.length;u++){if(that.parents(upto_class[u]).length){that.parents(upto_class[u]).css({'width':'100%'});}}
var col_size=rockthemes_masonry_get_col_size(that);that.parent().css('width',col_size.cd);that.find('.azoom-default-item:not(.widetall):not(.wide)').css('width',(col_size.px)+'px');that.find('.widetall, .wide').css('width',(col_size.px*2)+'px');if(jQuery(window).width()<=parseInt(col_size.px*2)-30){that.find('.widetall, .wide').css('width','');that.find('.azoom-default-item:not(.widetall):not(.wide)').css('width','');}
var selector=that.attr('data-masonry-elem');if(that.find('.masonry-brick').length){}
var anim=false;if(typeof load_images!='undefined'&&load_images){that.imagesLoaded(function(){mo=that.masonry({itemSelector:'.'+selector,transitionDuration:false,columnWidth:(col_size.px)});jQuery(document).trigger('rockthemes:masonry_single_active',[that.parents('.azoom-portfolio-container').attr('id')]);if(animate){rockthemes_animate_queue(that,anim);}});}else{mo=that.masonry({itemSelector:'.'+selector,transitionDuration:false,columnWidth:(col_size.px)});jQuery(document).trigger('rockthemes:masonry_single_active',[that.parents('.azoom-portfolio-container').attr('id')]);if(animate){rockthemes_animate_queue(that,anim);}}}
function rockthemes_animate_queue(that,animation){if(typeof that=='undefined')return;if(typeof animation=='undefined'||!animation||animation=='')animation='fadeIn';that.find('.azoom-default-item.azoom-animate-queue').each(function(i){var ref_elem=jQuery(this);if(jQuery(this).parents('.swiper-slide').length){jQuery(this).addClass('animated '+animation).removeClass('azoom-animate-queue');}else{setTimeout(function(){ref_elem.addClass('animated '+animation).removeClass('azoom-animate-queue');},parseInt(180*i));}});}
function rockthemes_masonry_get_col_size(that){if(typeof that=='undefined')return 540;var tc=4;var ec=that.attr('class').split(' ');for(var i=0;i<ec.length;i++){if(ec[i]==''){ec.splice(i,1);}}
tc=rockthemes_check_class_names(ec,that);return{px:((that.outerWidth())/tc),fluid:(100/tc),cols:tc,cd:(that.outerWidth())};}
function rockthemes_check_class_names(ar,that){if(typeof ar=='undefined')return 4;var w=jQuery(window);var class_name='';if(w.width()>parseInt(rockthemes.grid.block.medium)){class_name='large-block-grid-';}else if(w.width()>=parseInt(rockthemes.grid.block.small)){class_name='medium-block-grid-';}else{class_name='small-block-grid-';}
var col=4;for(var i=0;i<ar.length;i++){if(ar[i].indexOf(class_name)>-1){col=parseInt(ar[i].trim().replace(class_name,''));}}
return col;}
function rockthemes_activate_hover(){var hover_elems=['.azoom-default-item .rockthemes-hover','.single-box-element','.entry-thumbnail','.rockthemes-wp-gallery li'];var hover_classes='hover-active-medium hover-active hover-active-small';for(var i=0;i<hover_elems.length;i++){var that=hover_elems[i];jQuery(document).on('mouseenter',that,function(){rockthemes_hover_vertical_center(jQuery(this));jQuery(this).addClass(rockthemes_get_hover_active_class(jQuery(this)));}).on('touchstart',that,function(e){jQuery(this).attr('data-touch-start-y',e.originalEvent.touches[0].pageY);}).on('touchend',that,function(e){var tend=e.originalEvent.changedTouches[0].pageY;if(typeof jQuery(this).attr('data-touch-start-y')!=='undefined'&&Math.abs(parseInt(jQuery(this).attr('data-touch-start-y'))-tend)<5){jQuery(this).addClass(rockthemes_get_hover_active_class(jQuery(this)));jQuery(this).attr('data-touch-start-y',tend);}}).on('mouseleave',that,function(){jQuery(this).removeClass(rockthemes_get_hover_active_class(jQuery(this)));}).on('click','.hover-mobile-back',function(){}).on('touchend',that+' .hover-mobile-back',{that:that},function(e){e.originalEvent.preventDefault();e.stopPropagation();var el=jQuery(this).parents(e.data.that);el.removeClass(rockthemes_get_hover_active_class(el));el.attr('data-touch-start-y',e.originalEvent.changedTouches[0].pageY);}).on('touchend','.small-hover-elem',{that:that},function(e){e.preventDefault();e.stopPropagation();if(typeof jQuery(this).attr('data-link_url')!='undefined'){window.location=jQuery(this).attr('data-link_url');}
var el=jQuery(this).parents(that);el.removeClass(rockthemes_get_hover_active_class(el));el.attr('data-touch-start-y',e.originalEvent.changedTouches[0].pageY);});}}
function rockthemes_hover_vertical_center(res){res.css('padding-top','');var hi=res.find('.hover-item-details-container'),th=0;hi.children().each(function(){th=th+parseInt(jQuery(this).outerHeight(true));});th=parseInt((hi.outerHeight()-th)/2)-19;if(th<19)th=19;hi.css('padding-top',th+'px');}
function rockthemes_get_hover_active_class(that){if(that.find('.rockthemes-hover').length){that=that.find('.rockthemes-hover');}
var large_width=parseInt(rockthemes.hover_details.hover_width_min_large);var large_height=parseInt(rockthemes.hover_details.hover_height_min_large);var medium_width=parseInt(rockthemes.hover_details.hover_width_min_medium);var medium_height=parseInt(rockthemes.hover_details.hover_height_min_medium);if(that.find('.woo-grid-hover').length){large_height+=75;}
if(that.parents('.dunder_image').length){medium_height=140;}
var class_name;if((that.width()*that.height())>=(large_width*large_height)&&that.height()>large_height){class_name='hover-active';}else if((that.width()*that.height())>=(medium_width*medium_height)&&that.width()>medium_width&&that.height()>medium_height){class_name='hover-active-medium hover-active';}else{class_name='hover-active-small';}
return class_name;}
function rockthemes_responsive_flash(){if(jQuery('object[type="application/x-shockwave-flash"]').length<1)return;var flash=[],rebuild=setTimeout(function(){return;},10);jQuery('object[type="application/x-shockwave-flash"]').each(function(){flash.push({element:jQuery(this),height:jQuery(this).attr('height'),width:jQuery(this).attr('width')});});jQuery(window).smartresize(function(){clearTimeout(rebuild);rebuild=setTimeout(resize_flash,100);});function resize_flash(){if(flash.length<1)return;jQuery.each(flash,function(i,value){flash[i].element.height(flash[i].element.width()/flash[i].width*flash[i].height);});}
resize_flash();}
function rockthemes_check_bg_videos(){if(Modernizr.touch){jQuery('.rockthemes-video-bg').each(function(){var that=jQuery(this);var img=that.attr('data-video_bg_fallback_url');if(typeof img==='undefined'||img===''){if(that.find('.azoom-iframe-container').length){that.find('.azoom-iframe-container').remove();}
if(that.find('video').length){that.find('video').remove();}
return;}
if(!that.find('iframe').length){if(typeof that.attr('data-rsb-fullscreen')!='undefined'&&that.attr('data-rsb-fullscreen')=='true'){return;}
var ve=that.find('video'),th=that.outerHeight(),tw=parseInt(ve.width()*th/ve.height()),ml=-parseInt((tw-jQuery(window).width())/2);that.find('video').css({'min-height':th+'px','width':tw+'px','margin-left':ml+'px'});}else{that.find('iframe').before('<img src="'+img+'" alt="Video" />');that.find('.azoom-iframe-container').css({'padding':'0px','height':'auto','top':''});that.find('iframe').remove();}});return;}
jQuery('.azoom-iframe-container.vimeo-video.use-api > iframe').each(function(){var iframe=jQuery(this)[0];Froogaloop(iframe).addEvent('ready',rockthemes_vimeo_ready);});function rockthemes_vimeo_ready(player_id){if(jQuery('#'+player_id).length&&jQuery('#'+player_id).parents('.not-visible').length){jQuery('#'+player_id).parents('.not-visible').removeClass('not-visible');}
var player=Froogaloop(player_id);player.api('setVolume',0);}
if(jQuery('.azoom-iframe-container.youtube-video.use-api .youtube-video-iframe-holder').length){var tag=document.createElement('script');var protocol=window.location.protocol=='https:'?'https':'http';tag.src=protocol+'://www.youtube.com/iframe_api';var firstScriptTag=document.getElementsByTagName('script')[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag);}}
function onYouTubeIframeAPIReady(){jQuery('.azoom-iframe-container.youtube-video.use-api .youtube-video-iframe-holder').each(function(){var hid=jQuery(this).attr('id');var yid=jQuery(this).parents('.azoom-iframe-container').attr('data-youtube-id');var player=new YT.Player(hid,{playerVars:{'autoplay':1,'loop':1,'playlist':yid,'modestbranding':1,'controls':0,'showinfo':0,'rel':0,'wmode':'transparent'},videoId:yid,events:{'onReady':rockthemes_youtube_onPlayerReady,}});});}
function rockthemes_youtube_onPlayerReady(event){event.target.mute();rockthemes_check_queue_videos();}
function rockthemes_get_font_name(font_family){font_family=font_family.toString();var font_name='';if(font_family.indexOf("'")>-1){font_name=font_family.match(/\'.*?\'/i);if(!font_name[0]){return'';}
font_name=font_name[0].split("'").join("");}else if(font_family.indexOf('"')>-1){font_name=font_family.match(/\".*?\"/i);if(!font_name[0]){return'';}
font_name=font_name[0].split('"').join('');}else{return'';}
return font_name;}
function rockthemes_fullscreen_elements(){if(!jQuery('.rockthemes-before-header.intro-effect-slide div[data-rsb-fullscreen="true"], .rockthemes-before-header.intro-effect-slide section[data-rsb-fullscreen="true"]').length){jQuery('.rockthemes-before-header.intro-effect-slide').removeClass('intro-effect-slide');}
var clear_classes=['.rockthemes-before-header.intro-effect-slide','.rockthemes-unique-grid','.static-bg-mask-class','.bg-image-overlay'];for(var s=0;s<clear_classes.length;s++){var del_style=jQuery(clear_classes[s]);if(del_style.length){del_style.css({'min-height':'','height':''});}
del_style=null;}
jQuery('div[data-rsb-fullscreen="true"], section[data-rsb-fullscreen="true"]').each(function(){var that=jQuery(this);rockthemes_rsb_fullscreen(that);});jQuery(document).on('rockthemes:resize_rsb_fullscreen_grid',function(e,elem){rockthemes_rsb_fullscreen(elem);if(elem.hasClass('.rockthemes-video-bg')){rockthemes_fullscreen_bg_video(elem);}
if(elem.hasClass('.rockthemes-parallax')){rockthemes_parallax_bg_image(elem);}
if(elem.hasClass('.rockthemes-static-bg-image')){rockthemes_static_bg_image(elem);}});jQuery('.rockthemes-video-bg[data-rsb-fullscreen="true"]').each(function(){var that=jQuery(this);var w=jQuery(window);if(jQuery(this).find('iframe').length<1&&jQuery(this).find('video').length<1){rockthemes.init_queue.fullscreen_bg_videos.push(that);return;}
rockthemes_fullscreen_bg_video(that);});jQuery('.rockthemes-unique-grid.rockthemes-parallax').each(function(){rockthemes_parallax_bg_image(jQuery(this));});jQuery('.rockthemes-unique-grid.rockthemes-static-bg-image').each(function(){rockthemes_static_bg_image(jQuery(this));});}
function rockthemes_rsb_fullscreen(that){var w=jQuery(window),m=jQuery('#main-container').length?jQuery('#main-container'):jQuery('body');that.css({'min-height':'','height':''});var that_height=that.outerHeight();var e_height=(w.height()>that_height)?w.height():'auto';if(jQuery(this).find('.rockthemes-curvy-slider').length&&m.width()<800&&w.height()<800){that.css({'width':'100%','height':'auto'});}else{that.css({'width':m.width(),'min-height':e_height});}}
function rockthemes_static_bg_image(that){var tile=false;if(that.find('.static-bg-mask-class').length<1){if(that.hasClass("rockthemes-fullwidth-colored"))that.removeClass("rockthemes-fullwidth-colored").attr("style","");if(that.attr('data-image-tile')&&that.attr('data-image-tile')==='tile'){tile=true;}
var vertical_space=that.attr('data-padding')!==''?that.attr('data-padding'):'';var overlay_style=that.attr('data-overlay-color')!==''?that.attr('data-overlay-color'):'';var data_image=window.devicePixelRatio>=2&&typeof that.attr('data-static-bg-image-retina')!=='undefined'?that.attr('data-static-bg-image-retina'):that.attr('data-static-bg-image');var mask='<div class="static-bg-mask-class" style="background:url('+data_image+') '+(!tile?'no-repeat; background-size:100% auto;':'')+'">'+'<div class="bg-image-overlay  '+vertical_space+'" style="'+overlay_style+'"></div>'+'</div>';that.wrapInner(mask);that.css({'background-image':'','background-color':'','background-attachment':'','background-size':'','background-origin':'','background-clip':'','background-position':'','background-repeat':''});}
if(tile){return;}
var img={w:1920,h:1080};if(typeof that.attr('data-image-ratio')!='undefined'&&that.attr('data-image-ratio')){var img_r=that.attr('data-image-ratio').split('_');img.w=img_r[0];img.h=img_r[1];}
var mask_elem=that.find('.static-bg-mask-class');mask_elem.css('height','');mask_elem.find('.bg-image-overlay').css({'min-height':''});var con={w:that.width(),h:that.height()};var factor=Math.max(con.w/img.w,con.h/img.h);var mask_height=typeof that.attr("data-static-mask-height")!=='undefined'&&that.attr("data-static-mask-height")!==''?parseInt(that.attr("data-static-mask-height")):0;mask_height=Math.max(mask_height,that.height());mask_elem.find('.bg-image-overlay').css({'min-height':mask_height+'px'});mask_elem.css({'background-size':'cover','background-position':'0px 50%'});}
function rockthemes_parallax_bg_image(that){var parallax_model=typeof that.attr('data-parallax-model')!=='undefined'&&that.attr('data-parallax-model')!==''?that.attr('data-parallax-model'):'height_specific';if(Modernizr.ismobile||jQuery(window).width()>1920){parallax_model='height_specific';}
if(that.find('.parallax-mask-class').length<1){if(that.hasClass("rockthemes-fullwidth-colored"))that.removeClass("rockthemes-fullwidth-colored").attr("style","");var vertical_space=typeof that.attr('data-parallax-padding')!=='undefined'&&that.attr('data-parallax-padding')!==''?that.attr('data-parallax-padding'):'';var overlay_style=typeof that.attr('data-overlay-color')!=='undefined'&&that.attr('data-overlay-color')!==''?that.attr('data-overlay-color'):'';var data_image=window.devicePixelRatio>=2&&typeof that.attr('data-parallax-bg-image-retina')!=='undefined'?that.attr('data-parallax-bg-image-retina'):that.attr('data-parallax-bg-image');var mask='<div class="parallax-mask-class '+parallax_model+'" style="background-image:url('+data_image+') ; ">'+'<div class="bg-image-overlay '+vertical_space+'" style="'+overlay_style+'">'+'</div>'+'</div>';that.wrapInner(mask);that.css({'background-image':'','background-color':'','background-attachment':'','background-size':'','background-origin':'','background-clip':'','background-position':'','background-repeat':''});rockthemes_add_image_size_data(that.find('.parallax-mask-class'));if(!Modernizr.ismobile&&parallax_model==='advanced_parallax'&&jQuery(window).width()<=1440){that.find(".parallax-mask-class").parallax("50%",0.4);}}
var img={w:1920,h:1080};if(typeof that.attr('data-image-main-width')!=='undefined'&&typeof that.attr('data-image-min-height')!=='undefined'){img.w=parseInt(that.attr('data-image-main-width'));img.h=parseInt(that.attr('data-image-main-height'));}else if(typeof that.attr('data-image-ratio')!='undefined'&&that.attr('data-image-ratio')){var img_r=that.attr('data-image-ratio').split('_');img.w=img_r[0];img.h=img_r[1];}
var con={w:that.width(),h:jQuery(window).height()};var mask_elem=that.find('.parallax-mask-class');var factor=Math.max(con.w/img.w,con.h/img.h);var mask_height=typeof that.attr("data-parallax-mask-height")!=='undefined'&&that.attr("data-parallax-mask-height")!==''&&that.attr("data-parallax-mask-height")?parseInt(that.attr("data-parallax-mask-height")):0;mask_elem.css('height','');mask_elem.find('.bg-image-overlay').css({'min-height':''});if(Modernizr.ismobile){if(con.h<that.height()){factor=(Math.max(con.w/img.w,(that.height())/img.h));}}
mask_height=Math.max(mask_height,that.height());mask_elem.find('.bg-image-overlay').css({'min-height':mask_height+'px'});if(parallax_model!=='advanced_parallax'){}}
function rockthemes_add_image_size_data(that){var image_url=that.css('background-image'),image;image_url=image_url.match(/^url\("?(.+?)"?\)$/);if(typeof image_url!='undefined'&&jQuery.isArray(image_url)&&image_url[1]){image_url=image_url[1];image=new Image();jQuery(image).load(function(){that.attr('data-image-main-width',image.width);that.attr('data-image-main-height',image.height);image=null;});image.src=image_url;}}
function rockthemes_check_queue_videos(){for(var i=0;i<rockthemes.init_queue.fullscreen_bg_videos.length;i++){rockthemes_fullscreen_bg_video(rockthemes.init_queue.fullscreen_bg_videos[i]);}}
function rockthemes_fullscreen_bg_video(that){var w={width:function(){return jQuery(window).width();},height:function(){return(jQuery(window).height()>that.outerHeight()?jQuery(window).height():that.outerHeight())+15;}}
var v;var iframe_container=null;var user_ratio={w:16,h:9};if(typeof that.attr('data-rsb-ratio')!='undefined'&&that.attr('data-rsb-ratio')){var tem=that.attr('data-rsb-ratio').split('_');user_ratio={w:parseInt(tem[0]),h:parseInt(tem[1])};}
if(typeof that.attr('data-html5-video-ratio')!='undefined'&&that.attr('data-html5-video-ratio')){var sem=that.attr('data-html5-video-ratio').split('_');user_ratio={w:parseInt(sem[0]),h:parseInt(sem[1])};}
if(that.find('video').length){v=that.find('video');if(typeof that.attr('data-html5-video-ratio')!='undefined'&&that.attr('data-html5-video-ratio')){}else{v.on('loadedmetadata',function(){user_ratio.w=parseInt(v.width());user_ratio.h=parseInt(v.height()-4);that.attr('data-html5-video-ratio',user_ratio.w+'_'+user_ratio.h);});}}else{v=that.find('iframe');iframe_container=that.find('.azoom-iframe-container');}
var r=user_ratio.w/user_ratio.h;var wr=w.width()/w.height();if(wr>r){if(iframe_container){iframe_container.css({'width':w.width()+'px','height':parseInt(user_ratio.w*w.height()/user_ratio.h)+'px'});}else{v.css({'width':w.width()+'px','height':parseInt(user_ratio.w/user_ratio.h*w.height())+'px'});}}else{if(iframe_container){iframe_container.css({'width':parseInt(w.height()*user_ratio.w/user_ratio.h)+'px','height':w.height()+'px','top':'0px'});}else{v.css({'width':parseInt(w.height()*user_ratio.w/user_ratio.h)+'px','height':w.height()+'px','top':'0px'});}}
if(iframe_container){iframe_container.css({'left':'0px','top':'0px'});}else{v.css({'left':'0px','top':'0px'});}
var l_moved=false;if(v.width()>w.width()){l_moved=true;if(iframe_container){iframe_container.css('left','-'+(parseInt((v.width()-w.width())/2)-2)+'px');}else{v.css('left','-'+parseInt((v.width()-w.width())/2)+'px');}}
if(!l_moved&&iframe_container){iframe_container.css('left','-2px');}
if(v.height()>w.height()){if(iframe_container){iframe_container.css('top','-'+(parseInt((v.height()-(w.height()))/2))+'px');}else{v.css('top','-'+parseInt((v.height()-w.height())/2)+'px');}}
that.css({'width':w.width(),'height':w.height()});if(typeof v.attr('src')!='undefined'&&v.attr('src')&&v.attr('src').toString().indexOf('vimeo')>-1){if(typeof rockthemes.visibility_hidden_elements=='undefined'||!rockthemes.visibility_hidden_elements){rockthemes.visibility_hidden_elements=new Array();rockthemes.visibility_hidden_elements.push(iframe_container);}}
that.css({'visibility':'visible'});}
function rockthemes_menu_ajax_woocommerce_cart(){if(jQuery('.azoom-undermenu-mask').length<1)return;var underbox_menu_mask=jQuery('.azoom-undermenu-mask');var underbox_menu=jQuery('.azoom-undermenu-box');var is_box_active=false;var display_cart_ar=(typeof rockthemes.woocommerce.auto_display_cart_after_refresh!="undefined"&&rockthemes.woocommerce.auto_display_cart_after_refresh==true?true:false);var to_all_button_cover=jQuery('.undermenu-box-button-cover');var to_all_button=jQuery('.undermenu-box-button');var to_all_button_height=63+10;var cart_link_html='<div class="link-icon azoom-transition-fast">'+'<i class="icomoon icomoon-icon-next15"></i>'+'</div>';if(rockthemes.is_rtl=='rtl'){cart_link_html='<div class="link-icon azoom-transition-fast">'+'<i class="icomoon icomoon-icon-previous11"></i>'+'</div>';}
var cart_datas=[];var woo_initialized=false;var remove_classes='';for(var r=0;r<rockthemes.settings.undermenu_box_classes.length;r++){if(rockthemes.settings.undermenu_box_classes[r]!='woocommerce-cart-active'){remove_classes+=rockthemes.settings.undermenu_box_classes[r]+' ';}}
jQuery(document).on('click','.add_to_cart_button',function(){var product=null;if(jQuery(this).parents('.product:eq(0)').length){product=jQuery(this).parents('.product:eq(0)');}else if(jQuery(this).parents('.azoom-default-item').length){product=jQuery(this).parents('.azoom-default-item');}
if(product&&product.find('.added_icon').length<1){product.find('.grid-price').append(' <i class="icomoon icomoon-icon-checkmark animated bounceIn added_icon"></i>');}});var data_timer=setTimeout(data_timer_function,50);var data_timer_max_count=10,data_timer_current_count=0;function data_timer_function(){if(jQuery('.azoom-woocommerce-box .cart_list li').length>0&&typeof jQuery('.azoom-woocommerce-box .cart_list li').html()!="undefined"){clearTimeout(data_timer);if(!woo_initialized){init_woo_cart();}
get_cart_datas();}else{clearTimeout(data_timer);data_timer_current_count++;if(data_timer_current_count<data_timer_max_count){setTimeout(data_timer_function,50);}}}
function get_cart_datas(){if(jQuery('.azoom-woocommerce-box .cart_list li .ajax-cart-content a .text-overflow').length<1){cart_datas=[];return;}
var cart_item_html=jQuery('.azoom-woocommerce-box .cart_list li');cart_datas=[];cart_item_html.each(function(){var el=jQuery(this).find('.ajax-cart-content').length>0?jQuery(this).find('.ajax-cart-content'):jQuery(this);cart_datas.push({name:el.find('a .text-overflow').html(),quantity:el.find('.quantity').html(),link_url:el.find('a').not('.remove').attr('href')});});}
function return_new_item_in_cart(){if(cart_datas.length<=0)get_cart_datas();var el;var found=false;var cart_item_html=jQuery('.azoom-woocommerce-box-content .cart_list li');if(cart_datas.length>0&&cart_item_html.find('.ajax-cart-content').length){cart_item_html.each(function(){if(found)return;var that=jQuery(this).find('.ajax-cart-content');for(var s=0;s<cart_datas.length;s++){if(that.find('a .text-overflow').html().trim()==cart_datas[s].name.trim()&&that.find('a').not('.remove').attr('href').trim()==cart_datas[s].link_url.trim()&&that.find('.quantity').html().trim()!=cart_datas[s].quantity.trim()){el=that;found=true;return;}}});}
if(!found){el=jQuery('.azoom-woocommerce-cart-wrapper.azoom-woocommerce-box .azoom-woocommerce-box-content ul.cart_list li').last().find('.ajax-cart-content');}
get_cart_datas();return el;}
function update_woo_cart_contents(){if(!woo_initialized){init_woo_cart();}else{jQuery('.azoom-woocommerce-cart-wrapper.azoom-woocommerce-box .azoom-woocommerce-box-content ul.cart_list').addClass('large-block-grid-3 medium-block-grid-2 small-block-grid-1');jQuery('.azoom-woocommerce-cart-wrapper.azoom-woocommerce-box .azoom-woocommerce-box-content ul.cart_list > li').wrapInner('<div class="ajax-cart-content azoom-transition"></div>');jQuery('.azoom-woocommerce-cart-wrapper .azoom-woocommerce-box-content ul.cart_list li .ajax-cart-content').each(function(){var img=jQuery(this).find('a img');var text=jQuery(this).find('a').not('.remove').text();var span_el=jQuery(this).find('.quantity');jQuery(this).find('a').not('.remove').html(img).append('<span class="text-overflow">'+text+'</span>');jQuery(this).find('a').not('.remove').append(span_el).append(cart_link_html);});}
var last_item=return_new_item_in_cart();update_special_cart_icon_count();if(display_cart_ar){var delay_time=1000;if(!is_box_active){jQuery('.special-cart-container').trigger('click');delay_time+=600;}
last_item.addClass('ajax-cart-animate-border azoom-transition');setTimeout(function(){setTimeout(function(){if(is_box_active){jQuery('.special-cart-container').trigger('click');}},1500);last_item.removeClass('ajax-cart-animate-border');},delay_time);}}
function update_special_cart_icon_count(){var cart=jQuery('.special-cart-container .display-cart-count');var cart_con=jQuery('.special-cart-container');var new_val=cart_con.find('.new_value').clone();if(cart.find('.cart-current-count.old').length){}
cart.append(new_val.html());cart.find('.cart-current-count').first().addClass('old animated slideOutUpSmall');cart.find('.cart-current-count').last().addClass('animated bounceInUp');if(Modernizr.cssanimations){cart.find('.cart-current-count.old').on('animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd',function(){cart.find('.cart-current-count.old').remove();});}else{cart.find('.cart-current-count.old').remove();}}
function init_woo_cart(){jQuery('.azoom-woocommerce-cart-wrapper.azoom-woocommerce-box .azoom-woocommerce-box-content ul.cart_list').addClass('large-block-grid-3 medium-block-grid-2 small-block-grid-1');jQuery('.azoom-woocommerce-cart-wrapper.azoom-woocommerce-box .azoom-woocommerce-box-content ul.cart_list > li').wrapInner('<div class="ajax-cart-content azoom-transition"></div>');jQuery('.azoom-woocommerce-cart-wrapper .azoom-woocommerce-box-content ul.cart_list li .ajax-cart-content').each(function(){var img=jQuery(this).find('a img');var text=jQuery(this).find('a').not('.remove').text();var span_el=jQuery(this).find('.quantity');jQuery(this).find('a').not('.remove').html(img).append('<span class="text-overflow">'+text+'</span>');jQuery(this).find('a').not('.remove').append(span_el).append(cart_link_html);});woo_initialized=true;}
if(jQuery(window).width()>=800||jQuery(window).height()>=800){jQuery(document).on('added_to_cart',update_woo_cart_contents);}
if(jQuery('.mobile-cart-holder').length){jQuery(document).on('click','.mobile-cart-holder',function(e){if(jQuery(this).hasClass('disabled')){e.preventDefault();return;}
if(!woo_initialized){init_woo_cart();}
if(jQuery(window).width()>640){e.preventDefault();rockthemes_special_cart_motion();}});}
jQuery(document).on('click','.special-cart-container',function(e){if(jQuery(this).hasClass('disabled')){e.preventDefault();return;}
if(!woo_initialized){init_woo_cart();}
e.preventDefault();rockthemes_special_cart_motion();});function rockthemes_special_cart_motion(){is_box_active=underbox_menu_mask.hasClass('active woocommerce-cart-active')?true:false;var to_all_button_cover=jQuery('.undermenu-box-button-cover');if(!is_box_active){if(jQuery('.azoom-woocommerce-box-content li').length){to_all_button_cover.addClass('active');}else{to_all_button_cover.removeClass('active');}
underbox_menu_mask.removeClass(remove_classes);underbox_menu_mask.addClass('active woocommerce-cart-active');underbox_menu.addClass('animated slideInDownSmall');is_box_active=true;underbox_menu_mask.css({'height':underbox_menu.height()+to_all_button_height});}else{if(Modernizr.cssanimations){if(underbox_menu.height()+to_all_button_height<400){underbox_menu.removeClass('slideInDownSmall animated').addClass('animated slideOutUpSmall');}else{underbox_menu.removeClass('slideInDownSmall animated').addClass('animated slideOutUp');}
underbox_menu.on('animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd',remove_animation_classes);}else{remove_animation_classes();}}}
jQuery(document).on('click touchend','.close-search-icon',function(e){jQuery('.rockthemes-ajax-search-input').blur();if(Modernizr.cssanimations){if(underbox_menu.height()+to_all_button_height<400){underbox_menu.removeClass('slideInDownSmall animated').addClass('animated slideOutUpSmall');}else{underbox_menu.removeClass('slideInDownSmall animated').addClass('animated slideOutUp');}
underbox_menu.on('animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd',remove_animation_classes);}else{remove_animation_classes();}});function remove_animation_classes(){underbox_menu_mask.removeClass('active woocommerce-cart-active').css('height','');jQuery('.rockthemes-ajax-search-input').val('');underbox_menu.removeClass('animated slideOutUpSmall slideOutUp slideInDownSmall');underbox_menu.off('animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd',remove_animation_classes);to_all_button_cover.removeClass('active');is_box_active=false;}}
function rockthemes_menu_ajax_search(){var underbox_menu_mask=jQuery('.azoom-undermenu-mask');var underbox_menu=jQuery('.azoom-undermenu-box');var is_box_active=false;var results_holder=jQuery('.ajax-search-results');var to_all_button_cover=jQuery('.undermenu-box-button-cover');var to_all_button=jQuery('.search-results-button');var to_all_button_height=63+10;var remove_classes='';for(var r=0;r<rockthemes.settings.undermenu_box_classes.length;r++){if(rockthemes.settings.undermenu_box_classes[r]!='search-box-active'){remove_classes+=rockthemes.settings.undermenu_box_classes[r]+' ';}}
jQuery(document).on('click','.special-search-icon',function(e){e.preventDefault();is_box_active=underbox_menu_mask.hasClass('active search-box-active')?true:false;if(!is_box_active){if(results_holder.find('li').length){to_all_button_cover.addClass('active');}else{to_all_button_cover.removeClass('active');}
underbox_menu.on('animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd',search_box_animation_ended);underbox_menu_mask.removeClass(remove_classes);underbox_menu_mask.addClass('active search-box-active');underbox_menu.addClass('animated slideInDownSmall');underbox_menu_mask.css({'height':underbox_menu.height()+to_all_button_height});is_box_active=true;}else{jQuery('.rockthemes-ajax-search-input').blur();if(Modernizr.cssanimations){if(underbox_menu.height()+to_all_button_height<400){underbox_menu.removeClass('slideInDownSmall animated').addClass('animated slideOutUpSmall');}else{underbox_menu.removeClass('slideInDownSmall animated').addClass('animated slideOutUp');}
underbox_menu.on('animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd',remove_animation_classes);}else{remove_animation_classes();}}})
jQuery(document).on('click','.close-search-icon',function(e){jQuery('.rockthemes-ajax-search-input').blur();if(Modernizr.cssanimations){if(underbox_menu.height()+to_all_button_height<400){underbox_menu.removeClass('slideInDownSmall animated').addClass('animated slideOutUpSmall');}else{underbox_menu.removeClass('slideInDownSmall animated').addClass('animated slideOutUp');}
underbox_menu.on('animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd',remove_animation_classes);}else{remove_animation_classes();}});function remove_animation_classes(){underbox_menu_mask.removeClass('active search-box-active').css('height','');jQuery('.rockthemes-ajax-search-input').val('');results_holder.html('');underbox_menu.removeClass('animated slideOutUpSmall slideOutUp slideInDownSmall');underbox_menu.off('animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd',remove_animation_classes);to_all_button_cover.removeClass('active');is_box_active=false;}
function search_box_animation_ended(){underbox_menu.off('animationend webkitAnimationEnd oAnimationEnd MSAnimationEnd',search_box_animation_ended);jQuery('.rockthemes-ajax-search-input').focus();}
var keydown_timer;var search_text='';var searching_icon=jQuery('.ajax-loading-icon');jQuery(document).on('keydown','.rockthemes-ajax-search-input',function(e){clearTimeout(keydown_timer);keydown_timer=setTimeout(function(){search_text=jQuery('.rockthemes-ajax-search-input').val();to_all_button.attr('href',rockthemes.home_url+'/?s='+search_text);if(search_text!=''&&search_text.length>1){make_ajax_search(search_text);}},1080);});function make_ajax_search(text){searching_icon.parents('.azoom-ajax-search-wrapper').addClass('searching');jQuery.post(rockthemes.ajaxurl,{action:'rockthemes_ajax_search',_ajax_nonce:rockthemes.nonces.asearch,search_term:text},function(data){searching_icon.parents('.azoom-ajax-search-wrapper').removeClass('searching');results_holder.html(data);if(results_holder.find('li').length){to_all_button_cover.addClass('active');}
underbox_menu_mask.stop(true,true).animate({'height':underbox_menu.height()+to_all_button_height},600);});}}
jQuery(window).load(function(){if(rockthemes.frontend_options.display_inline_nav=='true'&&jQuery('#rockthemes-inline-nav').length){if(Modernizr.touch&&(jQuery(window).width()<=767||jQuery(window).height()<=800)){jQuery('#rockthemes-inline-nav').remove();}else{setTimeout(function(){rockthemes_inline_nav();},1500);}}
rockthemes_activate_gototop();rockthemes_activate_animations();rockthemes_button_link_inline_navigation();if(rockthemes.menu.enable_menu_hash_navigation=='true'){rockthemes_main_nav_inline_links();}
jQuery('.rockthemes-video-bg').each(function(){var that=jQuery(this);that.find('video[data-autoplay="true"]:in-viewport').do(function(){jQuery(this)[0].play();});jQuery(window).scroll(function(){that.find('video[data-autoplay="true"]:in-viewport').do(function(){jQuery(this)[0].play();});});});rockthemes_activate_portfolio();rockthemes_display_not_visible_elements();rockthemes_sticky_header_init();if(jQuery('.azoom-title-breadcrumbs.rockthemes-parallax').length&&Modernizr.ismobile){}
rockthemes_activate_lightbox();jQuery(document).trigger('rockthemes:mega_menu_resize');});function rockthemes_activate_gototop(){if(jQuery('#azoom-go-to-top').length<1)return;jQuery(window).scroll(function(){if(jQuery(this).scrollTop()>480){jQuery('#azoom-go-to-top').css({'opacity':'1','visibility':'visible'});}else{jQuery('#azoom-go-to-top').css({'opacity':'','visibility':''});}});jQuery('#azoom-go-to-top').click(function(){jQuery('body,html').animate({scrollTop:0},800);});}
function rockthemes_display_not_visible_elements(){if(typeof rockthemes.visibility_hidden_elements=='undefined'||!rockthemes.visibility_hidden_elements)return;var els=rockthemes.visibility_hidden_elements;for(var i=0;i<els.length;i++){els[i].css({'visibility':'visible'});if(els[i].hasClass('not-visible')){els[i].removeClass('not-visible');}}}
function rockthemes_button_link_inline_navigation(){jQuery('.rockthemes-inline-link').each(function(){var that=jQuery(this),this_hash=that.attr('href').replace(/.*?\#/,''),wp_nav_height=0,time=1000;if(rockthemes.frontend_options.is_admin_bar_showing){wp_nav_height=jQuery('#wpadminbar').outerHeight();}
that.click(function(e){e.preventDefault();if(jQuery('#'+this_hash).length<1)return;var top_val=jQuery('#'+this_hash).offset().top+wp_nav_height;top_val=top_val-parseInt(rockthemes.menu.sticky_height);jQuery(document).trigger('rockthemes:scroll_events_disable');jQuery('html, body').animate({'scrollTop':top_val},time,'easeInOutQuart',function(){setTimeout(function(){if(history.pushState){history.pushState(null,null,'#'+this_hash);}
else{location.hash=this_hash;}},100);jQuery(document).trigger('rockthemes:scroll_events_enable');});});});}
function rockthemes_main_nav_inline_links(){var rtm_nav=jQuery('#rtm-navigation');var hash_links=jQuery('#rtm-navigation a, #rnmm li > a').filter(function(){return typeof jQuery(this).attr('href')!='undefined'&&jQuery(this).attr('href').indexOf('#')>-1;});rockthemes_main_nav_inline_nav_events(hash_links);if(hash_links.length<1)return;var init_ended=false;var wp_nav_height=0;if(rockthemes.frontend_options.is_admin_bar_showing){wp_nav_height=jQuery('#wpadminbar').outerHeight();}
var moving=false;hash_links.click(function(e){moving=true;var this_hash=jQuery(this).attr('href').replace(/.*?\#/,'');if(jQuery(this).attr('href').charAt(0)=='#'||jQuery(this).attr('href').split('#')[0]==window.location.href.split('#')[0]){e.preventDefault();}else{return;}
var time=1000;if(rtm_nav.find('li.active').length){time=Math.abs(parseInt(rtm_nav.find('li.active').index())-jQuery(this).index())*1000;}
var top_val=jQuery('#'+this_hash).offset().top-wp_nav_height;if(jQuery('.header-sticky-active').length&&jQuery('.sticky-header-wrapper').length&&jQuery('.sticky-header-wrapper').offset().top<top_val&&top_val-rockthemes.menu.sticky_height>0){top_val=top_val-parseInt(rockthemes.menu.sticky_height);}
if(rtm_nav.find('li.current-menu-item').length){rtm_nav.find('li.current-menu-item').removeClass('current-menu-item');}
if(jQuery('#rnmm li.current-menu-item').length){jQuery('#rnmm li.current-menu-item').removeClass('current-menu-item');}
if(jQuery(this).parents('li').length){jQuery(this).parents('li').addClass('current-menu-item');}
jQuery(document).trigger('rockthemes:scroll_events_disable');jQuery('html, body').animate({'scrollTop':top_val},time,'easeInOutQuart',function(){setTimeout(function(){if(history.pushState){history.pushState(null,null,'#'+this_hash);}
else{location.hash=this_hash;}
moving=false;},100);jQuery(document).trigger('rockthemes:scroll_events_enable');});});var dt;jQuery(document).on('rockthemes:in_view_main_nav',function(e,elem,h,li){if(moving)return;var _li=rtm_nav.find('#'+li);var rd=(_li.index()==0)?0:0+wp_nav_height;var top_val=jQuery('#'+h).offset().top;var bottom_val=jQuery('#'+h).offset().top+jQuery('#'+h).height();if(jQuery('.sticky-header-wrapper').length){top_val=top_val-parseInt(rockthemes.menu.sticky_height);bottom_val=bottom_val-parseInt(rockthemes.menu.sticky_height);}
if((jQuery(window).scrollTop()+wp_nav_height)<=bottom_val&&top_val-jQuery(window).scrollTop()<=rd){if(!_li.hasClass('current-menu-item')){rtm_nav.find('li.current-menu-item').removeClass('current-menu-item');_li.addClass('current-menu-item');}}});}
function rockthemes_main_nav_inline_nav_events(elems){elems.each(function(){var that=jQuery(this);var en=that.attr('href').replace(/.*?\#/,'');if(!en.length)return;var that_obj=new Object();that_obj.data={that:that,en:en,li:that.parents('li').attr('id')}
rockthemes_main_nav_inline_nav_view_event(that_obj);jQuery(window).on('scroll',that_obj.data,rockthemes_main_nav_inline_nav_view_event);});}
function rockthemes_main_nav_inline_nav_view_event(e){jQuery('#'+e.data.en+':in-viewport').do(function(){jQuery(document).trigger('rockthemes:in_view_main_nav',[e.data.that,e.data.en,e.data.li]);});}
function rockthemes_inline_nav(){var init_ended=false;var wp_nav_height=0;if(rockthemes.frontend_options.is_admin_bar_showing){wp_nav_height=jQuery('#wpadminbar').outerHeight();}
jQuery('#rockthemes-inline-nav li').click(function(e){var this_hash=jQuery(this).attr('id').replace('rin-','');var time=1000;if(jQuery('#rockthemes-inline-nav li.active').length){time=Math.abs(parseInt(jQuery('#rockthemes-inline-nav li.active').index())-jQuery(this).index())*1000;}
var top_val=jQuery('#'+this_hash).offset().top-wp_nav_height;if(jQuery('.header-sticky-active').length&&jQuery('.sticky-header-wrapper').length&&jQuery('.sticky-header-wrapper').offset().top<top_val&&top_val-rockthemes.menu.sticky_height>0){top_val=top_val-parseInt(rockthemes.menu.sticky_height);}
jQuery(document).trigger('rockthemes:scroll_events_disable');jQuery('html, body').animate({'scrollTop':top_val},time,'easeInOutQuart',function(){setTimeout(function(){if(history.pushState){history.pushState(null,null,'#'+this_hash);}
else{location.hash=this_hash;}},100);jQuery(document).trigger('rockthemes:scroll_events_enable');});});var dt;jQuery(document).on('rockthemes:in_view_nav',function(e,elem,id){if(!init_ended)return;var rd=(elem.index()==0)?40:10+wp_nav_height;var top_val=jQuery('#'+id).offset().top;if(jQuery('.main-header-area').length&&jQuery('.main-header-area').offset().top<top_val&&top_val-rockthemes.menu.sticky_height>0){top_val=top_val-parseInt(rockthemes.menu.sticky_height);}
if(top_val-jQuery(window).scrollTop()<=rd){if(!jQuery('#rin-'+id).hasClass('active')){clearTimeout(dt);jQuery('#rockthemes-inline-nav li.active').removeClass('active title-active');jQuery('#rin-'+id).addClass('active title-active');dt=setTimeout(function(){jQuery('#rin-'+id).removeClass('title-active');},1500);}}});jQuery('#rockthemes-inline-nav').css('top',parseInt((parseInt(jQuery(window).height()-(jQuery('#rockthemes-inline-nav').height()-30))/2))+'px');jQuery(window).smartresize(function(){jQuery('#rockthemes-inline-nav').css('top',parseInt((parseInt(jQuery(window).height()-(jQuery('#rockthemes-inline-nav').height()-30))/2))+'px');});var inl=jQuery('#rockthemes-inline-nav li').length;jQuery(document).on('rockthemes:start_inline_nav',function(){jQuery('#rockthemes-inline-nav li.deactive').each(function(i,elem){var that=jQuery(this);setTimeout(function(){that.removeClass('deactive');if((parseInt(inl)-i)<=1){init_ended=true;dt=setTimeout(function(){rockthemes_inline_nav_events(true);},100);}},parseInt(100*i));});});jQuery(document).on('rockthemes:hide_inline_nav',function(){jQuery('#rockthemes-inline-nav li').each(function(i,elem){var that=jQuery(this);setTimeout(function(){that.addClass('deactive');if((parseInt(inl)-i)<=1){init_ended=true;dt=setTimeout(function(){rockthemes_inline_nav_events(false);},100);}},parseInt(100*i));});});jQuery(document).trigger('rockthemes:start_inline_nav');}
function rockthemes_inline_nav_events(on_add){on_add=(typeof on_add!='undefined'&&on_add)?true:false;jQuery('#rockthemes-inline-nav li').each(function(){var that=jQuery(this);var en=that.attr('id').replace('rin-','');if(on_add){var that_obj=new Object();that_obj.data={that:that,en:en}
rockthemes_inline_nav_view_event(that_obj);}
if(on_add){jQuery(window).on('scroll',{that:that,en:en},rockthemes_inline_nav_view_event);}else{jQuery(window).off('scroll',rockthemes_inline_nav_view_event);}});if(on_add){jQuery('#rockthemes-inline-nav').addClass('initialized');}else{jQuery('#rockthemes-inline-nav.initialized').removeClass('initialized');}}
function rockthemes_inline_nav_view_event(e){jQuery('#'+e.data.en+':in-viewport').do(function(){jQuery(document).trigger('rockthemes:in_view_nav',[e.data.that,e.data.en]);});}
function rockthemes_mobile_menu(){if(rockthemes.frontend_options.header_location=='top_navigation'&&(rockthemes.resposivity==='false'||jQuery('html').hasClass('ie9')))return;var mm=jQuery('#rtm-navigation').clone(true);mm.wrapInner('<div id="rockthemes_mobile_menu"></div>');mm=mm.find('#rockthemes_mobile_menu').unwrap();mm.find('#nav').replaceWith(jQuery('<nav id="rnmm">'+mm.find('#nav').html()+'</nav>'));mm.find('.subtitle').remove();mm.find('.dismiss-mobile').remove();mm.find('.nav-icon').unwrap();mm.find('.nav-menu').removeClass('nav-menu');mm.find('.rtm-menu').removeClass('rtm-menu');mm.find('.columns').removeClass('columns');mm.find('.megamenu').removeClass('megamenu');mm.find('.regularmenu').removeClass('regularmenu');mm.find('.menu-item').removeClass('menu-item');mm.find('.dismiss-icon').remove();mm.find('.rtm-menu-sticker').remove();mm.find('.description').remove();mm.find('.rtm-widget').remove();mm.find('hr').remove();mm.find('*[data-mm-align]').removeAttr('data-mm-align');mm.find('*[data-mm-width]').removeAttr('data-mm-width');mm.find('.mobile-icon').each(function(){if(jQuery(this).parent().parent().hasClass('heading-nav')){jQuery(this).remove();}else{jQuery(this).parent().prepend('<i class="'+jQuery(this).attr('data-mobile-icon')+'"></i>');}});mm.find('.heading-label.link-disabled').each(function(){var tmm=jQuery(this);tmm.find('.heading-nav > .azoom-heading-icon').remove();tmm.find('.heading-nav > h3').children().unwrap();tmm.find('.heading-nav').wrap('<a href="#"></a>');tmm.find('.heading-nav').children().unwrap();});mm.find('.rtm-has-widget h3.widget-title').contents().unwrap();for(var i=1;i<13;i++){mm.find('.rtm-menu-depth-'+i).removeClass('rtm-menu-depth-'+i);mm.find('.large-'+i).removeClass('large-'+i);mm.find('.medium-'+i).removeClass('medium-'+i);mm.find('.small-'+i).removeClass('small-'+i);}
mm.find('li > ul').each(function(){var h2_clone=jQuery(this).parent().find(' > a').clone();});mm.find('.current-menu-item').addClass('Selected');var mm_api;var mmenu_settings={offCanvas:{position:rockthemes.is_rtl==='rtl'?'right':'left'},navbar:{title:rockthemes.mobile_menu.main_title},navbars:[],slidingSubmenus:true,};if(rockthemes.frontend_options.header_location==='side_navigation'){mmenu_settings.navbars.push({position:'bottom',content:''});mmenu_settings.navbars.push({position:'top',content:'',});}
if(rockthemes.frontend_options.header_location=='top_navigation'){}
if(jQuery(window).width()<1024||rockthemes.frontend_options.header_location==='side_navigation'){jQuery('body').append(mm);jQuery('#rnmm').mmenu(mmenu_settings);mm_api=jQuery('#rnmm').data('mmenu');jQuery('body').addClass('mobile-menu-added');jQuery('#rockthemes_mobile_menu').remove();}else{jQuery(window).smartresize(function(){if(jQuery(window).width()<1024&&!jQuery('body').hasClass('mobile-menu-added')){jQuery('body').append(mm);jQuery('#rnmm').mmenu(mmenu_settings);mm_api=jQuery('#rnmm').data('mmenu');jQuery('body').addClass('mobile-menu-added');jQuery('#rockthemes_mobile_menu').remove();}});}
if(rockthemes.menu.main_menu_model=='menu_use_mobile_for_main'){jQuery('html').addClass('menu_use_mobile_for_main');jQuery('#rtm-navigation').remove();}
if(rockthemes.frontend_options.header_location==='side_navigation'){var h_height=0;var f_height=0;jQuery('html').addClass('side_nav_menu');var m_logo=jQuery('.logo-container').clone();var m_ht2=jQuery('.header-top-2').clone();m_ht2.removeClass('hide');jQuery('.header-all-wrapper').children().each(function(){if(jQuery(this).hasClass('azoom-title-breadcrumbs'))return;jQuery(this).remove();});if(jQuery('#rockthemes-inline-nav').length){jQuery('#rockthemes-inline-nav .rockthemes-inline-nav-elem').each(function(){if(jQuery('#'+jQuery(this).attr('id').toString().replace('rin-','')).length<1){jQuery(this).remove();}});}
if(m_ht2.hasClass('not-visible')){m_ht2.removeClass('not-visible');}
m_ht2.find('.not-visible').removeClass('not-visible');m_ht2.find('.columns').css('width','100%');jQuery('.mm-navbar-top').prepend(m_logo);jQuery('.mm-menu .mm-navbar-bottom').append(m_ht2);var h_height=jQuery('.mm-navbar-top').height();var f_height=jQuery('.mm-navbar-bottom').height();var n_height=jQuery('#rnmm').height();jQuery('.mm-navbar-top').imagesLoaded(function(){rockthemes_mobile_menu_side_resize();});jQuery('body').append(jQuery('<div id="mobile-menu-list-icon" class="mm-slideout">'+'<span></span>'+'</div>'));jQuery(window).resize(function(){rockthemes_mobile_menu_side_resize();if(typeof mm_api!='undefined'){mm_api.close();}});}
jQuery(document).on('click touchend','.mobile-menu-switcher-holder, #mobile-menu-list-icon',function(e){e.preventDefault();jQuery(document).trigger('rockthemes:mobile_menu_expand');if(typeof mm_api!='undefined'){mm_api.open();}});}
function rockthemes_mobile_menu_side_resize(){var _h=parseInt(jQuery('.mm-navbar-bottom').height())+parseInt(jQuery('.mm-navbar-top').height())+140;if(jQuery('#rnmm').height()<_h){jQuery('.logo-container').css({'display':'none'});}else if(jQuery('.logo-container').css('display')==='none'){jQuery('.logo-container').css({'display':''});}
var h_height=jQuery('.mm-navbar-top').outerHeight(),f_height=jQuery('.mm-navbar-bottom').outerHeight(),n_height=jQuery('#rnmm').height(),list_height=n_height-h_height;if(jQuery('.mm-navbar-bottom').length&&f_height){list_height=list_height-f_height;}
if(parseInt(jQuery('.mm-navbar-bottom').css('bottom'))!==0){f_height=f_height+parseInt(jQuery('.mm-navbar-bottom').css('bottom'));}
if(parseInt(jQuery('.mm-navbar-bottom').css('bottom'))!==0){f_height=f_height+parseInt(jQuery('.mm-navbar-bottom').css('bottom'));}
jQuery('#rnmm > .mm-panel').css({'padding':'0px','top':h_height+'px','height':list_height+'px'});}
function rockthemes_sticky_header_init(){var header=jQuery('.main-header-area');if(header.length<1)return;if(!header.hasClass('header-sticky'))return;var wp_nav_height=0;if(rockthemes.frontend_options.is_admin_bar_showing){wp_nav_height=jQuery('#wpadminbar').outerHeight();}
header.parents('.sticky-header-wrapper').css('height',header.height()+'px');var starting_point=header.parents('.sticky-header-wrapper').offset();if(rockthemes.frontend_options.is_admin_bar_showing){starting_point.top-=wp_nav_height;}
starting_point.bottom=parseInt(starting_point.top+header.parents('.sticky-header-wrapper').height());jQuery(document).on('rockthemes:sticky_menu_resize',function(){starting_point=header.parents('.sticky-header-wrapper').offset();if(rockthemes.frontend_options.is_admin_bar_showing){starting_point.top-=28;}
starting_point.bottom=parseInt(starting_point.top+header.parents('.sticky-header-wrapper').height());});jQuery(window).smartresize(function(){jQuery(document).trigger('rockthemes:sticky_menu_resize');});var sticky_active=false;var sticky_animated=false;jQuery(window).scroll(function(){if(jQuery(this).scrollTop()>starting_point.top){if(!sticky_active){header.addClass('header-sticky-active');if(header.parents('.sticky-header-wrapper').length){header.parents('.sticky-header-wrapper').addClass('wrapper-unsticky');}
jQuery('.header-all-wrapper').addClass('sticky-activated');sticky_active=true;}
if(jQuery(this).scrollTop()>starting_point.bottom){if(!sticky_animated){sticky_animated=true;setTimeout(function(){header.addClass('header-sticky-animate');},30);}}else if(jQuery(this).scrollTop()<=starting_point.bottom){if(sticky_animated){header.removeClass('header-sticky-animate');sticky_animated=false;}}}else if(jQuery(this).scrollTop()<=starting_point.top){if(!sticky_active)return;header.removeClass('header-sticky-active');if(header.parents('.sticky-header-wrapper').length){header.parents('.sticky-header-wrapper').removeClass('wrapper-unsticky');}
jQuery('.header-all-wrapper').removeClass('sticky-activated');sticky_active=false;if(!sticky_animated)return;if(jQuery(this).scrollTop()<=starting_point.bottom){setTimeout(function(){header.removeClass('header-sticky-animate');sticky_animated=false;},20);}}});}
function rockthemes_multi_bg_colors(){if(jQuery('.multi-bg-colors').length<0)return;var spfx=rockthemes.frontend_options.style_prefix,value='',is_responsive=jQuery(window).width()>=800?false:true,flow=!is_responsive?'left':'top',size_l='50',size_r='50';jQuery('.multi-bg-colors').each(function(){var mbg=jQuery(this);var mbc=mbg.attr('data-multibg-colors');if(typeof mbc=='undefined')return;var mbca=mbc.split(',');if(spfx.indexOf('ms')>-1){value=spfx+'linear-gradient('+flow+', '+mbca[0]+' '+size_l+'%, '+mbca[1]+' '+size_r+'%)';}else{value=spfx+'linear-gradient('+flow+', '+mbca[0]+' '+size_l+'%, '+mbca[1]+' '+size_r+'%)';}
if(is_responsive){mbg.css('background',mbca[0]);}else{mbg.css('background-image',value);}});}
(function($){var $window=$(window);var windowHeight=$window.height();$window.resize(function(){windowHeight=$window.height();});$.fn.parallax=function(xpos,speedFactor,outerHeight){var $this=$(this);var getHeight;var firstTop;var paddingTop=0;$this.each(function(){firstTop=$this.offset().top;});if(arguments.length<1||xpos===null)xpos="50%";if(arguments.length<2||speedFactor===null)speedFactor=0.1;if(arguments.length<3||outerHeight===null)outerHeight=true;if(outerHeight){getHeight=function(jqo){return jqo.outerHeight(true);};}else{getHeight=function(jqo){return jqo.height();};}
function update(){var pos=$window.scrollTop();$this.each(function(){var $element=$(this);var top=$element.offset().top;var height=getHeight($element);if(top+height<pos||top>pos+windowHeight){return;}
var new_pos=Math.round(($this.offset().top-pos)*speedFactor),ih_obj=parseInt($this.attr('data-image-main-height'));if((new_pos>0&&new_pos>($this.offset().top-pos))||new_pos+ih_obj<windowHeight)return;$this.css('backgroundPosition',xpos+" "+new_pos+"px");});}
$window.on('scroll',update).resize(update);update();};})(jQuery);var BrowserDetect={init:function(){this.browser=this.searchString(this.dataBrowser)||"Other";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"Unknown";},searchString:function(data){for(var i=0;i<data.length;i++){var dataString=data[i].string;this.versionSearchString=data[i].subString;if(dataString.indexOf(data[i].subString)!==-1){return data[i].identity;}}},searchVersion:function(dataString){var index=dataString.indexOf(this.versionSearchString);if(index===-1){return;}
var rv=dataString.indexOf("rv:");if(this.versionSearchString==="Trident"&&rv!==-1){return parseFloat(dataString.substring(rv+3));}else{return parseFloat(dataString.substring(index+this.versionSearchString.length+1));}},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer"},{string:navigator.userAgent,subString:"Trident",identity:"Explorer"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.userAgent,subString:"Safari",identity:"Safari"},{string:navigator.userAgent,subString:"Opera",identity:"Opera"}]};BrowserDetect.init();jQuery.fn.rockthemes_svg_control=function(){if(!Modernizr)return;if(!Modernizr.svg){jQuery('img[src*="svg"].use_svg').attr('src',function(){return jQuery(this).attr('src').replace('.svg','.png');});}};
!function(l){l(function(){var t,o=window.location.href,a=void 0!==document.title?document.title:"",n=void 0!==screen.width&&1024<screen.width?"no":"yes",r="",i="";if("undefined"!=typeof ht_ctc_chat_var)i=ht_ctc_chat_var,e(),c();else{try{document.querySelector(".ht_ctc_chat_data")&&(t=l(".ht_ctc_chat_data").attr("data-settings"),i=JSON.parse(t))}catch(t){i={}}e(),c()}function e(){var t=document.querySelector(".ht_ctc_chat_data");t&&(r=l(".ht_ctc_chat_data").attr("data-no_number"),t.remove())}function c(){var t;l(document).trigger("ht_ctc_ce_settings",[i]),(t=document.querySelector(".ht-ctc-chat"))&&(l(document).trigger("ht_ctc_ce_chat"),function(t){"yes"==i.schedule?l(document).trigger("ht_ctc_ce_display",[i,h,t]):h(t)}(t),t.addEventListener("click",function(){_(t)})),l(document).on("click",".ht-ctc-sc-chat",function(){var t,e=this.getAttribute("data-number"),c=(c=this.getAttribute("data-pre_filled")).replace(/\[url]/gi,o);c=encodeURIComponent(c),"webapi"==this.getAttribute("data-webandapi")?(t="yes"==n?"https://api.whatsapp.com/send":"https://web.whatsapp.com/send",window.open(t+"?phone="+e+"&text="+c,"_blank","noopener")):(t="https://wa.me/",window.open(t+e+"?text="+c,"_blank","noopener")),d(this),u(e)}),l(document).on("click",".ctc_chat, #ctc_chat",function(){_(this)}),l(document).on("click",'[href="#ctc_chat"]',function(t){t.preventDefault(),_(this)})}function h(t){var e;"yes"==n?"show"==i.dis_m&&((e=document.querySelector(".ht_ctc_desktop_chat"))&&e.remove(),t.style.cssText=i.pos_m+i.css,s(t)):"show"==i.dis_d&&((e=document.querySelector(".ht_ctc_mobile_chat"))&&e.remove(),t.style.cssText=i.pos_d+i.css,s(t))}function s(e){try{l(e).show(parseInt(i.se))}catch(t){e.style.display="block"}var t;t=e,setTimeout(function(){t.classList.add("ht_ctc_animation",i.ani)},120),l(".ht-ctc-chat").hover(function(){l(".ht-ctc-chat .ht-ctc-cta-hover").show(120)},function(){l(".ht-ctc-chat .ht-ctc-cta-hover").hide(100)})}function d(t){l(document).trigger("ht_ctc_analytics");var e=i.number;t.classList.contains("ht-ctc-sc")&&(e=t.getAttribute("data-number"));var c="Click to Chat for WhatsApp",n="chat: "+e,t=a+", "+o;"yes"==i.ga&&("undefined"!=typeof gtag?gtag("event",n,{event_category:c,event_label:t}):"undefined"!=typeof ga&&void 0!==ga.getAll?ga.getAll()[0].send("event",c,n,t):"undefined"!=typeof __gaTracker&&__gaTracker("send","event",c,n,t)),"undefined"!=typeof dataLayer&&dataLayer.push({event:"Click to Chat",event_category:c,event_label:t,event_action:n}),"yes"==i.ads&&"undefined"!=typeof gtag_report_conversion&&gtag_report_conversion(),"yes"==i.fb&&"undefined"!=typeof fbq&&fbq("trackCustom","Click to Chat by HoliThemes",{Category:"Click to Chat for WhatsApp",return_type:"chat",ID:e,Title:a,URL:o})}function _(t){l(document).trigger("ht_ctc_ce_number",[i]);var e=i.number,c=(c=i.pre_filled).replace(/\[url]/gi,o);c=encodeURIComponent(c),""!=e?("webapi"==i.webandapi&&"yes"!==n?window.open("https://web.whatsapp.com/send?phone="+e+"&text="+c,"_blank","noopener"):window.open("https://wa.me/"+e+"?text="+c,"_blank","noopener"),d(t),u(e)):l(".ht-ctc-chat").html(r)}function u(t){var e,c;i.hook_url&&(e=i.hook_url,c={},i.hook_v&&(c=i.hook_v),l(document).trigger("ht_ctc_ce_hook",[i,t]),e=i.hook_url,c=i.hook_v,data=JSON.stringify(c),l.ajax({url:e,type:"POST",mode:"no-cors",data:data,success:function(t){}}))}})}(jQuery);
jQuery(document).ready(function(){'use strict';function rockthemes_mm_init(){jQuery('.megamenu').each(function(){var padding=15;var position=jQuery(this).offset();var container_pos=jQuery('.header-row').offset();position.left=position.left-container_pos.left-padding;var width=(typeof jQuery(this).attr('data-mm-width')!='undefined'&&jQuery(this).attr('data-mm-width'))?jQuery(this).attr('data-mm-width'):parseInt(jQuery(this).parents('.header-row').width())-(2*padding);var align=(typeof jQuery(this).attr('data-mm-align')!='undefined')?jQuery(this).attr('data-mm-align'):-position.left;var left=0;if(align=='left'){left=0;}else if(align=='right'){left=-parseInt(width)+parseInt(jQuery(this).width());}else{left=-position.left;}
jQuery(this).find(' > ul').css({'width':width,'left':left});var tl=0;jQuery(this).find(' > ul > li').css('min-height','');jQuery(this).find(' > ul > li').each(function(){if(jQuery(this).find('.azoom-swiperslider').length){return;}
tl=Math.max(tl,jQuery(this).height());});});jQuery('#nav ul.rtm-menu > li, #nav .rtm-menu > ul > li').each(function(){var padding=15;var position=jQuery(this).offset();var container_pos=jQuery('.header-row').offset();position.left=position.left-container_pos.left-padding;var this_data_width=jQuery(this).attr('data-mm-width');var this_data_align=jQuery(this).attr('data-mm-align');if(!this_data_width||!this_data_align)return;var width=(typeof jQuery(this).attr('data-mm-width')!='undefined'&&jQuery(this).attr('data-mm-width'))?jQuery(this).attr('data-mm-width'):parseInt(jQuery(this).parents('.header-row').width())-(2*padding);var align=(typeof jQuery(this).attr('data-mm-align')!='undefined')?jQuery(this).attr('data-mm-align'):-position.left;var left=0;if(align=='left'){left=0;}else if(align=='right'){left=-parseInt(width)+parseInt(jQuery(this).width());}else{left=-position.left;}
jQuery(this).find(' > ul ').css({'width':width,'left':left});});jQuery('.rtm-menu li').each(function(){rockthemes_mm_bg_img_check(jQuery(this));});}
function rockthemes_mm_bg_img_check(that){if(that.find('ul').length<1||typeof that.attr('data-sub-bg-img')=='undefined'||that.attr('data-sub-bg-img')==''||typeof that.attr('data-sub-bg-img-halign')=='undefined'||that.attr('data-sub-bg-img-halign')==''||typeof that.attr('data-sub-bg-img-valign')=='undefined'||that.attr('data-sub-bg-img-valign')==''||typeof that.attr('data-sub-bg-img-repeat')=='undefined'||that.attr('data-sub-bg-img-repeat')==''||typeof that.attr('data-sub-bg-img-width')=='undefined'||typeof that.attr('data-sub-bg-img-height')=='undefined'){return;}
var img='url("'+that.attr('data-sub-bg-img')+'")',alignh=that.attr('data-sub-bg-img-halign'),alignv=that.attr('data-sub-bg-img-valign'),pos=' '+alignv+' '+alignh+' ',repeat=that.attr('data-sub-bg-img-repeat'),width=that.attr('data-sub-bg-img-width'),height=that.attr('data-sub-bg-img-height'),size=((width.indexOf('px')>-1||width.indexOf('%')>-1)?width:width+'px')+' '+((height.indexOf('px')>-1||height.indexOf('%')>-1)?height:height+'px');that.find(' > ul').css({'background-image':img,'background-repeat':repeat,'background-position':pos,'background-size':size});}
jQuery(window).on('resize',rockthemes_mm_init);jQuery(document).on('rockthemes:mega_menu_resize',rockthemes_mm_init);rockthemes_mm_init();jQuery(document).trigger('rockthemes:mega_menu_ready');});
!function(e){function t(){e[n].glbl||(r={$wndw:e(window),$html:e("html"),$body:e("body")},a={},i={},l={},e.each([a,i,l],function(e,t){t.add=function(e){e=e.split(" ");for(var n=0,s=e.length;s>n;n++)t[e[n]]=t.mm(e[n])}}),a.mm=function(e){return"mm-"+e},a.add("wrapper menu vertical panel nopanel current highest opened subopened navbar hasnavbar title btn prev next first last listview nolistview selected divider spacer hidden fullsubopen"),a.umm=function(e){return"mm-"==e.slice(0,3)&&(e=e.slice(3)),e},i.mm=function(e){return"mm-"+e},i.add("parent sub"),l.mm=function(e){return e+".mm"},l.add("transitionend webkitTransitionEnd mousedown mouseup touchstart touchmove touchend click keydown"),e[n]._c=a,e[n]._d=i,e[n]._e=l,e[n].glbl=r)}var n="mmenu",s="5.2.0";if(!e[n]){e[n]=function(e,t,n){this.$menu=e,this._api=["bind","init","update","setSelected","getInstance","openPanel","closePanel","closeAllPanels"],this.opts=t,this.conf=n,this.vars={},this.cbck={},"function"==typeof this.___deprecated&&this.___deprecated(),this._initMenu(),this._initAnchors();var s=this.$menu.children(this.conf.panelNodetype);return this._initAddons(),this.init(s),"function"==typeof this.___debug&&this.___debug(),this},e[n].version=s,e[n].addons={},e[n].uniqueId=0,e[n].defaults={extensions:[],navbar:{title:"Menu",titleLink:"panel"},onClick:{setSelected:!0},slidingSubmenus:!0},e[n].configuration={classNames:{panel:"Panel",vertical:"Vertical",selected:"Selected",divider:"Divider",spacer:"Spacer"},clone:!1,openingInterval:25,panelNodetype:"ul, ol, div",transitionDuration:400},e[n].prototype={init:function(e){e=e.not("."+a.nopanel),e=this._initPanels(e),this.trigger("init",e),this.trigger("update")},update:function(){this.trigger("update")},setSelected:function(e){this.$menu.find("."+a.listview).children().removeClass(a.selected),e.addClass(a.selected),this.trigger("setSelected",e)},openPanel:function(t){var n=t.parent();if(n.hasClass(a.vertical)){var s=n.parents("."+a.subopened);if(s.length)return this.openPanel(s.first());n.addClass(a.opened)}else{if(t.hasClass(a.current))return;var i=e(this.$menu).children("."+a.panel),l=i.filter("."+a.current);i.removeClass(a.highest).removeClass(a.current).not(t).not(l).not("."+a.vertical).addClass(a.hidden),t.hasClass(a.opened)?l.addClass(a.highest).removeClass(a.opened).removeClass(a.subopened):(t.addClass(a.highest),l.addClass(a.subopened)),t.removeClass(a.hidden).addClass(a.current),setTimeout(function(){t.removeClass(a.subopened).addClass(a.opened)},this.conf.openingInterval)}this.trigger("openPanel",t)},closePanel:function(e){var t=e.parent();t.hasClass(a.vertical)&&(t.removeClass(a.opened),this.trigger("closePanel",e))},closeAllPanels:function(){this.$menu.find("."+a.listview).children().removeClass(a.selected).filter("."+a.vertical).removeClass(a.opened);var e=this.$menu.children("."+a.panel),t=e.first();this.$menu.children("."+a.panel).not(t).removeClass(a.subopened).removeClass(a.opened).removeClass(a.current).removeClass(a.highest).addClass(a.hidden),this.openPanel(t)},togglePanel:function(e){var t=e.parent();t.hasClass(a.vertical)&&this[t.hasClass(a.opened)?"closePanel":"openPanel"](e)},getInstance:function(){return this},bind:function(e,t){this.cbck[e]=this.cbck[e]||[],this.cbck[e].push(t)},trigger:function(){var e=this,t=Array.prototype.slice.call(arguments),n=t.shift();if(this.cbck[n])for(var s=0,a=this.cbck[n].length;a>s;s++)this.cbck[n][s].apply(e,t)},_initMenu:function(){this.opts.offCanvas&&this.conf.clone&&(this.$menu=this.$menu.clone(!0),this.$menu.add(this.$menu.find("[id]")).filter("[id]").each(function(){e(this).attr("id",a.mm(e(this).attr("id")))})),this.$menu.contents().each(function(){3==e(this)[0].nodeType&&e(this).remove()}),this.$menu.parent().addClass(a.wrapper);var t=[a.menu];this.opts.slidingSubmenus||t.push(a.vertical),this.opts.extensions=this.opts.extensions.length?"mm-"+this.opts.extensions.join(" mm-"):"",this.opts.extensions&&t.push(this.opts.extensions),this.$menu.addClass(t.join(" "))},_initPanels:function(t){var n=this;this.__findAddBack(t,"ul, ol").not("."+a.nolistview).addClass(a.listview);var s=this.__findAddBack(t,"."+a.listview).children();this.__refactorClass(s,this.conf.classNames.selected,"selected"),this.__refactorClass(s,this.conf.classNames.divider,"divider"),this.__refactorClass(s,this.conf.classNames.spacer,"spacer"),this.__refactorClass(this.__findAddBack(t,"."+this.conf.classNames.panel),this.conf.classNames.panel,"panel");var l=e(),r=t.add(t.find("."+a.panel)).add(this.__findAddBack(t,"."+a.listview).children().children(this.conf.panelNodetype)).not("."+a.nopanel);this.__refactorClass(r,this.conf.classNames.vertical,"vertical"),this.opts.slidingSubmenus||r.addClass(a.vertical),r.each(function(){var t=e(this),s=t;t.is("ul, ol")?(t.wrap('<div class="'+a.panel+'" />'),s=t.parent()):s.addClass(a.panel);var i=t.attr("id");t.removeAttr("id"),s.attr("id",i||n.__getUniqueId()),t.hasClass(a.vertical)&&(t.removeClass(n.conf.classNames.vertical),s.add(s.parent()).addClass(a.vertical)),l=l.add(s);var r=s.children().first(),d=s.children().last();r.is("."+a.listview)&&r.addClass(a.first),d.is("."+a.listview)&&d.addClass(a.last)});var d=e("."+a.panel,this.$menu);l.each(function(){var t=e(this),s=t.parent(),l=s.children("a, span").first();if(s.is("."+a.menu)||(s.data(i.sub,t),t.data(i.parent,s)),!s.children("."+a.next).length&&s.parent().is("."+a.listview)){var r=t.attr("id"),d=e('<a class="'+a.next+'" href="#'+r+'" data-target="#'+r+'" />').insertBefore(l);l.is("span")&&d.addClass(a.fullsubopen)}if(!t.children("."+a.navbar).length&&!s.hasClass(a.vertical)){if(s.parent().is("."+a.listview))var s=s.closest("."+a.panel);else var l=s.closest("."+a.panel).find('a[href="#'+t.attr("id")+'"]').first(),s=l.closest("."+a.panel);var o=e('<div class="'+a.navbar+'" />');if(s.length){var r=s.attr("id");switch(n.opts.navbar.titleLink){case"anchor":_url=l.attr("href");break;case"panel":case"parent":_url="#"+r;break;case"none":default:_url=!1}o.append('<a class="'+a.btn+" "+a.prev+'" href="#'+r+'" data-target="#'+r+'"></a>').append('<a class="'+a.title+'"'+(_url?' href="'+_url+'"':"")+">"+l.text()+"</a>").prependTo(t),t.addClass(a.hasnavbar)}else n.opts.navbar.title&&(o.append('<a class="'+a.title+'">'+n.opts.navbar.title+"</a>").prependTo(t),t.addClass(a.hasnavbar))}});var o=this.__findAddBack(t,"."+a.listview).children("."+a.selected).removeClass(a.selected).last().addClass(a.selected);o.add(o.parentsUntil("."+a.menu,"li")).filter("."+a.vertical).addClass(a.opened).end().not("."+a.vertical).each(function(){e(this).parentsUntil("."+a.menu,"."+a.panel).not("."+a.vertical).first().addClass(a.opened).parentsUntil("."+a.menu,"."+a.panel).not("."+a.vertical).first().addClass(a.opened).addClass(a.subopened)}),o.children("."+a.panel).not("."+a.vertical).addClass(a.opened).parentsUntil("."+a.menu,"."+a.panel).not("."+a.vertical).first().addClass(a.opened).addClass(a.subopened);var c=d.filter("."+a.opened);return c.length||(c=l.first()),c.addClass(a.opened).last().addClass(a.current),l.not("."+a.vertical).not(c.last()).addClass(a.hidden).end().appendTo(this.$menu),l},_initAnchors:function(){var t=this;r.$body.on(l.click+"-oncanvas","a[href]",function(s){var i=e(this),l=!1,d=t.$menu.find(i).length;for(var o in e[n].addons)if(l=e[n].addons[o].clickAnchor.call(t,i,d))break;if(!l&&d){var c=i.attr("href");if(c.length>1&&"#"==c.slice(0,1)){var h=e(c,t.$menu);h.is("."+a.panel)&&(l=!0,t[i.parent().hasClass(a.vertical)?"togglePanel":"openPanel"](h))}}if(l&&s.preventDefault(),!l&&d&&i.is("."+a.listview+" > li > a")&&!i.is('[rel="external"]')&&!i.is('[target="_blank"]')){t.__valueOrFn(t.opts.onClick.setSelected,i)&&t.setSelected(e(s.target).parent());var u=t.__valueOrFn(t.opts.onClick.preventDefault,i,"#"==c.slice(0,1));u&&s.preventDefault(),t.__valueOrFn(t.opts.onClick.blockUI,i,!u)&&r.$html.addClass(a.blocking),t.__valueOrFn(t.opts.onClick.close,i,u)&&t.close()}})},_initAddons:function(){for(var t in e[n].addons)e[n].addons[t].add.call(this),e[n].addons[t].add=function(){};for(var t in e[n].addons)e[n].addons[t].setup.call(this)},__api:function(){var t=this,n={};return e.each(this._api,function(){var e=this;n[e]=function(){var s=t[e].apply(t,arguments);return"undefined"==typeof s?n:s}}),n},__valueOrFn:function(e,t,n){return"function"==typeof e?e.call(t[0]):"undefined"==typeof e&&"undefined"!=typeof n?n:e},__refactorClass:function(e,t,n){return e.filter("."+t).removeClass(t).addClass(a[n])},__findAddBack:function(e,t){return e.find(t).add(e.filter(t))},__filterListItems:function(e){return e.not("."+a.divider).not("."+a.hidden)},__transitionend:function(e,t,n){var s=!1,a=function(){s||t.call(e[0]),s=!0};e.one(l.transitionend,a),e.one(l.webkitTransitionEnd,a),setTimeout(a,1.1*n)},__getUniqueId:function(){return a.mm(e[n].uniqueId++)}},e.fn[n]=function(s,a){return t(),s=e.extend(!0,{},e[n].defaults,s),a=e.extend(!0,{},e[n].configuration,a),this.each(function(){var t=e(this);if(!t.data(n)){var i=new e[n](t,s,a);t.data(n,i.__api())}})},e[n].support={touch:"ontouchstart"in window||navigator.msMaxTouchPoints};var a,i,l,r}}(jQuery);!function(t){var e="mmenu",o="offCanvas";t[e].addons[o]={setup:function(){if(this.opts[o]){var n=this.opts[o],i=this.conf[o];a=t[e].glbl,this._api=t.merge(this._api,["open","close","setPage"]),("top"==n.position||"bottom"==n.position)&&(n.zposition="front"),"string"!=typeof i.pageSelector&&(i.pageSelector="> "+i.pageNodetype),a.$allMenus=(a.$allMenus||t()).add(this.$menu),this.vars.opened=!1;var r=[s.offcanvas];"left"!=n.position&&r.push(s.mm(n.position)),"back"!=n.zposition&&r.push(s.mm(n.zposition)),this.$menu.addClass(r.join(" ")).parent().removeClass(s.wrapper),this.setPage(a.$page),this._initBlocker(),this["_initWindow_"+o](),this.$menu[i.menuInjectMethod+"To"](i.menuWrapperSelector)}},add:function(){s=t[e]._c,n=t[e]._d,i=t[e]._e,s.add("offcanvas slideout modal background opening blocker page"),n.add("style"),i.add("resize")},clickAnchor:function(t){if(!this.opts[o])return!1;var e=this.$menu.attr("id");if(e&&e.length&&(this.conf.clone&&(e=s.umm(e)),t.is('[href="#'+e+'"]')))return this.open(),!0;if(a.$page){var e=a.$page.first().attr("id");return e&&e.length&&t.is('[href="#'+e+'"]')?(this.close(),!0):!1}}},t[e].defaults[o]={position:"left",zposition:"back",modal:!1,moveBackground:!0},t[e].configuration[o]={pageNodetype:"div",pageSelector:null,wrapPageIfNeeded:!0,menuWrapperSelector:"body",menuInjectMethod:"prepend"},t[e].prototype.open=function(){if(!this.vars.opened){var t=this;this._openSetup(),setTimeout(function(){t._openFinish()},this.conf.openingInterval),this.trigger("open")}},t[e].prototype._openSetup=function(){var e=this;this.closeAllOthers(),a.$page.each(function(){t(this).data(n.style,t(this).attr("style")||"")}),a.$wndw.trigger(i.resize+"-offcanvas",[!0]);var r=[s.opened];this.opts[o].modal&&r.push(s.modal),this.opts[o].moveBackground&&r.push(s.background),"left"!=this.opts[o].position&&r.push(s.mm(this.opts[o].position)),"back"!=this.opts[o].zposition&&r.push(s.mm(this.opts[o].zposition)),this.opts.extensions&&r.push(this.opts.extensions),a.$html.addClass(r.join(" ")),setTimeout(function(){e.vars.opened=!0},this.conf.openingInterval),this.$menu.addClass(s.current+" "+s.opened)},t[e].prototype._openFinish=function(){var t=this;this.__transitionend(a.$page.first(),function(){t.trigger("opened")},this.conf.transitionDuration),a.$html.addClass(s.opening),this.trigger("opening")},t[e].prototype.close=function(){if(this.vars.opened){var e=this;this.__transitionend(a.$page.first(),function(){e.$menu.removeClass(s.current).removeClass(s.opened),a.$html.removeClass(s.opened).removeClass(s.modal).removeClass(s.background).removeClass(s.mm(e.opts[o].position)).removeClass(s.mm(e.opts[o].zposition)),e.opts.extensions&&a.$html.removeClass(e.opts.extensions),a.$page.each(function(){t(this).attr("style",t(this).data(n.style))}),e.vars.opened=!1,e.trigger("closed")},this.conf.transitionDuration),a.$html.removeClass(s.opening),this.trigger("close"),this.trigger("closing")}},t[e].prototype.closeAllOthers=function(){a.$allMenus.not(this.$menu).each(function(){var o=t(this).data(e);o&&o.close&&o.close()})},t[e].prototype.setPage=function(e){var n=this,i=this.conf[o];e&&e.length||(e=a.$body.find(i.pageSelector),e.length>1&&i.wrapPageIfNeeded&&(e=e.wrapAll("<"+this.conf[o].pageNodetype+" />").parent())),e.each(function(){t(this).attr("id",t(this).attr("id")||n.__getUniqueId())}),e.addClass(s.page+" "+s.slideout),a.$page=e,this.trigger("setPage",e)},t[e].prototype["_initWindow_"+o]=function(){a.$wndw.off(i.keydown+"-offcanvas").on(i.keydown+"-offcanvas",function(t){return a.$html.hasClass(s.opened)&&9==t.keyCode?(t.preventDefault(),!1):void 0});var t=0;a.$wndw.off(i.resize+"-offcanvas").on(i.resize+"-offcanvas",function(e,o){if(1==a.$page.length&&(o||a.$html.hasClass(s.opened))){var n=a.$wndw.height();(o||n!=t)&&(t=n,a.$page.css("minHeight",n))}})},t[e].prototype._initBlocker=function(){var e=this;a.$blck||(a.$blck=t('<div id="'+s.blocker+'" class="'+s.slideout+'" />')),a.$blck.appendTo(a.$body).off(i.touchstart+"-offcanvas "+i.touchmove+"-offcanvas").on(i.touchstart+"-offcanvas "+i.touchmove+"-offcanvas",function(t){t.preventDefault(),t.stopPropagation(),a.$blck.trigger(i.mousedown+"-offcanvas")}).off(i.mousedown+"-offcanvas").on(i.mousedown+"-offcanvas",function(t){t.preventDefault(),a.$html.hasClass(s.modal)||(e.closeAllOthers(),e.close())})};var s,n,i,a}(jQuery);!function(t){var e="mmenu",i="autoHeight";t[e].addons[i]={setup:function(){if(this.opts.offCanvas){switch(this.opts.offCanvas.position){case"left":case"right":return}var n=this,o=this.opts[i];if(this.conf[i],h=t[e].glbl,"boolean"==typeof o&&o&&(o={height:"auto"}),"object"!=typeof o&&(o={}),o=this.opts[i]=t.extend(!0,{},t[e].defaults[i],o),"auto"==o.height){this.$menu.addClass(s.autoheight);var u=function(t){var e=this.$menu.children("."+s.current);_top=parseInt(e.css("top"),10)||0,_bot=parseInt(e.css("bottom"),10)||0,this.$menu.addClass(s.measureheight),t=t||this.$menu.children("."+s.current),t.is("."+s.vertical)&&(t=t.parents("."+s.panel).not("."+s.vertical).first()),this.$menu.height(t.outerHeight()+_top+_bot).removeClass(s.measureheight)};this.bind("update",u),this.bind("openPanel",u),this.bind("closePanel",u),this.bind("open",u),h.$wndw.off(a.resize+"-autoheight").on(a.resize+"-autoheight",function(){u.call(n)})}}},add:function(){s=t[e]._c,n=t[e]._d,a=t[e]._e,s.add("autoheight measureheight"),a.add("resize")},clickAnchor:function(){}},t[e].defaults[i]={height:"default"};var s,n,a,h}(jQuery);!function(o){var t="mmenu",n="backButton";o[t].addons[n]={setup:function(){if(this.opts.offCanvas){var i=this,e=this.opts[n];if(this.conf[n],a=o[t].glbl,"boolean"==typeof e&&(e={close:e}),"object"!=typeof e&&(e={}),e=o.extend(!0,{},o[t].defaults[n],e),e.close){var c="#"+i.$menu.attr("id");this.bind("opened",function(){location.hash!=c&&history.pushState(null,document.title,c)}),o(window).on("popstate",function(o){a.$html.hasClass(s.opened)?(o.stopPropagation(),i.close()):location.hash==c&&(o.stopPropagation(),i.open())})}}},add:function(){return window.history&&window.history.pushState?(s=o[t]._c,i=o[t]._d,e=o[t]._e,void 0):(o[t].addons[n].setup=function(){},void 0)},clickAnchor:function(){}},o[t].defaults[n]={close:!1};var s,i,e,a}(jQuery);!function(t){var n="mmenu",e="counters";t[n].addons[e]={setup:function(){var c=this,o=this.opts[e];this.conf[e],s=t[n].glbl,"boolean"==typeof o&&(o={add:o,update:o}),"object"!=typeof o&&(o={}),o=this.opts[e]=t.extend(!0,{},t[n].defaults[e],o),this.bind("init",function(n){this.__refactorClass(t("em",n),this.conf.classNames[e].counter,"counter")}),o.add&&this.bind("init",function(n){n.each(function(){var n=t(this).data(a.parent);n&&(n.children("em."+i.counter).length||n.prepend(t('<em class="'+i.counter+'" />')))})}),o.update&&this.bind("update",function(){this.$menu.find("."+i.panel).each(function(){var n=t(this),e=n.data(a.parent);if(e){var s=e.children("em."+i.counter);s.length&&(n=n.children("."+i.listview),n.length&&s.html(c.__filterListItems(n.children()).length))}})})},add:function(){i=t[n]._c,a=t[n]._d,c=t[n]._e,i.add("counter search noresultsmsg")},clickAnchor:function(){}},t[n].defaults[e]={add:!1,update:!1},t[n].configuration.classNames[e]={counter:"Counter"};var i,a,c,s}(jQuery);!function(i){var e="mmenu",s="dividers";i[e].addons[s]={setup:function(){var n=this,a=this.opts[s];if(this.conf[s],l=i[e].glbl,"boolean"==typeof a&&(a={add:a,fixed:a}),"object"!=typeof a&&(a={}),a=this.opts[s]=i.extend(!0,{},i[e].defaults[s],a),this.bind("init",function(){this.__refactorClass(i("li",this.$menu),this.conf.classNames[s].collapsed,"collapsed")}),a.add&&this.bind("init",function(e){switch(a.addTo){case"panels":var s=e;break;default:var s=i(a.addTo,this.$menu).filter("."+d.panel)}i("."+d.divider,s).remove(),s.find("."+d.listview).not("."+d.vertical).each(function(){var e="";n.__filterListItems(i(this).children()).each(function(){var s=i.trim(i(this).children("a, span").text()).slice(0,1).toLowerCase();s!=e&&s.length&&(e=s,i('<li class="'+d.divider+'">'+s+"</li>").insertBefore(this))})})}),a.collapse&&this.bind("init",function(e){i("."+d.divider,e).each(function(){var e=i(this),s=e.nextUntil("."+d.divider,"."+d.collapsed);s.length&&(e.children("."+d.subopen).length||(e.wrapInner("<span />"),e.prepend('<a href="#" class="'+d.subopen+" "+d.fullsubopen+'" />')))})}),a.fixed){var o=function(e){e=e||this.$menu.children("."+d.current);var s=e.find("."+d.divider).not("."+d.hidden);if(s.length){this.$menu.addClass(d.hasdividers);var n=e.scrollTop()||0,t="";e.is(":visible")&&e.find("."+d.divider).not("."+d.hidden).each(function(){i(this).position().top+n<n+1&&(t=i(this).text())}),this.$fixeddivider.text(t)}else this.$menu.removeClass(d.hasdividers)};this.$fixeddivider=i('<ul class="'+d.listview+" "+d.fixeddivider+'"><li class="'+d.divider+'"></li></ul>').prependTo(this.$menu).children(),this.bind("openPanel",o),this.bind("init",function(e){e.off(t.scroll+"-dividers "+t.touchmove+"-dividers").on(t.scroll+"-dividers "+t.touchmove+"-dividers",function(){o.call(n,i(this))})})}},add:function(){d=i[e]._c,n=i[e]._d,t=i[e]._e,d.add("collapsed uncollapsed fixeddivider hasdividers"),t.add("scroll")},clickAnchor:function(i,e){if(this.opts[s].collapse&&e){var n=i.parent();if(n.is("."+d.divider)){var t=n.nextUntil("."+d.divider,"."+d.collapsed);return n.toggleClass(d.opened),t[n.hasClass(d.opened)?"addClass":"removeClass"](d.uncollapsed),!0}}return!1}},i[e].defaults[s]={add:!1,addTo:"panels",fixed:!1,collapse:!1},i[e].configuration.classNames[s]={collapsed:"Collapsed"};var d,n,t,l}(jQuery);!function(e){function t(e,t,n){return t>e&&(e=t),e>n&&(e=n),e}var n="mmenu",o="dragOpen";e[n].addons[o]={setup:function(){if(this.opts.offCanvas){var i=this,a=this.opts[o],p=this.conf[o];if(r=e[n].glbl,"boolean"==typeof a&&(a={open:a}),"object"!=typeof a&&(a={}),a=this.opts[o]=e.extend(!0,{},e[n].defaults[o],a),a.open){var d,f,c,u,h,l={},m=0,g=!1,v=!1,w=0,_=0;switch(this.opts.offCanvas.position){case"left":case"right":l.events="panleft panright",l.typeLower="x",l.typeUpper="X",v="width";break;case"top":case"bottom":l.events="panup pandown",l.typeLower="y",l.typeUpper="Y",v="height"}switch(this.opts.offCanvas.position){case"right":case"bottom":l.negative=!0,u=function(e){e>=r.$wndw[v]()-a.maxStartPos&&(m=1)};break;default:l.negative=!1,u=function(e){e<=a.maxStartPos&&(m=1)}}switch(this.opts.offCanvas.position){case"left":l.open_dir="right",l.close_dir="left";break;case"right":l.open_dir="left",l.close_dir="right";break;case"top":l.open_dir="down",l.close_dir="up";break;case"bottom":l.open_dir="up",l.close_dir="down"}switch(this.opts.offCanvas.zposition){case"front":h=function(){return this.$menu};break;default:h=function(){return e("."+s.slideout)}}var b=this.__valueOrFn(a.pageNode,this.$menu,r.$page);"string"==typeof b&&(b=e(b));var y=new Hammer(b[0],a.vendors.hammer);y.on("panstart",function(e){u(e.center[l.typeLower]),r.$slideOutNodes=h(),g=l.open_dir}).on(l.events+" panend",function(e){m>0&&e.preventDefault()}).on(l.events,function(e){if(d=e["delta"+l.typeUpper],l.negative&&(d=-d),d!=w&&(g=d>=w?l.open_dir:l.close_dir),w=d,w>a.threshold&&1==m){if(r.$html.hasClass(s.opened))return;m=2,i._openSetup(),i.trigger("opening"),r.$html.addClass(s.dragging),_=t(r.$wndw[v]()*p[v].perc,p[v].min,p[v].max)}2==m&&(f=t(w,10,_)-("front"==i.opts.offCanvas.zposition?_:0),l.negative&&(f=-f),c="translate"+l.typeUpper+"("+f+"px )",r.$slideOutNodes.css({"-webkit-transform":"-webkit-"+c,transform:c}))}).on("panend",function(){2==m&&(r.$html.removeClass(s.dragging),r.$slideOutNodes.css("transform",""),i[g==l.open_dir?"_openFinish":"close"]()),m=0})}}},add:function(){return"function"!=typeof Hammer||Hammer.VERSION<2?(e[n].addons[o].setup=function(){},void 0):(s=e[n]._c,i=e[n]._d,a=e[n]._e,s.add("dragging"),void 0)},clickAnchor:function(){}},e[n].defaults[o]={open:!1,maxStartPos:100,threshold:50,vendors:{hammer:{}}},e[n].configuration[o]={width:{perc:.8,min:140,max:440},height:{perc:.8,min:140,max:880}};var s,i,a,r}(jQuery);!function(i){var s="mmenu",n="fixedElements";i[s].addons[n]={setup:function(){if(this.opts.offCanvas){this.opts[n],this.conf[n],o=i[s].glbl;var a=function(i){var s=this.conf.classNames[n].fixed;this.__refactorClass(i.find("."+s),s,"slideout").appendTo(o.$body)};a.call(this,o.$page),this.bind("setPage",a)}},add:function(){a=i[s]._c,t=i[s]._d,e=i[s]._e,a.add("fixed")},clickAnchor:function(){}},i[s].configuration.classNames[n]={fixed:"Fixed"};var a,t,e,o}(jQuery);!function(n){var a="mmenu",t="navbars";n[a].addons[t]={setup:function(){var r=this,s=this.opts[t];if(this.conf[t],i=n[a].glbl,"undefined"!=typeof s){s instanceof Array||(s=[s]);var d={};n.each(s,function(i){var c=s[i];"boolean"==typeof c&&c&&(c={}),"object"!=typeof c&&(c={}),"undefined"==typeof c.content&&(c.content=["prev","title"]),c.content instanceof Array||(c.content=[c.content]),c=n.extend(!0,{},r.opts.navbar,c);var o=c.position;"bottom"!=o&&(o="top"),d[o]||(d[o]=0),d[o]++;for(var l=n("<div />").addClass(e.navbar).addClass(e.navbar+"-"+o).addClass(e.navbar+"-"+o+"-"+d[o]),h=0,f=c.content.length;f>h;h++){var v=n[a].addons[t][c.content[h]]||!1;v?v.call(r,l,c):(v=c.content[h],v instanceof n||(v=n(c.content[h])),v.each(function(){l.append(n(this))}))}var u=l.children().not("."+e.btn).length;u>1&&l.addClass(e.navbar+"-"+u),l.children("."+e.btn).length&&l.addClass(e.hasbtns),l.prependTo(r.$menu)});for(var c in d)r.$menu.addClass(e.hasnavbar+"-"+c+"-"+d[c])}},add:function(){e=n[a]._c,r=n[a]._d,s=n[a]._e,e.add("close hasbtns")},clickAnchor:function(){}},n[a].configuration.classNames[t]={panelTitle:"Title",panelNext:"Next",panelPrev:"Prev"};var e,r,s,i}(jQuery),function(n){var a="mmenu",t="navbars",e="close";n[a].addons[t][e]=function(t){var e=n[a]._c,r=n[a].glbl;t.append('<a class="'+e.close+" "+e.btn+'" href="#"></a>');var s=function(n){t.find("."+e.close).attr("href","#"+n.attr("id"))};s.call(this,r.$page),this.bind("setPage",s)}}(jQuery),function(n){var a="mmenu",t="navbars",e="next";n[a].addons[t][e]=function(e){var r=n[a]._c;e.append('<a class="'+r.next+" "+r.btn+'" href="#"></a>');var s=function(n){n=n||this.$menu.children("."+r.current);var a=e.find("."+r.next),s=n.find("."+this.conf.classNames[t].panelNext),i=s.attr("href"),d=s.html();a[i?"attr":"removeAttr"]("href",i),a[i||d?"removeClass":"addClass"](r.hidden),a.html(d)};this.bind("openPanel",s),this.bind("init",function(){s.call(this)})}}(jQuery),function(n){var a="mmenu",t="navbars",e="prev";n[a].addons[t][e]=function(e){var r=n[a]._c;e.append('<a class="'+r.prev+" "+r.btn+'" href="#"></a>'),this.bind("init",function(n){n.removeClass(r.hasnavbar)});var s=function(n){n=n||this.$menu.children("."+r.current);var a=e.find("."+r.prev),s=n.find("."+this.conf.classNames[t].panelPrev);s.length||(s=n.children("."+r.navbar).children("."+r.prev));var i=s.attr("href"),d=s.html();a[i?"attr":"removeAttr"]("href",i),a[i||d?"removeClass":"addClass"](r.hidden),a.html(d)};this.bind("openPanel",s),this.bind("init",function(){s.call(this)})}}(jQuery),function(n){var a="mmenu",t="navbars",e="searchfield";n[a].addons[t][e]=function(t){var e=n[a]._c,r=n('<div class="'+e.search+'" />').appendTo(t);"object"!=typeof this.opts.searchfield&&(this.opts.searchfield={}),this.opts.searchfield.add=!0,this.opts.searchfield.addTo=r}}(jQuery),function(n){var a="mmenu",t="navbars",e="title";n[a].addons[t][e]=function(e,r){var s=n[a]._c;e.append('<a class="'+s.title+'"></a>');var i=function(n){n=n||this.$menu.children("."+s.current);var a=e.find("."+s.title),i=n.find("."+this.conf.classNames[t].panelTitle);i.length||(i=n.children("."+s.navbar).children("."+s.title));var d=i.attr("href"),c=i.html()||r.title;a[d?"attr":"removeAttr"]("href",d),a[d||c?"removeClass":"addClass"](s.hidden),a.html(c)};this.bind("openPanel",i),this.bind("init",function(){i.call(this)})}}(jQuery);!function(e){function s(e){switch(e){case 9:case 16:case 17:case 18:case 37:case 38:case 39:case 40:return!0}return!1}var n="mmenu",a="searchfield";e[n].addons[a]={setup:function(){var o=this,d=this.opts[a],c=this.conf[a];r=e[n].glbl,"boolean"==typeof d&&(d={add:d}),"object"!=typeof d&&(d={}),d=this.opts[a]=e.extend(!0,{},e[n].defaults[a],d),this.bind("close",function(){this.$menu.find("."+l.search).find("input").blur()}),this.bind("init",function(n){if(d.add){switch(d.addTo){case"panels":var a=n;break;default:var a=e(d.addTo,this.$menu)}a.each(function(){var s=e(this);if(!s.is("."+l.panel)||!s.is("."+l.vertical)){if(!s.children("."+l.search).length){var n=c.form?"form":"div",a=e("<"+n+' class="'+l.search+'" />');if(c.form&&"object"==typeof c.form)for(var t in c.form)a.attr(t,c.form[t]);a.append('<input placeholder="'+d.placeholder+'" type="text" autocomplete="off" />'),s.hasClass(l.search)?s.replaceWith(a):s.prepend(a).addClass(l.hassearch)}if(d.noResults){var i=s.closest("."+l.panel).length;if(i||(s=o.$menu.children("."+l.panel).first()),!s.children("."+l.noresultsmsg).length){var r=s.children("."+l.listview);e('<div class="'+l.noresultsmsg+'" />').append(d.noResults)[r.length?"insertBefore":"prependTo"](r.length?r:s)}}}}),d.search&&e("."+l.search,this.$menu).each(function(){var n=e(this),a=n.closest("."+l.panel).length;if(a)var r=n.closest("."+l.panel),c=r;else var r=e("."+l.panel,o.$menu),c=o.$menu;var h=n.children("input"),u=o.__findAddBack(r,"."+l.listview).children("li"),f=u.filter("."+l.divider),p=o.__filterListItems(u),v="> a",m=v+", > span",b=function(){var s=h.val().toLowerCase();r.scrollTop(0),p.add(f).addClass(l.hidden).find("."+l.fullsubopensearch).removeClass(l.fullsubopen).removeClass(l.fullsubopensearch),p.each(function(){var n=e(this),a=v;(d.showTextItems||d.showSubPanels&&n.find("."+l.next))&&(a=m),e(a,n).text().toLowerCase().indexOf(s)>-1&&n.add(n.prevAll("."+l.divider).first()).removeClass(l.hidden)}),d.showSubPanels&&r.each(function(){var s=e(this);o.__filterListItems(s.find("."+l.listview).children()).each(function(){var s=e(this),n=s.data(t.sub);s.removeClass(l.nosubresults),n&&n.find("."+l.listview).children().removeClass(l.hidden)})}),e(r.get().reverse()).each(function(s){var n=e(this),i=n.data(t.parent);i&&(o.__filterListItems(n.find("."+l.listview).children()).length?(i.hasClass(l.hidden)&&i.children("."+l.next).not("."+l.fullsubopen).addClass(l.fullsubopen).addClass(l.fullsubopensearch),i.removeClass(l.hidden).removeClass(l.nosubresults).prevAll("."+l.divider).first().removeClass(l.hidden)):a||(n.hasClass(l.opened)&&setTimeout(function(){o.openPanel(i.closest("."+l.panel))},1.5*(s+1)*o.conf.openingInterval),i.addClass(l.nosubresults)))}),c[p.not("."+l.hidden).length?"removeClass":"addClass"](l.noresults),this.update()};h.off(i.keyup+"-searchfield "+i.change+"-searchfield").on(i.keyup+"-searchfield",function(e){s(e.keyCode)||b.call(o)}).on(i.change+"-searchfield",function(){b.call(o)})})}})},add:function(){l=e[n]._c,t=e[n]._d,i=e[n]._e,l.add("search hassearch noresultsmsg noresults nosubresults fullsubopensearch"),i.add("change keyup")},clickAnchor:function(){}},e[n].defaults[a]={add:!1,addTo:"panels",search:!0,placeholder:"Search",noResults:"No results found.",showTextItems:!1,showSubPanels:!0},e[n].configuration[a]={form:!1};var l,t,i,r}(jQuery);!function(e){var a="mmenu",r="sectionIndexer";e[a].addons[r]={setup:function(){var n=this,d=this.opts[r];this.conf[r],t=e[a].glbl,"boolean"==typeof d&&(d={add:d}),"object"!=typeof d&&(d={}),d=this.opts[r]=e.extend(!0,{},e[a].defaults[r],d),this.bind("init",function(a){if(d.add){switch(d.addTo){case"panels":var r=a;break;default:var r=e(d.addTo,this.$menu).filter("."+i.panel)}r.find("."+i.divider).closest("."+i.panel).addClass(i.hasindexer)}if(!this.$indexer&&this.$menu.children("."+i.hasindexer).length){this.$indexer=e('<div class="'+i.indexer+'" />').prependTo(this.$menu).append('<a href="#a">a</a><a href="#b">b</a><a href="#c">c</a><a href="#d">d</a><a href="#e">e</a><a href="#f">f</a><a href="#g">g</a><a href="#h">h</a><a href="#i">i</a><a href="#j">j</a><a href="#k">k</a><a href="#l">l</a><a href="#m">m</a><a href="#n">n</a><a href="#o">o</a><a href="#p">p</a><a href="#q">q</a><a href="#r">r</a><a href="#s">s</a><a href="#t">t</a><a href="#u">u</a><a href="#v">v</a><a href="#w">w</a><a href="#x">x</a><a href="#y">y</a><a href="#z">z</a>'),this.$indexer.children().on(s.mouseover+"-searchfield "+i.touchstart+"-searchfield",function(){var a=e(this).attr("href").slice(1),r=n.$menu.children("."+i.current),s=r.find("."+i.listview),t=!1,d=r.scrollTop(),h=s.position().top+parseInt(s.css("margin-top"),10)+parseInt(s.css("padding-top"),10)+d;r.scrollTop(0),s.children("."+i.divider).not("."+i.hidden).each(function(){t===!1&&a==e(this).text().slice(0,1).toLowerCase()&&(t=e(this).position().top+h)}),r.scrollTop(t!==!1?t:d)});var t=function(e){n.$menu[(e.hasClass(i.hasindexer)?"add":"remove")+"Class"](i.hasindexer)};this.bind("openPanel",t),t.call(this,this.$menu.children("."+i.current))}})},add:function(){i=e[a]._c,n=e[a]._d,s=e[a]._e,i.add("indexer hasindexer"),s.add("mouseover touchstart")},clickAnchor:function(e){return e.parent().is("."+i.indexer)?!0:void 0}},e[a].defaults[r]={add:!1,addTo:"panels"};var i,n,s,t}(jQuery);!function(t){var e="mmenu",c="toggles";t[e].addons[c]={setup:function(){var n=this;this.opts[c],this.conf[c],l=t[e].glbl,this.bind("init",function(e){this.__refactorClass(t("input",e),this.conf.classNames[c].toggle,"toggle"),this.__refactorClass(t("input",e),this.conf.classNames[c].check,"check"),t("input."+s.toggle+", input."+s.check,e).each(function(){var e=t(this),c=e.closest("li"),i=e.hasClass(s.toggle)?"toggle":"check",l=e.attr("id")||n.__getUniqueId();c.children('label[for="'+l+'"]').length||(e.attr("id",l),c.prepend(e),t('<label for="'+l+'" class="'+s[i]+'"></label>').insertBefore(c.children("a, span").last()))})})},add:function(){s=t[e]._c,n=t[e]._d,i=t[e]._e,s.add("toggle check")},clickAnchor:function(){}},t[e].configuration.classNames[c]={toggle:"Toggle",check:"Check"};var s,n,i,l}(jQuery);
/*! This file is auto-generated */
window.addComment=function(v){var I,C,h,E=v.document,b={commentReplyClass:"comment-reply-link",commentReplyTitleId:"reply-title",cancelReplyId:"cancel-comment-reply-link",commentFormId:"commentform",temporaryFormId:"wp-temp-form-div",parentIdFieldId:"comment_parent",postIdFieldId:"comment_post_ID"},e=v.MutationObserver||v.WebKitMutationObserver||v.MozMutationObserver,r="querySelector"in E&&"addEventListener"in v,n=!!E.documentElement.dataset;function t(){d(),e&&new e(o).observe(E.body,{childList:!0,subtree:!0})}function d(e){if(r&&(I=g(b.cancelReplyId),C=g(b.commentFormId),I)){I.addEventListener("touchstart",l),I.addEventListener("click",l);var t=function(e){if((e.metaKey||e.ctrlKey)&&13===e.keyCode)return C.removeEventListener("keydown",t),e.preventDefault(),C.submit.click(),!1};C&&C.addEventListener("keydown",t);for(var n,d=function(e){var t=b.commentReplyClass;e&&e.childNodes||(e=E);t=E.getElementsByClassName?e.getElementsByClassName(t):e.querySelectorAll("."+t);return t}(e),o=0,i=d.length;o<i;o++)(n=d[o]).addEventListener("touchstart",a),n.addEventListener("click",a)}}function l(e){var t,n,d=g(b.temporaryFormId);d&&h&&(g(b.parentIdFieldId).value="0",t=d.textContent,d.parentNode.replaceChild(h,d),this.style.display="none",n=(d=(n=g(b.commentReplyTitleId))&&n.firstChild)&&d.nextSibling,d&&d.nodeType===Node.TEXT_NODE&&t&&(n&&"A"===n.nodeName&&n.id!==b.cancelReplyId&&(n.style.display=""),d.textContent=t),e.preventDefault())}function a(e){var t=g(b.commentReplyTitleId),n=t&&t.firstChild.textContent,d=this,o=m(d,"belowelement"),i=m(d,"commentid"),r=m(d,"respondelement"),t=m(d,"postid"),n=m(d,"replyto")||n;o&&i&&r&&t&&!1===v.addComment.moveForm(o,i,r,t,n)&&e.preventDefault()}function o(e){for(var t=e.length;t--;)if(e[t].addedNodes.length)return void d()}function m(e,t){return n?e.dataset[t]:e.getAttribute("data-"+t)}function g(e){return E.getElementById(e)}return r&&"loading"!==E.readyState?t():r&&v.addEventListener("DOMContentLoaded",t,!1),{init:d,moveForm:function(e,t,n,d,o){var i=g(e);h=g(n);var r,l,a,m,c,s=g(b.parentIdFieldId),y=g(b.postIdFieldId),p=(c=g(b.commentReplyTitleId))&&c.firstChild,u=p&&p.nextSibling;if(i&&h&&s){void 0===o&&(o=p&&p.textContent),m=h,e=b.temporaryFormId,n=g(e),c=(c=g(b.commentReplyTitleId))?c.firstChild.textContent:"",n||((n=E.createElement("div")).id=e,n.style.display="none",n.textContent=c,m.parentNode.insertBefore(n,m)),d&&y&&(y.value=d),s.value=t,I.style.display="",i.parentNode.insertBefore(h,i.nextSibling),p&&p.nodeType===Node.TEXT_NODE&&(u&&"A"===u.nodeName&&u.id!==b.cancelReplyId&&(u.style.display="none"),p.textContent=o),I.onclick=function(){return!1};try{for(var f=0;f<C.elements.length;f++)if(r=C.elements[f],l=!1,"getComputedStyle"in v?a=v.getComputedStyle(r):E.documentElement.currentStyle&&(a=r.currentStyle),(r.offsetWidth<=0&&r.offsetHeight<=0||"hidden"===a.visibility)&&(l=!0),"hidden"!==r.type&&!r.disabled&&!l){r.focus();break}}catch(e){}return!1}}}}(window);
/*! jQuery Color v@2.1.2 with SVG Color Names http://github.com/jquery/jquery-color | jquery.org/license */
(function(a,b){function m(a,b,c){var d=h[b.type]||{};return a==null?c||!b.def?null:b.def:(a=d.floor?~~a:parseFloat(a),isNaN(a)?b.def:d.mod?(a+d.mod)%d.mod:0>a?0:d.max<a?d.max:a)}function n(b){var c=f(),d=c._rgba=[];return b=b.toLowerCase(),l(e,function(a,e){var f,h=e.re.exec(b),i=h&&e.parse(h),j=e.space||"rgba";if(i)return f=c[j](i),c[g[j].cache]=f[g[j].cache],d=c._rgba=f._rgba,!1}),d.length?(d.join()==="0,0,0,0"&&a.extend(d,k.transparent),c):k[b]}function o(a,b,c){return c=(c+1)%1,c*6<1?a+(b-a)*c*6:c*2<1?b:c*3<2?a+(b-a)*(2/3-c)*6:a}var c="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",d=/^([\-+])=\s*(\d+\.?\d*)/,e=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1],a[2],a[3],a[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(a){return[a[1]*2.55,a[2]*2.55,a[3]*2.55,a[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(a){return[a[1],a[2]/100,a[3]/100,a[4]]}}],f=a.Color=function(b,c,d,e){return new a.Color.fn.parse(b,c,d,e)},g={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},h={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},i=f.support={},j=a("<p>")[0],k,l=a.each;j.style.cssText="background-color:rgba(1,1,1,.5)",i.rgba=j.style.backgroundColor.indexOf("rgba")>-1,l(g,function(a,b){b.cache="_"+a,b.props.alpha={idx:3,type:"percent",def:1}}),f.fn=a.extend(f.prototype,{parse:function(c,d,e,h){if(c===b)return this._rgba=[null,null,null,null],this;if(c.jquery||c.nodeType)c=a(c).css(d),d=b;var i=this,j=a.type(c),o=this._rgba=[];d!==b&&(c=[c,d,e,h],j="array");if(j==="string")return this.parse(n(c)||k._default);if(j==="array")return l(g.rgba.props,function(a,b){o[b.idx]=m(c[b.idx],b)}),this;if(j==="object")return c instanceof f?l(g,function(a,b){c[b.cache]&&(i[b.cache]=c[b.cache].slice())}):l(g,function(b,d){var e=d.cache;l(d.props,function(a,b){if(!i[e]&&d.to){if(a==="alpha"||c[a]==null)return;i[e]=d.to(i._rgba)}i[e][b.idx]=m(c[a],b,!0)}),i[e]&&a.inArray(null,i[e].slice(0,3))<0&&(i[e][3]=1,d.from&&(i._rgba=d.from(i[e])))}),this},is:function(a){var b=f(a),c=!0,d=this;return l(g,function(a,e){var f,g=b[e.cache];return g&&(f=d[e.cache]||e.to&&e.to(d._rgba)||[],l(e.props,function(a,b){if(g[b.idx]!=null)return c=g[b.idx]===f[b.idx],c})),c}),c},_space:function(){var a=[],b=this;return l(g,function(c,d){b[d.cache]&&a.push(c)}),a.pop()},transition:function(a,b){var c=f(a),d=c._space(),e=g[d],i=this.alpha()===0?f("transparent"):this,j=i[e.cache]||e.to(i._rgba),k=j.slice();return c=c[e.cache],l(e.props,function(a,d){var e=d.idx,f=j[e],g=c[e],i=h[d.type]||{};if(g===null)return;f===null?k[e]=g:(i.mod&&(g-f>i.mod/2?f+=i.mod:f-g>i.mod/2&&(f-=i.mod)),k[e]=m((g-f)*b+f,d))}),this[d](k)},blend:function(b){if(this._rgba[3]===1)return this;var c=this._rgba.slice(),d=c.pop(),e=f(b)._rgba;return f(a.map(c,function(a,b){return(1-d)*e[b]+d*a}))},toRgbaString:function(){var b="rgba(",c=a.map(this._rgba,function(a,b){return a==null?b>2?1:0:a});return c[3]===1&&(c.pop(),b="rgb("),b+c.join()+")"},toHslaString:function(){var b="hsla(",c=a.map(this.hsla(),function(a,b){return a==null&&(a=b>2?1:0),b&&b<3&&(a=Math.round(a*100)+"%"),a});return c[3]===1&&(c.pop(),b="hsl("),b+c.join()+")"},toHexString:function(b){var c=this._rgba.slice(),d=c.pop();return b&&c.push(~~(d*255)),"#"+a.map(c,function(a){return a=(a||0).toString(16),a.length===1?"0"+a:a}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),f.fn.parse.prototype=f.fn,g.hsla.to=function(a){if(a[0]==null||a[1]==null||a[2]==null)return[null,null,null,a[3]];var b=a[0]/255,c=a[1]/255,d=a[2]/255,e=a[3],f=Math.max(b,c,d),g=Math.min(b,c,d),h=f-g,i=f+g,j=i*.5,k,l;return g===f?k=0:b===f?k=60*(c-d)/h+360:c===f?k=60*(d-b)/h+120:k=60*(b-c)/h+240,h===0?l=0:j<=.5?l=h/i:l=h/(2-i),[Math.round(k)%360,l,j,e==null?1:e]},g.hsla.from=function(a){if(a[0]==null||a[1]==null||a[2]==null)return[null,null,null,a[3]];var b=a[0]/360,c=a[1],d=a[2],e=a[3],f=d<=.5?d*(1+c):d+c-d*c,g=2*d-f;return[Math.round(o(g,f,b+1/3)*255),Math.round(o(g,f,b)*255),Math.round(o(g,f,b-1/3)*255),e]},l(g,function(c,e){var g=e.props,h=e.cache,i=e.to,j=e.from;f.fn[c]=function(c){i&&!this[h]&&(this[h]=i(this._rgba));if(c===b)return this[h].slice();var d,e=a.type(c),k=e==="array"||e==="object"?c:arguments,n=this[h].slice();return l(g,function(a,b){var c=k[e==="object"?a:b.idx];c==null&&(c=n[b.idx]),n[b.idx]=m(c,b)}),j?(d=f(j(n)),d[h]=n,d):f(n)},l(g,function(b,e){if(f.fn[b])return;f.fn[b]=function(f){var g=a.type(f),h=b==="alpha"?this._hsla?"hsla":"rgba":c,i=this[h](),j=i[e.idx],k;return g==="undefined"?j:(g==="function"&&(f=f.call(this,j),g=a.type(f)),f==null&&e.empty?this:(g==="string"&&(k=d.exec(f),k&&(f=j+parseFloat(k[2])*(k[1]==="+"?1:-1))),i[e.idx]=f,this[h](i)))}})}),f.hook=function(b){var c=b.split(" ");l(c,function(b,c){a.cssHooks[c]={set:function(b,d){var e,g,h="";if(d!=="transparent"&&(a.type(d)!=="string"||(e=n(d)))){d=f(e||d);if(!i.rgba&&d._rgba[3]!==1){g=c==="backgroundColor"?b.parentNode:b;while((h===""||h==="transparent")&&g&&g.style)try{h=a.css(g,"backgroundColor"),g=g.parentNode}catch(j){}d=d.blend(h&&h!=="transparent"?h:"_default")}d=d.toRgbaString()}try{b.style[c]=d}catch(j){}}},a.fx.step[c]=function(b){b.colorInit||(b.start=f(b.elem,c),b.end=f(b.end),b.colorInit=!0),a.cssHooks[c].set(b.elem,b.start.transition(b.end,b.pos))}})},f.hook(c),a.cssHooks.borderColor={expand:function(a){var b={};return l(["Top","Right","Bottom","Left"],function(c,d){b["border"+d+"Color"]=a}),b}},k=a.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}})(jQuery),jQuery.extend(jQuery.Color.names,{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",blanchedalmond:"#ffebcd",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",limegreen:"#32cd32",linen:"#faf0e6",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",oldlace:"#fdf5e6",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",whitesmoke:"#f5f5f5",yellowgreen:"#9acd32"});
/*!
 * jQuery UI Effects 1.12.1
 * http://jqueryui.com
 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 */
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(u){u.ui=u.ui||{},u.ui.version="1.12.1";var l,d,a,p,t,h,g,m,s,e,b,o,i,c,f,v,n,r,y,x,C,w="ui-effects-",k="ui-effects-style",_="ui-effects-animated",S=u;function M(t,e,n){var r=m[e.type]||{};return null==t?n||!e.def?null:e.def:(t=r.floor?~~t:parseFloat(t),isNaN(t)?e.def:r.mod?(t+r.mod)%r.mod:t<0?0:r.max<t?r.max:t)}function B(r){var i=h(),o=i._rgba=[];return r=r.toLowerCase(),b(t,function(t,e){var n=e.re.exec(r),n=n&&e.parse(n),e=e.space||"rgba";if(n)return n=i[e](n),i[g[e].cache]=n[g[e].cache],o=i._rgba=n._rgba,!1}),o.length?("0,0,0,0"===o.join()&&l.extend(o,a.transparent),i):a[r]}function H(t,e,n){return 6*(n=(n+1)%1)<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function I(t){var e,n,r=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,i={};if(r&&r.length&&r[0]&&r[r[0]])for(n=r.length;n--;)"string"==typeof r[e=r[n]]&&(i[u.camelCase(e)]=r[e]);else for(e in r)"string"==typeof r[e]&&(i[e]=r[e]);return i}function T(t,e,n,r){return t={effect:t=u.isPlainObject(t)?(e=t).effect:t},u.isFunction(e=null==e?{}:e)&&(r=e,n=null,e={}),"number"!=typeof e&&!u.fx.speeds[e]||(r=n,n=e,e={}),u.isFunction(n)&&(r=n,n=null),e&&u.extend(t,e),n=n||e.duration,t.duration=u.fx.off?0:"number"==typeof n?n:n in u.fx.speeds?u.fx.speeds[n]:u.fx.speeds._default,t.complete=r||e.complete,t}function F(t){return!t||"number"==typeof t||u.fx.speeds[t]||("string"==typeof t&&!u.effects.effect[t]||(u.isFunction(t)||"object"==typeof t&&!t.effect))}function W(t,e){var n=e.outerWidth(),e=e.outerHeight(),t=/^rect\((-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto),?\s*(-?\d*\.?\d*px|-?\d+%|auto)\)$/.exec(t)||["",0,n,e,0];return{top:parseFloat(t[1])||0,right:"auto"===t[2]?n:parseFloat(t[2]),bottom:"auto"===t[3]?e:parseFloat(t[3]),left:parseFloat(t[4])||0}}return u.effects={effect:{}},
/*!
 * jQuery Color Animations v2.1.2
 * https://github.com/jquery/jquery-color
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Wed Jan 16 08:47:09 2013 -0600
 */
p=/^([\-+])=\s*(\d+\.?\d*)/,t=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],h=(l=S).Color=function(t,e,n,r){return new l.Color.fn.parse(t,e,n,r)},g={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},m={byte:{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},s=h.support={},e=l("<p>")[0],b=l.each,e.style.cssText="background-color:rgba(1,1,1,.5)",s.rgba=-1<e.style.backgroundColor.indexOf("rgba"),b(g,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),h.fn=l.extend(h.prototype,{parse:function(i,t,e,n){if(i===d)return this._rgba=[null,null,null,null],this;(i.jquery||i.nodeType)&&(i=l(i).css(t),t=d);var o=this,r=l.type(i),s=this._rgba=[];return t!==d&&(i=[i,t,e,n],r="array"),"string"===r?this.parse(B(i)||a._default):"array"===r?(b(g.rgba.props,function(t,e){s[e.idx]=M(i[e.idx],e)}),this):"object"===r?(b(g,i instanceof h?function(t,e){i[e.cache]&&(o[e.cache]=i[e.cache].slice())}:function(t,n){var r=n.cache;b(n.props,function(t,e){if(!o[r]&&n.to){if("alpha"===t||null==i[t])return;o[r]=n.to(o._rgba)}o[r][e.idx]=M(i[t],e,!0)}),o[r]&&l.inArray(null,o[r].slice(0,3))<0&&(o[r][3]=1,n.from&&(o._rgba=n.from(o[r])))}),this):void 0},is:function(t){var i=h(t),o=!0,s=this;return b(g,function(t,e){var n,r=i[e.cache];return r&&(n=s[e.cache]||e.to&&e.to(s._rgba)||[],b(e.props,function(t,e){if(null!=r[e.idx])return o=r[e.idx]===n[e.idx]})),o}),o},_space:function(){var n=[],r=this;return b(g,function(t,e){r[e.cache]&&n.push(t)}),n.pop()},transition:function(t,s){var e=(f=h(t))._space(),n=g[e],t=0===this.alpha()?h("transparent"):this,a=t[n.cache]||n.to(t._rgba),c=a.slice(),f=f[n.cache];return b(n.props,function(t,e){var n=e.idx,r=a[n],i=f[n],o=m[e.type]||{};null!==i&&(null===r?c[n]=i:(o.mod&&(i-r>o.mod/2?r+=o.mod:r-i>o.mod/2&&(r-=o.mod)),c[n]=M((i-r)*s+r,e)))}),this[e](c)},blend:function(t){if(1===this._rgba[3])return this;var e=this._rgba.slice(),n=e.pop(),r=h(t)._rgba;return h(l.map(e,function(t,e){return(1-n)*r[e]+n*t}))},toRgbaString:function(){var t="rgba(",e=l.map(this._rgba,function(t,e){return null==t?2<e?1:0:t});return 1===e[3]&&(e.pop(),t="rgb("),t+e.join()+")"},toHslaString:function(){var t="hsla(",e=l.map(this.hsla(),function(t,e){return null==t&&(t=2<e?1:0),t=e&&e<3?Math.round(100*t)+"%":t});return 1===e[3]&&(e.pop(),t="hsl("),t+e.join()+")"},toHexString:function(t){var e=this._rgba.slice(),n=e.pop();return t&&e.push(~~(255*n)),"#"+l.map(e,function(t){return 1===(t=(t||0).toString(16)).length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),h.fn.parse.prototype=h.fn,g.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/255,n=t[1]/255,r=t[2]/255,i=t[3],o=Math.max(e,n,r),s=Math.min(e,n,r),a=o-s,c=o+s,t=.5*c,n=s===o?0:e===o?60*(n-r)/a+360:n===o?60*(r-e)/a+120:60*(e-n)/a+240,c=0==a?0:t<=.5?a/c:a/(2-c);return[Math.round(n)%360,c,t,null==i?1:i]},g.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,n=t[1],r=t[2],t=t[3],n=r<=.5?r*(1+n):r+n-r*n,r=2*r-n;return[Math.round(255*H(r,n,e+1/3)),Math.round(255*H(r,n,e)),Math.round(255*H(r,n,e-1/3)),t]},b(g,function(c,t){var o=t.props,s=t.cache,a=t.to,f=t.from;h.fn[c]=function(t){if(a&&!this[s]&&(this[s]=a(this._rgba)),t===d)return this[s].slice();var e,n=l.type(t),r="array"===n||"object"===n?t:arguments,i=this[s].slice();return b(o,function(t,e){t=r["object"===n?t:e.idx];null==t&&(t=i[e.idx]),i[e.idx]=M(t,e)}),f?((e=h(f(i)))[s]=i,e):h(i)},b(o,function(s,a){h.fn[s]||(h.fn[s]=function(t){var e,n=l.type(t),r="alpha"===s?this._hsla?"hsla":"rgba":c,i=this[r](),o=i[a.idx];return"undefined"===n?o:("function"===n&&(t=t.call(this,o),n=l.type(t)),null==t&&a.empty?this:("string"===n&&(e=p.exec(t))&&(t=o+parseFloat(e[2])*("+"===e[1]?1:-1)),i[a.idx]=t,this[r](i)))})})}),h.hook=function(t){t=t.split(" ");b(t,function(t,o){l.cssHooks[o]={set:function(t,e){var n,r,i="";if("transparent"!==e&&("string"!==l.type(e)||(n=B(e)))){if(e=h(n||e),!s.rgba&&1!==e._rgba[3]){for(r="backgroundColor"===o?t.parentNode:t;(""===i||"transparent"===i)&&r&&r.style;)try{i=l.css(r,"backgroundColor"),r=r.parentNode}catch(t){}e=e.blend(i&&"transparent"!==i?i:"_default")}e=e.toRgbaString()}try{t.style[o]=e}catch(t){}}},l.fx.step[o]=function(t){t.colorInit||(t.start=h(t.elem,o),t.end=h(t.end),t.colorInit=!0),l.cssHooks[o].set(t.elem,t.start.transition(t.end,t.pos))}})},h.hook("backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor"),l.cssHooks.borderColor={expand:function(n){var r={};return b(["Top","Right","Bottom","Left"],function(t,e){r["border"+e+"Color"]=n}),r}},a=l.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"},f=["add","remove","toggle"],v={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1},u.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,e){u.fx.step[e]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(S.style(t.elem,e,t.end),t.setAttr=!0)}}),u.fn.addBack||(u.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),u.effects.animateClass=function(i,t,e,n){var o=u.speed(t,e,n);return this.queue(function(){var n=u(this),t=n.attr("class")||"",e=(e=o.children?n.find("*").addBack():n).map(function(){return{el:u(this),start:I(this)}}),r=function(){u.each(f,function(t,e){i[e]&&n[e+"Class"](i[e])})};r(),e=e.map(function(){return this.end=I(this.el[0]),this.diff=function(t,e){var n,r,i={};for(n in e)r=e[n],t[n]!==r&&(v[n]||!u.fx.step[n]&&isNaN(parseFloat(r))||(i[n]=r));return i}(this.start,this.end),this}),n.attr("class",t),e=e.map(function(){var t=this,e=u.Deferred(),n=u.extend({},o,{queue:!1,complete:function(){e.resolve(t)}});return this.el.animate(this.diff,n),e.promise()}),u.when.apply(u,e.get()).done(function(){r(),u.each(arguments,function(){var e=this.el;u.each(this.diff,function(t){e.css(t,"")})}),o.complete.call(n[0])})})},u.fn.extend({addClass:(c=u.fn.addClass,function(t,e,n,r){return e?u.effects.animateClass.call(this,{add:t},e,n,r):c.apply(this,arguments)}),removeClass:(i=u.fn.removeClass,function(t,e,n,r){return 1<arguments.length?u.effects.animateClass.call(this,{remove:t},e,n,r):i.apply(this,arguments)}),toggleClass:(o=u.fn.toggleClass,function(t,e,n,r,i){return"boolean"==typeof e||void 0===e?n?u.effects.animateClass.call(this,e?{add:t}:{remove:t},n,r,i):o.apply(this,arguments):u.effects.animateClass.call(this,{toggle:t},e,n,r)}),switchClass:function(t,e,n,r,i){return u.effects.animateClass.call(this,{add:e,remove:t},n,r,i)}}),u.expr&&u.expr.filters&&u.expr.filters.animated&&(u.expr.filters.animated=(n=u.expr.filters.animated,function(t){return!!u(t).data(_)||n(t)})),!1!==u.uiBackCompat&&u.extend(u.effects,{save:function(t,e){for(var n=0,r=e.length;n<r;n++)null!==e[n]&&t.data(w+e[n],t[0].style[e[n]])},restore:function(t,e){for(var n,r=0,i=e.length;r<i;r++)null!==e[r]&&(n=t.data(w+e[r]),t.css(e[r],n))},setMode:function(t,e){return e="toggle"===e?t.is(":hidden")?"show":"hide":e},createWrapper:function(n){if(n.parent().is(".ui-effects-wrapper"))return n.parent();var r={width:n.outerWidth(!0),height:n.outerHeight(!0),float:n.css("float")},t=u("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),e={width:n.width(),height:n.height()},i=document.activeElement;try{i.id}catch(t){i=document.body}return n.wrap(t),n[0]!==i&&!u.contains(n[0],i)||u(i).trigger("focus"),t=n.parent(),"static"===n.css("position")?(t.css({position:"relative"}),n.css({position:"relative"})):(u.extend(r,{position:n.css("position"),zIndex:n.css("z-index")}),u.each(["top","left","bottom","right"],function(t,e){r[e]=n.css(e),isNaN(parseInt(r[e],10))&&(r[e]="auto")}),n.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),n.css(e),t.css(r).show()},removeWrapper:function(t){var e=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),t[0]!==e&&!u.contains(t[0],e)||u(e).trigger("focus")),t}}),u.extend(u.effects,{version:"1.12.1",define:function(t,e,n){return n||(n=e,e="effect"),u.effects.effect[t]=n,u.effects.effect[t].mode=e,n},scaledDimensions:function(t,e,n){if(0===e)return{height:0,width:0,outerHeight:0,outerWidth:0};var r="horizontal"!==n?(e||100)/100:1,e="vertical"!==n?(e||100)/100:1;return{height:t.height()*e,width:t.width()*r,outerHeight:t.outerHeight()*e,outerWidth:t.outerWidth()*r}},clipToBox:function(t){return{width:t.clip.right-t.clip.left,height:t.clip.bottom-t.clip.top,left:t.clip.left,top:t.clip.top}},unshift:function(t,e,n){var r=t.queue();1<e&&r.splice.apply(r,[1,0].concat(r.splice(e,n))),t.dequeue()},saveStyle:function(t){t.data(k,t[0].style.cssText)},restoreStyle:function(t){t[0].style.cssText=t.data(k)||"",t.removeData(k)},mode:function(t,e){t=t.is(":hidden");return"toggle"===e&&(e=t?"show":"hide"),e=(t?"hide"===e:"show"===e)?"none":e},getBaseline:function(t,e){var n,r;switch(t[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=t[0]/e.height}switch(t[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=t[1]/e.width}return{x:r,y:n}},createPlaceholder:function(t){var e,n=t.css("position"),r=t.position();return t.css({marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()),/^(static|relative)/.test(n)&&(n="absolute",e=u("<"+t[0].nodeName+">").insertAfter(t).css({display:/^(inline|ruby)/.test(t.css("display"))?"inline-block":"block",visibility:"hidden",marginTop:t.css("marginTop"),marginBottom:t.css("marginBottom"),marginLeft:t.css("marginLeft"),marginRight:t.css("marginRight"),float:t.css("float")}).outerWidth(t.outerWidth()).outerHeight(t.outerHeight()).addClass("ui-effects-placeholder"),t.data(w+"placeholder",e)),t.css({position:n,left:r.left,top:r.top}),e},removePlaceholder:function(t){var e=w+"placeholder",n=t.data(e);n&&(n.remove(),t.removeData(e))},cleanUp:function(t){u.effects.restoreStyle(t),u.effects.removePlaceholder(t)},setTransition:function(r,t,i,o){return o=o||{},u.each(t,function(t,e){var n=r.cssUnit(e);0<n[0]&&(o[e]=n[0]*i+n[1])}),o}}),u.fn.extend({effect:function(){function t(t){var e=u(this),n=u.effects.mode(e,a)||o;e.data(_,!0),c.push(n),o&&("show"===n||n===o&&"hide"===n)&&e.show(),o&&"none"===n||u.effects.saveStyle(e),u.isFunction(t)&&t()}var r=T.apply(this,arguments),i=u.effects.effect[r.effect],o=i.mode,e=r.queue,n=e||"fx",s=r.complete,a=r.mode,c=[];return u.fx.off||!i?a?this[a](r.duration,s):this.each(function(){s&&s.call(this)}):!1===e?this.each(t).each(f):this.queue(n,t).queue(n,f);function f(t){var e=u(this);function n(){u.isFunction(s)&&s.call(e[0]),u.isFunction(t)&&t()}r.mode=c.shift(),!1===u.uiBackCompat||o?"none"===r.mode?(e[a](),n()):i.call(e[0],r,function(){e.removeData(_),u.effects.cleanUp(e),"hide"===r.mode&&e.hide(),n()}):(e.is(":hidden")?"hide"===a:"show"===a)?(e[a](),n()):i.call(e[0],r,n)}},show:(x=u.fn.show,function(t){if(F(t))return x.apply(this,arguments);var e=T.apply(this,arguments);return e.mode="show",this.effect.call(this,e)}),hide:(y=u.fn.hide,function(t){if(F(t))return y.apply(this,arguments);var e=T.apply(this,arguments);return e.mode="hide",this.effect.call(this,e)}),toggle:(r=u.fn.toggle,function(t){if(F(t)||"boolean"==typeof t)return r.apply(this,arguments);var e=T.apply(this,arguments);return e.mode="toggle",this.effect.call(this,e)}),cssUnit:function(t){var n=this.css(t),r=[];return u.each(["em","px","%","pt"],function(t,e){0<n.indexOf(e)&&(r=[parseFloat(n),e])}),r},cssClip:function(t){return t?this.css("clip","rect("+t.top+"px "+t.right+"px "+t.bottom+"px "+t.left+"px)"):W(this.css("clip"),this)},transfer:function(t,e){var n=u(this),r=u(t.to),i="fixed"===r.css("position"),o=u("body"),s=i?o.scrollTop():0,a=i?o.scrollLeft():0,o=r.offset(),o={top:o.top-s,left:o.left-a,height:r.innerHeight(),width:r.innerWidth()},r=n.offset(),c=u("<div class='ui-effects-transfer'></div>").appendTo("body").addClass(t.className).css({top:r.top-s,left:r.left-a,height:n.innerHeight(),width:n.innerWidth(),position:i?"fixed":"absolute"}).animate(o,t.duration,t.easing,function(){c.remove(),u.isFunction(e)&&e()})}}),u.fx.step.clip=function(t){t.clipInit||(t.start=u(t.elem).cssClip(),"string"==typeof t.end&&(t.end=W(t.end,t.elem)),t.clipInit=!0),u(t.elem).cssClip({top:t.pos*(t.end.top-t.start.top)+t.start.top,right:t.pos*(t.end.right-t.start.right)+t.start.right,bottom:t.pos*(t.end.bottom-t.start.bottom)+t.start.bottom,left:t.pos*(t.end.left-t.start.left)+t.start.left})},C={},u.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,t){C[t]=function(t){return Math.pow(t,e+2)}}),u.extend(C,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,n=4;t<((e=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*e-2)/22-t,2)}}),u.each(C,function(t,e){u.easing["easeIn"+t]=e,u.easing["easeOut"+t]=function(t){return 1-e(1-t)},u.easing["easeInOut"+t]=function(t){return t<.5?e(2*t)/2:1-e(-2*t+2)/2}}),u.effects});
/*! This file is auto-generated */
!function(){function t(){}var n=this,r=n._,e=Array.prototype,o=Object.prototype,u=Function.prototype,i=e.push,c=e.slice,l=o.toString,a=o.hasOwnProperty,f=Array.isArray,s=Object.keys,p=u.bind,h=Object.create,v=function(n){return n instanceof v?n:this instanceof v?void(this._wrapped=n):new v(n)};"undefined"!=typeof exports?(exports="undefined"!=typeof module&&module.exports?module.exports=v:exports)._=v:n._=v,v.VERSION="1.8.3";var y=function(u,i,n){if(void 0===i)return u;switch(null==n?3:n){case 1:return function(n){return u.call(i,n)};case 2:return function(n,t){return u.call(i,n,t)};case 3:return function(n,t,r){return u.call(i,n,t,r)};case 4:return function(n,t,r,e){return u.call(i,n,t,r,e)}}return function(){return u.apply(i,arguments)}},d=function(n,t,r){return null==n?v.identity:v.isFunction(n)?y(n,t,r):v.isObject(n)?v.matcher(n):v.property(n)};v.iteratee=function(n,t){return d(n,t,1/0)};function g(n){return v.isObject(n)?h?h(n):(t.prototype=n,n=new t,t.prototype=null,n):{}}var m=function(c,f){return function(n){var t=arguments.length;if(t<2||null==n)return n;for(var r=1;r<t;r++)for(var e=arguments[r],u=c(e),i=u.length,o=0;o<i;o++){var a=u[o];f&&void 0!==n[a]||(n[a]=e[a])}return n}},b=function(t){return function(n){return null==n?void 0:n[t]}},x=Math.pow(2,53)-1,_=b("length"),j=function(n){n=_(n);return"number"==typeof n&&0<=n&&n<=x};function w(a){return function(n,t,r,e){t=y(t,e,4);var u=!j(n)&&v.keys(n),i=(u||n).length,o=0<a?0:i-1;return arguments.length<3&&(r=n[u?u[o]:o],o+=a),function(n,t,r,e,u,i){for(;0<=u&&u<i;u+=a){var o=e?e[u]:u;r=t(r,n[o],o,n)}return r}(n,t,r,u,o,i)}}v.each=v.forEach=function(n,t,r){if(t=y(t,r),j(n))for(u=0,i=n.length;u<i;u++)t(n[u],u,n);else for(var e=v.keys(n),u=0,i=e.length;u<i;u++)t(n[e[u]],e[u],n);return n},v.map=v.collect=function(n,t,r){t=d(t,r);for(var e=!j(n)&&v.keys(n),u=(e||n).length,i=Array(u),o=0;o<u;o++){var a=e?e[o]:o;i[o]=t(n[a],a,n)}return i},v.reduce=v.foldl=v.inject=w(1),v.reduceRight=v.foldr=w(-1),v.find=v.detect=function(n,t,r){r=j(n)?v.findIndex(n,t,r):v.findKey(n,t,r);if(void 0!==r&&-1!==r)return n[r]},v.filter=v.select=function(n,e,t){var u=[];return e=d(e,t),v.each(n,function(n,t,r){e(n,t,r)&&u.push(n)}),u},v.reject=function(n,t,r){return v.filter(n,v.negate(d(t)),r)},v.every=v.all=function(n,t,r){t=d(t,r);for(var e=!j(n)&&v.keys(n),u=(e||n).length,i=0;i<u;i++){var o=e?e[i]:i;if(!t(n[o],o,n))return!1}return!0},v.some=v.any=function(n,t,r){t=d(t,r);for(var e=!j(n)&&v.keys(n),u=(e||n).length,i=0;i<u;i++){var o=e?e[i]:i;if(t(n[o],o,n))return!0}return!1},v.contains=v.includes=v.include=function(n,t,r,e){return j(n)||(n=v.values(n)),0<=v.indexOf(n,t,r="number"!=typeof r||e?0:r)},v.invoke=function(n,r){var e=c.call(arguments,2),u=v.isFunction(r);return v.map(n,function(n){var t=u?r:n[r];return null==t?t:t.apply(n,e)})},v.pluck=function(n,t){return v.map(n,v.property(t))},v.where=function(n,t){return v.filter(n,v.matcher(t))},v.findWhere=function(n,t){return v.find(n,v.matcher(t))},v.max=function(n,e,t){var r,u,i=-1/0,o=-1/0;if(null==e&&null!=n)for(var a=0,c=(n=j(n)?n:v.values(n)).length;a<c;a++)r=n[a],i<r&&(i=r);else e=d(e,t),v.each(n,function(n,t,r){u=e(n,t,r),(o<u||u===-1/0&&i===-1/0)&&(i=n,o=u)});return i},v.min=function(n,e,t){var r,u,i=1/0,o=1/0;if(null==e&&null!=n)for(var a=0,c=(n=j(n)?n:v.values(n)).length;a<c;a++)(r=n[a])<i&&(i=r);else e=d(e,t),v.each(n,function(n,t,r){((u=e(n,t,r))<o||u===1/0&&i===1/0)&&(i=n,o=u)});return i},v.shuffle=function(n){for(var t,r=j(n)?n:v.values(n),e=r.length,u=Array(e),i=0;i<e;i++)(t=v.random(0,i))!==i&&(u[i]=u[t]),u[t]=r[i];return u},v.sample=function(n,t,r){return null==t||r?(n=!j(n)?v.values(n):n)[v.random(n.length-1)]:v.shuffle(n).slice(0,Math.max(0,t))},v.sortBy=function(n,e,t){return e=d(e,t),v.pluck(v.map(n,function(n,t,r){return{value:n,index:t,criteria:e(n,t,r)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;if(r!==e){if(e<r||void 0===r)return 1;if(r<e||void 0===e)return-1}return n.index-t.index}),"value")};u=function(i){return function(r,e,n){var u={};return e=d(e,n),v.each(r,function(n,t){t=e(n,t,r);i(u,n,t)}),u}};v.groupBy=u(function(n,t,r){v.has(n,r)?n[r].push(t):n[r]=[t]}),v.indexBy=u(function(n,t,r){n[r]=t}),v.countBy=u(function(n,t,r){v.has(n,r)?n[r]++:n[r]=1}),v.toArray=function(n){return n?v.isArray(n)?c.call(n):j(n)?v.map(n,v.identity):v.values(n):[]},v.size=function(n){return null==n?0:(j(n)?n:v.keys(n)).length},v.partition=function(n,e,t){e=d(e,t);var u=[],i=[];return v.each(n,function(n,t,r){(e(n,t,r)?u:i).push(n)}),[u,i]},v.first=v.head=v.take=function(n,t,r){if(null!=n)return null==t||r?n[0]:v.initial(n,n.length-t)},v.initial=function(n,t,r){return c.call(n,0,Math.max(0,n.length-(null==t||r?1:t)))},v.last=function(n,t,r){if(null!=n)return null==t||r?n[n.length-1]:v.rest(n,Math.max(0,n.length-t))},v.rest=v.tail=v.drop=function(n,t,r){return c.call(n,null==t||r?1:t)},v.compact=function(n){return v.filter(n,v.identity)};var A=function(n,t,r,e){for(var u=[],i=0,o=e||0,a=_(n);o<a;o++){var c=n[o];if(j(c)&&(v.isArray(c)||v.isArguments(c))){var f=0,l=(c=!t?A(c,t,r):c).length;for(u.length+=l;f<l;)u[i++]=c[f++]}else r||(u[i++]=c)}return u};function O(i){return function(n,t,r){t=d(t,r);for(var e=_(n),u=0<i?0:e-1;0<=u&&u<e;u+=i)if(t(n[u],u,n))return u;return-1}}function k(i,o,a){return function(n,t,r){var e=0,u=_(n);if("number"==typeof r)0<i?e=0<=r?r:Math.max(r+u,e):u=0<=r?Math.min(r+1,u):r+u+1;else if(a&&r&&u)return n[r=a(n,t)]===t?r:-1;if(t!=t)return 0<=(r=o(c.call(n,e,u),v.isNaN))?r+e:-1;for(r=0<i?e:u-1;0<=r&&r<u;r+=i)if(n[r]===t)return r;return-1}}v.flatten=function(n,t){return A(n,t,!1)},v.without=function(n){return v.difference(n,c.call(arguments,1))},v.uniq=v.unique=function(n,t,r,e){v.isBoolean(t)||(e=r,r=t,t=!1),null!=r&&(r=d(r,e));for(var u=[],i=[],o=0,a=_(n);o<a;o++){var c=n[o],f=r?r(c,o,n):c;t?(o&&i===f||u.push(c),i=f):r?v.contains(i,f)||(i.push(f),u.push(c)):v.contains(u,c)||u.push(c)}return u},v.union=function(){return v.uniq(A(arguments,!0,!0))},v.intersection=function(n){for(var t=[],r=arguments.length,e=0,u=_(n);e<u;e++){var i=n[e];if(!v.contains(t,i)){for(var o=1;o<r&&v.contains(arguments[o],i);o++);o===r&&t.push(i)}}return t},v.difference=function(n){var t=A(arguments,!0,!0,1);return v.filter(n,function(n){return!v.contains(t,n)})},v.zip=function(){return v.unzip(arguments)},v.unzip=function(n){for(var t=n&&v.max(n,_).length||0,r=Array(t),e=0;e<t;e++)r[e]=v.pluck(n,e);return r},v.object=function(n,t){for(var r={},e=0,u=_(n);e<u;e++)t?r[n[e]]=t[e]:r[n[e][0]]=n[e][1];return r},v.findIndex=O(1),v.findLastIndex=O(-1),v.sortedIndex=function(n,t,r,e){for(var u=(r=d(r,e,1))(t),i=0,o=_(n);i<o;){var a=Math.floor((i+o)/2);r(n[a])<u?i=a+1:o=a}return i},v.indexOf=k(1,v.findIndex,v.sortedIndex),v.lastIndexOf=k(-1,v.findLastIndex),v.range=function(n,t,r){null==t&&(t=n||0,n=0),r=r||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=Array(e),i=0;i<e;i++,n+=r)u[i]=n;return u};function F(n,t,r,e,u){return e instanceof t?(r=g(n.prototype),u=n.apply(r,u),v.isObject(u)?u:r):n.apply(r,u)}v.bind=function(n,t){if(p&&n.bind===p)return p.apply(n,c.call(arguments,1));if(!v.isFunction(n))throw new TypeError("Bind must be called on a function");var r=c.call(arguments,2),e=function(){return F(n,e,t,this,r.concat(c.call(arguments)))};return e},v.partial=function(u){var i=c.call(arguments,1),o=function(){for(var n=0,t=i.length,r=Array(t),e=0;e<t;e++)r[e]=i[e]===v?arguments[n++]:i[e];for(;n<arguments.length;)r.push(arguments[n++]);return F(u,o,this,this,r)};return o},v.bindAll=function(n){var t,r,e=arguments.length;if(e<=1)throw new Error("bindAll must be passed function names");for(t=1;t<e;t++)n[r=arguments[t]]=v.bind(n[r],n);return n},v.memoize=function(e,u){var i=function(n){var t=i.cache,r=""+(u?u.apply(this,arguments):n);return v.has(t,r)||(t[r]=e.apply(this,arguments)),t[r]};return i.cache={},i},v.delay=function(n,t){var r=c.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},v.defer=v.partial(v.delay,v,1),v.throttle=function(r,e,u){var i,o,a,c=null,f=0;u=u||{};function l(){f=!1===u.leading?0:v.now(),c=null,a=r.apply(i,o),c||(i=o=null)}return function(){var n=v.now();f||!1!==u.leading||(f=n);var t=e-(n-f);return i=this,o=arguments,t<=0||e<t?(c&&(clearTimeout(c),c=null),f=n,a=r.apply(i,o),c||(i=o=null)):c||!1===u.trailing||(c=setTimeout(l,t)),a}},v.debounce=function(t,r,e){var u,i,o,a,c,f=function(){var n=v.now()-a;n<r&&0<=n?u=setTimeout(f,r-n):(u=null,e||(c=t.apply(o,i),u||(o=i=null)))};return function(){o=this,i=arguments,a=v.now();var n=e&&!u;return u=u||setTimeout(f,r),n&&(c=t.apply(o,i),o=i=null),c}},v.wrap=function(n,t){return v.partial(t,n)},v.negate=function(n){return function(){return!n.apply(this,arguments)}},v.compose=function(){var r=arguments,e=r.length-1;return function(){for(var n=e,t=r[e].apply(this,arguments);n--;)t=r[n].call(this,t);return t}},v.after=function(n,t){return function(){if(--n<1)return t.apply(this,arguments)}},v.before=function(n,t){var r;return function(){return 0<--n&&(r=t.apply(this,arguments)),n<=1&&(t=null),r}},v.once=v.partial(v.before,2);var S=!{toString:null}.propertyIsEnumerable("toString"),E=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];function M(n,t){var r=E.length,e=n.constructor,u=v.isFunction(e)&&e.prototype||o,i="constructor";for(v.has(n,i)&&!v.contains(t,i)&&t.push(i);r--;)(i=E[r])in n&&n[i]!==u[i]&&!v.contains(t,i)&&t.push(i)}v.keys=function(n){if(!v.isObject(n))return[];if(s)return s(n);var t,r=[];for(t in n)v.has(n,t)&&r.push(t);return S&&M(n,r),r},v.allKeys=function(n){if(!v.isObject(n))return[];var t,r=[];for(t in n)r.push(t);return S&&M(n,r),r},v.values=function(n){for(var t=v.keys(n),r=t.length,e=Array(r),u=0;u<r;u++)e[u]=n[t[u]];return e},v.mapObject=function(n,t,r){t=d(t,r);for(var e,u=v.keys(n),i=u.length,o={},a=0;a<i;a++)o[e=u[a]]=t(n[e],e,n);return o},v.pairs=function(n){for(var t=v.keys(n),r=t.length,e=Array(r),u=0;u<r;u++)e[u]=[t[u],n[t[u]]];return e},v.invert=function(n){for(var t={},r=v.keys(n),e=0,u=r.length;e<u;e++)t[n[r[e]]]=r[e];return t},v.functions=v.methods=function(n){var t,r=[];for(t in n)v.isFunction(n[t])&&r.push(t);return r.sort()},v.extend=m(v.allKeys),v.extendOwn=v.assign=m(v.keys),v.findKey=function(n,t,r){t=d(t,r);for(var e,u=v.keys(n),i=0,o=u.length;i<o;i++)if(t(n[e=u[i]],e,n))return e},v.pick=function(n,t,r){var e,u,i={},o=n;if(null==o)return i;v.isFunction(t)?(u=v.allKeys(o),e=y(t,r)):(u=A(arguments,!1,!1,1),e=function(n,t,r){return t in r},o=Object(o));for(var a=0,c=u.length;a<c;a++){var f=u[a],l=o[f];e(l,f,o)&&(i[f]=l)}return i},v.omit=function(n,t,r){var e;return t=v.isFunction(t)?v.negate(t):(e=v.map(A(arguments,!1,!1,1),String),function(n,t){return!v.contains(e,t)}),v.pick(n,t,r)},v.defaults=m(v.allKeys,!0),v.create=function(n,t){n=g(n);return t&&v.extendOwn(n,t),n},v.clone=function(n){return v.isObject(n)?v.isArray(n)?n.slice():v.extend({},n):n},v.tap=function(n,t){return t(n),n},v.isMatch=function(n,t){var r=v.keys(t),e=r.length;if(null==n)return!e;for(var u=Object(n),i=0;i<e;i++){var o=r[i];if(t[o]!==u[o]||!(o in u))return!1}return!0};var I=function(n,t,r,e){if(n===t)return 0!==n||1/n==1/t;if(null==n||null==t)return n===t;n instanceof v&&(n=n._wrapped),t instanceof v&&(t=t._wrapped);var u=l.call(n);if(u!==l.call(t))return!1;switch(u){case"[object RegExp]":case"[object String]":return""+n==""+t;case"[object Number]":return+n!=+n?+t!=+t:0==+n?1/+n==1/t:+n==+t;case"[object Date]":case"[object Boolean]":return+n==+t}var i="[object Array]"===u;if(!i){if("object"!=typeof n||"object"!=typeof t)return!1;var o=n.constructor,u=t.constructor;if(o!==u&&!(v.isFunction(o)&&o instanceof o&&v.isFunction(u)&&u instanceof u)&&"constructor"in n&&"constructor"in t)return!1}e=e||[];for(var a=(r=r||[]).length;a--;)if(r[a]===n)return e[a]===t;if(r.push(n),e.push(t),i){if((a=n.length)!==t.length)return!1;for(;a--;)if(!I(n[a],t[a],r,e))return!1}else{var c,f=v.keys(n),a=f.length;if(v.keys(t).length!==a)return!1;for(;a--;)if(c=f[a],!v.has(t,c)||!I(n[c],t[c],r,e))return!1}return r.pop(),e.pop(),!0};v.isEqual=function(n,t){return I(n,t)},v.isEmpty=function(n){return null==n||(j(n)&&(v.isArray(n)||v.isString(n)||v.isArguments(n))?0===n.length:0===v.keys(n).length)},v.isElement=function(n){return!(!n||1!==n.nodeType)},v.isArray=f||function(n){return"[object Array]"===l.call(n)},v.isObject=function(n){var t=typeof n;return"function"==t||"object"==t&&!!n},v.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(t){v["is"+t]=function(n){return l.call(n)==="[object "+t+"]"}}),v.isArguments(arguments)||(v.isArguments=function(n){return v.has(n,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(v.isFunction=function(n){return"function"==typeof n||!1}),v.isFinite=function(n){return isFinite(n)&&!isNaN(parseFloat(n))},v.isNaN=function(n){return v.isNumber(n)&&n!==+n},v.isBoolean=function(n){return!0===n||!1===n||"[object Boolean]"===l.call(n)},v.isNull=function(n){return null===n},v.isUndefined=function(n){return void 0===n},v.has=function(n,t){return null!=n&&a.call(n,t)},v.noConflict=function(){return n._=r,this},v.identity=function(n){return n},v.constant=function(n){return function(){return n}},v.noop=function(){},v.property=b,v.propertyOf=function(t){return null==t?function(){}:function(n){return t[n]}},v.matcher=v.matches=function(t){return t=v.extendOwn({},t),function(n){return v.isMatch(n,t)}},v.times=function(n,t,r){var e=Array(Math.max(0,n));t=y(t,r,1);for(var u=0;u<n;u++)e[u]=t(u);return e},v.random=function(n,t){return null==t&&(t=n,n=0),n+Math.floor(Math.random()*(t-n+1))},v.now=Date.now||function(){return(new Date).getTime()};m={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},f=v.invert(m),b=function(t){function r(n){return t[n]}var n="(?:"+v.keys(t).join("|")+")",e=RegExp(n),u=RegExp(n,"g");return function(n){return e.test(n=null==n?"":""+n)?n.replace(u,r):n}};v.escape=b(m),v.unescape=b(f),v.result=function(n,t,r){t=null==n?void 0:n[t];return v.isFunction(t=void 0===t?r:t)?t.call(n):t};var N=0;v.uniqueId=function(n){var t=++N+"";return n?n+t:t},v.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};function B(n){return"\\"+R[n]}var T=/(.)^/,R={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},q=/\\|'|\r|\n|\u2028|\u2029/g;v.template=function(i,n,t){n=v.defaults({},n=!n&&t?t:n,v.templateSettings);var t=RegExp([(n.escape||T).source,(n.interpolate||T).source,(n.evaluate||T).source].join("|")+"|$","g"),o=0,a="__p+='";i.replace(t,function(n,t,r,e,u){return a+=i.slice(o,u).replace(q,B),o=u+n.length,t?a+="'+\n((__t=("+t+"))==null?'':_.escape(__t))+\n'":r?a+="'+\n((__t=("+r+"))==null?'':__t)+\n'":e&&(a+="';\n"+e+"\n__p+='"),n}),a+="';\n",a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+(a=!n.variable?"with(obj||{}){\n"+a+"}\n":a)+"return __p;\n";try{var r=new Function(n.variable||"obj","_",a)}catch(n){throw n.source=a,n}t=function(n){return r.call(this,n,v)},n=n.variable||"obj";return t.source="function("+n+"){\n"+a+"}",t},v.chain=function(n){n=v(n);return n._chain=!0,n};function K(n,t){return n._chain?v(t).chain():t}v.mixin=function(r){v.each(v.functions(r),function(n){var t=v[n]=r[n];v.prototype[n]=function(){var n=[this._wrapped];return i.apply(n,arguments),K(this,t.apply(v,n))}})},v.mixin(v),v.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var r=e[t];v.prototype[t]=function(){var n=this._wrapped;return r.apply(n,arguments),"shift"!==t&&"splice"!==t||0!==n.length||delete n[0],K(this,n)}}),v.each(["concat","join","slice"],function(n){var t=e[n];v.prototype[n]=function(){return K(this,t.apply(this._wrapped,arguments))}}),v.prototype.value=function(){return this._wrapped},v.prototype.valueOf=v.prototype.toJSON=v.prototype.value,v.prototype.toString=function(){return""+this._wrapped},"function"==typeof define&&define.amd&&define("underscore",[],function(){return v})}.call(this);
(function(a){function b(b){b=b.split(".");for(var c=a,d=0;d<b.length-1;d++)c[b[d]]||(c[b[d]]={}),c=c[b[d]]}function c(b,c){for(var d=b.split("."),e=a,f=0;f<d.length-1;f++){if(!e[d[f]])return null;e=e[d[f]]}e[d[d.length-1]]=c;return e[d[d.length-1]]}String.prototype.endsWith=function(a){return-1!==this.indexOf(a,this.length-a.length)};Function.prototype.bind=Function.prototype.bind||function(){var a=this,b=Array.prototype.slice.call(arguments),c=b.shift();return function(){return a.apply(c,b.concat(Array.prototype.slice.call(arguments)))}};
a.isArray=function(a){return"object"==typeof a&&a instanceof Array};a.isString=function(a){return"string"==typeof a};a.isFunction=function(a){return"function"==typeof a};var d=!1,e=function(){};e.extend=function(a,f,g,h,k){function m(){!d&&this.__init&&this.__init.apply(this,arguments)}var n=this.prototype;d=!0;var p=new this;d=!1;m.prototype=p;m.prototype.constructor=m;m.superclass=n;m.extend=e.extend;c(g,m);if(f){f=isFunction(f)?f():f;for(var r in f)f.hasOwnProperty(r)&&(m[r]=f[r])}m.__CLASS=g;
if(h)for(isArray(h)||(h=[h]),g=0;g<h.length;g++){b(h[g]);var q=c(h[g],m);if(f)for(r in f)f.hasOwnProperty(r)&&(q[r]=f[r])}a=isFunction(a)?a():a;for(var t in a)p[t]=("__init"===t||k&&k.decorated)&&isFunction(a[t])&&isFunction(n[t])?function(a,b){return function(){var c=this.__super;this.__super=n[a];var d=b.apply(this,arguments);this.__super=c;return d}}(t,a[t]):a[t];return m};var f=function(a){this.name=a.defines;this.extendWith=a.extendsWith;this.callback=a.onCreate;this.callbackPreCreation=a.onPreCreate;
this.dependencies=a.depends;this.baseClass=a.extendsClass;this.aliases=a.aliases;this.constants=a.constants;this.decorated=a.decorated;this.children=[];return this};f.prototype={children:null,name:null,extendWith:null,callback:null,dependencies:null,baseClass:null,aliases:null,constants:null,decorated:!1,solved:!1,visited:!1,status:function(){console.log("  Module: "+this.name+(this.dependencies.length?" unsolved_deps:["+this.dependencies+"]":" no dependencies.")+(this.solved?" solved":" ------\x3e NOT solved."))},
removeDependency:function(a){for(var b=0;b<this.dependencies.length;b++)if(this.dependencies[b]===a){this.dependencies.splice(b,1);break}},assignDependency:function(a){var b;for(b=0;b<this.dependencies.length;b++)if(this.dependencies[b]===a.name){this.children.push(a);this.dependencies.splice(b,1);break}},isSolved:function(){return this.solved},solveDeep:function(){if(this.visited)return!0;this.visited=!0;if(this.solved)return!0;if(0!==this.dependencies.length)return!1;for(var a=0;a<this.children.length;a++)if(!this.children[a].solveDeep())return!1;
this.__initModule();this.solved=!0;k.solved(this);return!0},__initModule:function(){if(this.baseClass){a:{var b=this.baseClass.split(".");for(var c=a,d=0;d<b.length;d++){if(!c[b[d]]){b=null;break a}c=c[b[d]]}b=c}if(!b)return}else b=e;b.extend(this.extendWith,this.constants,this.name,this.aliases,{decorated:this.decorated});this.callback&&this.callback()}};var g=function(a,b){this.path=a;this.module=b;return this};g.prototype={path:null,processed:!1,module:null,setProcessed:function(){this.processed=
!0},isProcessed:function(){return this.processed}};var h=function(){this.nodes=[];this.loadedFiles=[];this.path={};this.solveListener=[];this.orderedSolvedModules=[];this.readyListener=[];return this};h.baseURL="";h.modulePath={};h.sortedModulePath=[];h.symbol={};h.prototype={nodes:null,loadedFiles:null,solveListener:null,readyListener:null,orderedSolvedModules:null,addSolvedListener:function(a,b){this.solveListener.push({name:a,callback:b})},solved:function(a){var b;for(b=0;b<this.solveListener.length;b++)this.solveListener[b].name===
a.name&&this.solveListener[b].callback();this.orderedSolvedModules.push(a);this.notifyReady()},notifyReady:function(){var a;for(a=0;a<this.nodes.length;a++)if(!this.nodes[a].isSolved())return;for(a=0;a<this.loadedFiles.length;a++)if(!this.loadedFiles[a].isProcessed())return;var b=Array.prototype.slice.call(this.readyListener);setTimeout(function(){for(var a=0;a<b.length;a++)b[a]()},0);this.readyListener=[]},status:function(){for(var a=0;a<this.nodes.length;a++)this.nodes[a].status()},module:function(a){var b,
c;if(this.isModuleScheduledToSolve(a.defines))return this;if(a.onPreCreate)try{a.onPreCreate()}catch(t){}a.depends||(a.depends=[]);(b=a.depends)&&!isArray(b)&&(b=[b],a.depends=b);for(c=0;c<b.length;)this.alreadySolved(b[c])?b.splice(c,1):c++;b=new f(a);for(c=0;c<this.nodes.length;c++)this.nodes[c].assignDependency(b);this.nodes.push(b);for(c=0;c<a.depends.length;)if(this.isModuleScheduledToSolve(a.depends[c])){var d=this.findNode(a.depends[c]);null!==d?b.assignDependency(d):(alert("Module loaded and does not exist in loaded modules nodes. "+
a.depends[c]),c++)}else c+=1;(function(a,b){setTimeout(function(){for(c=0;c<b.depends.length;c++)a.loadFile(b.depends[c])},0)})(this,a);return this},findNode:function(a){for(var b=0;b<this.nodes.length;b++)if(this.nodes[b].name===a)return this.nodes[b];return null},alreadySolved:function(a){for(var b=0;b<this.nodes.length;b++)if(this.nodes[b].name===a&&this.nodes[b].isSolved())return!0;return!1},exists:function(b){b=b.split(".");for(var c=a,d=0;d<b.length;d++){if(!c[b[d]])return!1;c=c[b[d]]}return!0},
loadFile:function(a){if(!this.exists(a)){for(var b=this.getPath(a),c=0;c<this.loadedFiles.length;c++)if(this.loadedFiles[c].path===b)return;c=new g(b,a);this.loadedFiles.push(c);c=document.createElement("script");c.type="text/javascript";c.charset="utf-8";c.async=!0;c.addEventListener("load",this.moduleLoaded.bind(this),!1);c.addEventListener("error",this.moduleErrored.bind(this),!1);c.setAttribute("module-name",a);c.src=b+(n?"":"?"+(new Date).getTime());document.getElementsByTagName("head")[0].appendChild(c)}},
getPath:function(a){if(a.endsWith(".js"))return a="/"!==a.charAt(0)?h.baseURL+a:a.substring(1);var b;for(d in h.symbol)if(a===d)return h.baseURL+h.symbol[d];for(b=0;b<h.sortedModulePath.length;b++){var c=h.sortedModulePath[b];if(h.modulePath.hasOwnProperty(c)){var d=h.modulePath[c];if(0===a.indexOf(c))return a=a.substring(c.length+1),a=a.replace(/\./g,"/"),a=d+a+".js",h.baseURL+a}}return h.baseURL+a.replace(/\./g,"/")+".js"},isModuleScheduledToSolve:function(a){for(var b=0;b<this.nodes.length;b++)if(this.nodes[b].name===
a)return!0;return!1},moduleLoaded:function(a){if("load"===a.type){var b=(a.currentTarget||a.srcElement||a.target).getAttribute("module-name");for(a=0;a<this.loadedFiles.length;a++)if(this.loadedFiles[a].module===b){this.loadedFiles[a].setProcessed();break}for(a=0;a<this.nodes.length;a++)this.nodes[a].removeDependency(b);for(a=0;a<this.nodes.length;a++){for(b=0;b<this.nodes.length;b++)this.nodes[b].visited=!1;this.nodes[a].solveDeep()}var c=this;setTimeout(function(){c.notifyReady()},0)}},moduleErrored:function(a){},
solvedInOrder:function(){for(var a=0;a<this.orderedSolvedModules.length;a++);},solveAll:function(){for(var a=0;a<this.nodes.length;a++)this.nodes[a].solveDeep()},onReady:function(a){this.readyListener.push(a)}};var k=new h,n=!1;a.CAAT=a.CAAT||{};CAAT.Module=function(a){a.defines?(b(a.defines),k.module(a)):console.error("Bad module definition: "+a)};CAAT.ModuleManager={};CAAT.ModuleManager.baseURL=function(a){if(!a)return CAAT.Module;a.endsWith("/")||(a+="/");h.baseURL=a;return CAAT.ModuleManager};
CAAT.ModuleManager.setModulePath=function(a,b){b.endsWith("/")||(b+="/");h.modulePath[a]||(h.modulePath[a]=b,h.sortedModulePath.push(a),h.sortedModulePath.sort(function(a,b){return a==b?0:a<b?1:-1}));return CAAT.ModuleManager};CAAT.ModuleManager.symbol=function(a,b){h.symbol[a]||(h.symbol[a]=b);return CAAT.ModuleManager};CAAT.ModuleManager.bring=function(a){isArray(a)||(a=[a]);for(var b=0;b<a.length;b++)k.loadFile(a[b]);return CAAT.ModuleManager};CAAT.ModuleManager.status=function(){k.status()};CAAT.ModuleManager.addModuleSolvedListener=
function(a,b){k.addSolveListener(a,b);return CAAT.ModuleManager};CAAT.ModuleManager.load=function(a,b,c){var d=document.createElement("script");d.type="text/javascript";d.charset="utf-8";d.async=!0;b&&d.addEventListener("load",b,!1);c&&d.addEventListener("error",c,!1);d.addEventListener("load",function(){k.solveAll()},!1);d.src=a+(n?"":"?"+(new Date).getTime());document.getElementsByTagName("head")[0].appendChild(d)};CAAT.ModuleManager.solvedInOrder=function(){k.solvedInOrder()};CAAT.ModuleManager.onReady=
function(a){k.onReady(a);return CAAT.ModuleManager};CAAT.ModuleManager.solveAll=function(){k.solveAll()};CAAT.ModuleManager.debug=function(a){n=a;return CAAT.ModuleManager};CAAT.Class=e})(this);
CAAT.Module({defines:"CAAT.Core.Constants",depends:["CAAT.Math.Matrix"],extendsWith:function(){CAAT.CLAMP=!1;CAAT.setCoordinateClamping=function(a){CAAT.CLAMP=a;CAAT.Math.Matrix.setCoordinateClamping(a)};CAAT.log=function(){};CAAT.CSS_TEXT_METRICS=0;CAAT.GLRENDER=!1;CAAT.DEBUG=!1;CAAT.DEBUGBB=!1;CAAT.DEBUGBBBCOLOR="#00f";CAAT.DEBUGAABB=!1;CAAT.DEBUGAABBCOLOR="#f00";CAAT.DEBUG_DIRTYRECTS=!1;CAAT.DRAG_THRESHOLD_X=5;CAAT.DRAG_THRESHOLD_Y=5;CAAT.CACHE_SCENE_ON_CHANGE=!0;return{}}});
extend=function(a,b){var c=a.prototype,d=function(){};d.prototype=b.prototype;a.prototype=new d;a.superclass=b.prototype;a.prototype.constructor=a;b.prototype.constructor===Object.prototype.constructor&&(b.prototype.constructor=b);for(var e in c)c.hasOwnProperty(e)&&(a.prototype[e]=c[e])};
extendWith=function(a,b,c){var d=function(){};d.prototype=a.prototype;b.prototype=new d;b.superclass=a.prototype;b.prototype.constructor=b;a.prototype.constructor===Object.prototype.constructor&&(a.prototype.constructor=a);if(c)for(var e in c)c.hasOwnProperty(e)&&(b.prototype[e]=c[e])};
function proxyFunction(a,b,c,d,e){return function(){var f=Array.prototype.slice.call(arguments);c&&c({object:a,method:b,arguments:f});var g=null;try{if(g=a[b].apply(a,f),d){var h=d({object:a,method:b,arguments:f});h&&(g=h)}}catch(k){if(e)g=e({object:a,method:b,arguments:f,exception:k});else throw k;}return g}}function proxyAttribute(a,b,c,d,e){a.__defineGetter__(c,function(){d&&d(b,c);return b[c]});a.__defineSetter__(c,function(a){b[c]=a;e&&e(b,c,a)})}
function proxyObject(a,b,c,d,e,f){if("object"!==typeof a||isArray(a)||isString(a)||a.$proxy)return a;var g={$proxy:!0};g.$proxy_delegate=a;for(var h in a)"constructor"!==h&&("function"===typeof a[h]?g[h]=proxyFunction(a,h,b,c,d):proxyAttribute(g,a,h,e,f));return g}CAAT.Module({defines:"CAAT.Core.Class",extendsWith:function(){}});
CAAT.Module({defines:"CAAT.Math.Bezier",depends:["CAAT.Math.Curve"],extendsClass:"CAAT.Math.Curve",aliases:["CAAT.Bezier"],extendsWith:function(){return{cubic:!1,applyAsPath:function(a){var b=this.coordlist;this.cubic?a.ctx.bezierCurveTo(b[1].x,b[1].y,b[2].x,b[2].y,b[3].x,b[3].y):a.ctx.quadraticCurveTo(b[1].x,b[1].y,b[2].x,b[2].y);return this},isQuadric:function(){return!this.cubic},isCubic:function(){return this.cubic},setCubic:function(a,b,c,d,e,f,g,h){this.coordlist=[];this.coordlist.push((new CAAT.Math.Point).set(a,
b));this.coordlist.push((new CAAT.Math.Point).set(c,d));this.coordlist.push((new CAAT.Math.Point).set(e,f));this.coordlist.push((new CAAT.Math.Point).set(g,h));this.cubic=!0;this.update();return this},setQuadric:function(a,b,c,d,e,f){this.coordlist=[];this.coordlist.push((new CAAT.Math.Point).set(a,b));this.coordlist.push((new CAAT.Math.Point).set(c,d));this.coordlist.push((new CAAT.Math.Point).set(e,f));this.cubic=!1;this.update();return this},setPoints:function(a){if(3===a.length)this.coordlist=
a,this.cubic=!1,this.update();else if(4===a.length)this.coordlist=a,this.cubic=!0,this.update();else throw"points must be an array of 3 or 4 CAAT.Point instances.";return this},paint:function(a){this.cubic?this.paintCubic(a):this.paintCuadric(a);CAAT.Math.Bezier.superclass.paint.call(this,a)},paintCuadric:function(a){var b=this.coordlist[0].x;var c=this.coordlist[0].y;a=a.ctx;a.save();a.beginPath();a.moveTo(b,c);b=new CAAT.Math.Point;for(c=this.k;c<=1+this.k;c+=this.k)this.solve(b,c),a.lineTo(b.x,
b.y);a.stroke();a.restore()},paintCubic:function(a){var b=this.coordlist[0].x;var c=this.coordlist[0].y;a=a.ctx;a.save();a.beginPath();a.moveTo(b,c);b=new CAAT.Math.Point;for(c=this.k;c<=1+this.k;c+=this.k)this.solve(b,c),a.lineTo(b.x,b.y);a.stroke();a.restore()},solve:function(a,b){return this.cubic?this.solveCubic(a,b):this.solveQuadric(a,b)},solveCubic:function(a,b){var c=b*b,d=b*c,e=this.coordlist,f=e[0],g=e[1],h=e[2];e=e[3];a.x=f.x+b*(3*-f.x+b*(3*f.x-f.x*b))+b*(3*g.x+b*(-6*g.x+3*g.x*b))+c*(3*
h.x-3*h.x*b)+e.x*d;a.y=f.y+b*(3*-f.y+b*(3*f.y-f.y*b))+b*(3*g.y+b*(-6*g.y+3*g.y*b))+c*(3*h.y-3*h.y*b)+e.y*d;return a},solveQuadric:function(a,b){var c=this.coordlist,d=c[0],e=c[1];c=c[2];var f=1-b;a.x=f*f*d.x+2*f*b*e.x+b*b*c.x;a.y=f*f*d.y+2*f*b*e.y+b*b*c.y;return a}}}});
CAAT.Module({defines:"CAAT.Math.CatmullRom",depends:["CAAT.Math.Curve"],extendsClass:"CAAT.Math.Curve",aliases:["CAAT.CatmullRom"],extendsWith:function(){return{setCurve:function(a,b,c,d){this.coordlist=[];this.coordlist.push(a);this.coordlist.push(b);this.coordlist.push(c);this.coordlist.push(d);this.update();return this},paint:function(a){var b=this.coordlist[1].x;var c=this.coordlist[1].y;var d=a.ctx;d.save();d.beginPath();d.moveTo(b,c);b=new CAAT.Point;for(c=this.k;c<=1+this.k;c+=this.k)this.solve(b,
c),d.lineTo(b.x,b.y);d.stroke();d.restore();CAAT.Math.CatmullRom.superclass.paint.call(this,a)},solve:function(a,b){var c=this.coordlist,d=((-b+2)*b-1)*b*.5,e=.5*((3*b-5)*b*b+2),f=((-3*b+4)*b+1)*b*.5,g=(b-1)*b*b*.5;a.x=c[0].x*d+c[1].x*e+c[2].x*f+c[3].x*g;a.y=c[0].y*d+c[1].y*e+c[2].y*f+c[3].y*g;return a},applyAsPath:function(a){a=a.ctx;for(var b=new CAAT.Math.Point,c=this.k;c<=1+this.k;c+=this.k)this.solve(b,c),a.lineTo(b.x,b.y);return this},endCurvePosition:function(){return this.coordlist[this.coordlist.length-
2]},startCurvePosition:function(){return this.coordlist[1]}}}});
CAAT.Module({defines:"CAAT.Math.Curve",depends:["CAAT.Math.Point"],extendsWith:function(){return{coordlist:null,k:.05,length:-1,HANDLE_SIZE:40,drawHandles:!0,paint:function(a){if(!1!==this.drawHandles){var b=this.coordlist;a=a.ctx;a.save();a.beginPath();a.strokeStyle="#a0a0a0";a.moveTo(b[0].x,b[0].y);a.lineTo(b[1].x,b[1].y);a.stroke();this.cubic&&(a.moveTo(b[2].x,b[2].y),a.lineTo(b[3].x,b[3].y),a.stroke());a.globalAlpha=.5;for(var c=0;c<this.coordlist.length;c++){a.fillStyle="#7f7f00";var d=this.HANDLE_SIZE/
2;a.beginPath();a.arc(b[c].x,b[c].y,d,0,2*Math.PI,!1);a.fill()}a.restore()}},update:function(){this.calcLength()},solve:function(a,b){},getContour:function(a){var b=[],c;for(c=0;c<=a;c++){var d=new CAAT.Math.Point;this.solve(d,c/a);b.push(d)}return b},getBoundingBox:function(a){a||(a=new CAAT.Math.Rectangle);a.setEmpty();a.union(this.coordlist[0].x,this.coordlist[0].y);for(var b=new CAAT.Math.Point,c=this.k;c<=1+this.k;c+=this.k)this.solve(b,c),a.union(b.x,b.y);return a},calcLength:function(){var a=
this.coordlist[0].x;var b=this.coordlist[0].y;for(var c=0,d=new CAAT.Math.Point,e=this.k;e<=1+this.k;e+=this.k)this.solve(d,e),c+=Math.sqrt((d.x-a)*(d.x-a)+(d.y-b)*(d.y-b)),a=d.x,b=d.y;return this.length=c},getLength:function(){return this.length},endCurvePosition:function(){return this.coordlist[this.coordlist.length-1]},startCurvePosition:function(){return this.coordlist[0]},setPoints:function(a){},setPoint:function(a,b){0<=b&&b<this.coordlist.length&&(this.coordlist[b]=a)},applyAsPath:function(a){}}}});
CAAT.Module({defines:"CAAT.Math.Dimension",aliases:["CAAT.Dimension"],extendsWith:function(){return{width:0,height:0,__init:function(a,b){this.width=a;this.height=b;return this}}}});
CAAT.Module({defines:"CAAT.Math.Matrix",depends:["CAAT.Math.Point"],aliases:["CAAT.Matrix"],onCreate:function(){CAAT.Math.Matrix.prototype.transformRenderingContext=CAAT.Math.Matrix.prototype.transformRenderingContext_NoClamp;CAAT.Math.Matrix.prototype.transformRenderingContextSet=CAAT.Math.Matrix.prototype.transformRenderingContextSet_NoClamp},constants:{setCoordinateClamping:function(a){a?(CAAT.Matrix.prototype.transformRenderingContext=CAAT.Matrix.prototype.transformRenderingContext_Clamp,CAAT.Matrix.prototype.transformRenderingContextSet=
CAAT.Matrix.prototype.transformRenderingContextSet_Clamp,CAAT.Math.Matrix.prototype.transformRenderingContext=CAAT.Matrix.prototype.transformRenderingContext_Clamp,CAAT.Math.Matrix.prototype.transformRenderingContextSet=CAAT.Matrix.prototype.transformRenderingContextSet_Clamp):(CAAT.Matrix.prototype.transformRenderingContext=CAAT.Matrix.prototype.transformRenderingContext_NoClamp,CAAT.Matrix.prototype.transformRenderingContextSet=CAAT.Matrix.prototype.transformRenderingContextSet_NoClamp,CAAT.Math.Matrix.prototype.transformRenderingContext=
CAAT.Matrix.prototype.transformRenderingContext_NoClamp,CAAT.Math.Matrix.prototype.transformRenderingContextSet=CAAT.Matrix.prototype.transformRenderingContextSet_NoClamp)},scale:function(a,b){var c=new CAAT.Math.Matrix;c.matrix[0]=a;c.matrix[4]=b;return c},rotate:function(a){var b=new CAAT.Math.Matrix;b.setRotation(a);return b},translate:function(a,b){var c=new CAAT.Math.Matrix;c.matrix[2]=a;c.matrix[5]=b;return c}},extendsWith:function(){return{matrix:null,__init:function(){this.matrix=[1,0,0,0,
1,0,0,0,1];"undefined"!==typeof Float32Array&&(this.matrix=new Float32Array(this.matrix));return this},transformCoord:function(a){var b=a.x,c=a.y,d=this.matrix;a.x=b*d[0]+c*d[1]+d[2];a.y=b*d[3]+c*d[4]+d[5];return a},setRotation:function(a){this.identity();var b=this.matrix,c=Math.cos(a);a=Math.sin(a);b[0]=c;b[1]=-a;b[3]=a;b[4]=c;return this},setScale:function(a,b){this.identity();this.matrix[0]=a;this.matrix[4]=b;return this},setTranslate:function(a,b){this.identity();this.matrix[2]=a;this.matrix[5]=
b;return this},copy:function(a){a=a.matrix;var b=this.matrix;b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return this},identity:function(){var a=this.matrix;a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return this},multiply:function(a){var b=this.matrix,c=a.matrix;a=b[0];var d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],k=b[6],n=b[7],m=b[8],p=c[0],r=c[1],q=c[2],t=c[3],u=c[4],v=c[5],w=c[6],x=c[7];c=c[8];b[0]=a*p+d*t+e*w;b[1]=a*r+d*u+e*x;b[2]=a*q+
d*v+e*c;b[3]=f*p+g*t+h*w;b[4]=f*r+g*u+h*x;b[5]=f*q+g*v+h*c;b[6]=k*p+n*t+m*w;b[7]=k*r+n*u+m*x;b[8]=k*q+n*v+m*c;return this},premultiply:function(a){var b=a.matrix[0]*this.matrix[1]+a.matrix[1]*this.matrix[4]+a.matrix[2]*this.matrix[7],c=a.matrix[0]*this.matrix[2]+a.matrix[1]*this.matrix[5]+a.matrix[2]*this.matrix[8],d=a.matrix[3]*this.matrix[0]+a.matrix[4]*this.matrix[3]+a.matrix[5]*this.matrix[6],e=a.matrix[3]*this.matrix[1]+a.matrix[4]*this.matrix[4]+a.matrix[5]*this.matrix[7],f=a.matrix[3]*this.matrix[2]+
a.matrix[4]*this.matrix[5]+a.matrix[5]*this.matrix[8],g=a.matrix[6]*this.matrix[0]+a.matrix[7]*this.matrix[3]+a.matrix[8]*this.matrix[6],h=a.matrix[6]*this.matrix[1]+a.matrix[7]*this.matrix[4]+a.matrix[8]*this.matrix[7],k=a.matrix[6]*this.matrix[2]+a.matrix[7]*this.matrix[5]+a.matrix[8]*this.matrix[8];this.matrix[0]=a.matrix[0]*this.matrix[0]+a.matrix[1]*this.matrix[3]+a.matrix[2]*this.matrix[6];this.matrix[1]=b;this.matrix[2]=c;this.matrix[3]=d;this.matrix[4]=e;this.matrix[5]=f;this.matrix[6]=g;
this.matrix[7]=h;this.matrix[8]=k;return this},getInverse:function(){var a=this.matrix,b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],k=a[7];a=a[8];var n=new CAAT.Math.Matrix,m=b*(f*a-k*g)-e*(c*a-k*d)+h*(c*g-f*d);if(0===m)return null;var p=n.matrix;p[0]=f*a-g*k;p[1]=d*k-c*a;p[2]=c*g-d*f;p[3]=g*h-e*a;p[4]=b*a-d*h;p[5]=d*e-b*g;p[6]=e*k-f*h;p[7]=c*h-b*k;p[8]=b*f-c*e;n.multiplyScalar(1/m);return n},multiplyScalar:function(a){var b;for(b=0;9>b;b++)this.matrix[b]*=a;return this},transformRenderingContextSet_NoClamp:function(a){var b=
this.matrix;a.setTransform(b[0],b[3],b[1],b[4],b[2],b[5]);return this},transformRenderingContext_NoClamp:function(a){var b=this.matrix;a.transform(b[0],b[3],b[1],b[4],b[2],b[5]);return this},transformRenderingContextSet_Clamp:function(a){var b=this.matrix;a.setTransform(b[0],b[3],b[1],b[4],b[2]>>0,b[5]>>0);return this},transformRenderingContext_Clamp:function(a){var b=this.matrix;a.transform(b[0],b[3],b[1],b[4],b[2]>>0,b[5]>>0);return this},setModelViewMatrix:function(a,b,c,d,e){c=this.matrix;d=Math.cos(e);
var f=Math.sin(e);e=(1*d+0*f)*this.scaleX;var g=(-1*f+0*d)*this.scaleY;var h=(0*d+1*f)*this.scaleX;d=(-0*f+1*d)*this.scaleY;c[0]=e;c[1]=g;c[2]=a;c[3]=h;c[4]=d;c[5]=b}}}});
CAAT.Module({defines:"CAAT.Math.Matrix3",aliases:["CAAT.Matrix3"],extendsWith:function(){return{matrix:null,fmatrix:null,__init:function(){this.matrix=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];this.fmatrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];return this},transformCoord:function(a){var b=a.x,c=a.y,d=a.z;a.x=b*this.matrix[0][0]+c*this.matrix[0][1]+d*this.matrix[0][2]+this.matrix[0][3];a.y=b*this.matrix[1][0]+c*this.matrix[1][1]+d*this.matrix[1][2]+this.matrix[1][3];a.z=b*this.matrix[2][0]+c*this.matrix[2][1]+
d*this.matrix[2][2]+this.matrix[2][3];return a},initialize:function(a,b,c,d,e,f,g,h,k){this.identity();this.matrix[0][0]=a;this.matrix[0][1]=b;this.matrix[0][2]=c;this.matrix[1][0]=d;this.matrix[1][1]=e;this.matrix[1][2]=f;this.matrix[2][0]=g;this.matrix[2][1]=h;this.matrix[2][2]=k;return this},initWithMatrix:function(a){this.matrix=a;return this},flatten:function(){var a=this.fmatrix,b=this.matrix;a[0]=b[0][0];a[1]=b[1][0];a[2]=b[2][0];a[3]=b[3][0];a[4]=b[0][1];a[5]=b[1][1];a[6]=b[2][1];a[7]=b[2][1];
a[8]=b[0][2];a[9]=b[1][2];a[10]=b[2][2];a[11]=b[3][2];a[12]=b[0][3];a[13]=b[1][3];a[14]=b[2][3];a[15]=b[3][3];return this.fmatrix},identity:function(){for(var a=0;4>a;a++)for(var b=0;4>b;b++)this.matrix[a][b]=a===b?1:0;return this},getMatrix:function(){return this.matrix},rotateXY:function(a){return this.rotate(a,0,0)},rotateXZ:function(a){return this.rotate(0,a,0)},rotateYZ:function(a){return this.rotate(0,0,a)},setRotate:function(a,b,c){a=this.rotate(a,b,c);this.copy(a);return this},rotate:function(a,
b,c){var d=new CAAT.Math.Matrix3;if(0!==a){var e=new CAAT.Math.Math.Matrix3;var f=Math.sin(a);a=Math.cos(a);e.matrix[1][1]=a;e.matrix[1][2]=-f;e.matrix[2][1]=f;e.matrix[2][2]=a;d.multiply(e)}0!==b&&(e=new CAAT.Math.Matrix3,f=Math.sin(b),a=Math.cos(b),e.matrix[0][0]=a,e.matrix[0][2]=-f,e.matrix[2][0]=f,e.matrix[2][2]=a,d.multiply(e));0!==c&&(e=new CAAT.Math.Matrix3,f=Math.sin(c),a=Math.cos(c),e.matrix[0][0]=a,e.matrix[0][1]=-f,e.matrix[1][0]=f,e.matrix[1][1]=a,d.multiply(e));return d},getClone:function(){var a=
new CAAT.Math.Matrix3;a.copy(this);return a},multiply:function(a){var b=this.getClone().matrix,c=b[0][0],d=b[0][1],e=b[0][2],f=b[0][3],g=b[1][0],h=b[1][1],k=b[1][2],n=b[1][3],m=b[2][0],p=b[2][1],r=b[2][2];b=b[2][3];var q=a.matrix;a=q[0][0];var t=q[0][1],u=q[0][2],v=q[0][3],w=q[1][0],x=q[1][1],y=q[1][2],z=q[1][3],A=q[2][0],B=q[2][1],C=q[2][2],D=q[2][3],E=q[3][0],F=q[3][1],G=q[3][2];q=q[3][3];this.matrix[0][0]=c*a+d*w+e*A+f*E;this.matrix[0][1]=c*t+d*x+e*B+f*F;this.matrix[0][2]=c*u+d*y+e*C+f*G;this.matrix[0][3]=
c*v+d*z+e*D+f*q;this.matrix[1][0]=g*a+h*w+k*A+n*E;this.matrix[1][1]=g*t+h*x+k*B+n*F;this.matrix[1][2]=g*u+h*y+k*C+n*G;this.matrix[1][3]=g*v+h*z+k*D+n*q;this.matrix[2][0]=m*a+p*w+r*A+b*E;this.matrix[2][1]=m*t+p*x+r*B+b*F;this.matrix[2][2]=m*u+p*y+r*C+b*G;this.matrix[2][3]=m*v+p*z+r*D+b*q;return this},premultiply:function(a){var b=this.getClone().matrix,c=b[0][0],d=b[0][1],e=b[0][2],f=b[0][3],g=b[1][0],h=b[1][1],k=b[1][2],n=b[1][3],m=b[2][0],p=b[2][1],r=b[2][2];b=b[2][3];var q=a.matrix;a=q[0][0];var t=
q[0][1],u=q[0][2],v=q[0][3],w=q[1][0],x=q[1][1],y=q[1][2],z=q[1][3],A=q[2][0],B=q[2][1],C=q[2][2];q=q[2][3];this.matrix[0][0]=c*a+d*w+e*A;this.matrix[0][1]=c*t+d*x+e*B;this.matrix[0][2]=c*u+d*y+e*C;this.matrix[0][3]=c*v+d*z+e*q+f;this.matrix[1][0]=g*a+h*w+k*A;this.matrix[1][1]=g*t+h*x+k*B;this.matrix[1][2]=g*u+h*y+k*C;this.matrix[1][3]=g*v+h*z+k*q+n;this.matrix[2][0]=m*a+p*w+r*A;this.matrix[2][1]=m*t+p*x+r*B;this.matrix[2][2]=m*u+p*y+r*C;this.matrix[2][3]=m*v+p*z+r*q+b;return this},setTranslate:function(a,
b,c){this.identity();this.matrix[0][3]=a;this.matrix[1][3]=b;this.matrix[2][3]=c;return this},translate:function(a,b,c){var d=new CAAT.Math.Matrix3;d.setTranslate(a,b,c);return d},setScale:function(a,b,c){this.identity();this.matrix[0][0]=a;this.matrix[1][1]=b;this.matrix[2][2]=c;return this},scale:function(a,b,c){var d=new CAAT.Math.Matrix3;d.setScale(a,b,c);return d},rotateModelView:function(a,b,c){var d=Math.sin(a),e=Math.sin(b),f=Math.sin(c);a=Math.cos(a);b=Math.cos(b);c=Math.cos(c);this.matrix[0][0]=
b*a;this.matrix[0][1]=-b*d;this.matrix[0][2]=e;this.matrix[0][3]=0;this.matrix[1][0]=f*e*a+d*c;this.matrix[1][1]=c*a-f*e*d;this.matrix[1][2]=-f*b;this.matrix[1][3]=0;this.matrix[2][0]=f*d-c*e*a;this.matrix[2][1]=c*e*d+f*a;this.matrix[2][2]=c*b;this.matrix[2][3]=0;this.matrix[3][0]=0;this.matrix[3][1]=0;this.matrix[3][2]=0;this.matrix[3][3]=1;return this},copy:function(a){for(var b=0;4>b;b++)for(var c=0;4>c;c++)this.matrix[b][c]=a.matrix[b][c];return this},calculateDeterminant:function(){var a=this.matrix,
b=a[0][0],c=a[0][1],d=a[0][2],e=a[0][3],f=a[1][0],g=a[1][1],h=a[1][2],k=a[1][3],n=a[2][0],m=a[2][1],p=a[2][2],r=a[2][3],q=a[3][0],t=a[3][1],u=a[3][2];a=a[3][3];return e*g*p*q+c*k*p*q+e*h*n*t+d*k*n*t+d*f*r*t+b*h*r*t+e*f*m*u+b*k*m*u+d*g*n*a+c*h*n*a+c*f*p*a+b*g*p*a+e*h*m*q-d*k*m*q-d*g*r*q-c*h*r*q-e*f*p*t-b*k*p*t-e*g*n*u-c*k*n*u-c*f*r*u-b*g*r*u-d*f*m*a-b*h*m*a},getInverse:function(){var a=this.matrix,b=a[0][0],c=a[0][1],d=a[0][2],e=a[0][3],f=a[1][0],g=a[1][1],h=a[1][2],k=a[1][3],n=a[2][0],m=a[2][1],p=
a[2][2],r=a[2][3],q=a[3][0],t=a[3][1],u=a[3][2];a=a[3][3];var v=new CAAT.Math.Matrix3;v.matrix[0][0]=h*r*t+k*m*u+g*p*a-k*p*t-g*r*u-h*m*a;v.matrix[0][1]=e*p*t+c*r*u+d*m*a-c*p*a-d*r*t-e*m*u;v.matrix[0][2]=d*k*t+c*h*a+e*g*u-c*k*u-d*g*a-e*h*t;v.matrix[0][3]=e*h*m+c*k*p+d*g*r-d*k*m-e*g*p-c*h*r;v.matrix[1][0]=k*p*q+f*r*u+h*n*a-h*r*q-k*n*u-f*p*a;v.matrix[1][1]=d*r*q+e*n*u+b*p*a-e*p*q-b*r*u-d*n*a;v.matrix[1][2]=e*h*q+b*k*u+d*f*a-d*k*q-e*f*u-b*h*a;v.matrix[1][3]=d*k*n+e*f*p+b*h*r-e*h*n-b*k*p-d*f*r;v.matrix[2][0]=
g*r*q+k*n*t+f*m*a-k*m*q-f*r*t-g*n*a;v.matrix[2][1]=e*m*q+b*r*t+c*n*a-b*m*a-c*r*q-e*n*t;v.matrix[2][2]=d*k*q+e*f*t+b*g*a-e*g*q-b*k*t-c*f*a;v.matrix[2][3]=e*g*n+b*k*m+c*f*r-b*g*r-c*k*n-e*f*m;v.matrix[3][0]=h*m*q+f*p*t+g*n*u-g*p*q-h*n*t-f*m*u;v.matrix[3][1]=c*p*q+d*n*t+b*m*u-d*m*q-b*p*t-c*n*u;v.matrix[3][2]=d*g*q+b*h*t+c*f*u-b*g*u-c*h*q-d*f*t;v.matrix[3][3]=c*h*n+d*f*m+b*g*p-d*g*n-b*h*m-c*f*p;return v.multiplyScalar(1/this.calculateDeterminant())},multiplyScalar:function(a){var b,c;for(b=0;4>b;b++)for(c=
0;4>c;c++)this.matrix[b][c]*=a;return this}}}});
CAAT.Module({defines:"CAAT.Math.Point",aliases:["CAAT.Point"],extendsWith:function(){return{x:0,y:0,z:0,__init:function(a,b,c){this.x=a;this.y=b;this.z=c||0;return this},set:function(a,b,c){this.x=a;this.y=b;this.z=c||0;return this},clone:function(){return new CAAT.Math.Point(this.x,this.y,this.z)},translate:function(a,b,c){this.x+=a;this.y+=b;this.z+=c;return this},translatePoint:function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},subtract:function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z;
return this},multiply:function(a){this.x*=a;this.y*=a;this.z*=a;return this},rotate:function(a){var b=this.x,c=this.y;this.x=b*Math.cos(a)-Math.sin(a)*c;this.y=b*Math.sin(a)+Math.cos(a)*c;this.z=0;return this},setAngle:function(a){var b=this.getLength();this.x=Math.cos(a)*b;this.y=Math.sin(a)*b;this.z=0;return this},setLength:function(a){var b=this.getLength();b?this.multiply(a/b):this.x=this.y=this.z=a;return this},normalize:function(){var a=this.getLength();this.x/=a;this.y/=a;this.z/=a;return this},
getAngle:function(){return Math.atan2(this.y,this.x)},limit:function(a){var b=this.getLengthSquared();b+.01>a*a&&(b=Math.sqrt(b),this.x=this.x/b*a,this.y=this.y/b*a,this.z=this.z/b*a);return this},getLength:function(){var a=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);return.005>a&&-.005<a?1E-6:a},getLengthSquared:function(){var a=this.x*this.x+this.y*this.y+this.z*this.z;return.005>a&&-.005<a?0:a},getDistance:function(a){var b=this.x-a.x,c=this.y-a.y;a=this.z-a.z;return Math.sqrt(b*b+c*c+
a*a)},getDistanceSquared:function(a){var b=this.x-a.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},toString:function(){return"(CAAT.Math.Point) x:"+String(Math.round(Math.floor(10*this.x))/10)+" y:"+String(Math.round(Math.floor(10*this.y))/10)+" z:"+String(Math.round(Math.floor(10*this.z))/10)}}}});
CAAT.Module({defines:"CAAT.Math.Rectangle",aliases:["CAAT.Rectangle"],extendsWith:function(){return{__init:function(a,b,c,d){4!==arguments.length?this.setEmpty():(this.setLocation(a,b),this.setDimension(c,d))},x:0,y:0,x1:0,y1:0,width:-1,height:-1,setEmpty:function(){this.height=this.width=-1;this.y1=this.x1=this.y=this.x=0;return this},setLocation:function(a,b){this.x=a;this.y=b;this.x1=this.x+this.width;this.y1=this.y+this.height;return this},setDimension:function(a,b){this.width=a;this.height=b;
this.x1=this.x+this.width;this.y1=this.y+this.height;return this},setBounds:function(a,b,c,d){this.setLocation(a,b);this.setDimension(c,d);return this},contains:function(a,b){return a>=this.x&&a<this.x1&&b>=this.y&&b<this.y1},isEmpty:function(){return-1===this.width&&-1===this.height},union:function(a,b){this.isEmpty()?(this.x1=this.x=a,this.y1=this.y=b,this.height=this.width=0):(this.x1=this.x+this.width,this.y1=this.y+this.height,b<this.y&&(this.y=b),a<this.x&&(this.x=a),b>this.y1&&(this.y1=b),
a>this.x1&&(this.x1=a),this.width=this.x1-this.x,this.height=this.y1-this.y)},unionRectangle:function(a){this.union(a.x,a.y);this.union(a.x1,a.y);this.union(a.x,a.y1);this.union(a.x1,a.y1);return this},intersects:function(a){return a.isEmpty()||this.isEmpty()||a.x1<=this.x||a.x>=this.x1||a.y1<=this.y?!1:a.y<this.y1},intersectsRect:function(a,b,c,d){return-1===c||-1===d||a+c-1<this.x||a>this.x1||b+d-1<this.y?!1:b<=this.y1},intersect:function(a,b){"undefined"===typeof b&&(b=new CAAT.Math.Rectangle);
b.x=Math.max(this.x,a.x);b.y=Math.max(this.y,a.y);b.x1=Math.min(this.x1,a.x1);b.y1=Math.min(this.y1,a.y1);b.width=b.x1-b.x;b.height=b.y1-b.y;return b}}}});
CAAT.Module({defines:"CAAT.Behavior.Interpolator",depends:["CAAT.Math.Point"],aliases:["CAAT.Interpolator"],constants:{enumerateInterpolators:function(){return[(new CAAT.Behavior.Interpolator).createLinearInterpolator(!1,!1),"Linear pingpong=false, inverse=false",(new CAAT.Behavior.Interpolator).createLinearInterpolator(!0,!1),"Linear pingpong=true, inverse=false",(new CAAT.Behavior.Interpolator).createBackOutInterpolator(!1),"BackOut pingpong=true, inverse=false",(new CAAT.Behavior.Interpolator).createBackOutInterpolator(!0),
"BackOut pingpong=true, inverse=true",(new CAAT.Behavior.Interpolator).createLinearInterpolator(!1,!0),"Linear pingpong=false, inverse=true",(new CAAT.Behavior.Interpolator).createLinearInterpolator(!0,!0),"Linear pingpong=true, inverse=true",(new CAAT.Behavior.Interpolator).createExponentialInInterpolator(2,!1),"ExponentialIn pingpong=false, exponent=2",(new CAAT.Behavior.Interpolator).createExponentialOutInterpolator(2,!1),"ExponentialOut pingpong=false, exponent=2",(new CAAT.Behavior.Interpolator).createExponentialInOutInterpolator(2,
!1),"ExponentialInOut pingpong=false, exponent=2",(new CAAT.Behavior.Interpolator).createExponentialInInterpolator(2,!0),"ExponentialIn pingpong=true, exponent=2",(new CAAT.Behavior.Interpolator).createExponentialOutInterpolator(2,!0),"ExponentialOut pingpong=true, exponent=2",(new CAAT.Behavior.Interpolator).createExponentialInOutInterpolator(2,!0),"ExponentialInOut pingpong=true, exponent=2",(new CAAT.Behavior.Interpolator).createExponentialInInterpolator(4,!1),"ExponentialIn pingpong=false, exponent=4",
(new CAAT.Behavior.Interpolator).createExponentialOutInterpolator(4,!1),"ExponentialOut pingpong=false, exponent=4",(new CAAT.Behavior.Interpolator).createExponentialInOutInterpolator(4,!1),"ExponentialInOut pingpong=false, exponent=4",(new CAAT.Behavior.Interpolator).createExponentialInInterpolator(4,!0),"ExponentialIn pingpong=true, exponent=4",(new CAAT.Behavior.Interpolator).createExponentialOutInterpolator(4,!0),"ExponentialOut pingpong=true, exponent=4",(new CAAT.Behavior.Interpolator).createExponentialInOutInterpolator(4,
!0),"ExponentialInOut pingpong=true, exponent=4",(new CAAT.Behavior.Interpolator).createExponentialInInterpolator(6,!1),"ExponentialIn pingpong=false, exponent=6",(new CAAT.Behavior.Interpolator).createExponentialOutInterpolator(6,!1),"ExponentialOut pingpong=false, exponent=6",(new CAAT.Behavior.Interpolator).createExponentialInOutInterpolator(6,!1),"ExponentialInOut pingpong=false, exponent=6",(new CAAT.Behavior.Interpolator).createExponentialInInterpolator(6,!0),"ExponentialIn pingpong=true, exponent=6",
(new CAAT.Behavior.Interpolator).createExponentialOutInterpolator(6,!0),"ExponentialOut pingpong=true, exponent=6",(new CAAT.Behavior.Interpolator).createExponentialInOutInterpolator(6,!0),"ExponentialInOut pingpong=true, exponent=6",(new CAAT.Behavior.Interpolator).createBounceInInterpolator(!1),"BounceIn pingpong=false",(new CAAT.Behavior.Interpolator).createBounceOutInterpolator(!1),"BounceOut pingpong=false",(new CAAT.Behavior.Interpolator).createBounceInOutInterpolator(!1),"BounceInOut pingpong=false",
(new CAAT.Behavior.Interpolator).createBounceInInterpolator(!0),"BounceIn pingpong=true",(new CAAT.Behavior.Interpolator).createBounceOutInterpolator(!0),"BounceOut pingpong=true",(new CAAT.Behavior.Interpolator).createBounceInOutInterpolator(!0),"BounceInOut pingpong=true",(new CAAT.Behavior.Interpolator).createElasticInInterpolator(1.1,.4,!1),"ElasticIn pingpong=false, amp=1.1, d=.4",(new CAAT.Behavior.Interpolator).createElasticOutInterpolator(1.1,.4,!1),"ElasticOut pingpong=false, amp=1.1, d=.4",
(new CAAT.Behavior.Interpolator).createElasticInOutInterpolator(1.1,.4,!1),"ElasticInOut pingpong=false, amp=1.1, d=.4",(new CAAT.Behavior.Interpolator).createElasticInInterpolator(1.1,.4,!0),"ElasticIn pingpong=true, amp=1.1, d=.4",(new CAAT.Behavior.Interpolator).createElasticOutInterpolator(1.1,.4,!0),"ElasticOut pingpong=true, amp=1.1, d=.4",(new CAAT.Behavior.Interpolator).createElasticInOutInterpolator(1.1,.4,!0),"ElasticInOut pingpong=true, amp=1.1, d=.4",(new CAAT.Behavior.Interpolator).createElasticInInterpolator(1,
.2,!1),"ElasticIn pingpong=false, amp=1.0, d=.2",(new CAAT.Behavior.Interpolator).createElasticOutInterpolator(1,.2,!1),"ElasticOut pingpong=false, amp=1.0, d=.2",(new CAAT.Behavior.Interpolator).createElasticInOutInterpolator(1,.2,!1),"ElasticInOut pingpong=false, amp=1.0, d=.2",(new CAAT.Behavior.Interpolator).createElasticInInterpolator(1,.2,!0),"ElasticIn pingpong=true, amp=1.0, d=.2",(new CAAT.Behavior.Interpolator).createElasticOutInterpolator(1,.2,!0),"ElasticOut pingpong=true, amp=1.0, d=.2",
(new CAAT.Behavior.Interpolator).createElasticInOutInterpolator(1,.2,!0),"ElasticInOut pingpong=true, amp=1.0, d=.2"]},parse:function(a){var b="create"+a.type+"Interpolator",c=new CAAT.Behavior.Interpolator;try{c[b].apply(c,a.params||[])}catch(d){c.createLinearInterpolator(!1,!1)}return c}},extendsWith:function(){return{interpolated:null,paintScale:90,__init:function(){this.interpolated=new CAAT.Math.Point(0,0,0);return this},createLinearInterpolator:function(a,b){this.getPosition=function(c){var d=
c;a&&(c=.5>c?2*c:1-2*(c-.5));null!==b&&b&&(c=1-c);return this.interpolated.set(d,c)};return this},createBackOutInterpolator:function(a){this.getPosition=function(b){var c=b;a&&(b=.5>b?2*b:1-2*(b-.5));--b;return this.interpolated.set(c,b*b*(2.70158*b+1.70158)+1)};return this},createExponentialInInterpolator:function(a,b){this.getPosition=function(c){var d=c;b&&(c=.5>c?2*c:1-2*(c-.5));return this.interpolated.set(d,Math.pow(c,a))};return this},createExponentialOutInterpolator:function(a,b){this.getPosition=
function(c){var d=c;b&&(c=.5>c?2*c:1-2*(c-.5));return this.interpolated.set(d,1-Math.pow(1-c,a))};return this},createExponentialInOutInterpolator:function(a,b){this.getPosition=function(c){var d=c;b&&(c=.5>c?2*c:1-2*(c-.5));return 1>2*c?this.interpolated.set(d,Math.pow(2*c,a)/2):this.interpolated.set(d,1-Math.abs(Math.pow(2*c-2,a))/2)};return this},createQuadricBezierInterpolator:function(a,b,c,d){this.getPosition=function(e){var f=e;d&&(e=.5>e?2*e:1-2*(e-.5));e=(1-e)*(1-e)*a.y+2*(1-e)*e*b.y+e*e*
c.y;return this.interpolated.set(f,e)};return this},createCubicBezierInterpolator:function(a,b,c,d,e){this.getPosition=function(f){var g=f;e&&(f=.5>f?2*f:1-2*(f-.5));var h=f*f;f=a.y+f*(3*-a.y+f*(3*a.y-a.y*f))+f*(3*b.y+f*(-6*b.y+3*b.y*f))+h*(3*c.y-3*c.y*f)+d.y*f*h;return this.interpolated.set(g,f)};return this},createElasticOutInterpolator:function(a,b,c){this.getPosition=function(d){c&&(d=.5>d?2*d:1-2*(d-.5));return 0===d?{x:0,y:0}:1===d?{x:1,y:1}:this.interpolated.set(d,a*Math.pow(2,-10*d)*Math.sin(2*
(d-b/(2*Math.PI)*Math.asin(1/a))*Math.PI/b)+1)};return this},createElasticInInterpolator:function(a,b,c){this.getPosition=function(d){c&&(d=.5>d?2*d:1-2*(d-.5));if(0===d)return{x:0,y:0};if(1===d)return{x:1,y:1};var e=b/(2*Math.PI)*Math.asin(1/a);return this.interpolated.set(d,-(a*Math.pow(2,10*--d)*Math.sin(2*(d-e)*Math.PI/b)))};return this},createElasticInOutInterpolator:function(a,b,c){this.getPosition=function(d){c&&(d=.5>d?2*d:1-2*(d-.5));var e=b/(2*Math.PI)*Math.asin(1/a);d*=2;return 1>=d?this.interpolated.set(d,
-.5*a*Math.pow(2,10*--d)*Math.sin(2*(d-e)*Math.PI/b)):this.interpolated.set(d,1+.5*a*Math.pow(2,-10*--d)*Math.sin(2*(d-e)*Math.PI/b))};return this},bounce:function(a){return(a/=1)<1/2.75?{x:a,y:7.5625*a*a}:a<2/2.75?{x:a,y:7.5625*(a-=1.5/2.75)*a+.75}:a<2.5/2.75?{x:a,y:7.5625*(a-=2.25/2.75)*a+.9375}:{x:a,y:7.5625*(a-=2.625/2.75)*a+.984375}},createBounceOutInterpolator:function(a){this.getPosition=function(b){a&&(b=.5>b?2*b:1-2*(b-.5));return this.bounce(b)};return this},createBounceInInterpolator:function(a){this.getPosition=
function(b){a&&(b=.5>b?2*b:1-2*(b-.5));b=this.bounce(1-b);b.y=1-b.y;return b};return this},createBounceInOutInterpolator:function(a){this.getPosition=function(b){a&&(b=.5>b?2*b:1-2*(b-.5));if(.5>b)return b=this.bounce(1-2*b),b.y=.5*(1-b.y),b;b=this.bounce(2*b-1,a);b.y=.5*b.y+.5;return b};return this},paint:function(a){a.save();a.beginPath();a.moveTo(0,this.getPosition(0).y*this.paintScale);for(var b=0;b<=this.paintScale;b++)a.lineTo(b,this.getPosition(b/this.paintScale).y*this.paintScale);a.strokeStyle=
"black";a.stroke();a.restore()},getContour:function(a){for(var b=[],c=0;c<=a;c++)b.push({x:c/a,y:this.getPosition(c/a).y});return b}}}});
CAAT.Module({defines:"CAAT.Behavior.BaseBehavior",constants:{Status:{NOT_STARTED:0,STARTED:1,EXPIRED:2},parse:function(a){function b(a){a=a.split(".");for(var b=window,c=0;c<a.length;c++){if(!b[a[c]])return null;b=b[a[c]]}return b}try{var c=a.type.toLowerCase();c="CAAT.Behavior."+c.substr(0,1).toUpperCase()+c.substr(1)+"Behavior";var d=new (new b(c));d.parse(a);return d}catch(e){}return null}},depends:["CAAT.Behavior.Interpolator"],extendsWith:function(){var a=(new CAAT.Behavior.Interpolator).createLinearInterpolator(!1),
b=(new CAAT.Behavior.Interpolator).createLinearInterpolator(!0);return{__init:function(){this.lifecycleListenerList=[];this.setDefaultInterpolator();return this},lifecycleListenerList:null,behaviorStartTime:-1,behaviorDuration:-1,cycleBehavior:!1,status:CAAT.Behavior.BaseBehavior.Status.NOT_STARTED,interpolator:null,actor:null,id:0,timeOffset:0,doValueApplication:!0,solved:!0,discardable:!1,isRelative:!1,setRelative:function(a){this.isRelative=a;return this},setRelativeValues:function(){this.isRelative=
!0;return this},parse:function(a){a.pingpong&&this.setPingPong();a.cycle&&this.setCycle(!0);this.setDelayTime(a.delay||0,a.duration||1E3);a.interpolator&&this.setInterpolator(CAAT.Behavior.Interpolator.parse(a.interpolator))},setValueApplication:function(a){this.doValueApplication=a;return this},setTimeOffset:function(a){this.timeOffset=a;return this},setStatus:function(a){this.status=a;return this},setId:function(a){this.id=a;return this},setDefaultInterpolator:function(){this.interpolator=a;return this},
setPingPong:function(){this.interpolator=b;return this},setFrameTime:function(a,b){this.behaviorStartTime=a;this.behaviorDuration=b;this.status=CAAT.Behavior.BaseBehavior.Status.NOT_STARTED;return this},setDelayTime:function(a,b){this.behaviorStartTime=a;this.behaviorDuration=b;this.status=CAAT.Behavior.BaseBehavior.Status.NOT_STARTED;this.expired=this.solved=!1;return this},setOutOfFrameTime:function(){this.status=CAAT.Behavior.BaseBehavior.Status.EXPIRED;this.behaviorStartTime=Number.MAX_VALUE;
this.behaviorDuration=0;return this},setInterpolator:function(a){this.interpolator=a;return this},apply:function(a,b){this.solved||(this.behaviorStartTime+=a,this.solved=!0);var c=a+=this.timeOffset*this.behaviorDuration;this.isBehaviorInTime(a,b)&&(a=this.normalizeTime(a),this.fireBehaviorAppliedEvent(b,c,a,this.setForTime(a,b)))},setCycle:function(a){this.cycleBehavior=a;return this},addListener:function(a){this.lifecycleListenerList.push(a);return this},emptyListenerList:function(){this.lifecycleListenerList=
[];return this},getStartTime:function(){return this.behaviorStartTime},getDuration:function(){return this.behaviorDuration},isBehaviorInTime:function(a,b){var c=CAAT.Behavior.BaseBehavior.Status;if(this.status===c.EXPIRED||0>this.behaviorStartTime)return!1;this.cycleBehavior&&a>=this.behaviorStartTime&&(a=(a-this.behaviorStartTime)%this.behaviorDuration+this.behaviorStartTime);if(a>this.behaviorStartTime+this.behaviorDuration)return this.status!==c.EXPIRED&&this.setExpired(b,a),!1;this.status===c.NOT_STARTED&&
(this.status=c.STARTED,this.fireBehaviorStartedEvent(b,a));return this.behaviorStartTime<=a},fireBehaviorStartedEvent:function(a,b){for(var c=0,d=this.lifecycleListenerList.length;c<d;c++){var g=this.lifecycleListenerList[c];g.behaviorStarted&&g.behaviorStarted(this,b,a)}},fireBehaviorExpiredEvent:function(a,b){for(var c=0,d=this.lifecycleListenerList.length;c<d;c++){var g=this.lifecycleListenerList[c];g.behaviorExpired&&g.behaviorExpired(this,b,a)}},fireBehaviorAppliedEvent:function(a,b,e,f){for(var c=
0,d=this.lifecycleListenerList.length;c<d;c++){var k=this.lifecycleListenerList[c];k.behaviorApplied&&k.behaviorApplied(this,b,e,a,f)}},normalizeTime:function(a){a-=this.behaviorStartTime;this.cycleBehavior&&(a%=this.behaviorDuration);return this.interpolator.getPosition(a/this.behaviorDuration).y},setExpired:function(a,b){this.status=CAAT.Behavior.BaseBehavior.Status.EXPIRED;this.setForTime(this.interpolator.getPosition(1).y,a);this.fireBehaviorExpiredEvent(a,b);this.discardable&&this.actor.removeBehavior(this)},
setForTime:function(a,b){},initialize:function(a){if(a)for(var b in a)this[b]=a[b];return this},getPropertyName:function(){return""},calculateKeyFrameData:function(a){},getKeyFrameDataValues:function(a){},calculateKeyFramesData:function(a,b,e){}}}});
CAAT.Module({defines:"CAAT.Behavior.AlphaBehavior",aliases:["CAAT.AlphaBehavior"],depends:["CAAT.Behavior.BaseBehavior"],extendsClass:"CAAT.Behavior.BaseBehavior",extendsWith:function(){return{startAlpha:0,endAlpha:0,parse:function(a){CAAT.Behavior.AlphaBehavior.superclass.parse.call(this,a);this.startAlpha=a.start||0;this.endAlpha=a.end||0},getPropertyName:function(){return"opacity"},setForTime:function(a,b){CAAT.Behavior.AlphaBehavior.superclass.setForTime.call(this,a,b);var c=this.startAlpha+a*
(this.endAlpha-this.startAlpha);this.doValueApplication&&b.setAlpha(c);return c},setValues:function(a,b){this.startAlpha=a;this.endAlpha=b;return this},calculateKeyFrameData:function(a){a=this.interpolator.getPosition(a).y;return this.startAlpha+a*(this.endAlpha-this.startAlpha)},getKeyFrameDataValues:function(a){a=this.interpolator.getPosition(a).y;return{alpha:this.startAlpha+a*(this.endAlpha-this.startAlpha)}},calculateKeyFramesData:function(a,b,c){"undefined"===typeof c&&(c=100);c>>=0;var d="@-"+
a+"-keyframes "+b+" {";for(a=0;a<=c;a++)b=""+a/c*100+"%{opacity: "+this.calculateKeyFrameData(a/c)+"}",d+=b;return d+"}"}}}});
CAAT.Module({defines:"CAAT.Behavior.ContainerBehavior",depends:["CAAT.Behavior.BaseBehavior","CAAT.Behavior.GenericBehavior"],aliases:["CAAT.ContainerBehavior"],extendsClass:"CAAT.Behavior.BaseBehavior",extendsWith:function(){return{parse:function(a){if(a.behaviors&&a.behaviors.length)for(var b=0;b<a.behaviors.length;b+=1)this.addBehavior(CAAT.Behavior.BaseBehavior.parse(a.behaviors[b]));CAAT.Behavior.ContainerBehavior.superclass.parse.call(this,a)},behaviors:null,conforming:!1,__init:function(a){this.__super();
this.behaviors=[];a&&(this.conforming=!0);return this},conformToDuration:function(a){this.duration=a;a/=this.duration;for(var b,c=0;c<this.behaviors.length;c++)b=this.behaviors[c],b.setFrameTime(b.getStartTime()*a,b.getDuration()*a);return this},getBehaviorById:function(a){for(var b=0;b<this.behaviors.length;b++)if(this.behaviors[b].id===a)return this.behaviors[b];return null},addBehavior:function(a){this.behaviors.push(a);a.addListener(this);this.conforming&&(a=a.behaviorDuration+a.behaviorStartTime,
this.behaviorDuration<a&&(this.behaviorDuration=a,this.behaviorStartTime=0));return this},apply:function(a,b){this.solved||(this.behaviorStartTime+=a,this.solved=!0);a+=this.timeOffset*this.behaviorDuration;if(this.isBehaviorInTime(a,b)){a-=this.behaviorStartTime;this.cycleBehavior&&(a%=this.behaviorDuration);for(var c=this.behaviors,d=0;d<c.length;d++)c[d].apply(a,b)}},behaviorExpired:function(a,b,c){this.cycleBehavior&&a.setStatus(CAAT.Behavior.BaseBehavior.Status.STARTED)},behaviorApplied:function(a,
b,c,d,e){this.fireBehaviorAppliedEvent(d,b,c,e)},setForTime:function(a,b){for(var c=null,d=this.behaviors,e=0;e<d.length;e++)c=d[e].setForTime(a,b);return c},setExpired:function(a,b){for(var c=this.behaviors,d=0;d<c.length;d++){var e=c[d];e.status!==CAAT.Behavior.BaseBehavior.Status.EXPIRED&&e.setExpired(a,b-this.behaviorStartTime)}CAAT.Behavior.ContainerBehavior.superclass.setExpired.call(this,a,b);return this},setFrameTime:function(a,b){CAAT.Behavior.ContainerBehavior.superclass.setFrameTime.call(this,
a,b);for(var c=this.behaviors,d=0;d<c.length;d++)c[d].setStatus(CAAT.Behavior.BaseBehavior.Status.NOT_STARTED);return this},setDelayTime:function(a,b){CAAT.Behavior.ContainerBehavior.superclass.setDelayTime.call(this,a,b);for(var c=this.behaviors,d=0;d<c.length;d++)c[d].setStatus(CAAT.Behavior.BaseBehavior.Status.NOT_STARTED);return this},getKeyFrameDataValues:function(a){var b,c={angle:0,scaleX:1,scaleY:1,x:0,y:0};for(b=0;b<this.behaviors.length;b++){var d=this.behaviors[b];if(d.status!==CAAT.Behavior.BaseBehavior.Status.EXPIRED&&
!(d instanceof CAAT.Behavior.GenericBehavior)){var e=a*this.behaviorDuration;if(d.behaviorStartTime<=e&&d.behaviorStartTime+d.behaviorDuration>=e){e=(e-d.behaviorStartTime)/d.behaviorDuration;d=d.getKeyFrameDataValues(e);for(var f in d)c[f]=d[f]}}}return c},calculateKeyFrameData:function(a,b){function c(a){e[a]?h+=e[a]:prevValues&&(k=prevValues[a])&&(h+=k,e[a]=k)}var d,e={};for(d=0;d<this.behaviors.length;d++){var f=this.behaviors[d];if(f.status!==CAAT.Behavior.BaseBehavior.Status.EXPIRED&&!(f instanceof
CAAT.Behavior.GenericBehavior)){var g=a*this.behaviorDuration;f.behaviorStartTime<=g&&f.behaviorStartTime+f.behaviorDuration>=g&&(g=(g-f.behaviorStartTime)/f.behaviorDuration,g=f.calculateKeyFrameData(g),f=f.getPropertyName(b),"undefined"===typeof e[f]&&(e[f]=""),e[f]+=g+" ")}}var h="",k;c("translate");c("rotate");c("scale");d="";h&&(d="-"+b+"-transform: "+h+";");h="";c("opacity");h&&(d+=" opacity: "+h+";");return{rules:d+" -webkit-transform-origin: 0% 0%",ret:e}},calculateKeyFramesData:function(a,
b,c,d,e){if(this.duration===Number.MAX_VALUE)return"";"undefined"===typeof d&&(d=.5);"undefined"===typeof e&&(e=.5);"undefined"===typeof c&&(c=100);var f="@-"+a+"-keyframes "+b+" {",g={};for(b=0;b<=c;b++){var h=this.interpolator.getPosition(b/c).y;h=this.getKeyFrameDataValues(h);var k=""+b/c*100+"%{",n=void 0,m=h;for(n in g)m[n]||(m[n]=g[n]);g="-"+a+"-transform:";if(m.x||m.y)g+="translate("+(m.x||0)+"px,"+(m.y||0)+"px)";m.angle&&(g+=" rotate("+m.angle+"rad)");if(1!==m.scaleX||1!==m.scaleY)g+=" scale("+
m.scaleX+","+m.scaleY+")";g+=";";m.alpha&&(g+=" opacity: "+m.alpha+";");if(.5!==d||.5!==e)g+=" -"+a+"-transform-origin:"+100*d+"% "+100*e+"%;";f+=k+g+"}\n";g=h}return f+"}\n"}}}});
CAAT.Module({defines:"CAAT.Behavior.GenericBehavior",depends:["CAAT.Behavior.BaseBehavior"],aliases:["CAAT.GenericBehavior"],extendsClass:"CAAT.Behavior.BaseBehavior",extendsWith:function(){return{start:0,end:0,target:null,property:null,callback:null,setForTime:function(a,b){var c=this.start+a*(this.end-this.start);this.callback&&this.callback(c,this.target,b);this.property&&(this.target[this.property]=c)},setValues:function(a,b,c,d,e){this.start=a;this.end=b;this.target=c;this.property=d;this.callback=
e;return this}}}});
CAAT.Module({defines:"CAAT.Behavior.PathBehavior",aliases:["CAAT.PathBehavior"],depends:["CAAT.Behavior.BaseBehavior","CAAT.Foundation.SpriteImage"],constants:{AUTOROTATE:{LEFT_TO_RIGHT:0,RIGHT_TO_LEFT:1,FREE:2},autorotate:{LEFT_TO_RIGHT:0,RIGHT_TO_LEFT:1,FREE:2}},extendsClass:"CAAT.Behavior.BaseBehavior",extendsWith:function(){return{parse:function(a){CAAT.Behavior.PathBehavior.superclass.parse.call(this,a);if(a.SVG){var b=(new CAAT.PathUtil.SVGPath).parsePath(a.SVG);this.setValues(b)}a.autoRotate&&(this.autoRotate=
a.autoRotate)},path:null,autoRotate:!1,prevX:-1,prevY:-1,autoRotateOp:CAAT.Behavior.PathBehavior.autorotate.FREE,isOpenContour:!1,relativeX:0,relativeY:0,setOpenContour:function(a){this.isOpenContour=a;return this},getPropertyName:function(){return"translate"},setRelativeValues:function(a,b){this.relativeX=a;this.relativeY=b;this.isRelative=!0;return this},setAutoRotate:function(a,b){this.autoRotate=a;void 0!==b&&(this.autoRotateOp=b);return this},setPath:function(a){this.path=a;return this},setValues:function(a){return this.setPath(a)},
setTranslation:function(a,b){return this},calculateKeyFrameData:function(a){a=this.interpolator.getPosition(a).y;a=this.path.getPosition(a);return"translateX("+a.x+"px) translateY("+a.y+"px)"},getKeyFrameDataValues:function(a){a=this.interpolator.getPosition(a).y;var b=this.path.getPosition(a),c={x:b.x,y:b.y};this.autoRotate&&(a=0===a?b:this.path.getPosition(a-.001),c.angle=Math.atan2(b.y-a.y,b.x-a.x));return c},calculateKeyFramesData:function(a,b,c){"undefined"===typeof c&&(c=100);c>>=0;var d="@-"+
a+"-keyframes "+b+" {";for(b=0;b<=c;b++){var e=""+b/c*100+"%{-"+a+"-transform:"+this.calculateKeyFrameData(b/c)+"}";d+=e}return d+"}"},setForTime:function(a,b){if(!this.path)return{x:b.x,y:b.y};var c=this.path.getPosition(a,this.isOpenContour,.001);this.isRelative&&(c.x+=this.relativeX,c.y+=this.relativeY);if(this.autoRotate){-1===this.prevX&&-1===this.prevY&&(this.prevX=c.x,this.prevY=c.y);var d=c.x-this.prevX,e=c.y-this.prevY;if(0===d&&0===e)return b.setLocation(c.x,c.y),{x:b.x,y:b.y};d=Math.atan2(e,
d);e=CAAT.Foundation.SpriteImage;var f=CAAT.Behavior.PathBehavior.AUTOROTATE;this.autoRotateOp===f.LEFT_TO_RIGHT?this.prevX<=c.x?b.setImageTransformation(e.TR_NONE):(b.setImageTransformation(e.TR_FLIP_HORIZONTAL),d+=Math.PI):this.autoRotateOp===f.RIGHT_TO_LEFT&&(this.prevX<=c.x?b.setImageTransformation(e.TR_FLIP_HORIZONTAL):(b.setImageTransformation(e.TR_NONE),d-=Math.PI));b.setRotation(d);this.prevX=c.x;this.prevY=c.y}return this.doValueApplication?(b.setLocation(c.x,c.y),{x:b.x,y:b.y}):{x:c.x,y:c.y}},
positionOnTime:function(a){return this.isBehaviorInTime(a,null)?(a=this.normalizeTime(a),this.path.getPosition(a)):{x:-1,y:-1}}}}});
CAAT.Module({defines:"CAAT.Behavior.RotateBehavior",extendsClass:"CAAT.Behavior.BaseBehavior",depends:["CAAT.Behavior.BaseBehavior","CAAT.Foundation.Actor"],aliases:["CAAT.RotateBehavior"],extendsWith:function(){return{__init:function(){this.__super();this.anchor=CAAT.Foundation.Actor.ANCHOR_CENTER;return this},parse:function(a){CAAT.Behavior.RotateBehavior.superclass.parse.call(this,a);this.startAngle=a.start||0;this.endAngle=a.end||0;this.anchorX="undefined"!==typeof a.anchorX?parseInt(a.anchorX):
.5;this.anchorY="undefined"!==typeof a.anchorY?parseInt(a.anchorY):.5},startAngle:0,endAngle:0,anchorX:.5,anchorY:.5,rotationRelative:0,setRelativeValues:function(a){this.rotationRelative=a;this.isRelative=!0;return this},getPropertyName:function(){return"rotate"},setForTime:function(a,b){var c=this.startAngle+a*(this.endAngle-this.startAngle);this.isRelative&&(c+=this.rotationRelative,c>=Math.PI&&(c-=2*Math.PI),c<-2*Math.PI&&(c+=2*Math.PI));this.doValueApplication&&b.setRotationAnchored(c,this.anchorX,
this.anchorY);return c},setValues:function(a,b,c,d){this.startAngle=a;this.endAngle=b;"undefined"!==typeof c&&"undefined"!==typeof d&&(this.anchorX=c,this.anchorY=d);return this},setAngles:function(a,b){return this.setValues(a,b)},setAnchor:function(a,b,c){this.anchorX=b/a.width;this.anchorY=c/a.height;return this},calculateKeyFrameData:function(a){a=this.interpolator.getPosition(a).y;return"rotate("+(this.startAngle+a*(this.endAngle-this.startAngle))+"rad)"},getKeyFrameDataValues:function(a){a=this.interpolator.getPosition(a).y;
return{angle:this.startAngle+a*(this.endAngle-this.startAngle)}},calculateKeyFramesData:function(a,b,c){"undefined"===typeof c&&(c=100);c>>=0;var d="@-"+a+"-keyframes "+b+" {";for(b=0;b<=c;b++){var e=""+b/c*100+"%{-"+a+"-transform:"+this.calculateKeyFrameData(b/c)+"; -"+a+"-transform-origin:"+100*this.anchorX+"% "+100*this.anchorY+"% }\n";d+=e}return d+"}\n"}}}});
CAAT.Module({defines:"CAAT.Behavior.Scale1Behavior",depends:["CAAT.Behavior.BaseBehavior","CAAT.Foundation.Actor"],aliases:["CAAT.Scale1Behavior"],constants:{AXIS:{X:0,Y:1},Axis:{X:0,Y:1}},extendsClass:"CAAT.Behavior.BaseBehavior",extendsWith:function(){return{__init:function(){this.__super();this.anchor=CAAT.Foundation.Actor.ANCHOR_CENTER;return this},startScale:1,endScale:1,anchorX:.5,anchorY:.5,applyOnX:!0,parse:function(a){CAAT.Behavior.Scale1Behavior.superclass.parse.call(this,a);this.startScale=
a.start||0;this.endScale=a.end||0;this.anchorX="undefined"!==typeof a.anchorX?parseInt(a.anchorX):.5;this.anchorY="undefined"!==typeof a.anchorY?parseInt(a.anchorY):.5;this.applyOnX=a.axis?"x"===a.axis.toLowerCase():!0},applyOnAxis:function(a){this.applyOnX=a===CAAT.Behavior.Scale1Behavior.AXIS.X?!1:!0},getPropertyName:function(){return"scale"},setForTime:function(a,b){var c=this.startScale+a*(this.endScale-this.startScale);0===c&&(c=.01);this.doValueApplication&&(this.applyOnX?b.setScaleAnchored(c,
b.scaleY,this.anchorX,this.anchorY):b.setScaleAnchored(b.scaleX,c,this.anchorX,this.anchorY));return c},setValues:function(a,b,c,d,e){this.startScale=a;this.endScale=b;this.applyOnX=!!c;"undefined"!==typeof d&&"undefined"!==typeof e&&(this.anchorX=d,this.anchorY=e);return this},setAnchor:function(a,b,c){this.anchorX=b/a.width;this.anchorY=c/a.height;return this},calculateKeyFrameData:function(a){a=this.interpolator.getPosition(a).y;a=this.startScale+a*(this.endScale-this.startScale);return this.applyOnX?
"scaleX("+a+")":"scaleY("+a+")"},getKeyFrameDataValues:function(a){a=this.interpolator.getPosition(a).y;var b={};b[this.applyOnX?"scaleX":"scaleY"]=this.startScale+a*(this.endScale-this.startScale);return b},calculateKeyFramesData:function(a,b,c){"undefined"===typeof c&&(c=100);c>>=0;var d="@-"+a+"-keyframes "+b+" {";for(b=0;b<=c;b++){var e=""+b/c*100+"%{-"+a+"-transform:"+this.calculateKeyFrameData(b/c)+"; -"+a+"-transform-origin:"+100*this.anchorX+"% "+100*this.anchorY+"% }\n";d+=e}return d+"}\n"}}}});
CAAT.Module({defines:"CAAT.Behavior.ScaleBehavior",depends:["CAAT.Behavior.BaseBehavior","CAAT.Foundation.Actor"],extendsClass:"CAAT.Behavior.BaseBehavior",aliases:["CAAT.ScaleBehavior"],extendsWith:function(){return{__init:function(){this.__super();this.anchor=CAAT.Foundation.Actor.ANCHOR_CENTER;return this},startScaleX:1,endScaleX:1,startScaleY:1,endScaleY:1,anchorX:.5,anchorY:.5,parse:function(a){CAAT.Behavior.ScaleBehavior.superclass.parse.call(this,a);this.startScaleX=a.scaleX&&a.scaleX.start||
0;this.endScaleX=a.scaleX&&a.scaleX.end||0;this.startScaleY=a.scaleY&&a.scaleY.start||0;this.endScaleY=a.scaleY&&a.scaleY.end||0;this.anchorX="undefined"!==typeof a.anchorX?parseInt(a.anchorX):.5;this.anchorY="undefined"!==typeof a.anchorY?parseInt(a.anchorY):.5},getPropertyName:function(){return"scale"},setForTime:function(a,b){var c=this.startScaleX+a*(this.endScaleX-this.startScaleX),d=this.startScaleY+a*(this.endScaleY-this.startScaleY);0===c&&(c=.01);0===d&&(d=.01);this.doValueApplication&&b.setScaleAnchored(c,
d,this.anchorX,this.anchorY);return{scaleX:c,scaleY:d}},setValues:function(a,b,c,d,e,f){this.startScaleX=a;this.endScaleX=b;this.startScaleY=c;this.endScaleY=d;"undefined"!==typeof e&&"undefined"!==typeof f&&(this.anchorX=e,this.anchorY=f);return this},setAnchor:function(a,b,c){this.anchorX=b/a.width;this.anchorY=c/a.height;return this},calculateKeyFrameData:function(a){a=this.interpolator.getPosition(a).y;return"scale("+(this.startScaleX+a*(this.endScaleX-this.startScaleX))+","+(this.startScaleY+
a*(this.endScaleY-this.startScaleY))+")"},getKeyFrameDataValues:function(a){a=this.interpolator.getPosition(a).y;return{scaleX:this.startScaleX+a*(this.endScaleX-this.startScaleX),scaleY:this.startScaleY+a*(this.endScaleY-this.startScaleY)}},calculateKeyFramesData:function(a,b,c){"undefined"===typeof c&&(c=100);c>>=0;var d="@-"+a+"-keyframes "+b+" {";for(b=0;b<=c;b++){var e=""+b/c*100+"%{-"+a+"-transform:"+this.calculateKeyFrameData(b/c)+"; -"+a+"-transform-origin:"+100*this.anchorX+"% "+100*this.anchorY+
"% }\n";d+=e}return d+"}\n"}}}});
CAAT.Module({defines:"CAAT.Module.Runtime.BrowserInfo",constants:function(){function a(a){for(var b=0;b<a.length;b++){var c=a[b].string,d=a[b].prop;this.versionSearchString=a[b].versionSearch||a[b].identity;if(c){if(-1!==c.indexOf(a[b].subString))return a[b].identity}else if(d)return a[b].identity}}function b(a){var b=a.indexOf(this.versionSearchString);if(-1!==b)return parseFloat(a.substring(b+this.versionSearchString.length+1))}var c=[{string:navigator.platform,subString:"Win",identity:"Windows"},
{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod/iPad"},{string:navigator.userAgent,subString:"iPad",identity:"iPhone/iPod/iPad"},{string:navigator.platform,subString:"Linux",identity:"Linux"}],d=a([{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},
{prop:window.opera,identity:"Opera"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Explorer",identity:"Explorer",
versionSearch:"Explorer"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}])||"An unknown browser",e=b(navigator.userAgent)||b(navigator.appVersion)||"an unknown version";c=a(c)||"an unknown OS";return{browser:d,version:e,OS:c,DevicePixelRatio:window.devicePixelRatio||1}}});
CAAT.Module({defines:"CAAT.Module.Audio.AudioManager",depends:["CAAT.Module.Runtime.BrowserInfo"],extendsWith:function(){return{__init:function(){this.browserInfo=CAAT.Module.Runtime.BrowserInfo;return this},musicChannel:null,browserInfo:null,musicEnabled:!0,fxEnabled:!0,audioCache:null,channels:null,workingChannels:null,loopingChannels:[],audioTypes:{mp3:"audio/mpeg;",ogg:'audio/ogg; codecs="vorbis"',wav:'audio/wav; codecs="1"',mp4:'audio/mp4; codecs="mp4a.40.2"'},initialize:function(a){this.audioCache=
[];this.channels=[];this.workingChannels=[];for(var b=0;b<=a;b++){var c=document.createElement("audio");if(null!==c){c.finished=-1;this.channels.push(c);var d=this;c.addEventListener("ended",function(a){a=a.target;var b;for(b=0;b<d.workingChannels.length;b++)if(d.workingChannels[b]===a){d.workingChannels.splice(b,1);break}a.caat_callback&&a.caat_callback(a.caat_id);d.channels.push(a)},!1)}}this.musicChannel=this.channels.pop();return this},addAudioFromURL:function(a,b,c){var d=document.createElement("audio");
if(null!==d){if(!d.canPlayType)return!1;var e=b.substr(b.lastIndexOf(".")+1);e=d.canPlayType(this.audioTypes[e]);if(""!==e&&"no"!==e)return d.src=b,d.preload="auto",d.load(),c&&(d.caat_callback=c,d.caat_id=a),this.audioCache.push({id:a,audio:d}),!0}return!1},addAudioFromDomNode:function(a,b,c){var d=b.src.substr(b.src.lastIndexOf(".")+1);return b.canPlayType(this.audioTypes[d])?(c&&(b.caat_callback=c,b.caat_id=a),this.audioCache.push({id:a,audio:b}),!0):!1},addAudioElement:function(a,b,c){if("string"===
typeof b)return this.addAudioFromURL(a,b,c);try{if(b instanceof HTMLAudioElement)return this.addAudioFromDomNode(a,b,c)}catch(d){}return!1},addAudio:function(a,b,c){if(b instanceof Array)for(var d=0;d<b.length&&!this.addAudioElement(a,b[d],c);d++);else this.addAudioElement(a,b,c);return this},getAudio:function(a){for(var b=0;b<this.audioCache.length;b++)if(this.audioCache[b].id===a)return this.audioCache[b].audio;return null},stopMusic:function(){this.musicChannel.pause()},playMusic:function(a){if(!this.musicEnabled)return null;
a=this.getAudio(a);if(null!==a){var b=this.musicChannel;if(null!==b)return b.src=a.src,b.preload="auto","Firefox"===this.browserInfo.browser?b.addEventListener("ended",function(a){a.target.currentTime=0},!1):b.loop=!0,b.load(),b.play(),b}return null},setVolume:function(a,b){var c=this.getAudio(a);null!=c&&(c.volume=b);return this},play:function(a){if(!this.fxEnabled)return null;a=this.getAudio(a);if(null!==a&&0<this.channels.length){var b=this.channels.shift();b.src=a.src;b.volume=a.volume;b.play();
this.workingChannels.push(b)}return a},cancelPlay:function(a){for(var b=0;this.workingChannels.length;b++){var c=this.workingChannels[b];c.caat_id===a&&(c.pause(),this.channels.push(c),this.workingChannels.splice(b,1))}return this},cancelPlayByChannel:function(a){for(var b=0;this.workingChannels.length;b++)if(this.workingChannels[b]===a){this.channels.push(a);this.workingChannels.splice(b,1);break}return this},loop:function(a){if(!this.musicEnabled)return null;a=this.getAudio(a);if(null!==a){var b=
document.createElement("audio");if(null!==b)return b.src=a.src,b.preload="auto","Firefox"===this.browserInfo.browser?b.addEventListener("ended",function(a){a.target.currentTime=0},!1):b.loop=!0,b.load(),b.play(),this.loopingChannels.push(b),b}return null},endSound:function(){var a;for(a=0;a<this.workingChannels.length;a++)this.workingChannels[a].pause(),this.channels.push(this.workingChannels[a]);for(a=0;a<this.loopingChannels.length;a++)this.loopingChannels[a].pause();this.workingChannels=[];this.loopingChannels=
[];this.stopMusic();return this},setSoundEffectsEnabled:function(a){this.fxEnabled=a;for(var b=0;b<this.loopingChannels.length;b++)a?this.loopingChannels[b].play():this.loopingChannels[b].pause();return this},isSoundEffectsEnabled:function(){return this.fxEnabled},setMusicEnabled:function(a){this.musicEnabled=a;this.stopMusic();return this},isMusicEnabled:function(){return this.musicEnabled}}}});
CAAT.Module({defines:"CAAT.Module.Storage.LocalStorage",constants:{save:function(a,b){try{localStorage.setItem(a,JSON.stringify(b))}catch(c){}return this},load:function(a,b){try{var c=localStorage.getItem(a);return null===c?b:JSON.parse(c)}catch(d){return null}},remove:function(a){try{localStorage.removeItem(a)}catch(b){}return this}},extendsWith:{}});
CAAT.Module({defines:"CAAT.Module.ColorUtil.Color",depends:[],constants:{RampEnumeration:{RAMP_RGBA:0,RAMP_RGB:1,RAMP_CHANNEL_RGB:2,RAMP_CHANNEL_RGBA:3,RAMP_CHANNEL_RGB_ARRAY:4,RAMP_CHANNEL_RGBA_ARRAY:5},hsvToRgb:function(a,b,c){a=Math.max(0,Math.min(360,a));b=Math.max(0,Math.min(100,b));c=Math.max(0,Math.min(100,c));b/=100;c/=100;if(0===b){var d=b=c;return[Math.round(255*d),Math.round(255*b),Math.round(255*c)]}a/=60;d=Math.floor(a);var e=a-d;a=c*(1-b);var f=c*(1-b*e);e=c*(1-b*(1-e));switch(d){case 0:d=
c;b=e;c=a;break;case 1:d=f;b=c;c=a;break;case 2:d=a;b=c;c=e;break;case 3:d=a;b=f;break;case 4:d=e;b=a;break;default:d=c,b=a,c=f}return new CAAT.Module.ColorUtil.Color(Math.round(255*d),Math.round(255*b),Math.round(255*c))},interpolate:function(a,b,c,d,e,f,g,h){if(0>=h)return{r:a,g:b,b:c};if(h>=g)return{r:d,g:e,b:f};a=a+(d-a)/g*h>>0;b=b+(e-b)/g*h>>0;c=c+(f-c)/g*h>>0;255<a?a=255:0>a&&(a=0);255<b?b=255:0>b&&(b=0);255<c?c=255:0>c&&(c=0);return{r:a,g:b,b:c}},makeRGBColorRamp:function(a,b,c){var d=[],e=
a.length-1;b/=e;var f;for(f=0;f<e;f+=1){var g=a[f];var h=g>>24&255;var k=(g&16711680)>>16;var n=(g&65280)>>8;g&=255;var m=a[f+1];var p=m>>24&255;var r=(m&16711680)>>16;var q=(m&65280)>>8;m&=255;p=(p-h)/b;r=(r-k)/b;q=(q-n)/b;var t=(m-g)/b;for(m=0;m<b;m+=1){var u=h+p*m>>0;var v=k+r*m>>0;var w=n+q*m>>0;var x=g+t*m>>0;var y=CAAT.Module.ColorUtil.Color.RampEnumeration;switch(c){case y.RAMP_RGBA:d.push("argb("+u+","+v+","+w+","+x+")");break;case y.RAMP_RGB:d.push("rgb("+v+","+w+","+x+")");break;case y.RAMP_CHANNEL_RGB:d.push(4278190080|
v<<16|w<<8|x);break;case y.RAMP_CHANNEL_RGBA:d.push(u<<24|v<<16|w<<8|x);break;case y.RAMP_CHANNEL_RGBA_ARRAY:d.push([v,w,x,u]);break;case y.RAMP_CHANNEL_RGB_ARRAY:d.push([v,w,x])}}}return d},random:function(){for(var a="#",b=0;3>b;b++)a+="0123456789abcdef"[16*Math.random()>>0];return a}},extendsWith:{__init:function(a,b,c){this.r=a||255;this.g=b||255;this.b=c||255;return this},r:255,g:255,b:255,toHex:function(){return("000000"+((this.r<<16)+(this.g<<8)+this.b).toString(16)).slice(-6)}}});
CAAT.Module({defines:"CAAT.Module.Debug.Debug",depends:["CAAT.Event.AnimationLoop"],extendsWith:{width:0,height:0,canvas:null,ctx:null,statistics:null,framerate:null,textContainer:null,textFPS:null,textEntitiesTotal:null,textEntitiesActive:null,textDraws:null,textDrawTime:null,textRAFTime:null,textDirtyRects:null,textDiscardDR:null,frameTimeAcc:0,frameRAFAcc:0,canDebug:!1,SCALE:60,debugTpl:'    <style type="text/css">        #caat-debug {            z-index: 10000;            position:fixed;            bottom:0;            left:0;            width:100%;            background-color: rgba(0,0,0,0.8);        }        #caat-debug.caat_debug_max {            margin-bottom: 0px;        }        .caat_debug_bullet {            display:inline-block;            background-color:#f00;            width:8px;            height:8px;            border-radius: 4px;            margin-left:10px;            margin-right:2px;        }        .caat_debug_description {            font-size:11px;            font-family: helvetica, arial;            color: #aaa;            display: inline-block;        }        .caat_debug_value {            font-size:11px;            font-family: helvetica, arial;            color: #fff;            width:25px;            text-align: right;            display: inline-block;            margin-right: .3em;        }        .caat_debug_indicator {            float: right;        }        #debug_tabs {            border-top: 1px solid #888;            height:25px;        }        .tab_max_min {            font-family: helvetica, arial;            font-size: 12px;            font-weight: bold;            color: #888;            border-right: 1px solid #888;            float: left;            cursor: pointer;            padding-left: 5px;            padding-right: 5px;            padding-top: 5px;            height: 20px;        }        .debug_tabs_content_hidden {            display: none;            width: 100%;        }        .debug_tabs_content_visible {            display: block;            width: 100%;        }        .checkbox_enabled {            display:inline-block;            background-color:#eee;            border: 1px solid #eee;            width:6px;            height:8px;            margin-left:12px;            margin-right:2px;            cursor: pointer;        }        .checkbox_disabled {            display:inline-block;            width:6px;            height:8px;            background-color: #333;            border: 1px solid #eee;            margin-left:12px;            margin-right:2px;            cursor: pointer;        }        .checkbox_description {            font-size:11px;            font-family: helvetica, arial;            color: #fff;        }        .debug_tab {            font-family: helvetica, arial;            font-size: 12px;            color: #fff;            border-right: 1px solid #888;            float: left;            padding-left: 5px;            padding-right: 5px;            height: 20px;            padding-top: 5px;            cursor: default;        }        .debug_tab_selected {            background-color: #444;            cursor: default;        }        .debug_tab_not_selected {            background-color: #000;            cursor: pointer;        }    </style>    <div id="caat-debug">        <div id="debug_tabs">            <span class="tab_max_min" onCLick="javascript: var debug = document.getElementById(\'debug_tabs_content\');if (debug.className === \'debug_tabs_content_visible\') {debug.className = \'debug_tabs_content_hidden\'} else {debug.className = \'debug_tabs_content_visible\'}"> CAAT Debug panel </span>            <span id="caat-debug-tab0" class="debug_tab debug_tab_selected">Performance</span>            <span id="caat-debug-tab1" class="debug_tab debug_tab_not_selected">Controls</span>            <span class="caat_debug_indicator">                <span class="caat_debug_bullet" style="background-color:#0f0;"></span>                <span class="caat_debug_description">Draw Time: </span>                <span class="caat_debug_value" id="textDrawTime">5.46</span>                <span class="caat_debug_description">ms.</span>            </span>            <span class="caat_debug_indicator">                <span class="caat_debug_bullet" style="background-color:#f00;"></span>                <span class="caat_debug_description">FPS: </span>                <span class="caat_debug_value" id="textFPS">48</span>            </span>        </div>        <div id="debug_tabs_content" class="debug_tabs_content_hidden">            <div id="caat-debug-tab0-content">                <canvas id="caat-debug-canvas" height="60"></canvas>                <div>                    <span>                        <span class="caat_debug_bullet" style="background-color:#0f0;"></span>                        <span class="caat_debug_description">RAF Time:</span>                        <span class="caat_debug_value" id="textRAFTime">20.76</span>                        <span class="caat_debug_description">ms.</span>                    </span>                    <span>                        <span class="caat_debug_bullet" style="background-color:#0ff;"></span>                        <span class="caat_debug_description">Entities Total: </span>                        <span class="caat_debug_value" id="textEntitiesTotal">41</span>                    </span>                    <span>                        <span class="caat_debug_bullet" style="background-color:#0ff;"></span>                        <span class="caat_debug_description">Entities Active: </span>                        <span class="caat_debug_value" id="textEntitiesActive">37</span>                    </span>                    <span>                        <span class="caat_debug_bullet" style="background-color:#00f;"></span>                        <span class="caat_debug_description">Draws: </span>                        <span class="caat_debug_value" id="textDraws">0</span>                    </span>                    <span>                        <span class="caat_debug_bullet" style="background-color:#00f;"></span>                        <span class="caat_debug_description">DirtyRects: </span>                        <span class="caat_debug_value" id="textDirtyRects">0</span>                    </span>                    <span>                        <span class="caat_debug_bullet" style="background-color:#00f;"></span>                        <span class="caat_debug_description">Discard DR: </span>                        <span class="caat_debug_value" id="textDiscardDR">0</span>                    </span>                </div>            </div>            <div id="caat-debug-tab1-content">                <div>                    <div>                        <span id="control-sound"></span>                        <span class="checkbox_description">Sound</span>                    </div>                    <div>                        <span id="control-music"></span>                        <span class="checkbox_description">Music</span>                    </div>                    <div>                        <span id="control-aabb"></span>                        <span class="checkbox_description">AA Bounding Boxes</span>                    </div>                    <div>                        <span id="control-bb"></span>                        <span class="checkbox_description">Bounding Boxes</span>                    </div>                    <div>                        <span id="control-dr"></span>                        <span class="checkbox_description">Dirty Rects</span>                    </div>                </div>            </div>        </div>    </div>',
setScale:function(a){this.scale=a;return this},initialize:function(a,b){this.width=a=window.innerWidth;this.height=b;this.framerate={refreshInterval:CAAT.FPS_REFRESH||500,frames:0,timeLastRefresh:0,fps:0,prevFps:-1,fpsMin:1E3,fpsMax:0};if(!document.getElementById("caat-debug")){var c=document.createElement("div");c.innerHTML=this.debugTpl;document.body.appendChild(c);eval(' var __x= CAAT;        function initCheck( name, bool, callback ) {            var elem= document.getElementById(name);            if ( elem ) {                elem.className= (bool) ? "checkbox_enabled" : "checkbox_disabled";                if ( callback ) {                    elem.addEventListener( "click", (function(elem, callback) {                        return function(e) {                            elem.__value= !elem.__value;                            elem.className= (elem.__value) ? "checkbox_enabled" : "checkbox_disabled";                            callback(e,elem.__value);                        }                    })(elem, callback), false );                }                elem.__value= bool;            }        }        function setupTabs() {            var numTabs=0;            var elem;            var elemContent;            do {                elem= document.getElementById("caat-debug-tab"+numTabs);                if ( elem ) {                    elemContent= document.getElementById("caat-debug-tab"+numTabs+"-content");                    if ( elemContent ) {                        elemContent.style.display= numTabs===0 ? \'block\' : \'none\';                        elem.className= numTabs===0 ? "debug_tab debug_tab_selected" : "debug_tab debug_tab_not_selected";                        elem.addEventListener( "click", (function(tabIndex) {                            return function(e) {                                for( var i=0; i<numTabs; i++ ) {                                    var _elem= document.getElementById("caat-debug-tab"+i);                                    var _elemContent= document.getElementById("caat-debug-tab"+i+"-content");                                    _elemContent.style.display= i===tabIndex ? \'block\' : \'none\';                                    _elem.className= i===tabIndex ? "debug_tab debug_tab_selected" : "debug_tab debug_tab_not_selected";                                }                            }                        })(numTabs), false );                    }                    numTabs++;                }            } while( elem );        }        initCheck( "control-sound", __x.director[0].isSoundEffectsEnabled(), function(e, bool) {            __x.director[0].setSoundEffectsEnabled(bool);        } );        initCheck( "control-music", __x.director[0].isMusicEnabled(), function(e, bool) {            __x.director[0].setMusicEnabled(bool);        } );        initCheck( "control-aabb", CAAT.DEBUGBB, function(e,bool) {            CAAT.DEBUGAABB= bool;            __x.director[0].currentScene.dirty= true;        } );        initCheck( "control-bb", CAAT.DEBUGBB, function(e,bool) {            CAAT.DEBUGBB= bool;            if ( bool ) {                CAAT.DEBUGAABB= true;            }            __x.director[0].currentScene.dirty= true;        } );        initCheck( "control-dr", CAAT.DEBUG_DIRTYRECTS , function( e,bool ) {            CAAT.DEBUG_DIRTYRECTS= bool;        });        setupTabs();')}this.canvas=
document.getElementById("caat-debug-canvas");if(null===this.canvas)this.canDebug=!1;else return this.canvas.width=a,this.canvas.height=b,this.ctx=this.canvas.getContext("2d"),this.ctx.fillStyle="#000",this.ctx.fillRect(0,0,this.width,this.height),this.textFPS=document.getElementById("textFPS"),this.textDrawTime=document.getElementById("textDrawTime"),this.textRAFTime=document.getElementById("textRAFTime"),this.textEntitiesTotal=document.getElementById("textEntitiesTotal"),this.textEntitiesActive=
document.getElementById("textEntitiesActive"),this.textDraws=document.getElementById("textDraws"),this.textDirtyRects=document.getElementById("textDirtyRects"),this.textDiscardDR=document.getElementById("textDiscardDR"),this.canDebug=!0,this},debugInfo:function(a){this.statistics=a;a=CAAT;this.frameTimeAcc+=a.FRAME_TIME;this.frameRAFAcc+=a.REQUEST_ANIMATION_FRAME_TIME;this.framerate.frames++;a=(new Date).getTime();if(a>this.framerate.timeLastRefresh+this.framerate.refreshInterval){this.framerate.fps=
1E3*this.framerate.frames/(a-this.framerate.timeLastRefresh)|0;this.framerate.fpsMin=0<this.framerate.frames?Math.min(this.framerate.fpsMin,this.framerate.fps):this.framerate.fpsMin;this.framerate.fpsMax=Math.max(this.framerate.fpsMax,this.framerate.fps);this.textFPS.innerHTML=this.framerate.fps;var b=(100*this.frameTimeAcc/this.framerate.frames|0)/100;this.frameTimeAcc=0;this.textDrawTime.innerHTML=b;b=(100*this.frameRAFAcc/this.framerate.frames|0)/100;this.frameRAFAcc=0;this.textRAFTime.innerHTML=
b;this.framerate.timeLastRefresh=a;this.framerate.frames=0;this.paint(b)}this.textEntitiesTotal.innerHTML=this.statistics.size_total;this.textEntitiesActive.innerHTML=this.statistics.size_active;this.textDirtyRects.innerHTML=this.statistics.size_dirtyRects;this.textDraws.innerHTML=this.statistics.draws;this.textDiscardDR.innerHTML=this.statistics.size_discarded_by_dirty_rects},paint:function(a){var b=this.ctx;b.drawImage(this.canvas,1,0,this.width-1,this.height,0,0,this.width-1,this.height);b.strokeStyle=
"black";b.beginPath();b.moveTo(this.width-.5,0);b.lineTo(this.width-.5,this.height);b.stroke();b.strokeStyle="#a22";b.beginPath();var c=this.height-(20/this.SCALE*this.height>>0)-.5;b.moveTo(.5,c);b.lineTo(this.width+.5,c);b.stroke();b.strokeStyle="#aa2";b.beginPath();c=this.height-(30/this.SCALE*this.height>>0)-.5;b.moveTo(.5,c);b.lineTo(this.width+.5,c);b.stroke();c=Math.min(this.height-this.framerate.fps/this.SCALE*this.height,59);-1===this.framerate.prevFps&&(this.framerate.prevFps=c|0);b.strokeStyle=
"#0ff";b.beginPath();b.moveTo(this.width,(c|0)-.5);b.lineTo(this.width,this.framerate.prevFps-.5);b.stroke();this.framerate.prevFps=c;a=(this.height-a/this.SCALE*this.height>>0)-.5;b.strokeStyle="#ff0";b.beginPath();b.moveTo(this.width,a);b.lineTo(this.width,a);b.stroke()}}});
CAAT.Module({defines:"CAAT.Module.Font.Font",aliases:"CAAT.Font",depends:["CAAT.Foundation.SpriteImage"],constants:{getFontMetrics:function(a){var b;if(CAAT.CSS_TEXT_METRICS)try{return b=CAAT.Module.Font.Font.getFontMetricsCSS(a)}catch(c){}return CAAT.Module.Font.Font.getFontMetricsNoCSS(a)},getFontMetricsNoCSS:function(a){a=/(\d+)p[x|t]/i.exec(a);var b=a?a[1]|0:32;a=b-1;b=b+.2*b|0;return{height:b,ascent:a,descent:b-a}},getFontMetricsCSS:function(a){function b(a){var b=a&&a.ownerDocument;var c=b.documentElement;
a=a.getBoundingClientRect();var d=document.body;b=9===b.nodeType?b.defaultView||b.parentWindow:!1;var e=c.clientTop||d.clientTop||0;d=c.clientLeft||d.clientLeft||0;return{top:a.top+(b.pageYOffset||c.scrollTop)-e,left:a.left+(b.pageXOffset||c.scrollLeft)-d}}try{var c=document.createElement("span");c.style.font=a;c.innerHTML="Hg";var d=document.createElement("div");d.style.display="inline-block";d.style.width="1px";d.style.heigh="0px";var e=document.createElement("div");e.appendChild(c);e.appendChild(d);
var f=document.body;f.appendChild(e);try{return a={},d.style.verticalAlign="baseline",a.ascent=b(d).top-b(c).top,d.style.verticalAlign="bottom",a.height=b(d).top-b(c).top,a.ascent=Math.ceil(a.ascent),a.height=Math.ceil(a.height),a.descent=a.height-a.ascent,a}finally{f.removeChild(e)}}catch(g){return null}}},extendsWith:function(){return{fontSize:10,fontSizeUnit:"px",font:"Sans-Serif",fontStyle:"",fillStyle:"#fff",strokeStyle:null,strokeSize:1,padding:0,image:null,charMap:null,height:0,ascent:0,descent:0,
setPadding:function(a){this.padding=a;return this},setFontStyle:function(a){this.fontStyle=a;return this},setStrokeSize:function(a){this.strokeSize=a;return this},setFontSize:function(a){this.fontSize=a;this.fontSizeUnit="px";return this},setFont:function(a){this.font=a;return this},setFillStyle:function(a){this.fillStyle=a;return this},setStrokeStyle:function(a){this.strokeStyle=a;return this},createDefault:function(a){for(var b="",c=32;128>c;c++)b+=String.fromCharCode(c);return this.create(b,a)},
create:function(a,b){this.padding=b|=0;var c=document.createElement("canvas"),d=c.getContext("2d");d.textBaseline="bottom";d.font=this.fontStyle+" "+this.fontSize+this.fontSizeUnit+" "+this.font;var e=0,f=[],g;for(g=0;g<a.length;g++){var h=Math.max(1,(d.measureText(a.charAt(g)).width>>0)+1)+2*b;f.push(h);e+=h}g=CAAT.Font.getFontMetrics(d.font);d=g.height;this.ascent=g.ascent;this.descent=g.descent;this.height=g.height;h=g.ascent;c.width=e;c.height=d;d=c.getContext("2d");d.textBaseline="alphabetic";
d.font=this.fontStyle+" "+this.fontSize+this.fontSizeUnit+" "+this.font;d.fillStyle=this.fillStyle;d.strokeStyle=this.strokeStyle;this.charMap={};for(g=e=0;g<a.length;g++){var k=a.charAt(g);d.fillText(k,e+b,h);this.strokeStyle&&(d.beginPath(),d.lineWidth=this.strokeSize,d.strokeText(k,e+b,h));this.charMap[k]={x:e+b,width:f[g]-2*b};e+=f[g]}this.image=c;return this},setAsSpriteImage:function(){var a=[],b=0,c;for(c in this.charMap){var d=c,e=this.charMap[c];a[c]={id:b++,height:this.height,xoffset:0,
letter:d,yoffset:0,width:e.width,xadvance:e.width,x:e.x,y:0}}this.spriteImage=(new CAAT.Foundation.SpriteImage).initializeAsGlyphDesigner(this.image,a);return this},getAscent:function(){return this.ascent},getDescent:function(){return this.descent},stringHeight:function(){return this.height},getFontData:function(){return{height:this.height,ascent:this.ascent,descent:this.descent}},stringWidth:function(a){var b,c=0,d;var e=0;for(b=a.length;e<b;e++)c=(d=this.charMap[a.charAt(e)])?c+d.width:c+10;return c},
drawText:function(a,b,c,d){var e,f,g=this.image.height;var h=0;for(e=a.length;h<e;h++)if(f=this.charMap[a.charAt(h)]){var k=f.width;0<k&&0<f.height&&b.drawImage(this.image,f.x,0,k,g,c,d,k,g);c+=k}else b.strokeStyle="#f00",b.strokeRect(c,d,10,g),c+=10},save:function(){var a=this.image.toDataURL("image/png");document.location.href=a.replace("image/png","image/octet-stream")},drawSpriteText:function(a,b){this.spriteImage.drawSpriteText(a,b)}}}});
CAAT.Module({defines:"CAAT.Module.CircleManager.PackedCircle",depends:["CAAT.Module.CircleManager.PackedCircle","CAAT.Math.Point"],constants:{BOUNDS_RULE_WRAP:1,BOUNDS_RULE_CONSTRAINT:2,BOUNDS_RULE_DESTROY:4,BOUNDS_RULE_IGNORE:8},extendsWith:{__init:function(){this.boundsRule=CAAT.Module.CircleManager.PackedCircle.BOUNDS_RULE_IGNORE;this.position=new CAAT.Math.Point(0,0,0);this.offset=new CAAT.Math.Point(0,0,0);this.targetPosition=new CAAT.Math.Point(0,0,0);return this},id:0,delegate:null,position:null,
offset:null,targetPosition:null,targetChaseSpeed:.02,isFixed:!1,boundsRule:0,collisionMask:0,collisionGroup:0,containsPoint:function(a){return this.position.getDistanceSquared(a)<this.radiusSquared},getDistanceSquaredFromPosition:function(a){return this.position.getDistanceSquared(a)<this.radiusSquared},intersects:function(a){var b=this.position.getDistanceSquared(a.position);return b<this.radiusSquared||b<a.radiusSquared},setPosition:function(a){this.position=a;return this},setDelegate:function(a){this.delegate=
a;return this},setOffset:function(a){this.offset=a;return this},setTargetPosition:function(a){this.targetPosition=a;return this},setTargetChaseSpeed:function(a){this.targetChaseSpeed=a;return this},setIsFixed:function(a){this.isFixed=a;return this},setCollisionMask:function(a){this.collisionMask=a;return this},setCollisionGroup:function(a){this.collisionGroup=a;return this},setRadius:function(a){this.radius=a;this.radiusSquared=this.radius*this.radius;return this},initialize:function(a){if(a)for(var b in a)this[b]=
a[b];return this},dealloc:function(){this.targetPosition=this.delegate=this.offset=this.position=null}}});
CAAT.Module({defines:"CAAT.Module.CircleManager.PackedCircleManager",depends:["CAAT.Math.Point","CAAT.Math.Rectangle"],extendsWith:{__init:function(){this.bounds=new CAAT.Math.Rectangle},allCircles:[],numberOfCollisionPasses:1,numberOfTargetingPasses:0,bounds:null,addCircle:function(a){a.id=this.allCircles.length;this.allCircles.push(a);return this},removeCircle:function(a){var b=0,c=!1,d=this.allCircles.length;if(0===d)throw"Error: (PackedCircleManager) attempting to remove circle, and allCircles.length === 0!!";
for(;d--;)if(this.allCircles[d]===a){c=!0;b=d;break}if(!c)throw"Could not locate circle in allCircles array!";this.allCircles[b].dealloc();this.allCircles[b]=null;return this},forceCirclesToMatchDelegatePositions:function(){for(var a=this.allCircles.length,b=0;b<a;b++){var c=this.allCircles[b];c&&c.delegate&&c.position.set(c.delegate.x+c.offset.x,c.delegate.y+c.offset.y)}},pushAllCirclesTowardTarget:function(a){a=new CAAT.Math.Point(0,0,0);for(var b=this.allCircles,c=b.length,d=0;d<this.numberOfTargetingPasses;d++)for(var e=
0;e<c;e++){var f=b[e];f.isFixed||(a.x=f.position.x-(f.targetPosition.x+f.offset.x),a.y=f.position.y-(f.targetPosition.y+f.offset.y),a.multiply(f.targetChaseSpeed),f.position.x-=a.x,f.position.y-=a.y)}},handleCollisions:function(){this.removeExpiredElements();for(var a=new CAAT.Math.Point(0,0,0),b=this.allCircles,c=b.length,d=0;d<this.numberOfCollisionPasses;d++)for(var e=0;e<c;e++)for(var f=b[e],g=e+1;g<c;g++){var h=b[g];if(this.circlesCanCollide(f,h)){var k=h.position.x-f.position.x,n=h.position.y-
f.position.y,m=1.08*(f.radius+h.radius),p=f.position.getDistanceSquared(h.position);p<m*m-.02&&(a.x=k,a.y=n,a.normalize(),a.multiply(.5*(m-Math.sqrt(p))),h.isFixed||(f.isFixed&&a.multiply(2.2),h.position.translatePoint(a)),f.isFixed||(h.isFixed&&a.multiply(2.2),f.position.subtract(a)))}}},handleBoundaryForCircle:function(a,b){var c=a.position.x,d=a.position.y,e=a.radius,f=2*e;b=12;b&1&&c-f>this.bounds.right?a.position.x=this.bounds.left+e:b&1&&c+f<this.bounds.left&&(a.position.x=this.bounds.right-
e);b&4&&d-f>this.bounds.bottom?a.position.y=this.bounds.top-e:b&4&&d+f<this.bounds.top&&(a.position.y=this.bounds.bottom+e);b&8&&c+e>=this.bounds.right?a.position.x=this.bounds.right-e:b&8&&c-e<this.bounds.left&&(a.position.x=this.bounds.left+e);b&16&&d+e>this.bounds.bottom?a.position.y=this.bounds.bottom-e:b&16&&d-e<this.bounds.top&&(a.position.y=this.bounds.top+e)},getCircleAt:function(a,b,c){var d=this.allCircles,e=d.length;a=new CAAT.Math.Point(a,b,0);b=null;for(var f=Number.MAX_VALUE,g=0;g<e;g++){var h=
d[g];if(h){var k=h.position.getDistanceSquared(a);k<f&&k<h.radiusSquared+c&&(f=k,b=h)}}return b},circlesCanCollide:function(a,b){return a&&b&&a!==b?!0:!1},setBounds:function(a,b,c,d){this.bounds.x=a;this.bounds.y=b;this.bounds.width=c;this.bounds.height=d},setNumberOfCollisionPasses:function(a){this.numberOfCollisionPasses=a;return this},setNumberOfTargetingPasses:function(a){this.numberOfTargetingPasses=a;return this},sortOnDistanceToTarget:function(a,b){var c=a.getDistanceSquaredFromPosition(a.targetPosition),
d=b.getDistanceSquaredFromPosition(a.targetPosition),e=0;c>d?e=-1:c<d&&(e=1);return e},removeExpiredElements:function(){for(var a=this.allCircles.length;0<=a;a--)null===this.allCircles[a]&&this.allCircles.splice(a,1)},initialize:function(a){if(a)for(var b in a)this[b]=a[b];return this}}});
CAAT.Module({defines:"CAAT.Module.Preloader.Preloader",extendsWith:function(){var a=function(a,c,d){this.id=a;this.path=c;this.image=new Image;this.loader=d;this.image.onload=this.onload.bind(this);this.image.onerror=this.onerror.bind(this);return this};a.prototype={id:null,path:null,image:null,loader:null,onload:function(a){this.loader.__onload(this);this.image.onload=null;this.image.onerror=null},onerror:function(a){this.loader.__onerror(this)},load:function(){this.image.src=this.path},clear:function(){this.loader=
null}};return{__init:function(){this.elements=[];this.baseURL="";return this},currentGroup:null,elements:null,imageCounter:0,cfinished:null,cloaded:null,cerrored:null,loadedCount:0,baseURL:null,addElement:function(b,c){this.elements.push(new a(b,this.baseURL+c,this));return this},clear:function(){for(var a=0;a<this.elements.length;a++)this.elements[a].clear();this.elements=null},__onload:function(a){this.cloaded&&this.cloaded(a.id);this.loadedCount++;this.loadedCount===this.elements.length&&this.cfinished&&
this.cfinished(this.elements)},__onerror:function(a){this.cerrored&&this.cerrored(a.id)},setBaseURL:function(a){this.baseURL=a;return this},load:function(a,c,d){this.cfinished=a;this.cloaded=c;this.cerroed=d;for(a=0;a<this.elements.length;a++)this.elements[a].load();return this}}}});
CAAT.Module({defines:"CAAT.Module.Preloader.ImagePreloader",aliases:["CAAT.ImagePreloader"],extendsWith:{__init:function(){this.images=[];return this},images:null,notificationCallback:null,imageCounter:0,loadImages:function(a,b,c){a||b&&b(0,[]);var d=this,e;this.notificationCallback=b;this.images=[];for(e=0;e<a.length;e++)this.images.push({id:a[e].id,image:new Image});for(e=0;e<a.length;e++)this.images[e].image.onload=function(){d.imageCounter++;d.notificationCallback(d.imageCounter,d.images)},this.images[e].image.onerror=
function(a){return function(b){c&&c(b,a)}}(e),this.images[e].image.src=a[e].url;0===a.length&&b(0,[])}}});
CAAT.Module({defines:"CAAT.Module.Image.ImageUtil",depends:["CAAT.Math.Matrix"],extendsWith:{},constants:{createAlphaSpriteSheet:function(a,b,c,d,e){if(a<b){var f=a;a=b;b=f}f=document.createElement("canvas");f.width=d.width;f.height=d.height*c;var g=f.getContext("2d");g.fillStyle=e?e:"rgba(255,255,255,0)";g.fillRect(0,0,d.width,d.height*c);for(e=0;e<c;e++)g.globalAlpha=1-(a-b)/c*(e+1),g.drawImage(d,0,e*d.height);return f},rotate:function(a,b){b=b||0;if(!b)return a;var c=document.createElement("canvas");
c.width=a.height;c.height=a.width;var d=c.getContext("2d");d.globalAlpha=1;d.fillStyle="rgba(0,0,0,0)";d.clearRect(0,0,c.width,c.height);var e=new CAAT.Math.Matrix;e.multiply((new CAAT.Math.Matrix).setTranslate(c.width/2,c.width/2));e.multiply((new CAAT.Math.Matrix).setRotation(b*Math.PI/180));e.multiply((new CAAT.Math.Matrix).setTranslate(-c.width/2,-c.width/2));e.transformRenderingContext(d);d.drawImage(a,0,0);return c},optimize:function(a,b,c){b>>=0;var d=!0,e=!0,f=!0,g=!0;"undefined"!==typeof c&&
("undefined"!==typeof c.top&&(d=c.top),"undefined"!==typeof c.bottom&&(e=c.bottom),"undefined"!==typeof c.left&&(f=c.left),"undefined"!==typeof c.right&&(g=c.right));c=document.createElement("canvas");c.width=a.width;c.height=a.height;var h=c.getContext("2d");h.fillStyle="rgba(0,0,0,0)";h.fillRect(0,0,a.width,a.height);h.drawImage(a,0,0);var k=h.getImageData(0,0,a.width,a.height).data,n;a=0;var m=c.height-1,p=0,r=c.width-1,q=!1;if(d){for(d=0;d<c.height;d++){for(n=0;n<c.width;n++)if(k[d*c.width*4+
3+4*n]>b){q=!0;break}if(q)break}a=d}if(e){q=!1;for(d=c.height-1;d>=a;d--){for(n=0;n<c.width;n++)if(k[d*c.width*4+3+4*n]>b){q=!0;break}if(q)break}m=d}if(f){q=!1;for(n=0;n<c.width;n++){for(d=a;d<=m;d++)if(k[d*c.width*4+3+4*n]>b){q=!0;break}if(q)break}p=n}if(g){q=!1;for(n=c.width-1;n>=p;n--){for(d=a;d<=m;d++)if(k[d*c.width*4+3+4*n]>b){q=!0;break}if(q)break}r=n}if(0===p&&0===a&&c.width-1===r&&c.height-1===m)return c;b=r-p+1;e=m-a+1;f=h.getImageData(p,a,b,e);c.width=b;c.height=e;h=c.getContext("2d");h.putImageData(f,
0,0);return c},createThumb:function(a,b,c,d){b=b||24;c=c||24;var e=document.createElement("canvas");e.width=b;e.height=c;var f=e.getContext("2d");if(d){var g=Math.max(a.width,a.height);d=a.width/g*b;g=a.height/g*c;f.drawImage(a,(b-d)/2,(c-g)/2,d,g)}else f.drawImage(a,0,0,b,c);return e}}});
CAAT.Module({defines:"CAAT.Module.Collision.QuadTree",depends:["CAAT.Math.Rectangle"],extendsClass:"CAAT.Math.Rectangle",extendsWith:function(){return{bgActors:null,quadData:null,create:function(a,b,c,d,e,f,g){"undefined"===typeof f&&(f=32);"undefined"===typeof g&&(g=1);var h=(a+c)/2,k=(b+d)/2;this.x=a;this.y=b;this.x1=c;this.y1=d;this.width=c-a;this.height=d-b;this.bgActors=this.__getOverlappingActorList(e);if(this.bgActors.length<=g||this.width<=f)return this;this.quadData=Array(4);this.quadData[0]=
(new CAAT.Module.Collision.QuadTree).create(a,b,h,k,this.bgActors);this.quadData[1]=(new CAAT.Module.Collision.QuadTree).create(h,b,c,k,this.bgActors);this.quadData[2]=(new CAAT.Module.Collision.QuadTree).create(a,k,h,d,this.bgActors);this.quadData[3]=(new CAAT.Module.Collision.QuadTree).create(h,k,c,d,this.bgActors);return this},__getOverlappingActorList:function(a){for(var b=[],c=0,d=a.length;c<d;c++){var e=a[c];this.intersects(e.AABB)&&b.push(e)}return b},getOverlappingActors:function(a){var b,
c,d=[];var e=this.bgActors;if(this.quadData)for(b=0;4>b;b++){if(this.quadData[b].intersects(a)){var f=this.quadData[b].getOverlappingActors(a);e=0;for(c=f.length;e<c;e++)d.push(f[e])}}else for(b=0,c=e.length;b<c;b++)f=e[b],a.intersects(f.AABB)&&d.push(f);return d}}}});
CAAT.Module({defines:"CAAT.Module.Collision.SpatialHash",aliases:["CAAT.SpatialHash"],depends:["CAAT.Math.Rectangle"],extendsWith:{elements:null,width:null,height:null,rows:null,columns:null,xcache:null,ycache:null,xycache:null,rectangle:null,r0:null,r1:null,initialize:function(a,b,c,d){var e;this.elements=[];for(e=0;e<c*d;e++)this.elements.push([]);this.width=a;this.height=b;this.rows=c;this.columns=d;this.xcache=[];for(e=0;e<a;e++)this.xcache.push(e/(a/d)>>0);this.ycache=[];for(e=0;e<b;e++)this.ycache.push(e/
(b/c)>>0);this.xycache=[];for(e=0;e<this.rows;e++)for(this.xycache.push([]),c=0;c<this.columns;c++)this.xycache[e].push(c+e*d);this.rectangle=(new CAAT.Math.Rectangle).setBounds(0,0,a,b);this.r0=new CAAT.Math.Rectangle;this.r1=new CAAT.Math.Rectangle;return this},clearObject:function(){var a;for(a=0;a<this.rows*this.columns;a++)this.elements[a]=[];return this},addObject:function(a){for(var b=this.__getCells(a.x|0,a.y|0,a.width|0,a.height|0),c=0;c<b.length;c++)this.elements[b[c]].push(a)},__getCells:function(a,
b,c,d){var e=[];this.rectangle.contains(a,b)&&e.push(this.xycache[this.ycache[b]][this.xcache[a]]);if(this.rectangle.contains(a+c-1,b+d-1)){var f=this.xycache[this.ycache[b+d-1]][this.xcache[a+c-1]];if(f===e[0])return e;e.push(f)}if(this.rectangle.contains(a+c-1,b)){f=this.xycache[this.ycache[b]][this.xcache[a+c-1]];if(f===e[0]||f===e[1])return e;e.push(f)}this.rectangle.contains(a+c-1,b+d-1)&&(f=this.xycache[this.ycache[b+d-1]][this.xcache[a]],e.push(f));return e},solveCollision:function(a){var b;
for(b=0;b<this.elements.length;b++){var c=this.elements[b];1<c.length&&this._solveCollisionCell(c,a)}},_solveCollisionCell:function(a,b){var c,d;for(c=0;c<a.length;c++){var e=a[c];this.r0.setBounds(e.x,e.y,e.width,e.height);for(d=c+1;d<a.length;d++){var f=a[d];this.r0.intersects(this.r1.setBounds(f.x,f.y,f.width,f.height))&&b(e,f)}}},collide:function(a,b,c,d,e){a|=0;b|=0;c|=0;d|=0;var f=this.__getCells(a,b,c,d),g=this.elements;this.r0.setBounds(a,b,c,d);for(a=0;a<f.length;a++)for(d=g[f[a]],b=0,c=
d.length;b<c;b++){var h=d[b];this.r1.setBounds(h.x,h.y,h.width,h.height);if(this.r0.intersects(this.r1)&&e(h))return}}}});CAAT.Module({defines:"CAAT.Module.TexturePacker.TextureElement",extendsWith:{inverted:!1,image:null,u:0,v:0,glTexture:null}});
CAAT.Module({defines:"CAAT.Module.TexturePacker.TextureScan",depends:["CAAT.Module.TexturePacker.TextureElement"],extendsWith:{__init:function(a){this.freeChunks=[{position:0,size:a||1024}];return this},freeChunks:null,findWhereFits:function(a){if(0===this.freeChunks.length)return[];var b=[],c;for(c=0;c<this.freeChunks.length;c++)for(var d=0;d+a<=this.freeChunks[c].size;)b.push(d+this.freeChunks[c].position),d+=a;return b},fits:function(a,b){var c;for(c=0;c<this.freeChunks.length;c++){var d=this.freeChunks[c];
if(d.position<=a&&a+b<=d.position+d.size)return!0}return!1},substract:function(a,b){var c;for(c=0;c<this.freeChunks.length;c++){var d=this.freeChunks[c];if(d.position<=a&&a+b<=d.position+d.size){var e=d.position;var f=a-d.position;var g=a+b;d=d.position+d.size-g;this.freeChunks.splice(c,1);0<f&&this.freeChunks.splice(c++,0,{position:e,size:f});0<d&&this.freeChunks.splice(c,0,{position:g,size:d});return!0}}return!1},log:function(a){if(0===this.freeChunks.length)CAAT.log("index "+a+" empty");else{a=
"index "+a;for(var b=0;b<this.freeChunks.length;b++){var c=this.freeChunks[b];a+="["+c.position+","+c.size+"]"}CAAT.log(a)}}}});
CAAT.Module({defines:"CAAT.Module.TexturePacker.TextureScanMap",depends:["CAAT.Module.TexturePacker.TextureScan"],extendsWith:{__init:function(a,b){this.scanMapHeight=b;this.scanMapWidth=a;this.scanMap=[];for(var c=0;c<this.scanMapHeight;c++)this.scanMap.push(new CAAT.Module.TexturePacker.TextureScan(this.scanMapWidth));return this},scanMap:null,scanMapWidth:0,scanMapHeight:0,whereFitsChunk:function(a,b){if(a>this.width||b>this.height)return null;for(var c,d,e=0;e<=this.scanMapHeight-b;){var f=null;
for(c=!1;e<=this.scanMapHeight-b;e++)if(f=this.scanMap[e].findWhereFits(a),null!==f&&0<f.length){c=!0;break}if(c){for(d=0;d<f.length;d++){var g=!0;for(c=e;c<e+b;c++)if(!this.scanMap[c].fits(f[d],a)){g=!1;break}if(g)return{x:f[d],y:e}}e++}else break}return null},substract:function(a,b,c,d){for(var e=0;e<d;e++)this.scanMap[e+b].substract(a,c)||CAAT.log("Error: removing chunk ",c,d," at ",a,b)},log:function(){for(var a=0;a<this.scanMapHeight;a++)this.scanMap[a].log(a)}}});
CAAT.Module({defines:"CAAT.Module.TexturePacker.TexturePage",depends:["CAAT.Module.TexturePacker.TextureScanMap"],extendsWith:{__init:function(a,b){this.width=a||1024;this.height=b||1024;this.images=[];return this},width:1024,height:1024,gl:null,texture:null,allowImagesInvertion:!1,padding:4,scan:null,images:null,criteria:"area",initialize:function(a){this.gl=a;a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0);this.texture=a.createTexture();a.bindTexture(a.TEXTURE_2D,this.texture);a.enable(a.BLEND);
a.blendFunc(a.ONE,a.ONE_MINUS_SRC_ALPHA);for(var b=new Uint8Array(this.width*this.height*4),c=0;c<4*this.width*this.height;)b[c++]=0,b[c++]=0,b[c++]=0,b[c++]=0;a.texImage2D(a.TEXTURE_2D,0,a.RGBA,this.width,this.height,0,a.RGBA,a.UNSIGNED_BYTE,b);a.enable(a.BLEND);for(b=0;b<this.images.length;b++)c=this.images[b],c.inverted&&(c=CAAT.Module.Image.ImageUtil.rotate(c,-90)),a.texSubImage2D(a.TEXTURE_2D,0,this.images[b].__tx,this.images[b].__ty,a.RGBA,a.UNSIGNED_BYTE,c)},create:function(a){for(var b=[],
c=0;c<a.length;c++){var d=a[c].image;d.__texturePage||b.push(d)}this.createFromImages(b)},clear:function(){this.createFromImages([])},update:function(a,b,c,d){this.allowImagesInvertion=a;this.padding=b;100>c&&(c=100);100>d&&(d=100);this.width=c;this.height=d;this.createFromImages(this.images)},createFromImages:function(a){var b;this.scan=new CAAT.Module.TexturePacker.TextureScanMap(this.width,this.height);this.images=[];if(this.allowImagesInvertion)for(b=0;b<a.length;b++)a[b].inverted=this.allowImagesInvertion&&
a[b].height<a[b].width;var c=this;a.sort(function(a,b){var d=a.width*a.height,e=b.width*b.height;return"width"===c.criteria?a.width<b.width?1:a.width>b.width?-1:0:"height"===c.criteria?a.height<b.height?1:a.height>b.height?-1:0:d<e?1:d>e?-1:0});for(b=0;b<a.length;b++)this.packImage(a[b])},addImage:function(a,b,c){this.allowImagesInvertion=b;this.padding=c;this.images.push(a);this.createFromImages(Array.prototype.slice.call(this.images))},endCreation:function(){var a=this.gl;a.texParameteri(a.TEXTURE_2D,
a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR_MIPMAP_NEAREST);a.generateMipmap(a.TEXTURE_2D)},deletePage:function(){for(var a=0;a<this.images.length;a++)delete this.images[a].__texturePage,delete this.images[a].__u,delete this.images[a].__v;this.gl.deleteTexture(this.texture)},toCanvas:function(a,b){a=a||document.createElement("canvas");a.width=this.width;a.height=this.height;var c=a.getContext("2d");c.fillStyle="rgba(0,0,0,0)";c.fillRect(0,0,this.width,
this.height);for(var d=0;d<this.images.length;d++)c.drawImage(this.images[d].inverted?CAAT.Modules.Image.ImageUtil.rotate(this.images[d],90):this.images[d],this.images[d].__tx,this.images[d].__ty),b&&(c.strokeStyle="red",c.strokeRect(this.images[d].__tx,this.images[d].__ty,this.images[d].__w,this.images[d].__h));b&&(c.strokeStyle="red",c.strokeRect(0,0,this.width,this.height));return a},packImage:function(a){if(a.inverted){var b=a.height;var c=a.width}else b=a.width,c=a.height;var d=b,e=c;if(d&&this.padding){var f=
this.padding;d+f<=this.width&&(d+=f)}e&&this.padding&&(f=this.padding,e+f<=this.height&&(e+=f));f=this.scan.whereFitsChunk(d,e);null!==f?(this.images.push(a),a.__tx=f.x,a.__ty=f.y,a.__u=f.x/this.width,a.__v=f.y/this.height,a.__u1=(f.x+b)/this.width,a.__v1=(f.y+c)/this.height,a.__texturePage=this,a.__w=b,a.__h=c,this.scan.substract(f.x,f.y,d,e)):CAAT.log("Imagen ",a.src," de tamano ",a.width,a.height," no cabe.")},changeHeuristic:function(a){this.criteria=a}}});
CAAT.Module({defines:"CAAT.Module.TexturePacker.TexturePageManager",depends:["CAAT.Module.TexturePacker.TexturePage"],extendsWith:{__init:function(){this.pages=[];return this},pages:null,createPages:function(a,b,c,d){for(var e=!1;!e;){e=new CAAT.Module.TexturePacker.TexturePage(b,c);e.create(d);e.initialize(a);e.endCreation();this.pages.push(e);e=!0;for(var f=0;f<d.length;f++)if(!d[f].image.__texturePage){d[f].image.width<=b&&d[f].image.height<=c&&(e=!1);break}}},deletePages:function(){for(var a=
0;a<this.pages.length;a++)this.pages[a].deletePage();this.pages=null}}});
CAAT.Module({defines:"CAAT.Module.LayoutUtils.RowLayout",constants:{Row:function(a,b,c){var d=a.width,e=0,f=0,g,h=-Number.MAX_VALUE,k=Number.MAX_VALUE;for(g=b.length-1;g;--g)k<b[g].width&&(k=b[g].width),h<b[g].height&&(h=b[g].height);c.padding_left&&(e=c.padding_left,d-=e);c.padding_right&&(d-=c.padding_right);if(c.top&&(f=parseInt(c.top,10),isNaN(f)))switch(c.top){case "center":f=(a.height-h)/2;break;case "top":f=0;break;case "bottom":f=a.height-h;break;default:f=0}c=d/b.length;g=0;for(a=b.length;g<
a;g++)b[g].setLocation(e+g*c+(c-b[g].width)/2,f)}}});
CAAT.Module({defines:"CAAT.Module.Initialization.Template",depends:["CAAT.Foundation.Director","CAAT.Module.Preloader.ImagePreloader"],constants:{init:function(a,b,c,d,e){c=document.getElementById(c);if(CAAT.__CSS__)c&&!1===c instanceof HTMLDivElement&&(c=null),null===c&&(c=document.createElement("div"),document.body.appendChild(c));else if(c)if(c instanceof HTMLDivElement){var f=document.createElement("canvas");c.appendChild(f);c=f}else 0==c instanceof HTMLCanvasElement&&(f=document.createElement("canvas"),
document.body.appendChild(f),c=f);else c=document.createElement("canvas"),document.body.appendChild(c);var g=(new CAAT.Foundation.Director).initialize(a||800,b||600,c);(new CAAT.Module.Preloader.ImagePreloader).loadImages(d,function(a,b){a===b.length&&(g.emptyScenes(),g.setImagesCache(b),e(g),g.easeIn(0,CAAT.Foundation.Scene.EASE_SCALE,2E3,!1,CAAT.Foundation.Actor.ANCHOR_CENTER,(new CAAT.Behavior.Interpolator).createElasticOutInterpolator(2.5,.4)),CAAT.loop(60))})}}});
CAAT.Module({defines:"CAAT.Module.Initialization.TemplateWithSplash",depends:["CAAT.Foundation.Director","CAAT.Module.Preloader.ImagePreloader"],constants:{init:function(a,b,c,d,e,f,g,h){function k(a,b,c){var d=a.getImage("spinner"),e=a.getImage("splash"),f=a.createScene(),g=(new Date).getTime();e&&f.addChild((new CAAT.Foundation.Actor).setBackgroundImage(e,!1).setBounds(0,0,a.width,a.height).setImageTransformation(CAAT.Foundation.SpriteImage.TR_FIXED_TO_SIZE));d&&f.addChild((new CAAT.Foundation.Actor).setBackgroundImage(d).centerAt(f.width/
2,f.height/2).addBehavior((new CAAT.Behavior.RotateBehavior).setValues(0,2*Math.PI).setFrameTime(0,1E3).setCycle(!0)));f.loadedImage=function(d,e){if(!e||d===e.length){var f=(new Date).getTime()-g;f<b?(f=Math.abs(b-f),f>b&&(f=b),setTimeout(function(){n(a,e,c)},f)):n(a,e,c)}};return f}function n(a,b,c){a.emptyScenes();a.setImagesCache(b);a.setClear(!0);c(a);a.setClear(CAAT.Foundation.Director.CLEAR_ALL);a.easeIn(0,CAAT.Foundation.Scene.EASE_SCALE,2E3,!1,CAAT.Foundation.Actor.ANCHOR_CENTER,(new CAAT.Behavior.Interpolator).createElasticOutInterpolator(2.5,
.4))}c=document.getElementById(c);if(CAAT.__CSS__)c&&!1===c instanceof HTMLDivElement&&(c=null),null===c&&(c=document.createElement("div"),document.body.appendChild(c));else if(c)if(c instanceof HTMLDivElement){var m=document.createElement("canvas");c.appendChild(m);c=m}else 0==c instanceof HTMLCanvasElement&&(m=document.createElement("canvas"),document.body.appendChild(m),c=m);else c=document.createElement("canvas"),document.body.appendChild(c);var p=(new CAAT.Foundation.Director).initialize(a||
800,b||600,c);a=[];g&&a.push({id:"splash",url:g});h&&a.push({id:"spinner",url:h});p.setClear(CAAT.Foundation.Director.CLEAR_DIRTY_RECTS);(new CAAT.Module.Preloader.ImagePreloader).loadImages(a,function(a,b){if(a===b.length){p.setImagesCache(b);var c=k(p,d||5E3,f);CAAT.loop(60);e&&0<e.length?(new CAAT.Module.Preloader.ImagePreloader).loadImages(e,c.loadedImage):c.loadedImage(0,null)}})}}});
(function(){CAAT.CSS={};CAAT.CSS.PREFIX=function(){for(var a="",b=["WebKit","Moz","O"],c=0;c<b.length;c++)if(window[b[c]+"CSSKeyframeRule"]){a=b[c].toLowerCase();break}CAAT.CSS.PROP_ANIMATION="-"+a+"-animation";return a}();CAAT.CSS.applyKeyframe=function(a,b,c,d,e){a.style[CAAT.CSS.PROP_ANIMATION]=b+" "+c/1E3+"s "+d/1E3+"s linear both "+(e?"infinite":"")};CAAT.CSS.unregisterKeyframes=function(a){a=CAAT.CSS.getCSSKeyframesIndex(a);null!==a&&document.styleSheets[a.sheetIndex].deleteRule(a.index)};CAAT.CSS.registerKeyframes=
function(a){var b=a.name,c=a.behavior,d=a.size,e=a.overwrite;if("undefined"===typeof b||"undefined"===typeof c)throw"Keyframes must be defined by a name and a CAAT.Behavior instance.";"undefined"===typeof d&&(d=100);"undefined"===typeof e&&(e=!1);var f=CAAT.CSS.getCSSKeyframesIndex(b);if(null===f||e)return a=c.calculateKeyFramesData(CAAT.CSS.PREFIX,b,d,a.anchorX,a.anchorY),document.styleSheets&&(document.styleSheets.length||(b=document.createElement("style"),b.type="text/css",document.getElementsByTagName("head")[0].appendChild(b)),
null!==f&&document.styleSheets[f.sheetIndex].deleteRule(f.index),document.styleSheets[f?f.sheetIndex:0].insertRule(a,0)),a};CAAT.CSS.getCSSKeyframesIndex=function(a){for(var b=document.styleSheets,c=b.length-1;0<=c;c--)try{for(var d=b[c],e=d.cssRules?d.cssRules:d.rules?d.rules:[],f=e.length-1;0<=f;f--)if((e[f].type===window.CSSRule.WEBKIT_KEYFRAMES_RULE||e[f].type===window.CSSRule.MOZ_KEYFRAMES_RULE)&&e[f].name===a)return{sheetIndex:c,index:f}}catch(g){}return null};CAAT.CSS.getCSSKeyframes=function(a){for(var b=
document.styleSheets,c=b.length-1;0<=c;c--)try{for(var d=b[c],e=d.cssRules?d.cssRules:d.rules?d.rules:[],f=e.length-1;0<=f;f--)if((e[f].type===window.CSSRule.WEBKIT_KEYFRAMES_RULE||e[f].type===window.CSSRule.MOZ_KEYFRAMES_RULE)&&e[f].name===a)return e[f]}catch(g){}return null}})();
CAAT.Module({defines:"CAAT.PathUtil.PathSegment",depends:["CAAT.Math.Rectangle","CAAT.Math.Point","CAAT.Math.Matrix","CAAT.Math.Curve"],extendsWith:function(){return{__init:function(){this.bbox=new CAAT.Math.Rectangle;return this},color:"#000",length:0,bbox:null,parent:null,setParent:function(a){this.parent=a;return this},setColor:function(a){a&&(this.color=a);return this},endCurvePosition:function(){},startCurvePosition:function(){},setPoints:function(a){},setPoint:function(a,b){},getPosition:function(a){},
getLength:function(){return this.length},getBoundingBox:function(){return this.bbox},numControlPoints:function(){},getControlPoint:function(a){},endPath:function(){},getContour:function(a){},updatePath:function(a){},applyAsPath:function(a){},transform:function(a){},drawHandle:function(a,b,c){a.beginPath();a.arc(b,c,CAAT.Math.Curve.prototype.HANDLE_SIZE/2,0,2*Math.PI,!1);a.fill()}}}});
CAAT.Module({defines:"CAAT.PathUtil.ArcPath",depends:["CAAT.PathUtil.PathSegment","CAAT.Math.Point","CAAT.Math.Rectangle"],aliases:["CAAT.ArcPath"],extendsClass:"CAAT.PathUtil.PathSegment",extendsWith:function(){return{__init:function(){this.__super();this.points=[];this.points.push(new CAAT.Math.Point);this.points.push(new CAAT.Math.Point);this.newPosition=new CAAT.Math.Point;return this},points:null,cw:!0,newPosition:null,radius:0,startAngle:0,angle:2*Math.PI,arcTo:!1,setRadius:function(a){this.radius=
a;return this},isArcTo:function(){return this.arcTo},setArcTo:function(a){this.arcTo=a;return this},initialize:function(a,b,c,d){this.setInitialPosition(a,b);this.setFinalPosition(a+c,b);this.angle=d||2*Math.PI;return this},applyAsPath:function(a){a=a.ctx;this.arcTo?a.arcTo(this.points[0].x,this.points[0].y,this.points[1].x,this.points[1].y,this.radius):a.arc(this.points[0].x,this.points[0].y,this.radius,this.startAngle,this.angle+this.startAngle,this.cw);return this},setPoint:function(a,b){0<=b&&
b<this.points.length&&(this.points[b]=a)},setPoints:function(a){this.points=[];this.points[0]=a[0];this.points[1]=a[1];this.updatePath();return this},setClockWise:function(a){this.cw=void 0!==a?a:!0;return this},isClockWise:function(){return this.cw},setInitialPosition:function(a,b){for(var c=0,d=this.points.length;c<d;c++)this.points[0].x=a,this.points[0].y=b;return this},setFinalPosition:function(a,b){this.points[1].x=a;this.points[1].y=b;this.updatePath(this.points[1]);return this},endCurvePosition:function(){return this.points[0]},
startCurvePosition:function(){return this.points[0]},getPosition:function(a){if(1<a||0>a)a%=1;0>a&&(a=1+a);-1===this.length?this.newPosition.set(this.points[0].x,this.points[0].y):(a=this.angle*a*(this.cw?1:-1)+this.startAngle,this.newPosition.set(this.points[0].x+this.radius*Math.cos(a),this.points[0].y+this.radius*Math.sin(a)));return this.newPosition},initialPositionX:function(){return this.points[0].x},finalPositionX:function(){return this.points[1].x},paint:function(a,b){var c=a.ctx;c.save();
c.strokeStyle=this.color;c.beginPath();this.arcTo?c.arcTo(this.points[0].x,this.points[0].y,this.points[1].x,this.points[1].y,this.radius):c.arc(this.points[0].x,this.points[0].y,this.radius,this.startAngle,this.startAngle+this.angle,this.cw);c.stroke();if(b){c.globalAlpha=.5;c.fillStyle="#7f7f00";for(var d=0;d<this.points.length;d++)this.drawHandle(c,this.points[d].x,this.points[d].y)}c.restore()},numControlPoints:function(){return this.points.length},getControlPoint:function(a){return this.points[a]},
getContour:function(a){for(var b=[],c=0;c<a;c++)b.push({x:this.points[0].x+this.radius*Math.cos(c*Math.PI/(a/2)),y:this.points[0].y+this.radius*Math.sin(c*Math.PI/(a/2))});return b},getPositionFromLength:function(a){return this.getPosition(a/this.length*(this.cw?1:-1))},updatePath:function(a){this.points[1]===a?(this.arcTo||(this.radius=Math.sqrt((this.points[0].x-this.points[1].x)*(this.points[0].x-this.points[1].x)+(this.points[0].y-this.points[1].y)*(this.points[0].y-this.points[1].y))),this.length=
this.angle*this.radius,this.startAngle=Math.atan2(this.points[1].y-this.points[0].y,this.points[1].x-this.points[0].x)):this.points[0]===a&&this.points[1].set(this.points[0].x+this.radius*Math.cos(this.startAngle),this.points[0].y+this.radius*Math.sin(this.startAngle));this.bbox.setEmpty();this.bbox.x=this.points[0].x-this.radius;this.bbox.y=this.points[0].y-this.radius;this.bbox.x1=this.points[0].x+this.radius;this.bbox.y1=this.points[0].y+this.radius;this.bbox.width=2*this.radius;this.bbox.height=
2*this.radius;return this}}}});
CAAT.Module({defines:"CAAT.PathUtil.CurvePath",depends:["CAAT.PathUtil.PathSegment","CAAT.Math.Point","CAAT.Math.Bezier"],aliases:["CAAT.CurvePath"],extendsClass:"CAAT.PathUtil.PathSegment",extendsWith:function(){return{__init:function(){this.__super();this.newPosition=new CAAT.Math.Point(0,0,0);return this},curve:null,newPosition:null,applyAsPath:function(a){this.curve.applyAsPath(a);return this},setPoint:function(a,b){this.curve&&this.curve.setPoint(a,b)},setPoints:function(a){var b=new CAAT.Math.Bezier;
b.setPoints(a);this.curve=b;return this},setQuadric:function(a,b,c,d,e,f){var g=new CAAT.Math.Bezier;g.setQuadric(a,b,c,d,e,f);this.curve=g;this.updatePath();return this},setCubic:function(a,b,c,d,e,f,g,h){var k=new CAAT.Math.Bezier;k.setCubic(a,b,c,d,e,f,g,h);this.curve=k;this.updatePath();return this},updatePath:function(a){this.curve.update();this.length=this.curve.getLength();this.curve.getBoundingBox(this.bbox);return this},getPosition:function(a){if(1<a||0>a)a%=1;0>a&&(a=1+a);this.curve.solve(this.newPosition,
a);return this.newPosition},getPositionFromLength:function(a){this.curve.solve(this.newPosition,a/this.length);return this.newPosition},initialPositionX:function(){return this.curve.coordlist[0].x},finalPositionX:function(){return this.curve.coordlist[this.curve.coordlist.length-1].x},paint:function(a,b){this.curve.drawHandles=b;a.ctx.strokeStyle=this.color;this.curve.paint(a,b)},numControlPoints:function(){return this.curve.coordlist.length},getControlPoint:function(a){return this.curve.coordlist[a]},
endCurvePosition:function(){return this.curve.endCurvePosition()},startCurvePosition:function(){return this.curve.startCurvePosition()},getContour:function(a){for(var b=[],c=0;c<=a;c++)b.push({x:c/a,y:this.getPosition(c/a).y});return b}}}});
CAAT.Module({defines:"CAAT.PathUtil.LinearPath",depends:["CAAT.PathUtil.PathSegment","CAAT.Math.Point"],aliases:["CAAT.LinearPath"],extendsClass:"CAAT.PathUtil.PathSegment",extendsWith:function(){return{__init:function(){this.__super();this.points=[];this.points.push(new CAAT.Math.Point);this.points.push(new CAAT.Math.Point);this.newPosition=new CAAT.Math.Point(0,0,0);return this},points:null,newPosition:null,applyAsPath:function(a){a.ctx.lineTo(this.points[1].x,this.points[1].y)},setPoint:function(a,
b){0===b?this.points[0]=a:1===b&&(this.points[1]=a)},updatePath:function(a){a=this.points[1].x-this.points[0].x;var b=this.points[1].y-this.points[0].y;this.length=Math.sqrt(a*a+b*b);this.bbox.setEmpty();this.bbox.union(this.points[0].x,this.points[0].y);this.bbox.union(this.points[1].x,this.points[1].y);return this},setPoints:function(a){this.points[0]=a[0];this.points[1]=a[1];this.updatePath();return this},setInitialPosition:function(a,b){this.points[0].x=a;this.points[0].y=b;this.newPosition.set(a,
b);return this},setFinalPosition:function(a,b){this.points[1].x=a;this.points[1].y=b;return this},endCurvePosition:function(){return this.points[1]},startCurvePosition:function(){return this.points[0]},getPosition:function(a){if(1<a||0>a)a%=1;0>a&&(a=1+a);this.newPosition.set(this.points[0].x+(this.points[1].x-this.points[0].x)*a,this.points[0].y+(this.points[1].y-this.points[0].y)*a);return this.newPosition},getPositionFromLength:function(a){return this.getPosition(a/this.length)},initialPositionX:function(){return this.points[0].x},
finalPositionX:function(){return this.points[1].x},paint:function(a,b){var c=a.ctx;c.save();c.strokeStyle=this.color;c.beginPath();c.moveTo(this.points[0].x,this.points[0].y);c.lineTo(this.points[1].x,this.points[1].y);c.stroke();b&&(c.globalAlpha=.5,c.fillStyle="#7f7f00",c.beginPath(),this.drawHandle(c,this.points[0].x,this.points[0].y),this.drawHandle(c,this.points[1].x,this.points[1].y));c.restore()},numControlPoints:function(){return 2},getControlPoint:function(a){if(0===a)return this.points[0];
if(1===a)return this.points[1]},getContour:function(a){a=[];a.push(this.getPosition(0).clone());a.push(this.getPosition(1).clone());return a}}}});
CAAT.Module({defines:"CAAT.PathUtil.RectPath",depends:["CAAT.PathUtil.PathSegment","CAAT.Math.Point","CAAT.Math.Rectangle"],aliases:["CAAT.RectPath","CAAT.ShapePath"],extendsClass:"CAAT.PathUtil.PathSegment",extendsWith:function(){return{__init:function(){this.__super();this.points=[];this.points.push(new CAAT.Math.Point);this.points.push(new CAAT.Math.Point);this.points.push(new CAAT.Math.Point);this.points.push(new CAAT.Math.Point);this.points.push(new CAAT.Math.Point);this.newPosition=new CAAT.Math.Point;
return this},points:null,cw:!0,newPosition:null,applyAsPath:function(a){a=a.ctx;this.cw?(a.lineTo(this.points[0].x,this.points[0].y),a.lineTo(this.points[1].x,this.points[1].y),a.lineTo(this.points[2].x,this.points[2].y),a.lineTo(this.points[3].x,this.points[3].y),a.lineTo(this.points[4].x,this.points[4].y)):(a.lineTo(this.points[4].x,this.points[4].y),a.lineTo(this.points[3].x,this.points[3].y),a.lineTo(this.points[2].x,this.points[2].y),a.lineTo(this.points[1].x,this.points[1].y),a.lineTo(this.points[0].x,
this.points[0].y));return this},setPoint:function(a,b){0<=b&&b<this.points.length&&(this.points[b]=a)},setPoints:function(a){this.points=[];this.points.push(a[0]);this.points.push((new CAAT.Math.Point).set(a[1].x,a[0].y));this.points.push(a[1]);this.points.push((new CAAT.Math.Point).set(a[0].x,a[1].y));this.points.push(a[0].clone());this.updatePath();return this},setClockWise:function(a){this.cw=void 0!==a?a:!0;return this},isClockWise:function(){return this.cw},setInitialPosition:function(a,b){for(var c=
0,d=this.points.length;c<d;c++)this.points[c].x=a,this.points[c].y=b;return this},setFinalPosition:function(a,b){this.points[2].x=a;this.points[2].y=b;this.points[1].x=a;this.points[1].y=this.points[0].y;this.points[3].x=this.points[0].x;this.points[3].y=b;this.points[4].x=this.points[0].x;this.points[4].y=this.points[0].y;this.updatePath();return this},endCurvePosition:function(){return this.points[4]},startCurvePosition:function(){return this.points[0]},getPosition:function(a){if(1<a||0>a)a%=1;
0>a&&(a=1+a);if(-1===this.length)this.newPosition.set(0,0);else{var b=this.bbox.width/this.length,c=this.bbox.height/this.length,d=0,e=0;if(this.cw){var f=[0,1,2,3,4];b=[b,c,b,c]}else f=[4,3,2,1,0],b=[c,b,c,b];for(;e<b.length;)if(d+b[e]<a)d+=b[e],e++;else break;a-=d;d=f[e];f=f[e+1];this.newPosition.set(this.points[d].x+(this.points[f].x-this.points[d].x)*a/b[e],this.points[d].y+(this.points[f].y-this.points[d].y)*a/b[e])}return this.newPosition},initialPositionX:function(){return this.points[0].x},
finalPositionX:function(){return this.points[2].x},paint:function(a,b){var c=a.ctx;c.save();c.strokeStyle=this.color;c.beginPath();c.strokeRect(this.bbox.x,this.bbox.y,this.bbox.width,this.bbox.height);if(b){c.globalAlpha=.5;c.fillStyle="#7f7f00";for(var d=0;d<this.points.length;d++)this.drawHandle(c,this.points[d].x,this.points[d].y)}c.restore()},numControlPoints:function(){return this.points.length},getControlPoint:function(a){return this.points[a]},getContour:function(){for(var a=[],b=0;b<this.points.length;b++)a.push(this.points[b]);
return a},updatePath:function(a){a&&(a===this.points[0]?(this.points[1].y=a.y,this.points[3].x=a.x):a===this.points[1]?(this.points[0].y=a.y,this.points[2].x=a.x):a===this.points[2]?(this.points[3].y=a.y,this.points[1].x=a.x):a===this.points[3]&&(this.points[0].x=a.x,this.points[2].y=a.y),this.points[4].x=this.points[0].x,this.points[4].y=this.points[0].y);this.bbox.setEmpty();for(a=0;4>a;a++)this.bbox.union(this.points[a].x,this.points[a].y);this.length=2*this.bbox.width+2*this.bbox.height;this.points[0].x=
this.bbox.x;this.points[0].y=this.bbox.y;this.points[1].x=this.bbox.x+this.bbox.width;this.points[1].y=this.bbox.y;this.points[2].x=this.bbox.x+this.bbox.width;this.points[2].y=this.bbox.y+this.bbox.height;this.points[3].x=this.bbox.x;this.points[3].y=this.bbox.y+this.bbox.height;this.points[4].x=this.bbox.x;this.points[4].y=this.bbox.y;return this},getPositionFromLength:function(a){return this.getPosition(a/(2*this.bbox.width+2*this.bbox.height))}}}});
CAAT.Module({defines:"CAAT.PathUtil.Path",aliases:["CAAT.Path"],depends:"CAAT.PathUtil.PathSegment CAAT.PathUtil.ArcPath CAAT.PathUtil.CurvePath CAAT.PathUtil.LinearPath CAAT.PathUtil.RectPath CAAT.Math.Bezier CAAT.Math.CatmullRom CAAT.Math.Point CAAT.Math.Matrix".split(" "),extendsClass:"CAAT.PathUtil.PathSegment",extendsWith:{__init:function(){this.__super();this.newPosition=new CAAT.Math.Point(0,0,0);this.pathSegments=[];this.behaviorList=[];this.matrix=new CAAT.Math.Matrix;this.tmpMatrix=new CAAT.Math.Matrix;
return this},pathSegments:null,pathSegmentDurationTime:null,pathSegmentStartTime:null,newPosition:null,pathLength:-1,beginPathX:-1,beginPathY:-1,trackPathX:-1,trackPathY:-1,ax:-1,ay:-1,point:[],interactive:!0,behaviorList:null,rb_angle:0,rb_rotateAnchorX:.5,rb_rotateAnchorY:.5,sb_scaleX:1,sb_scaleY:1,sb_scaleAnchorX:.5,sb_scaleAnchorY:.5,tAnchorX:0,tAnchorY:0,tb_x:0,tb_y:0,matrix:null,tmpMatrix:null,pathPoints:null,width:0,height:0,clipOffsetX:0,clipOffsetY:0,closed:!1,applyAsPath:function(a){var b=
a.ctx;a.modelViewMatrix.transformRenderingContext(b);b.globalCompositeOperation="source-out";b.moveTo(this.getFirstPathSegment().startCurvePosition().x,this.getFirstPathSegment().startCurvePosition().y);for(var c=0;c<this.pathSegments.length;c++)this.pathSegments[c].applyAsPath(a);b.globalCompositeOperation="source-over";return this},setInteractive:function(a){this.interactive=a;return this},getFirstPathSegment:function(){return this.pathSegments.length?this.pathSegments[0]:null},getLastPathSegment:function(){return this.pathSegments.length?
this.pathSegments[this.pathSegments.length-1]:null},endCurvePosition:function(){return this.pathSegments.length?this.pathSegments[this.pathSegments.length-1].endCurvePosition():(new CAAT.Math.Point).set(this.beginPathX,this.beginPathY)},startCurvePosition:function(){return this.pathSegments[0].startCurvePosition()},getCurrentPathSegment:function(){return this.pathSegments[this.pathSegments.length-1]},setLinear:function(a,b,c,d){this.pathSegments=[];this.beginPath(a,b);this.addLineTo(c,d);this.endPath();
return this},setQuadric:function(a,b,c,d,e,f){this.beginPath(a,b);this.addQuadricTo(c,d,e,f);this.endPath();return this},setCubic:function(a,b,c,d,e,f,g,h){this.beginPath(a,b);this.addCubicTo(c,d,e,f,g,h);this.endPath();return this},setRectangle:function(a,b,c,d){this.beginPath(a,b);this.addRectangleTo(c,d);this.endPath();return this},setCatmullRom:function(a,b){b&&(a=a.slice(0),a.unshift(a[a.length-1]),a.push(a[1]),a.push(a[2]));for(var c=1;c<a.length-2;c++){var d=(new CAAT.PathUtil.CurvePath).setColor("#000").setParent(this),
e=(new CAAT.Math.CatmullRom).setCurve(a[c-1],a[c],a[c+1],a[c+2]);d.curve=e;this.pathSegments.push(d)}return this},addSegment:function(a){a.setParent(this);this.pathSegments.push(a);return this},addArcTo:function(a,b,c,d,e,f,g){f=new CAAT.PathUtil.ArcPath;f.setArcTo(!0);f.setRadius(e);f.setInitialPosition(a,b).setFinalPosition(c,d);f.setParent(this);f.setColor(g);this.pathSegments.push(f);return this},addRectangleTo:function(a,b,c,d){var e=new CAAT.PathUtil.RectPath;e.setPoints([this.endCurvePosition(),
(new CAAT.Math.Point).set(a,b)]);e.setClockWise(c);e.setColor(d);e.setParent(this);this.pathSegments.push(e);return this},addQuadricTo:function(a,b,c,d,e){var f=new CAAT.Math.Bezier;f.setPoints([this.endCurvePosition(),(new CAAT.Math.Point).set(a,b),(new CAAT.Math.Point).set(c,d)]);this.trackPathX=c;this.trackPathY=d;a=(new CAAT.PathUtil.CurvePath).setColor(e).setParent(this);a.curve=f;this.pathSegments.push(a);return this},addCubicTo:function(a,b,c,d,e,f,g){var h=new CAAT.Math.Bezier;h.setPoints([this.endCurvePosition(),
(new CAAT.Math.Point).set(a,b),(new CAAT.Math.Point).set(c,d),(new CAAT.Math.Point).set(e,f)]);this.trackPathX=e;this.trackPathY=f;a=(new CAAT.PathUtil.CurvePath).setColor(g).setParent(this);a.curve=h;this.pathSegments.push(a);return this},addCatmullTo:function(a,b,c,d,e,f,g){g=(new CAAT.Math.CatmullRom).setColor(g);g.setCurve(this.trackPathX,this.trackPathY,a,b,c,d,e,f);this.trackPathX=e;this.trackPathY=f;a=(new CAAT.PathUtil.CurvePath).setParent(this);a.curve=g;this.pathSegments.push(a);return this},
addLineTo:function(a,b,c){c=(new CAAT.PathUtil.LinearPath).setColor(c);c.setPoints([this.endCurvePosition(),(new CAAT.Math.Point).set(a,b)]);c.setParent(this);this.trackPathX=a;this.trackPathY=b;this.pathSegments.push(c);return this},beginPath:function(a,b){this.trackPathX=a;this.trackPathY=b;this.beginPathX=a;this.beginPathY=b;return this},closePath:function(){this.getLastPathSegment().setPoint(this.getFirstPathSegment().startCurvePosition(),this.getLastPathSegment().numControlPoints()-1);this.trackPathX=
this.beginPathX;this.trackPathY=this.beginPathY;this.closed=!0;this.endPath();return this},endPath:function(){this.pathSegmentStartTime=[];this.pathSegmentDurationTime=[];this.updatePath();return this},getPosition:function(a,b){if(b&&(1<=a||0>=a)){if(1<=a){var c=this.__getPositionImpl(.999);var d=this.endCurvePosition();var e=Math.atan2(d.y-c.y,d.x-c.x);c=a%1}else c=this.__getPositionImpl(.001),d=this.startCurvePosition(),e=Math.atan2(d.y-c.y,d.x-c.x),c=-a;var f=this.newPosition,g=this.getLength();
f.x=d.x+c*g*Math.cos(e);f.y=d.y+c*g*Math.sin(e);return f}return this.__getPositionImpl(a)},__getPositionImpl:function(a){if(1<a||0>a)a%=1;0>a&&(a=1+a);for(var b=this.pathSegments,c=this.pathSegmentStartTime,d=this.pathSegmentDurationTime,e=0,f=b.length,g,h=this.newPosition,k;e!==f;){g=(f+e)/2|0;k=c[g];if(k<=a&&a<=k+d[g])return a=d[g]?(a-k)/d[g]:0,1<a?a=1:0>a&&(a=0),a=b[g].getPosition(a),h.x=a.x,h.y=a.y,h;a<k?f=g:e=g+1}return this.endCurvePosition()},getPositionFromLength:function(a){a%=this.getLength();
0>a&&(a+=this.getLength());for(var b=0,c=0;c<this.pathSegments.length;c++){if(b<=a&&a<=this.pathSegments[c].getLength()+b){a-=b;a=this.pathSegments[c].getPositionFromLength(a);this.newPosition.x=a.x;this.newPosition.y=a.y;break}b+=this.pathSegments[c].getLength()}return this.newPosition},paint:function(a){for(var b=0;b<this.pathSegments.length;b++)this.pathSegments[b].paint(a,this.interactive)},release:function(){this.ay=this.ax=-1},isEmpty:function(){return!this.pathSegments.length},getNumSegments:function(){return this.pathSegments.length},
getSegment:function(a){return this.pathSegments[a]},numControlPoints:function(){return this.points.length},getControlPoint:function(a){return this.points[a]},updatePath:function(a,b){var c,d;this.length=0;this.bbox.setEmpty();this.points=[];var e=Number.MAX_VALUE,f=Number.MAX_VALUE;for(c=0;c<this.pathSegments.length;c++)for(this.pathSegments[c].updatePath(a),this.length+=this.pathSegments[c].getLength(),this.bbox.unionRectangle(this.pathSegments[c].bbox),d=0;d<this.pathSegments[c].numControlPoints();d++){var g=
this.pathSegments[c].getControlPoint(d);this.points.push(g);g.x<e&&(e=g.x);g.y<f&&(f=g.y)}this.clipOffsetX=-e;this.clipOffsetY=-f;this.width=this.bbox.width;this.height=this.bbox.height;this.setLocation(this.bbox.x,this.bbox.y);this.pathSegmentStartTime=[];this.pathSegmentDurationTime=[];for(c=0;c<this.pathSegments.length;c++)this.pathSegmentStartTime.push(0),this.pathSegmentDurationTime.push(0);for(c=0;c<this.pathSegments.length;c++)this.pathSegmentDurationTime[c]=this.getLength()?this.pathSegments[c].getLength()/
this.getLength():0,0<c?this.pathSegmentStartTime[c]=this.pathSegmentStartTime[c-1]+this.pathSegmentDurationTime[c-1]:this.pathSegmentStartTime[0]=0,this.pathSegments[c].endPath();this.extractPathPoints();b&&b(this);return this},press:function(a,b){if(this.interactive){for(var c=CAAT.Math.Curve.prototype.HANDLE_SIZE/2,d=0;d<this.pathSegments.length;d++)for(var e=0;e<this.pathSegments[d].numControlPoints();e++){var f=this.pathSegments[d].getControlPoint(e);if(a>=f.x-c&&b>=f.y-c&&a<f.x+c&&b<f.y+c){this.point=
f;return}}this.point=null}},drag:function(a,b,c){if(this.interactive&&null!==this.point){if(-1===this.ax||-1===this.ay)this.ax=a,this.ay=b;this.point.x+=a-this.ax;this.point.y+=b-this.ay;this.ax=a;this.ay=b;this.updatePath(this.point,c)}},getContour:function(a){for(var b=[],c=0;c<=a;c++)b.push((new CAAT.Math.Point).set(c/a,this.getPosition(c/a).y,0));return b},setPoints:function(a){if(this.points.length===a.length)for(var b=0;b<a.length;b++)this.points[b].x=a[b].x,this.points[b].y=a[b].y;return this},
setPoint:function(a,b){0<=b&&b<this.points.length&&(this.points[b].x=a.x,this.points[b].y=a.y);return this},emptyBehaviorList:function(){this.behaviorList=[];return this},extractPathPoints:function(){if(!this.pathPoints){var a;this.pathPoints=[];for(a=0;a<this.numControlPoints();a++)this.pathPoints.push(this.getControlPoint(a).clone())}return this},addBehavior:function(a){this.behaviorList.push(a);return this},removeBehaviour:function(a){for(var b=this.behaviorList.length-1;b;)if(this.behaviorList[b]===
a){this.behaviorList.splice(b,1);break}return this},removeBehaviorById:function(a){for(var b=0;b<this.behaviorList.length;b++)this.behaviorList[b].id===a&&this.behaviorList.splice(b,1);return this},applyBehaviors:function(a){for(var b=0;b<this.behaviorList.length;b++)this.behaviorList[b].apply(a,this);this.setATMatrix();for(b=0;b<this.numControlPoints();b++)this.setPoint(this.matrix.transformCoord(this.pathPoints[b].clone().translate(this.clipOffsetX,this.clipOffsetY)),b);return this},setATMatrix:function(){this.matrix.identity();
this.tmpMatrix.identity();var a=this.matrix.matrix,b;var c=this.bbox;var d=c.width,e=c.height,f=c.x,g=c.y;c=1;var h=b=0;var k=1;var n=this.tb_x-f-this.tAnchorX*d;var m=this.tb_y-g-this.tAnchorY*e;if(this.rb_angle){var p=this.rb_rotateAnchorX*d+f,r=this.rb_rotateAnchorY*e+g;n+=c*p+b*r;m+=h*p+k*r;var q=Math.cos(this.rb_angle);var t=Math.sin(this.rb_angle);var u=c;var v=h;c=u*q+b*t;b=-u*t+b*q;h=v*q+k*t;k=-v*t+k*q;n+=-c*p-b*r;m+=-h*p-k*r}if(1!=this.sb_scaleX||1!=this.sb_scaleY)d=this.sb_scaleAnchorX*
d+f,e=this.sb_scaleAnchorY*e+g,n+=c*d+b*e,m+=h*d+k*e,c*=this.sb_scaleX,b*=this.sb_scaleY,h*=this.sb_scaleX,k*=this.sb_scaleY,n+=-c*d-b*e,m+=-h*d-k*e;a[0]=c;a[1]=b;a[2]=n;a[3]=h;a[4]=k;a[5]=m;return this},setRotationAnchored:function(a,b,c){this.rb_angle=a;this.rb_rotateAnchorX=b;this.rb_rotateAnchorY=c;return this},setRotationAnchor:function(a,b){this.rb_rotateAnchorX=a;this.rb_rotateAnchorY=b},setRotation:function(a){this.rb_angle=a},setScaleAnchored:function(a,b,c,d){this.sb_scaleX=a;this.sb_scaleAnchorX=
c;this.sb_scaleY=b;this.sb_scaleAnchorY=d;return this},setScale:function(a,b){this.sb_scaleX=a;this.sb_scaleY=b;return this},setScaleAnchor:function(a,b){this.sb_scaleAnchorX=a;this.sb_scaleAnchorY=b;return this},setPositionAnchor:function(a,b){this.tAnchorX=a;this.tAnchorY=b;return this},setPositionAnchored:function(a,b,c,d){this.tb_x=a;this.tb_y=b;this.tAnchorX=c;this.tAnchorY=d;return this},setPosition:function(a,b){this.tb_x=a;this.tb_y=b;return this},setLocation:function(a,b){this.tb_x=a;this.tb_y=
b;return this},flatten:function(a,b){for(var c=this.getPositionFromLength(0),d=(new CAAT.PathUtil.Path).beginPath(c.x,c.y),e=0;e<a;e++)c=this.getPositionFromLength(e/a*this.length),d.addLineTo(c.x,c.y);b?d.closePath():d.endPath();return d}}});
CAAT.Module({defines:"CAAT.PathUtil.SVGPath",depends:["CAAT.PathUtil.Path"],extendsWith:function(){return{__init:function(){},c:0,bezierInfo:null,__skipBlank:function(a,b){for(var c=a.charAt(b);b<a.length&&(" "==c||"\n"==c||"\t"==c||","==c);)++b,c=a.charAt(b);return b},__maybeNumber:function(a,b){if(b<a.length-2){var c=a.charAt(b),d=a.charAt(b+1);return"-"==c||this.__isDigit(c)||"."===c&&this.__isDigit(d)}return!1},__isDigit:function(a){return"0"<=a&&"9">=a},__getNumber:function(a,b,c,d){b=this.__skipBlank(a,
b);if(b<a.length){var e=this.__findNumber(a,b);-1!==e?(c.push(parseFloat(a.substr(b,e))),b=this.__skipBlank(a,e),d.pos=b,d.result=0):d.result=2}else d.result=1},____getNumbers:function(a,b,c,d,e){for(var f=0;f<d&&(this.__getNumber(a,b,c,e),0==e.result);f++)b=e.pos;return b},__findNumber:function(a,b){"-"==a.charAt(b)&&++b;if(!(this.__isDigit(a.charAt(b))||"."==a.charAt(b)&&this.__isDigit(a.charAt(b+1))))return-1;for(;this.__isDigit(a.charAt(b));)++b;if("."==a.charAt(b)){++b;if(!this.__isDigit(a.charAt(b)))return b;
for(;this.__isDigit(a.charAt(b));)++b}return b},__parseMoveTo:function(a,b,c,d,e){var f=[];b=this.____getNumbers(a,b,f,2,e);0===e.result&&(c||(f[0]+=d.trackPathX,f[1]+=d.trackPathY),d.beginPath(f[0],f[1]),this.__maybeNumber(a,b)&&(b=this.parseLine(a,b,c,d,e)),e.pos=b)},__parseLine:function(a,b,c,d,e){var f=[];do b=this.____getNumbers(a,b,f,2,e),c||(f[0]+=d.trackPathX,f[1]+=d.trackPathY),d.addLineTo(f[0],f[1]);while(this.__maybeNumber(a,b));e.pos=b},__parseLineH:function(a,b,c,d,e){var f=[];do b=this.____getNumbers(a,
b,f,1,e),c||(f[0]+=d.trackPathX),f[1].push(d.trackPathY),d.addLineTo(f[0],f[1]);while(this.__maybeNumber(a,b));e.pos=b},__parseLineV:function(a,b,c,d,e){var f=[d.trackPathX];do b=this.____getNumbers(a,b,f,1,e),c||(f[1]+=d.trackPathY),d.addLineTo(f[0],f[1]);while(this.__maybeNumber(a,b));e.pos=b},__parseCubic:function(a,b,c,d,e){var f=[];do if(b=this.____getNumbers(a,b,f,6,e),0===e.result)c||(f[0]+=d.trackPathX,f[1]+=d.trackPathY,f[2]+=d.trackPathX,f[3]+=d.trackPathY,f[4]+=d.trackPathX,f[5]+=d.trackPathY),
d.addCubicTo(f[0],f[1],f[2],f[3],f[4],f[5]),f.shift(),f.shift(),this.bezierInfo=f;else return;while(this.__maybeNumber(a,b));e.pos=b},__parseCubicS:function(a,b,c,d,e){var f=[];do if(b=this.____getNumbers(a,b,f,4,e),0==e.result)c||(f[0]+=d.trackPathX,f[1]+=d.trackPathY,f[2]+=d.trackPathX,f[3]+=d.trackPathY),d.addCubicTo(this.bezierInfo[2]+(this.bezierInfo[2]-this.bezierInfo[0]),this.bezierInfo[3]+(this.bezierInfo[3]-this.bezierInfo[1]),f[0],f[1],f[2],f[3]),this.bezierInfo=f;else return;while(this.__maybeNumber(b));
e.pos=b},__parseQuadricS:function(a,b,c,d,e){var f=[];do if(b=this.____getNumbers(a,b,f,4,e),0===e.result){c||(f[0]+=d.trackPathX,f[1]+=d.trackPathY);var g=this.bezierInfo[2]+(this.bezierInfo[2]-this.bezierInfo[0]);var h=this.bezierInfo[3]+(this.bezierInfo[3]-this.bezierInfo[1]);d.addQuadricTo(g,h,f[0],f[1]);this.bezierInfo=[];bezierInfo.push(g);bezierInfo.push(h);bezierInfo.push(f[0]);bezierInfo.push(f[1])}else return;while(this.__maybeNumber(b));e.pos=b},__parseQuadric:function(a,b,c,d,e){var f=
[];do if(b=this.____getNumbers(a,b,f,4,e),0===e.result)c||(f[0]+=d.trackPathX,f[1]+=d.trackPathY,f[2]+=d.trackPathX,f[3]+=d.trackPathY),d.addQuadricTo(f[0],f[1],f[2],f[3]),this.bezierInfo=f;else return;while(this.__maybeNumber(b));e.pos=b},__parseClosePath:function(a,b,c,d){c.closePath();d.pos=b},parsePath:function(a){this.c=0;this.contours=[];var b=new CAAT.PathUtil.Path;this.contours.push(b);this.c=this.__skipBlank(a,this.c);if(this.c===a.length)return b;for(var c={pos:0,result:0};this.c!=a.length;){switch(a.charAt(this.c)){case "m":this.__parseMoveTo(a,
this.c+1,!1,b,c);break;case "M":this.__parseMoveTo(a,this.c+1,!0,b,c);break;case "c":this.__parseCubic(a,this.c+1,!1,b,c);break;case "C":this.__parseCubic(a,this.c+1,!0,b,c);break;case "s":this.__parseCubicS(a,this.c+1,!1,b,c);break;case "S":this.__parseCubicS(a,this.c+1,!0,b,c);break;case "q":this.__parseQuadric(a,this.c+1,!1,b,c);break;case "Q":this.__parseQuadricS(a,this.c+1,!0,b,c);break;case "t":this.__parseQuadricS(a,this.c+1,!1,b,c);break;case "T":this.__parseQuadric(a,this.c+1,!0,b,c);break;
case "l":this.__parseLine(a,this.c+1,!1,b,c);break;case "L":this.__parseLine(a,this.c+1,!0,b,c);break;case "h":this.__parseLineH(a,this.c+1,!1,b,c);break;case "H":this.__parseLineH(a,this.c+1,!0,b,c);break;case "v":this.__parseLineV(a,this.c+1,!1,b,c);break;case "V":this.__parseLineV(a,this.c+1,!0,b,c);break;case "z":case "Z":this.__parseClosePath(a,this.c+1,b,c),b=new CAAT.PathUtil.Path,this.contours.push(b)}if(0!=c.result)break;else this.c=c.pos}b=0;c=null;for(a=0;a<this.contours.length;a++)this.contours[a].isEmpty()||
(c=this.contours[a],c.closed||c.endPath(),b++);if(1===b)return c;b=new CAAT.PathUtil.Path;for(a=0;a<this.contours.length;a++)this.contours[a].isEmpty()||b.addSegment(this.contours[a]);return b.endPath()}}}});
CAAT.Module({defines:"CAAT.WebGL.GLU",depends:["CAAT.Math.Matrix3"],constants:{makePerspective:function(a,b,c,d,e){a=c*Math.tan(a*Math.PI/360);var f=-a;return makeFrustum(f*b,a*b,f,a,c,d,e)},makeFrustum:function(a,b,c,d,e,f,g){var h=2*e/(b-a),k=2*e/(d-c);a=(b+a)/(b-a);c=(d+c)/(d-c);d=-(f+e)/(f-e);e=-2*f*e/(f-e);return(new CAAT.Math.Matrix3).initWithMatrix([[h,0,a,-g/2],[0,-k,c,g/2],[0,0,d,e],[0,0,-1,0]])},makeOrtho:function(a,b,c,d,e,f){var g=-(b+a)/(b-a),h=-(d+c)/(d-c),k=-(f+e)/(f-e);return(new CAAT.Math.Matrix3).initWithMatrix([[2/
(b-a),0,0,g],[0,2/(d-c),0,h],[0,0,-2/(f-e),k],[0,0,0,1]])}}});
CAAT.Module({defines:"CAAT.WebGL.Program",extendsWith:{__init:function(a){this.gl=a;return this},shaderProgram:null,gl:null,setAlpha:function(a){},getShader:function(a,b,c){if("x-shader/x-fragment"===b)b=a.createShader(a.FRAGMENT_SHADER);else if("x-shader/x-vertex"===b)b=a.createShader(a.VERTEX_SHADER);else return null;a.shaderSource(b,c);a.compileShader(b);return a.getShaderParameter(b,a.COMPILE_STATUS)?b:(alert(a.getShaderInfoLog(b)),null)},getDomShader:function(a,b){var c=document.getElementById(b);
if(!c)return null;for(var d="",e=c.firstChild;e;)3===e.nodeType&&(d+=e.textContent),e=e.nextSibling;if("x-shader/x-fragment"===c.type)c=a.createShader(a.FRAGMENT_SHADER);else if("x-shader/x-vertex"===c.type)c=a.createShader(a.VERTEX_SHADER);else return null;a.shaderSource(c,d);a.compileShader(c);return a.getShaderParameter(c,a.COMPILE_STATUS)?c:(alert(a.getShaderInfoLog(c)),null)},initialize:function(){return this},getFragmentShader:function(){return null},getVertexShader:function(){return null},
create:function(){var a=this.gl;this.shaderProgram=a.createProgram();a.attachShader(this.shaderProgram,this.getVertexShader());a.attachShader(this.shaderProgram,this.getFragmentShader());a.linkProgram(this.shaderProgram);a.useProgram(this.shaderProgram);return this},setMatrixUniform:function(a){this.gl.uniformMatrix4fv(this.shaderProgram.pMatrixUniform,!1,new Float32Array(a.flatten()))},useProgram:function(){this.gl.useProgram(this.shaderProgram);return this}}});
CAAT.Module({defines:"CAAT.WebGL.ColorProgram",aliases:["CAAT.ColorProgram"],extendsClass:"CAAT.WebGL.Program",depends:["CAAT.WebGL.Program"],extendsWith:{__init:function(a){this.__super(a);return this},colorBuffer:null,vertexPositionBuffer:null,vertexPositionArray:null,getFragmentShader:function(){return this.getShader(this.gl,"x-shader/x-fragment","#ifdef GL_ES \nprecision highp float; \n#endif \nvarying vec4 color; \nvoid main(void) { \n  gl_FragColor = color;\n}\n")},getVertexShader:function(){return this.getShader(this.gl,
"x-shader/x-vertex","attribute vec3 aVertexPosition; \nattribute vec4 aColor; \nuniform mat4 uPMatrix; \nvarying vec4 color; \nvoid main(void) { \ngl_Position = uPMatrix * vec4(aVertexPosition, 1.0); \ncolor= aColor; \n}\n")},initialize:function(){this.shaderProgram.vertexPositionAttribute=this.gl.getAttribLocation(this.shaderProgram,"aVertexPosition");this.gl.enableVertexAttribArray(this.shaderProgram.vertexPositionAttribute);this.shaderProgram.vertexColorAttribute=this.gl.getAttribLocation(this.shaderProgram,
"aColor");this.gl.enableVertexAttribArray(this.shaderProgram.vertexColorAttribute);this.shaderProgram.pMatrixUniform=this.gl.getUniformLocation(this.shaderProgram,"uPMatrix");this.useProgram();this.colorBuffer=this.gl.createBuffer();this.setColor([1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]);this.vertexPositionBuffer=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexPositionBuffer);this.vertexPositionArray=new Float32Array(6144);this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertexPositionArray,
this.gl.DYNAMIC_DRAW);this.gl.vertexAttribPointer(this.shaderProgram.vertexPositionAttribute,3,this.gl.FLOAT,!1,0,0);return CAAT.ColorProgram.superclass.initialize.call(this)},setColor:function(a){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.colorBuffer);this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array(a),this.gl.STATIC_DRAW);this.gl.vertexAttribPointer(this.shaderProgram.vertexColorAttribute,this.colorBuffer,this.gl.FLOAT,!1,0,0)}}});
CAAT.Module({defines:"CAAT.WebGL.TextureProgram",aliases:["CAAT.TextureProgram"],extendsClass:"CAAT.WebGL.Program",depends:["CAAT.WebGL.Program"],extendsWith:{__init:function(a){this.__super(a);return this},vertexPositionBuffer:null,vertexPositionArray:null,vertexUVBuffer:null,vertexUVArray:null,vertexIndexBuffer:null,linesBuffer:null,prevAlpha:-1,prevR:-1,prevG:-1,prevB:-1,prevA:-1,prevTexture:null,getFragmentShader:function(){return this.getShader(this.gl,"x-shader/x-fragment","#ifdef GL_ES \nprecision highp float; \n#endif \nvarying vec2 vTextureCoord; \nuniform sampler2D uSampler; \nuniform float alpha; \nuniform bool uUseColor;\nuniform vec4 uColor;\nvoid main(void) { \nif ( uUseColor ) {\n  gl_FragColor= vec4(uColor.r*alpha, uColor.g*alpha, uColor.b*alpha, uColor.a*alpha);\n} else { \n  vec4 textureColor= texture2D(uSampler, vec2(vTextureCoord)); \n  gl_FragColor = vec4(textureColor.r*alpha, textureColor.g*alpha, textureColor.b*alpha, textureColor.a * alpha ); \n}\n}\n")},
getVertexShader:function(){return this.getShader(this.gl,"x-shader/x-vertex","attribute vec3 aVertexPosition; \nattribute vec2 aTextureCoord; \nuniform mat4 uPMatrix; \nvarying vec2 vTextureCoord; \nvoid main(void) { \ngl_Position = uPMatrix * vec4(aVertexPosition, 1.0); \nvTextureCoord = aTextureCoord;\n}\n")},useProgram:function(){CAAT.TextureProgram.superclass.useProgram.call(this);this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexPositionBuffer);this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexUVBuffer);
this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.vertexIndexBuffer)},initialize:function(){var a;this.linesBuffer=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.linesBuffer);var b=[];for(a=0;1024>a;a++)b[a]=a;this.linesBufferArray=new Uint16Array(b);this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,this.linesBufferArray,this.gl.DYNAMIC_DRAW);this.shaderProgram.vertexPositionAttribute=this.gl.getAttribLocation(this.shaderProgram,"aVertexPosition");this.gl.enableVertexAttribArray(this.shaderProgram.vertexPositionAttribute);
this.shaderProgram.textureCoordAttribute=this.gl.getAttribLocation(this.shaderProgram,"aTextureCoord");this.gl.enableVertexAttribArray(this.shaderProgram.textureCoordAttribute);this.shaderProgram.pMatrixUniform=this.gl.getUniformLocation(this.shaderProgram,"uPMatrix");this.shaderProgram.samplerUniform=this.gl.getUniformLocation(this.shaderProgram,"uSampler");this.shaderProgram.alphaUniform=this.gl.getUniformLocation(this.shaderProgram,"alpha");this.shaderProgram.useColor=this.gl.getUniformLocation(this.shaderProgram,
"uUseColor");this.shaderProgram.color=this.gl.getUniformLocation(this.shaderProgram,"uColor");this.setAlpha(1);this.setUseColor(!1);this.vertexPositionBuffer=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexPositionBuffer);this.vertexPositionArray=new Float32Array(49152);this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertexPositionArray,this.gl.DYNAMIC_DRAW);this.gl.vertexAttribPointer(this.shaderProgram.vertexPositionAttribute,3,this.gl.FLOAT,!1,0,0);this.vertexUVBuffer=this.gl.createBuffer();
this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexUVBuffer);this.vertexUVArray=new Float32Array(32768);this.gl.bufferData(this.gl.ARRAY_BUFFER,this.vertexUVArray,this.gl.DYNAMIC_DRAW);this.gl.vertexAttribPointer(this.shaderProgram.textureCoordAttribute,2,this.gl.FLOAT,!1,0,0);this.vertexIndexBuffer=this.gl.createBuffer();this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.vertexIndexBuffer);b=[];for(a=0;4096>a;a++)b.push(4*a),b.push(1+4*a),b.push(2+4*a),b.push(4*a),b.push(2+4*a),b.push(3+4*a);this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,
new Uint16Array(b),this.gl.DYNAMIC_DRAW);return CAAT.TextureProgram.superclass.initialize.call(this)},setUseColor:function(a,b,c,d,e){this.gl.uniform1i(this.shaderProgram.useColor,a?1:0);!a||this.prevA===e&&this.prevR===b&&this.prevG===c&&this.prevB===d||(this.gl.uniform4f(this.shaderProgram.color,b,c,d,e),this.prevA=e,this.prevR=b,this.prevG=c,this.prevB=d)},setTexture:function(a){if(this.prevTexture!==a){var b=this.gl;b.activeTexture(b.TEXTURE0);b.bindTexture(b.TEXTURE_2D,a);b.uniform1i(this.shaderProgram.samplerUniform,
0);this.prevTexture=a}return this},updateVertexBuffer:function(a){var b=this.gl;b.bindBuffer(b.ARRAY_BUFFER,this.vertexPositionBuffer);b.bufferSubData(b.ARRAY_BUFFER,0,a);return this},updateUVBuffer:function(a){var b=this.gl;b.bindBuffer(b.ARRAY_BUFFER,this.vertexUVBuffer);b.bufferSubData(b.ARRAY_BUFFER,0,a);return this},setAlpha:function(a){this.prevAlpha!==a&&(this.gl.uniform1f(this.shaderProgram.alphaUniform,a),this.prevAlpha=a);return this},drawLines:function(a,b,c,d,e,f,g){var h=this.gl;this.setAlpha(f);
h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,this.linesBuffer);h.lineWidth(g);this.updateVertexBuffer(a);this.setUseColor(!0,c,d,e,1);h.drawElements(h.LINES,b,h.UNSIGNED_SHORT,0);this.setAlpha(1);this.setUseColor(!1);h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,this.vertexIndexBuffer)},drawPolylines:function(a,b,c,d,e,f,g){var h=this.gl;h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,this.linesBuffer);h.lineWidth(g);this.setAlpha(f);this.updateVertexBuffer(a);this.setUseColor(!0,c,d,e,1);h.drawElements(h.LINE_STRIP,b,h.UNSIGNED_SHORT,
0);this.setAlpha(1);this.setUseColor(!1);h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,this.vertexIndexBuffer)}}});CAAT.Module({defines:"CAAT.Event.TouchInfo",aliases:["CAAT.TouchInfo"],extendsWith:{__init:function(a,b,c,d){this.identifier=a;this.pageX=this.clientX=b;this.pageY=this.clientY=c;this.target=d;this.time=(new Date).getTime();return this}}});
CAAT.Module({defines:"CAAT.Event.TouchEvent",aliases:["CAAT.TouchEvent"],depends:["CAAT.Event.TouchInfo"],extendsWith:{__init:function(){this.touches=[];this.changedTouches=[];return this},time:0,source:null,sourceEvent:null,shift:!1,control:!1,alt:!1,meta:!1,touches:null,changedTouches:null,init:function(a,b,c){this.source=b;this.alt=a.altKey;this.control=a.ctrlKey;this.shift=a.shiftKey;this.meta=a.metaKey;this.sourceEvent=a;this.time=c;return this},addTouch:function(a){-1===this.touches.indexOf(a)&&
this.touches.push(a);return this},addChangedTouch:function(a){-1===this.changedTouches.indexOf(a)&&this.changedTouches.push(a);return this},isAltDown:function(){return this.alt},isControlDown:function(){return this.control},isShiftDown:function(){return this.shift},isMetaDown:function(){return this.meta},getSourceEvent:function(){return this.sourceEvent}}});
CAAT.Module({defines:"CAAT.Event.MouseEvent",aliases:["CAAT.MouseEvent"],depends:["CAAT.Math.Point"],extendsWith:{__init:function(){this.point=new CAAT.Math.Point(0,0,0);this.screenPoint=new CAAT.Math.Point(0,0,0);this.touches=[];return this},screenPoint:null,point:null,time:0,source:null,shift:!1,control:!1,alt:!1,meta:!1,sourceEvent:null,touches:null,init:function(a,b,c,d,e,f){this.point.set(a,b);this.source=d;this.screenPoint=e;this.alt=c.altKey;this.control=c.ctrlKey;this.shift=c.shiftKey;this.meta=
c.metaKey;this.sourceEvent=c;this.x=a;this.y=b;this.time=f;return this},isAltDown:function(){return this.alt},isControlDown:function(){return this.control},isShiftDown:function(){return this.shift},isMetaDown:function(){return this.meta},getSourceEvent:function(){return this.sourceEvent}}});
CAAT.Module({defines:"CAAT.Event.KeyEvent",aliases:"CAAT.KeyEvent",extendsWith:{__init:function(a,b,c,d){this.keyCode=a;this.action=b;this.modifiers=c;this.sourceEvent=d;this.preventDefault=function(){this.sourceEvent.preventDefault()};this.getKeyCode=function(){return this.keyCode};this.getAction=function(){return this.action};this.modifiers=function(){return this.modifiers};this.isShiftPressed=function(){return this.modifiers.shift};this.isControlPressed=function(){return this.modifiers.control};
this.isAltPressed=function(){return this.modifiers.alt};this.getSourceEvent=function(){return this.sourceEvent}}},onCreate:function(){CAAT.KEYS={ENTER:13,BACKSPACE:8,TAB:9,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPSLOCK:20,ESCAPE:27,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,SELECT:93,
NUMPAD0:96,NUMPAD1:97,NUMPAD2:98,NUMPAD3:99,NUMPAD4:100,NUMPAD5:101,NUMPAD6:102,NUMPAD7:103,NUMPAD8:104,NUMPAD9:105,MULTIPLY:106,ADD:107,SUBTRACT:109,DECIMALPOINT:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLLLOCK:145,SEMICOLON:186,EQUALSIGN:187,COMMA:188,DASH:189,PERIOD:190,FORWARDSLASH:191,GRAVEACCENT:192,OPENBRACKET:219,BACKSLASH:220,CLOSEBRAKET:221,SINGLEQUOTE:222};CAAT.Keys=CAAT.KEYS;CAAT.SHIFT_KEY=16;CAAT.CONTROL_KEY=
17;CAAT.ALT_KEY=18;CAAT.ENTER_KEY=13;CAAT.KEY_MODIFIERS={alt:!1,control:!1,shift:!1}}});
CAAT.Module({defines:"CAAT.Event.Input",depends:["CAAT.Event.KeyEvent","CAAT.Event.MouseEvent","CAAT.Event.TouchEvent"],onCreate:function(){CAAT.setCursor=function(a){"iOS"!==navigator.browser&&(document.body.style.cursor=a)};CAAT.TOUCH_AS_MOUSE=1;CAAT.TOUCH_AS_MULTITOUCH=2;CAAT.TOUCH_BEHAVIOR=CAAT.TOUCH_AS_MOUSE;CAAT.windowResizeListeners=[];CAAT.registerResizeListener=function(a){CAAT.windowResizeListeners.push(a)};CAAT.unregisterResizeListener=function(a){for(var b=0;b<CAAT.windowResizeListeners.length;b++)if(a===
CAAT.windowResizeListeners[b]){CAAT.windowResizeListeners.splice(b,1);break}};CAAT.keyListeners=[];CAAT.registerKeyListener=function(a){CAAT.keyListeners.push(a)};CAAT.accelerationIncludingGravity={x:0,y:0,z:0};CAAT.rotationRate={alpha:0,beta:0,gamma:0};CAAT.enableDeviceMotion=function(){function a(a){CAAT.rotationRate={alpha:0,beta:a[0],gamma:a[1]}}CAAT.prevOnDeviceMotion=null;CAAT.onDeviceMotion=null;window.DeviceOrientationEvent?window.addEventListener("deviceorientation",function(b){a([b.beta,
b.gamma])},!0):window.DeviceMotionEvent?window.addEventListener("devicemotion",function(b){a([2*b.acceleration.x,2*b.acceleration.y])},!0):window.addEventListener("MozOrientation",function(b){a([45*-b.y,45*b.x])},!0)};window.addEventListener("keydown",function(a){var b=a.which?a.which:a.keyCode;if(b===CAAT.SHIFT_KEY)CAAT.KEY_MODIFIERS.shift=!0;else if(b===CAAT.CONTROL_KEY)CAAT.KEY_MODIFIERS.control=!0;else if(b===CAAT.ALT_KEY)CAAT.KEY_MODIFIERS.alt=!0;else for(var c=0;c<CAAT.keyListeners.length;c++)CAAT.keyListeners[c](new CAAT.KeyEvent(b,
"down",{alt:CAAT.KEY_MODIFIERS.alt,control:CAAT.KEY_MODIFIERS.control,shift:CAAT.KEY_MODIFIERS.shift},a))},!1);window.addEventListener("keyup",function(a){var b=a.which?a.which:a.keyCode;if(b===CAAT.SHIFT_KEY)CAAT.KEY_MODIFIERS.shift=!1;else if(b===CAAT.CONTROL_KEY)CAAT.KEY_MODIFIERS.control=!1;else if(b===CAAT.ALT_KEY)CAAT.KEY_MODIFIERS.alt=!1;else for(var c=0;c<CAAT.keyListeners.length;c++)CAAT.keyListeners[c](new CAAT.KeyEvent(b,"up",{alt:CAAT.KEY_MODIFIERS.alt,control:CAAT.KEY_MODIFIERS.control,
shift:CAAT.KEY_MODIFIERS.shift},a))},!1);window.addEventListener("resize",function(a){for(a=0;a<CAAT.windowResizeListeners.length;a++)CAAT.windowResizeListeners[a].windowResized(window.innerWidth,window.innerHeight)},!1)},extendsWith:{}});
CAAT.Module({defines:"CAAT.Event.AnimationLoop",onCreate:function(){CAAT.ENDRAF=!1;CAAT.INTERVAL_ID=null;CAAT.renderEnabled=!1;CAAT.FPS=60;CAAT.NO_RAF=0;CAAT.FPS_REFRESH=500;CAAT.RAF=0;CAAT.REQUEST_ANIMATION_FRAME_TIME=0;CAAT.SET_INTERVAL=0;CAAT.FRAME_TIME=0;CAAT.currentDirector=null;CAAT.director=[];CAAT.RegisterDirector=function(a){CAAT.currentDirector||(CAAT.currentDirector=a);CAAT.director.push(a)};CAAT.getCurrentScene=function(){return CAAT.currentDirector.getCurrentScene()};CAAT.getCurrentSceneTime=
function(){return CAAT.currentDirector.getCurrentScene().time};CAAT.endLoop=function(){CAAT.NO_RAF?null!==CAAT.INTERVAL_ID&&clearInterval(CAAT.INTERVAL_ID):CAAT.ENDRAF=!0;CAAT.renderEnabled=!1};CAAT.loop=function(a){if(!CAAT.renderEnabled){for(var b=0,c=CAAT.director.length;b<c;b++)CAAT.director[b].timeline=(new Date).getTime();CAAT.FPS=a||60;CAAT.renderEnabled=!0;CAAT.NO_RAF?CAAT.INTERVAL_ID=setInterval(function(){for(var a=(new Date).getTime(),b=0,c=CAAT.director.length;b<c;b++){var g=CAAT.director[b];
(g.renderMode===CAAT.Foundation.Director.RENDER_MODE_CONTINUOUS||g.needsRepaint)&&g.renderFrame()}CAAT.FRAME_TIME=a-CAAT.SET_INTERVAL;CAAT.RAF&&(CAAT.REQUEST_ANIMATION_FRAME_TIME=(new Date).getTime()-CAAT.RAF);CAAT.RAF=(new Date).getTime();CAAT.SET_INTERVAL=a},1E3/CAAT.FPS):CAAT.renderFrameRAF()}};CAAT.renderFrameRAF=function(a){var b=CAAT;if(b.ENDRAF)b.ENDRAF=!1;else{a||(a=(new Date).getTime());var c=(new Date).getTime();b.REQUEST_ANIMATION_FRAME_TIME=b.RAF?a-b.RAF:16;for(var d=0,e=b.director.length;d<
e;d++)b.director[d].renderFrame();b.RAF=a;b.FRAME_TIME=(new Date).getTime()-c;window.requestAnimFrame(b.renderFrameRAF,0)}};window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a,b){window.setTimeout(a,1E3/CAAT.FPS)}}()},extendsWith:function(){return{}}});
CAAT.Module({defines:"CAAT.Foundation.Timer.TimerTask",aliases:["CAAT.TimerTask"],extendsWith:{startTime:0,duration:0,callback_timeout:null,callback_tick:null,callback_cancel:null,owner:null,scene:null,taskId:0,remove:!1,create:function(a,b,c,d,e){this.startTime=a;this.duration=b;this.callback_timeout=c;this.callback_tick=d;this.callback_cancel=e;return this},checkTask:function(a){var b=a-this.startTime;b>=this.duration?(this.remove=!0,this.callback_timeout&&this.callback_timeout(a,b,this)):this.callback_tick&&
this.callback_tick(a,b,this);return this},remainingTime:function(){return this.duration-(this.scene.time-this.startTime)},reset:function(a){this.remove=!1;this.startTime=a;this.owner.ensureTimerTask(this);return this},cancel:function(){this.remove=!0;null!=this.callback_cancel&&this.callback_cancel(this.scene.time,this.scene.time-this.startTime,this);return this},addTime:function(a){this.duration+=a;return this}}});
CAAT.Module({defines:"CAAT.Foundation.Timer.TimerManager",aliases:["CAAT.TimerManager"],depends:["CAAT.Foundation.Timer.TimerTask"],extendsWith:{__init:function(){this.timerList=[];return this},timerList:null,timerSequence:0,checkTimers:function(a){for(var b=this.timerList,c=b.length-1;0<=c;)b[c].remove||b[c].checkTask(a),c--},ensureTimerTask:function(a){this.hasTimer(a)||this.timerList.push(a);return this},hasTimer:function(a){for(var b=this.timerList,c=b.length-1;0<=c;){if(b[c]===a)return!0;c--}return!1},
createTimer:function(a,b,c,d,e,f){a=(new CAAT.Foundation.Timer.TimerTask).create(a,b,c,d,e);a.taskId=this.timerSequence++;a.sceneTime=f.time;a.owner=this;a.scene=f;this.timerList.push(a);return a},removeExpiredTimers:function(){var a,b=this.timerList;for(a=0;a<b.length;a++)b[a].remove&&b.splice(a,1)}}});
CAAT.Module({defines:"CAAT.Foundation.UI.Layout.LayoutManager",aliases:["CAAT.UI.LayoutManager"],depends:["CAAT.Behavior.Interpolator"],constants:{AXIS:{X:0,Y:1},ALIGNMENT:{LEFT:0,RIGHT:1,CENTER:2,TOP:3,BOTTOM:4,JUSTIFY:5}},extendsWith:function(){return{__init:function(){this.newChildren=[];this.padding={left:2,right:2,top:2,bottom:2};return this},newElementInterpolator:(new CAAT.Behavior.Interpolator).createElasticOutInterpolator(1.1,.7),moveElementInterpolator:(new CAAT.Behavior.Interpolator).createExponentialOutInterpolator(2),
padding:null,invalid:!0,hgap:2,vgap:2,animated:!1,newChildren:null,setAnimated:function(a){this.animated=a;return this},setHGap:function(a){this.hgap=a;this.invalidateLayout();return this},setVGap:function(a){this.vgap=a;this.invalidateLayout();return this},setAllPadding:function(a){this.padding.left=a;this.padding.right=a;this.padding.top=a;this.padding.bottom=a;this.invalidateLayout();return this},setPadding:function(a,b,c,d){this.padding.left=a;this.padding.right=b;this.padding.top=c;this.padding.bottom=
d;this.invalidateLayout();return this},addChild:function(a,b){this.newChildren.push(a)},removeChild:function(a){},doLayout:function(a){this.newChildren=[];this.invalid=!1},invalidateLayout:function(a){this.invalid=!0},getMinimumLayoutSize:function(a){},getPreferredLayoutSize:function(a){},isValid:function(){return!this.invalid},isInvalidated:function(){return this.invalid}}}});
CAAT.Module({defines:"CAAT.Foundation.UI.Layout.BoxLayout",aliases:["CAAT.UI.BoxLayout"],depends:["CAAT.Foundation.UI.Layout.LayoutManager","CAAT.Math.Dimension"],extendsClass:"CAAT.Foundation.UI.Layout.LayoutManager",extendsWith:function(){return{axis:CAAT.Foundation.UI.Layout.LayoutManager.AXIS.Y,valign:CAAT.Foundation.UI.Layout.LayoutManager.ALIGNMENT.CENTER,halign:CAAT.Foundation.UI.Layout.LayoutManager.ALIGNMENT.CENTER,setAxis:function(a){this.axis=a;this.invalidateLayout();return this},setHorizontalAlignment:function(a){this.halign=
a;this.invalidateLayout();return this},setVerticalAlignment:function(a){this.valign=a;this.invalidateLayout();return this},doLayout:function(a){this.axis===CAAT.Foundation.UI.Layout.LayoutManager.AXIS.Y?this.doLayoutVertical(a):this.doLayoutHorizontal(a);CAAT.Foundation.UI.Layout.BoxLayout.superclass.doLayout.call(this,a)},doLayoutHorizontal:function(a){var b=0,c=0,d;var e=0;for(d=a.getNumChildren();e<d;e+=1){var f=a.getChildAt(e);!f.preventLayout&&f.isVisible()&&f.isInAnimationFrame(CAAT.getCurrentSceneTime())&&
(c<f.height&&(c=f.height),b+=f.width,0<e&&(b+=this.hgap))}switch(this.halign){case CAAT.Foundation.UI.Layout.LayoutManager.ALIGNMENT.LEFT:c=this.padding.left;break;case CAAT.Foundation.UI.Layout.LayoutManager.ALIGNMENT.RIGHT:c=a.width-b-this.padding.right;break;default:c=(a.width-b)/2}e=0;for(d=a.getNumChildren();e<d;e+=1)if(f=a.getChildAt(e),!f.preventLayout&&f.isVisible()&&f.isInAnimationFrame(CAAT.getCurrentSceneTime())){switch(this.valign){case CAAT.Foundation.UI.Layout.LayoutManager.ALIGNMENT.TOP:b=
this.padding.top;break;case CAAT.Foundation.UI.Layout.LayoutManager.ALIGNMENT.BOTTOM:b=a.height-this.padding.bottom-f.height;break;default:b=(a.height-f.height)/2}this.__setActorPosition(f,c,b);c+=f.width+this.hgap}},__setActorPosition:function(a,b,c){this.animated?-1!==this.newChildren.indexOf(a)?(a.setPosition(b,c),a.setScale(0,0),a.scaleTo(1,1,500,0,.5,.5,this.newElementInterpolator)):a.moveTo(b,c,500,0,this.moveElementInterpolator):a.setPosition(b,c)},doLayoutVertical:function(a){var b=0,c=0,
d;var e=0;for(d=a.getNumChildren();e<d;e+=1){var f=a.getChildAt(e);!f.preventLayout&&f.isVisible()&&f.isInAnimationFrame(CAAT.getCurrentSceneTime())&&(b<f.width&&(b=f.width),c+=f.height,0<e&&(c+=this.vgap))}switch(this.valign){case CAAT.Foundation.UI.Layout.LayoutManager.ALIGNMENT.TOP:b=this.padding.top;break;case CAAT.Foundation.UI.Layout.LayoutManager.ALIGNMENT.BOTTOM:b=a.height-c-this.padding.bottom;break;default:b=(a.height-c)/2}e=0;for(d=a.getNumChildren();e<d;e+=1)if(f=a.getChildAt(e),!f.preventLayout&&
f.isVisible()&&f.isInAnimationFrame(CAAT.getCurrentSceneTime())){switch(this.halign){case CAAT.Foundation.UI.Layout.LayoutManager.ALIGNMENT.LEFT:c=this.padding.left;break;case CAAT.Foundation.UI.Layout.LayoutManager.ALIGNMENT.RIGHT:c=a.width-this.padding.right-f.width;break;default:c=(a.width-f.width)/2}this.__setActorPosition(f,c,b);b+=f.height+this.vgap}},getPreferredLayoutSize:function(a){var b=new CAAT.Math.Dimension,c=0,d=0,e;var f=0;for(e=a.getNumChildren();f<e;f+=1){var g=a.getChildAt(f);!g.preventLayout&&
g.isVisible()&&g.isInAnimationFrame(CAAT.getCurrentSceneTime())&&(g=g.getPreferredSize(),d<g.height&&(d=g.height),c+=g.width)}b.width=c;b.height=d;return b},getMinimumLayoutSize:function(a){var b=new CAAT.Math.Dimension,c=0,d=0,e;var f=0;for(e=a.getNumChildren();f<e;f+=1){var g=a.getChildAt(f);!g.preventLayout&&g.isVisible()&&g.isInAnimationFrame(CAAT.getCurrentSceneTime())&&(g=g.getMinimumSize(),d<g.height&&(d=g.height),c+=g.width)}b.width=c;b.height=d;return b}}}});
CAAT.Module({defines:"CAAT.Foundation.UI.Layout.BorderLayout",aliases:["CAAT.UI.BorderLayout"],depends:["CAAT.Foundation.UI.Layout.LayoutManager","CAAT.Math.Dimension"],extendsClass:"CAAT.Foundation.UI.Layout.LayoutManager",extendsWith:{__init:function(){this.__super();return this},left:null,right:null,top:null,bottom:null,center:null,addChild:function(a,b){"undefined"===typeof b&&(b="center");CAAT.Foundation.UI.Layout.BorderLayout.superclass.addChild.call(this,a,b);"left"===b?this.left=a:"right"===
b?this.right=a:"top"===b?this.top=a:"bottom"===b?this.bottom=a:this.center=a},removeChild:function(a){this.center===a?this.center=null:this.left===a?this.left=null:this.right===a?this.right=null:this.top===a?this.top=null:this.bottom===a&&(this.bottom=null)},__getChild:function(a){if("center"===a)return this.center;if("left"===a)return this.left;if("right"===a)return this.right;if("top"===a)return this.top;if("bottom"===a)return this.bottom},getMinimumLayoutSize:function(a){var b;a=new CAAT.Math.Dimension;
null!=(b=this.__getChild("right"))&&(b=b.getMinimumSize(),a.width+=b.width+this.hgap,a.height=Math.max(b.height,a.height));null!=(b=this.__getChild("left"))&&(b=b.getMinimumSize(),a.width+=b.width+this.hgap,a.height=Math.max(b.height,a.height));null!=(b=this.__getChild("center"))&&(b=b.getMinimumSize(),a.width+=b.width,a.height=Math.max(b.height,a.height));null!=(b=this.__getChild("top"))&&(b=b.getMinimumSize(),a.width=Math.max(b.width,a.width),a.height+=b.height+this.vgap);null!=(b=this.__getChild("bottom"))&&
(b=b.getMinimumSize(),a.width=Math.max(b.width,a.width),a.height+=b.height+this.vgap);a.width+=this.padding.left+this.padding.right;a.height+=this.padding.top+this.padding.bottom;return a},getPreferredLayoutSize:function(a){var b;a=new CAAT.Dimension;null!=(b=this.__getChild("left"))&&(b=b.getPreferredSize(),a.width+=b.width+this.hgap,a.height=Math.max(b.height,a.height));null!=(b=this.__getChild("right"))&&(b=b.getPreferredSize(),a.width+=b.width+this.hgap,a.height=Math.max(b.height,a.height));null!=
(b=this.__getChild("center"))&&(b=b.getPreferredSize(),a.width+=b.width,a.height=Math.max(b.height,a.height));null!=(b=this.__getChild("top"))&&(b=b.getPreferredSize(),a.width=Math.max(b.width,a.width),a.height+=b.height+this.vgap);null!=(b=this.__getChild("bottom"))&&(b=b.getPreferredSize(),a.width=Math.max(b.width,a.width),a.height+=b.height+this.vgap);a.width+=this.padding.left+this.padding.right;a.height+=this.padding.top+this.padding.bottom;return a},doLayout:function(a){var b=this.padding.top,
c=a.height-this.padding.bottom,d=this.padding.left,e=a.width-this.padding.right,f;if(null!=(f=this.__getChild("top"))){f.setSize(e-d,f.height);var g=f.getPreferredSize();f.setBounds(d,b,e-d,g.height);b+=g.height+this.vgap}null!=(f=this.__getChild("bottom"))&&(f.setSize(e-d,f.height),g=f.getPreferredSize(),f.setBounds(d,c-g.height,e-d,g.height),c-=g.height+this.vgap);null!=(f=this.__getChild("right"))&&(f.setSize(f.width,c-b),g=f.getPreferredSize(),f.setBounds(e-g.width,b,g.width,c-b),e-=g.width+this.hgap);
null!=(f=this.__getChild("left"))&&(f.setSize(f.width,c-b),g=f.getPreferredSize(),f.setBounds(d,b,g.width,c-b),d+=g.width+this.hgap);null!=(f=this.__getChild("center"))&&f.setBounds(d,b,e-d,c-b);CAAT.Foundation.UI.Layout.BorderLayout.superclass.doLayout.call(this,a)}}});
CAAT.Module({defines:"CAAT.Foundation.UI.Layout.GridLayout",aliases:["CAAT.UI.GridLayout"],depends:["CAAT.Foundation.UI.Layout.LayoutManager","CAAT.Math.Dimension"],extendsClass:"CAAT.Foundation.UI.Layout.LayoutManager",extendsWith:{__init:function(a,b){this.__super();this.rows=a;this.columns=b;return this},rows:0,columns:2,doLayout:function(a){for(var b=[],c=0;c<a.getNumChildren();c++){var d=a.getChildAt(c);!d.preventLayout&&d.isVisible()&&d.isInAnimationFrame(CAAT.getCurrentSceneTime())&&b.push(d)}var e=
b.length;if(0!==e.length){var f=this.rows,g=this.columns;0<f?g=Math.floor((e+f-1)/f):f=Math.floor((e+g-1)/g);c=(g-1)*this.hgap;d=a.width-(this.padding.left+this.padding.right);e=Math.floor((d-c)/g);var h=(f-1)*this.vgap,k=a.height-(this.padding.top+this.padding.bottom),n=Math.floor((k-h)/f);h=Math.floor((k-(n*f+h))/2);k=0;for(var m=this.padding.left+Math.floor((d-(e*g+c))/2);k<g;k++,m+=e+this.hgap)for(var p=0,r=this.padding.top+h;p<f;p++,r+=n+this.vgap)if(c=p*g+k,c<b.length&&(d=b[c],!d.preventLayout&&
d.isVisible()&&d.isInAnimationFrame(CAAT.getCurrentSceneTime())))if(!this.animated)d.setBounds(m+(e-d.width)/2,r,e,n);else if(d.width!==e||d.height!==n)d.setSize(e,n),-1!==this.newChildren.indexOf(d)?(d.setPosition(m+(e-d.width)/2,r),d.setScale(.01,.01),d.scaleTo(1,1,500,0,.5,.5,this.newElementInterpolator)):d.moveTo(m+(e-d.width)/2,r,500,0,this.moveElementInterpolator);CAAT.Foundation.UI.Layout.GridLayout.superclass.doLayout.call(this,a)}},getMinimumLayoutSize:function(a){var b=this.rows,c=this.columns,
d=a.getNumChildren(),e=0,f=0,g;0<b?c=Math.ceil((d+b-1)/b):b=Math.ceil((d+c-1)/c);for(g=0;g<d;g+=1){var h=a.getChildAt(g);!h.preventLayout&&h.isVisible()&&h.isInAnimationFrame(CAAT.getCurrentSceneTime())&&(h=h.getMinimumSize(),e<h.width&&(e=h.width),f<h.height&&(f=h.height))}return new CAAT.Math.Dimension(this.padding.left+this.padding.right+c*e+(c-1)*this.hgap,this.padding.top+this.padding.bottom+b*f+(b-1)*this.vgap)},getPreferredLayoutSize:function(a){var b=this.rows,c=this.columns,d=a.getNumChildren(),
e=0,f=0,g;0<b?c=Math.ceil((d+b-1)/b):b=Math.ceil((d+c-1)/c);for(g=0;g<d;g+=1){var h=a.getChildAt(g);!h.preventLayout&&h.isVisible()&&h.isInAnimationFrame(CAAT.getCurrentSceneTime())&&(h=h.getPreferredSize(),e<h.width&&(e=h.width),f<h.height&&(f=h.height))}return new CAAT.Math.Dimension(this.padding.left+this.padding.right+c*e+(c-1)*this.hgap,this.padding.top+this.padding.bottom+b*f+(b-1)*this.vgap)}}});
CAAT.Module({defines:"CAAT.Foundation.SpriteImageHelper",extendsWith:{__init:function(a,b,c,d,e,f){this.x=parseFloat(a);this.y=parseFloat(b);this.width=parseFloat(c);this.height=parseFloat(d);this.setGL(a/e,b/f,(a+c-1)/e,(b+d-1)/f);return this},x:0,y:0,width:0,height:0,u:0,v:0,u1:0,v1:0,setGL:function(a,b,c,d){this.u=a;this.v=b;this.u1=c;this.v1=d;return this}}});
CAAT.Module({defines:"CAAT.Foundation.SpriteImageAnimationHelper",extendsWith:function(){return{__init:function(a,b,c){this.animation=a;this.time=b;this.onEndPlayCallback=c;return this},animation:null,time:0,onEndPlayCallback:null}}});
CAAT.Module({defines:"CAAT.Foundation.SpriteImage",aliases:["CAAT.SpriteImage"],depends:["CAAT.Foundation.SpriteImageHelper","CAAT.Foundation.SpriteImageAnimationHelper","CAAT.Math.Rectangle"],constants:{TR_NONE:0,TR_FLIP_HORIZONTAL:1,TR_FLIP_VERTICAL:2,TR_FLIP_ALL:3,TR_FIXED_TO_SIZE:4,TR_FIXED_WIDTH_TO_SIZE:6,TR_TILE:5},extendsWith:function(){return{__init:function(){this.paint=this.paintN;this.setAnimationImageIndex([0]);this.mapInfo={};this.animationsMap={};3===arguments.length&&this.initialize.apply(this,
arguments);return this},animationImageIndex:null,prevAnimationTime:-1,changeFPS:1E3,transformation:0,spriteIndex:0,prevIndex:0,currentAnimation:null,image:null,rows:1,columns:1,width:0,height:0,singleWidth:0,singleHeight:0,scaleX:1,scaleY:1,offsetX:0,offsetY:0,parentOffsetX:0,parentOffsetY:0,ownerActor:null,mapInfo:null,map:null,animationsMap:null,callback:null,fontScale:1,getOwnerActor:function(){return this.ownerActor},addAnimation:function(a,b,c,d){this.animationsMap[a]=new CAAT.Foundation.SpriteImageAnimationHelper(b,
c,d);return this},setAnimationEndCallback:function(a){this.callback=a},playAnimation:function(a){if(a===this.currentAnimation)return this;var b=this.animationsMap[a];if(!b)return this;this.currentAnimation=a;this.setAnimationImageIndex(b.animation);this.changeFPS=b.time;this.callback=b.onEndPlayCallback;return this},setOwner:function(a){this.ownerActor=a;return this},getRows:function(){return this.rows},getColumns:function(){return this.columns},getWidth:function(){return this.mapInfo[this.spriteIndex].width},
getHeight:function(){return this.mapInfo[this.spriteIndex].height},getWrappedImageWidth:function(){return this.image.width},getWrappedImageHeight:function(){return this.image.height},getRef:function(){var a=new CAAT.Foundation.SpriteImage;a.image=this.image;a.rows=this.rows;a.columns=this.columns;a.width=this.width;a.height=this.height;a.singleWidth=this.singleWidth;a.singleHeight=this.singleHeight;a.mapInfo=this.mapInfo;a.offsetX=this.offsetX;a.offsetY=this.offsetY;a.scaleX=this.scaleX;a.scaleY=
this.scaleY;a.animationsMap=this.animationsMap;a.parentOffsetX=this.parentOffsetX;a.parentOffsetY=this.parentOffsetY;a.scaleFont=this.scaleFont;return a},setOffsetX:function(a){this.offsetX=a;return this},setOffsetY:function(a){this.offsetY=a;return this},setOffset:function(a,b){this.offsetX=a;this.offsetY=b;return this},initialize:function(a,b,c){isString(a)&&(a=CAAT.currentDirector.getImage(a));this.parentOffsetY=this.parentOffsetX=0;this.rows=b;this.columns=c;if(a instanceof CAAT.Foundation.SpriteImage||
a instanceof CAAT.SpriteImage){this.image=a.image;var d=a.mapInfo[0];this.width=d.width;this.height=d.height;this.parentOffsetX=d.x;this.parentOffsetY=d.y;this.width=a.mapInfo[0].width;this.height=a.mapInfo[0].height}else this.image=a,this.width=a.width,this.height=a.height,this.mapInfo={};this.singleWidth=Math.floor(this.width/c);this.singleHeight=Math.floor(this.height/b);if(a.__texturePage){a.__du=this.singleWidth/a.__texturePage.width;a.__dv=this.singleHeight/a.__texturePage.height;var e=this.singleWidth;
var f=this.singleHeight;var g=this.columns;a.inverted&&(d=e,e=f,f=d,g=this.rows);a=this.image.__tx;var h=this.image.__ty,k=this.image.__texturePage;for(d=0;d<b*c;d++){var n=a+(d%g>>0)*e;var m=h+(d/g>>0)*f,p=n+e,r=m+f;n=(new CAAT.Foundation.SpriteImageHelper(n,m,p-n,r-m,k.width,k.height)).setGL(n/k.width,m/k.height,p/k.width,r/k.height);this.mapInfo[d]=n}}else for(d=0;d<b*c;d++)e=(d%this.columns|0)*this.singleWidth+this.parentOffsetX,f=(d/this.columns|0)*this.singleHeight+this.parentOffsetY,n=new CAAT.Foundation.SpriteImageHelper(e,
f,this.singleWidth,this.singleHeight,a.width,a.height),this.mapInfo[d]=n;return this},copy:function(a){this.initialize(a,1,1);this.mapInfo=a.mapInfo;return this},paintTiled:function(a,b,c,d){b=this.mapInfo[this.spriteIndex];c=new CAAT.Math.Rectangle;this.ownerActor.AABB.intersect(a.AABB,c);var e=this.getWidth(),f=this.getHeight();d=(this.offsetX-this.ownerActor.x)%e;0<d&&(d-=e);var g=(this.offsetY-this.ownerActor.y)%f;0<g&&(g-=f);e=((c.width-d)/e>>0)+1;f=((c.height-g)/f>>0)+1;var h,k=a.ctx;for(a=
0;a<f;a++)for(h=0;h<e;h++)k.drawImage(this.image,b.x,b.y,b.width,b.height,c.x-this.ownerActor.x+d+h*b.width>>0,c.y-this.ownerActor.y+g+a*b.height>>0,b.width,b.height)},paintInvertedH:function(a,b,c,d){b=this.mapInfo[this.spriteIndex];a=a.ctx;a.save();a.translate((c|0)+b.width,d|0);a.scale(-1,1);a.drawImage(this.image,b.x,b.y,b.width,b.height,this.offsetX>>0,this.offsetY>>0,b.width,b.height);a.restore();return this},paintInvertedV:function(a,b,c,d){b=this.mapInfo[this.spriteIndex];a=a.ctx;a.save();
a.translate(c|0,d+b.height|0);a.scale(1,-1);a.drawImage(this.image,b.x,b.y,b.width,b.height,this.offsetX>>0,this.offsetY>>0,b.width,b.height);a.restore();return this},paintInvertedHV:function(a,b,c,d){b=this.mapInfo[this.spriteIndex];a=a.ctx;a.save();a.translate(c|0,d+b.height|0);a.scale(1,-1);a.translate(b.width,0);a.scale(-1,1);a.drawImage(this.image,b.x,b.y,b.width,b.height,this.offsetX>>0,this.offsetY>>0,b.width,b.height);a.restore();return this},paintN:function(a,b,c,d){b=this.mapInfo[this.spriteIndex];
a.ctx.drawImage(this.image,b.x,b.y,b.width,b.height,this.offsetX+c>>0,this.offsetY+d>>0,b.width,b.height);return this},paintAtRect:function(a,b,c,d,e,f){b=this.mapInfo[this.spriteIndex];a.ctx.drawImage(this.image,b.x,b.y,b.width,b.height,this.offsetX+c>>0,this.offsetY+d>>0,e,f);return this},paintScaledWidth:function(a,b,c,d){b=this.mapInfo[this.spriteIndex];a.ctx.drawImage(this.image,b.x,b.y,b.width,b.height,this.offsetX+c>>0,this.offsetY+d>>0,this.ownerActor.width,b.height);return this},paintChunk:function(a,
b,c,d,e,f,g){a.drawImage(this.image,d,e,f,g,b,c,f,g)},paintTile:function(a,b,c,d){b=this.mapInfo[b];a.drawImage(this.image,b.x,b.y,b.width,b.height,this.offsetX+c>>0,this.offsetY+d>>0,b.width,b.height);return this},paintScaled:function(a,b,c,d){b=this.mapInfo[this.spriteIndex];a.ctx.drawImage(this.image,b.x,b.y,b.width,b.height,this.offsetX+c>>0,this.offsetY+d>>0,this.ownerActor.width,this.ownerActor.height);return this},getCurrentSpriteImageCSSPosition:function(){var a=this.mapInfo[this.spriteIndex];
return""+-(a.x+this.parentOffsetX-this.offsetX)+"px "+-(a.y+this.parentOffsetY-this.offsetY)+"px "+(this.ownerActor.transformation===CAAT.Foundation.SpriteImage.TR_TILE?"repeat":"no-repeat")},getNumImages:function(){return this.rows*this.columns},setUV:function(a,b){var c=this.image;if(c.__texturePage){var d=b,e=this.mapInfo[this.spriteIndex],f=e.u,g=e.v,h=e.u1;e=e.v1;if(this.offsetX||this.offsetY)f=c.__texturePage,g=-this.offsetY/f.height,h=(this.ownerActor.width-this.offsetX)/f.width,e=(this.ownerActor.height-
this.offsetY)/f.height,f=-this.offsetX/f.width+c.__u,g+=c.__v,h+=c.__u,e+=c.__v;c.inverted?(a[d++]=h,a[d++]=g,a[d++]=h,a[d++]=e,a[d++]=f,a[d++]=e,a[d++]=f,a[d++]=g):(a[d++]=f,a[d++]=g,a[d++]=h,a[d++]=g,a[d++]=h,a[d++]=e,a[d++]=f,a[d++]=e)}},setChangeFPS:function(a){this.changeFPS=a;return this},setSpriteTransformation:function(a){this.transformation=a;var b=CAAT.Foundation.SpriteImage;switch(a){case b.TR_FLIP_HORIZONTAL:this.paint=this.paintInvertedH;break;case b.TR_FLIP_VERTICAL:this.paint=this.paintInvertedV;
break;case b.TR_FLIP_ALL:this.paint=this.paintInvertedHV;break;case b.TR_FIXED_TO_SIZE:this.paint=this.paintScaled;break;case b.TR_FIXED_WIDTH_TO_SIZE:this.paint=this.paintScaledWidth;break;case b.TR_TILE:this.paint=this.paintTiled;break;default:this.paint=this.paintN}this.ownerActor.invalidate();return this},resetAnimationTime:function(){this.prevAnimationTime=-1;return this},setAnimationImageIndex:function(a){this.animationImageIndex=a;this.spriteIndex=a[0];this.prevAnimationTime=-1;return this},
setSpriteIndex:function(a){this.spriteIndex=a;return this},setSpriteIndexAtTime:function(a){if(1<this.animationImageIndex.length){if(-1===this.prevAnimationTime)this.prevAnimationTime=a,this.spriteIndex=this.animationImageIndex[0],this.prevIndex=0;else{var b=a-this.prevAnimationTime;b/=this.changeFPS;b%=this.animationImageIndex.length;b=Math.floor(b);b<this.prevIndex&&this.callback&&this.callback(this,a);this.prevIndex=b;this.spriteIndex=this.animationImageIndex[b]}this.ownerActor.invalidate()}},
getMapInfo:function(a){return this.mapInfo[a]},initializeFromMap:function(a,b){this.initialize(a,1,1);var c,d=0;for(c in b){var e=b[c];e=new CAAT.Foundation.SpriteImageHelper(parseFloat(e.x)+this.parentOffsetX,parseFloat(e.y)+this.parentOffsetY,parseFloat(e.width),parseFloat(e.height),a.width,a.height);this.mapInfo[c]=e;d||this.setAnimationImageIndex([c]);d++}return this},addElement:function(a,b){var c=new CAAT.Foundation.SpriteImageHelper(parseFloat(b.x)+this.parentOffsetX,parseFloat(b.y)+this.parentOffsetY,
parseFloat(b.width),parseFloat(b.height),this.image.width,this.image.height);c.xoffset="undefined"===typeof b.xoffset?0:parseFloat(b.xoffset);c.yoffset="undefined"===typeof b.yoffset?0:parseFloat(b.yoffset);c.xadvance="undefined"===typeof b.xadvance?b.width:parseFloat(b.xadvance);this.mapInfo[a]=c;return this},initializeAsGlyphDesigner:function(a,b){this.initialize(a,1,1);var c,d=0;for(c in b){var e=b[c];var f=new CAAT.Foundation.SpriteImageHelper(parseFloat(e.x)+this.parentOffsetX,parseFloat(e.y)+
this.parentOffsetX,parseFloat(e.width),parseFloat(e.height),a.width,a.height);f.xoffset="undefined"===typeof e.xoffset?0:e.xoffset;f.yoffset="undefined"===typeof e.yoffset?0:e.yoffset;f.xadvance="undefined"===typeof e.xadvance?e.width:e.xadvance;this.mapInfo[c]=f;d||this.setAnimationImageIndex([c]);d++}return this},initializeAsFontMap:function(a,b){this.initialize(a,1,1);for(var c,d=0,e=0;e<b.length;e++){var f=b[e];c=new CAAT.Foundation.SpriteImageHelper(parseFloat(d)+this.parentOffsetX,0+this.parentOffsetY,
parseFloat(f.width),a.height,a.width,a.height);c.xoffset=0;c.yoffset=0;c.xadvance=f.width;d+=f.width;this.mapInfo[b[e].c]=c;e||this.setAnimationImageIndex([b[e].c])}return this},initializeAsMonoTypeFontMap:function(a,b){for(var c=[],d=b.split(""),e=a.width/d.length>>0,f=0;f<d.length;f++)c.push({c:d[f],width:e});return this.initializeAsFontMap(a,c)},stringWidth:function(a){var b,c=0,d;var e=0;for(b=a.length;e<b;e++)(d=this.mapInfo[a.charAt(e)])&&(c+=d.xadvance*this.fontScale);return c},stringHeight:function(){if(this.fontHeight)return this.fontHeight*
this.fontScale;var a=0,b;for(b in this.mapInfo){var c=this.mapInfo[b];c=c.height+c.yoffset;c>a&&(a=c)}this.fontHeight=a;return this.fontHeight*this.fontScale},drawText:function(a,b,c,d){var e,f;for(e=0;e<a.length;e++)if(f=this.mapInfo[a.charAt(e)]){var g=f.width;0<g&&0<f.height&&b.drawImage(this.image,f.x,f.y,g,f.height,c+f.xoffset*this.fontScale,d+f.yoffset*this.fontScale,g*this.fontScale,f.height*this.fontScale);c+=f.xadvance*this.fontScale}},getFontData:function(){var a=.8*this.stringHeight()>>
0;return{height:this.stringHeight(),ascent:a,descent:this.stringHeight()-a}}}}});
CAAT.Module({defines:"CAAT.Foundation.Actor",aliases:["CAAT.Actor"],depends:"CAAT.Math.Dimension CAAT.Event.AnimationLoop CAAT.Foundation.SpriteImage CAAT.Core.Constants CAAT.Behavior.PathBehavior CAAT.Behavior.RotateBehavior CAAT.Behavior.ScaleBehavior CAAT.Behavior.Scale1Behavior CAAT.PathUtil.LinearPath CAAT.Event.AnimationLoop".split(" "),constants:{ANCHOR_CENTER:0,ANCHOR_TOP:1,ANCHOR_BOTTOM:2,ANCHOR_LEFT:3,ANCHOR_RIGHT:4,ANCHOR_TOP_LEFT:5,ANCHOR_TOP_RIGHT:6,ANCHOR_BOTTOM_LEFT:7,ANCHOR_BOTTOM_RIGHT:8,
ANCHOR_CUSTOM:9,CACHE_NONE:0,CACHE_SIMPLE:1,CACHE_DEEP:2},extendsWith:function(){var a=0;return{__init:function(){this.behaviorList=[];this.lifecycleListenerList=[];this.AABB=new CAAT.Math.Rectangle;this.viewVertices=[new CAAT.Math.Point(0,0,0),new CAAT.Math.Point(0,0,0),new CAAT.Math.Point(0,0,0),new CAAT.Math.Point(0,0,0)];this.scaleAnchor=CAAT.Foundation.Actor.ANCHOR_CENTER;this.modelViewMatrix=new CAAT.Math.Matrix;this.worldModelViewMatrix=new CAAT.Math.Matrix;this.resetTransform();this.setScale(1,
1);this.setRotation(0);this.id=a++;return this},__super:null,lifecycleListenerList:null,behaviorList:null,parent:null,x:0,y:0,width:0,height:0,preferredSize:null,minimumSize:null,start_time:0,duration:Number.MAX_VALUE,clip:!1,clipPath:null,tAnchorX:0,tAnchorY:0,scaleX:1,scaleY:1,scaleTX:.5,scaleTY:.5,scaleAnchor:0,rotationAngle:0,rotationY:.5,rotationX:.5,alpha:1,isGlobalAlpha:!1,frameAlpha:1,expired:!1,discardable:!1,pointed:!1,mouseEnabled:!0,visible:!0,fillStyle:null,strokeStyle:null,time:0,AABB:null,
viewVertices:null,inFrame:!1,dirty:!0,wdirty:!0,oldX:-1,oldY:-1,modelViewMatrix:null,worldModelViewMatrix:null,modelViewMatrixI:null,worldModelViewMatrixI:null,glEnabled:!1,backgroundImage:null,id:null,size_active:1,size_total:1,__d_ax:-1,__d_ay:-1,gestureEnabled:!1,invalid:!0,cached:0,preventLayout:!1,isAA:!0,setPreventLayout:function(a){this.preventLayout=a;return this},invalidateLayout:function(){this.parent&&!this.parent.layoutInvalidated&&this.parent.invalidateLayout();return this},__validateLayout:function(){},
setPreferredSize:function(a,c){this.preferredSize||(this.preferredSize=new CAAT.Math.Dimension);this.preferredSize.width=a;this.preferredSize.height=c;return this},getPreferredSize:function(){return this.preferredSize?this.preferredSize:this.getMinimumSize()},setMinimumSize:function(a,c){this.minimumSize||(this.minimumSize=new CAAT.Math.Dimension);this.minimumSize.width=a;this.minimumSize.height=c;return this},getMinimumSize:function(){return this.minimumSize?this.minimumSize:new CAAT.Math.Dimension(this.width,
this.height)},create:function(){return this},moveTo:function(a,c,d,e,f,g){if(a!==this.x||c!==this.y){var b=this.getBehavior("__moveTo");b||(b=(new CAAT.Behavior.PathBehavior).setId("__moveTo").setValues(new CAAT.PathUtil.LinearPath),this.addBehavior(b));b.path.setInitialPosition(this.x,this.y).setFinalPosition(a,c);b.setDelayTime(e?e:0,d);f&&b.setInterpolator(f);g&&(b.lifecycleListenerList=[],b.addListener({behaviorExpired:function(a,b,c){g(a,b,c)}}));return this}},rotateTo:function(a,c,d,e,f,g){if(a!==
this.rotationAngle){var b=this.getBehavior("__rotateTo");b||(b=(new CAAT.Behavior.RotateBehavior).setId("__rotateTo").setValues(0,0,.5,.5),this.addBehavior(b));b.setValues(this.rotationAngle,a,e,f).setDelayTime(d?d:0,c);g&&b.setInterpolator(g);return this}},scaleTo:function(a,c,d,e,f,g,h){if(this.scaleX!==a||this.scaleY!==c){var b=this.getBehavior("__scaleTo");b||(b=(new CAAT.Behavior.ScaleBehavior).setId("__scaleTo").setValues(1,1,1,1,.5,.5),this.addBehavior(b));b.setValues(this.scaleX,a,this.scaleY,
c,f,g).setDelayTime(e?e:0,d);h&&b.setInterpolator(h);return this}},scaleXTo:function(a,c,d,e,f,g){return this.__scale1To(CAAT.Behavior.Scale1Behavior.AXIS_X,a,c,d,e,f,g)},scaleYTo:function(a,c,d,e,f,g){return this.__scale1To(CAAT.Behavior.Scale1Behavior.AXIS_Y,a,c,d,e,f,g)},__scale1To:function(a,c,d,e,f,g,h){if(!(a===CAAT.Behavior.Scale1Behavior.AXIS_X&&c===this.scaleX||a===CAAT.Behavior.Scale1Behavior.AXIS_Y&&c===this.scaleY)){var b=this.getBehavior("__scaleXTo");b||(b=(new CAAT.Behavior.Scale1Behavior).setId("__scaleXTo").setValues(1,
1,a===CAAT.Behavior.Scale1Behavior.AXIS_X,.5,.5),this.addBehavior(b));b.setValues(a?this.scaleX:this.scaleY,c,f,g).setDelayTime(e?e:0,d);h&&b.setInterpolator(h);return this}},touchStart:function(a){},touchMove:function(a){},touchEnd:function(a){},gestureStart:function(a,c,d){},gestureChange:function(a,c,d){this.gestureEnabled&&(this.setRotation(a),this.setScale(c,d));return this},gestureEnd:function(a,c,d){},isVisible:function(){return this.visible},invalidate:function(){this.invalid=!0;return this},
setGestureEnabled:function(a){this.gestureEnabled=!!a;return this},isGestureEnabled:function(){return this.gestureEnabled},getId:function(){return this.id},setId:function(a){this.id=a;return this},setParent:function(a){this.parent=a;return this},setBackgroundImage:function(a,c){if(a){a=a instanceof CAAT.Foundation.SpriteImage?a.getRef():isString(a)?(new CAAT.Foundation.SpriteImage).initialize(CAAT.currentDirector.getImage(a),1,1):(new CAAT.Foundation.SpriteImage).initialize(a,1,1);a.setOwner(this);
this.backgroundImage=a;if("undefined"===typeof c||c)this.width=a.getWidth(),this.height=a.getHeight();this.glEnabled=!0;this.invalidate()}else this.backgroundImage=null;return this},setSpriteIndex:function(a){this.backgroundImage&&(this.backgroundImage.setSpriteIndex(a),this.invalidate());return this},setBackgroundImageOffset:function(a,c){this.backgroundImage&&this.backgroundImage.setOffset(a,c);return this},setAnimationImageIndex:function(a){this.backgroundImage&&(this.backgroundImage.resetAnimationTime(),
this.backgroundImage.setAnimationImageIndex(a),this.invalidate());return this},addAnimation:function(a,c,d,e){this.backgroundImage&&this.backgroundImage.addAnimation(a,c,d,e);return this},playAnimation:function(a){this.backgroundImage&&this.backgroundImage.playAnimation(a);return this},setAnimationEndCallback:function(a){this.backgroundImage&&this.backgroundImage.setAnimationEndCallback(a);return this},resetAnimationTime:function(){this.backgroundImage&&(this.backgroundImage.resetAnimationTime(),
this.invalidate());return this},setChangeFPS:function(a){this.backgroundImage&&this.backgroundImage.setChangeFPS(a);return this},setImageTransformation:function(a){this.backgroundImage&&this.backgroundImage.setSpriteTransformation(a);return this},centerOn:function(a,c){this.setPosition(a-this.width/2,c-this.height/2);return this},centerAt:function(a,c){this.setPosition(a-this.width*(.5-this.tAnchorX),c-this.height*(.5-this.tAnchorY));return this},getTextureGLPage:function(){return this.backgroundImage.image.__texturePage},
setVisible:function(a){this.invalidate();CAAT.currentDirector&&CAAT.currentDirector.dirtyRectsEnabled&&!a&&this.visible&&CAAT.currentDirector.scheduleDirtyRect(this.AABB);a&&!this.visible&&(this.dirty=!0);this.visible=a;return this},setOutOfFrameTime:function(){this.setFrameTime(-1,0);return this},addListener:function(a){this.lifecycleListenerList.push(a);return this},removeListener:function(a){for(var b=this.lifecycleListenerList.length;b--;)if(this.lifecycleListenerList[b]===a){this.lifecycleListenerList.splice(b,
1);break}},setGlobalAlpha:function(a){this.isGlobalAlpha=a;return this},fireEvent:function(a,c){for(var b=0;b<this.lifecycleListenerList.length;b++)this.lifecycleListenerList[b].actorLifeCycleEvent(this,a,c)},setExpired:function(a){this.expired=!0;this.fireEvent("expired",a);return this},enableEvents:function(a){this.mouseEnabled=a;return this},emptyBehaviorList:function(){this.behaviorList=[];return this},setFillStyle:function(a){this.fillStyle=a;this.invalidate();return this},setStrokeStyle:function(a){this.strokeStyle=
a;this.invalidate();return this},setPaint:function(a){return this.setFillStyle(a)},setAlpha:function(a){this.alpha=a;this.invalidate();return this},resetTransform:function(){this.rotationAngle=0;this.rotationY=this.rotationX=.5;this.scaleY=this.scaleX=1;this.scaleTY=this.scaleTX=.5;this.scaleAnchor=0;this.oldY=this.oldX=-1;this.dirty=!0;return this},setFrameTime:function(a,c){this.start_time=a;this.duration=c;this.expired=!1;this.dirty=!0;return this},paint:function(a,c){if(this.backgroundImage)this.backgroundImage.paint(a,
c,0,0);else if(this.fillStyle){var b=a.ctx;b.fillStyle=this.fillStyle;b.fillRect(0,0,this.width,this.height)}},setScale:function(a,c){this.scaleX=a;this.scaleY=c;this.dirty=!0;return this},getAnchorPercent:function(a){var b=[.5,.5,.5,0,.5,1,0,.5,1,.5,0,0,1,0,0,1,1,1];return{x:b[2*a],y:b[2*a+1]}},getAnchor:function(a){var b=0,d=0,e=CAAT.Foundation.Actor;switch(a){case e.ANCHOR_CENTER:d=b=.5;break;case e.ANCHOR_TOP:b=.5;d=0;break;case e.ANCHOR_BOTTOM:b=.5;d=1;break;case e.ANCHOR_LEFT:b=0;d=.5;break;
case e.ANCHOR_RIGHT:b=1;d=.5;break;case e.ANCHOR_TOP_RIGHT:b=1;d=0;break;case e.ANCHOR_BOTTOM_LEFT:b=0;d=1;break;case e.ANCHOR_BOTTOM_RIGHT:d=b=1;break;case e.ANCHOR_TOP_LEFT:d=b=0}return{x:b,y:d}},setGlobalAnchor:function(a,c){this.scaleTX=this.rotationX=this.tAnchorX=a;this.scaleTY=this.rotationY=this.tAnchorY=c;this.dirty=!0;return this},setScaleAnchor:function(a,c){this.scaleTX=a;this.scaleTY=c;this.dirty=!0;return this},setScaleAnchored:function(a,c,d,e){this.scaleTX=d;this.scaleTY=e;this.scaleX=
a;this.scaleY=c;this.dirty=!0;return this},setRotationAnchor:function(a,c){this.rotationX=c;this.rotationY=a;this.dirty=!0;return this},setRotation:function(a){this.rotationAngle=a;this.dirty=!0;return this},setRotationAnchored:function(a,c,d){this.rotationAngle=a;this.rotationX=c;this.rotationY=d;this.dirty=!0;return this},setSize:function(a,c){this.width=a;this.height=c;this.dirty=!0;return this},setBounds:function(a,c,d,e){this.x=a;this.y=c;this.width=d;this.height=e;this.dirty=!0;return this},
setLocation:function(a,c){this.x=a;this.y=c;this.oldX=a;this.oldY=c;this.dirty=!0;return this},setPosition:function(a,c){return this.setLocation(a,c)},setPositionAnchor:function(a,c){this.tAnchorX=a;this.tAnchorY=c;return this},setPositionAnchored:function(a,c,d,e){this.setLocation(a,c);this.tAnchorX=d;this.tAnchorY=e;return this},isInAnimationFrame:function(a){return this.expired?!1:this.duration===Number.MAX_VALUE?this.start_time<=a:a>=this.start_time+this.duration?(this.expired||this.setExpired(a),
!1):this.start_time<=a&&a<this.start_time+this.duration},contains:function(a,c){return 0<=a&&0<=c&&a<this.width&&c<this.height},addBehavior:function(a){this.behaviorList.push(a);return this},removeBehaviour:function(a){for(var b=this.behaviorList,d=b.length-1;d;)if(b[d]===a){b.splice(d,1);break}return this},removeBehaviorById:function(a){for(var b=this.behaviorList,d=0;d<b.length;d++)b[d].id===a&&b.splice(d,1);return this},getBehavior:function(a){for(var b=this.behaviorList,d=0;d<b.length;d++){var e=
b[d];if(e.id===a)return e}return null},setDiscardable:function(a){this.discardable=a;return this},destroy:function(a){this.parent&&this.parent.removeChild(this);this.backgroundImage=null;this.emptyBehaviorList();this.fireEvent("destroyed",a);this.lifecycleListenerList=[]},modelToView:function(a){this.dirty&&this.setModelViewMatrix();var b=this.worldModelViewMatrix.matrix;if(a instanceof Array)for(var d=0;d<a.length;d++){var e=a[d];var f=e.x;var g=e.y;e.x=f*b[0]+g*b[1]+b[2];e.y=f*b[3]+g*b[4]+b[5]}else f=
a.x,g=a.y,a.x=f*b[0]+g*b[1]+b[2],a.y=f*b[3]+g*b[4]+b[5];return a},modelToModel:function(a,c){this.dirty&&this.setModelViewMatrix();return c.viewToModel(this.modelToView(a))},viewToModel:function(a){this.dirty&&this.setModelViewMatrix();this.worldModelViewMatrixI=this.worldModelViewMatrix.getInverse();this.worldModelViewMatrixI.transformCoord(a);return a},findActorAtPosition:function(a){if(0===this.scaleX||0===this.scaleY||!this.visible||!this.mouseEnabled||!this.isInAnimationFrame(this.time))return null;
this.modelViewMatrixI=this.modelViewMatrix.getInverse();this.modelViewMatrixI.transformCoord(a);return this.contains(a.x,a.y)?this:null},enableDrag:function(){this.ay=this.ax=0;this.asy=this.asx=1;this.screeny=this.screenx=this.ara=0;this.mouseEnter=function(a){this.__d_ay=this.__d_ax=-1;this.pointed=!0;CAAT.setCursor("move")};this.mouseExit=function(a){this.__d_ay=this.__d_ax=-1;this.pointed=!1;CAAT.setCursor("default")};this.mouseMove=function(a){};this.mouseUp=function(a){this.__d_ay=this.__d_ax=
-1};this.mouseDrag=function(a){var b=this.modelToView(new CAAT.Math.Point(a.x,a.y));this.parent.viewToModel(b);if(-1===this.__d_ax||-1===this.__d_ay)this.__d_ax=b.x,this.__d_ay=b.y,this.__d_asx=this.scaleX,this.__d_asy=this.scaleY,this.__d_ara=this.rotationAngle,this.__d_screenx=a.screenPoint.x,this.__d_screeny=a.screenPoint.y;if(a.isShiftDown()){var d=(a.screenPoint.x-this.__d_screenx)/100,e=(a.screenPoint.y-this.__d_screeny)/100;a.isAltDown()||(e=d=a=Math.max(d,e));this.setScale(d+this.__d_asx,
e+this.__d_asy)}else a.isControlDown()?this.setRotation(-Math.atan2(a.screenPoint.x-this.__d_screenx,a.screenPoint.y-this.__d_screeny)+this.__d_ara):(this.x+=b.x-this.__d_ax,this.y+=b.y-this.__d_ay);this.__d_ax=b.x;this.__d_ay=b.y};return this},disableDrag:function(){this.mouseEnter=function(a){};this.mouseExit=function(a){};this.mouseMove=function(a){};this.mouseUp=function(a){};this.mouseDrag=function(a){};return this},mouseClick:function(a){},mouseDblClick:function(a){},mouseEnter:function(a){this.pointed=
!0},mouseExit:function(a){this.pointed=!1},mouseMove:function(a){},mouseDown:function(a){},mouseUp:function(a){},mouseOut:function(a){},mouseOver:function(a){},mouseDrag:function(a){},drawScreenBoundingBox:function(a,c){if(null!==this.AABB&&this.inFrame){var b=this.AABB,e=a.ctx;e.strokeStyle=CAAT.DEBUGAABBCOLOR;e.strokeRect(.5+(b.x|0),.5+(b.y|0),b.width|0,b.height|0);CAAT.DEBUGBB&&(b=this.viewVertices,e.beginPath(),e.lineTo(b[0].x,b[0].y),e.lineTo(b[1].x,b[1].y),e.lineTo(b[2].x,b[2].y),e.lineTo(b[3].x,
b[3].y),e.closePath(),e.strokeStyle=CAAT.DEBUGBBCOLOR,e.stroke())}},animate:function(a,c){if(!this.visible)return!1;var b;if(!this.isInAnimationFrame(c))return this.inFrame=!1,this.dirty=!0,!1;if(this.x!==this.oldX||this.y!==this.oldY)this.dirty=!0,this.oldX=this.x,this.oldY=this.y;for(b=0;b<this.behaviorList.length;b++)this.behaviorList[b].apply(c,this);this.clipPath&&this.clipPath.applyBehaviors(c);this.setModelViewMatrix();if(this.dirty||this.wdirty||this.invalid)a.dirtyRectsEnabled&&a.addDirtyRect(this.AABB),
this.setScreenBounds(),a.dirtyRectsEnabled&&a.addDirtyRect(this.AABB);this.invalid=this.dirty=!1;this.inFrame=!0;this.backgroundImage&&this.backgroundImage.setSpriteIndexAtTime(c);return this.AABB.intersects(a.AABB)},setModelViewMatrix:function(){var a;this.wdirty=!1;var c=this.modelViewMatrix.matrix;if(this.dirty){var d=1;var e=a=0;var f=1;var g=this.x-this.tAnchorX*this.width;var h=this.y-this.tAnchorY*this.height;if(this.rotationAngle){var k=this.rotationX*this.width,n=this.rotationY*this.height;
g+=d*k+a*n;h+=e*k+f*n;var m=Math.cos(this.rotationAngle);var p=Math.sin(this.rotationAngle);var r=d;var q=e;d=r*m+a*p;a=-r*p+a*m;e=q*m+f*p;f=-q*p+f*m;g+=-d*k-a*n;h+=-e*k-f*n}if(1!=this.scaleX||1!=this.scaleY)m=this.scaleTX*this.width,p=this.scaleTY*this.height,g+=d*m+a*p,h+=e*m+f*p,d*=this.scaleX,a*=this.scaleY,e*=this.scaleX,f*=this.scaleY,g+=-d*m-a*p,h+=-e*m-f*p;c[0]=d;c[1]=a;c[2]=g;c[3]=e;c[4]=f;c[5]=h}if(this.parent){if(this.isAA=0===this.rotationAngle&&1===this.scaleX&&1===this.scaleY&&this.parent.isAA,
this.dirty||this.parent.wdirty)this.worldModelViewMatrix.copy(this.parent.worldModelViewMatrix),this.isAA?(d=this.worldModelViewMatrix.matrix,d[2]+=c[2],d[5]+=c[5]):this.worldModelViewMatrix.multiply(this.modelViewMatrix),this.wdirty=!0}else this.dirty&&(this.wdirty=!0),this.worldModelViewMatrix.identity(),this.isAA=0===this.rotationAngle&&1===this.scaleX&&1===this.scaleY},setScreenBounds:function(){var a=this.AABB,c=this.viewVertices;if(this.isAA){var d=this.worldModelViewMatrix.matrix;var e=d[2];
var f=d[5];var g=this.width;var h=this.height;a.x=e;a.y=f;a.x1=e+g;a.y1=f+h;a.width=g;a.height=h;CAAT.GLRENDER&&(d=c[0],d.x=e,d.y=f,d=c[1],d.x=e+g,d.y=f,d=c[2],d.x=e+g,d.y=f+h,d=c[3],d.x=e,d.y=f+h);return this}d=c[0];d.x=0;d.y=0;d=c[1];d.x=this.width;d.y=0;d=c[2];d.x=this.width;d.y=this.height;d=c[3];d.x=0;d.y=this.height;this.modelToView(this.viewVertices);e=Number.MAX_VALUE;f=-Number.MAX_VALUE;g=Number.MAX_VALUE;h=-Number.MAX_VALUE;d=c[0];d.x<e&&(e=d.x);d.x>f&&(f=d.x);d.y<g&&(g=d.y);d.y>h&&(h=d.y);
d=c[1];d.x<e&&(e=d.x);d.x>f&&(f=d.x);d.y<g&&(g=d.y);d.y>h&&(h=d.y);d=c[2];d.x<e&&(e=d.x);d.x>f&&(f=d.x);d.y<g&&(g=d.y);d.y>h&&(h=d.y);d=c[3];d.x<e&&(e=d.x);d.x>f&&(f=d.x);d.y<g&&(g=d.y);d.y>h&&(h=d.y);a.x=e;a.y=g;a.x1=f;a.y1=h;a.width=f-e;a.height=h-g;return this},paintActor:function(a,c){if(!this.visible||!a.inDirtyRect(this))return!0;var b=a.ctx;this.frameAlpha=this.parent?this.parent.frameAlpha*this.alpha:1;b.globalAlpha=this.frameAlpha;a.modelViewMatrix.transformRenderingContextSet(b);this.worldModelViewMatrix.transformRenderingContext(b);
this.clip&&(b.beginPath(),this.clipPath?this.clipPath.applyAsPath(a):b.rect(0,0,this.width,this.height),b.clip());this.paint(a,c);return!0},__paintActor:function(a,c){if(!this.visible)return!0;var b=a.ctx;this.frameAlpha=this.alpha;var e=this.worldModelViewMatrix.matrix;b.setTransform(e[0],e[3],e[1],e[4],e[2],e[5],this.frameAlpha);this.paint(a,c);return!0},paintActorGL:function(a,c){this.frameAlpha=this.parent.frameAlpha*this.alpha;if(this.glEnabled&&this.visible)if(this.glNeedsFlush(a))a.glFlush(),
this.glSetShader(a),this.__uv||(this.__uv=new Float32Array(8)),this.__vv||(this.__vv=new Float32Array(12)),this.setGLCoords(this.__vv,0),this.setUV(this.__uv,0),a.glRender(this.__vv,12,this.__uv);else{var b=a.coordsIndex;this.setGLCoords(a.coords,b);a.coordsIndex=b+12;this.setUV(a.uv,a.uvIndex);a.uvIndex+=8}},setGLCoords:function(a,c){var b=this.viewVertices;a[c++]=b[0].x;a[c++]=b[0].y;a[c++]=0;a[c++]=b[1].x;a[c++]=b[1].y;a[c++]=0;a[c++]=b[2].x;a[c++]=b[2].y;a[c++]=0;a[c++]=b[3].x;a[c++]=b[3].y;a[c]=
0},setUV:function(a,c){this.backgroundImage.setUV(a,c)},glNeedsFlush:function(a){return this.getTextureGLPage()!==a.currentTexturePage||this.frameAlpha!==a.currentOpacity?!0:!1},glSetShader:function(a){var b=this.getTextureGLPage();b!==a.currentTexturePage&&a.setGLTexturePage(b);this.frameAlpha!==a.currentOpacity&&a.setGLCurrentOpacity(this.frameAlpha)},endAnimate:function(a,c){return this},initialize:function(a){if(a)for(var b in a)this[b]=a[b];return this},setClip:function(a,c){this.clip=a;this.clipPath=
c;return this},isCached:function(){return this.cached},stopCacheAsBitmap:function(){this.cached&&(this.backgroundImage=null,this.cached=CAAT.Foundation.Actor.CACHE_NONE)},cacheAsBitmap:function(a,c){if(0>=this.width||0>=this.height)return this;a=a||0;var b=document.createElement("canvas");b.width=this.width;b.height=this.height;var e=b.getContext("2d");CAAT.Foundation.Actor.prototype.animate.call(this,CAAT.currentDirector,a);e={ctx:e,modelViewMatrix:new CAAT.Math.Matrix,worldModelViewMatrix:new CAAT.Math.Matrix,
dirtyRectsEnabled:!1,inDirtyRect:function(){return!0},AABB:new CAAT.Math.Rectangle(0,0,this.width,this.height)};var f=this.modelViewMatrix,g=this.worldModelViewMatrix;this.modelViewMatrix=new CAAT.Math.Matrix;this.worldModelViewMatrix=new CAAT.Math.Matrix;this.cached=CAAT.Foundation.Actor.CACHE_NONE;"undefined"===typeof c&&(c=CAAT.Foundation.Actor.CACHE_SIMPLE);c===CAAT.Foundation.Actor.CACHE_DEEP?(this.animate(e,a),this.paintActor(e,a)):this instanceof CAAT.Foundation.ActorContainer||this instanceof
CAAT.ActorContainer?CAAT.Foundation.ActorContainer.superclass.paintActor.call(this,e,a):(this.animate(e,a),this.paintActor(e,a));this.setBackgroundImage(b);this.cached=c;this.modelViewMatrix=f;this.worldModelViewMatrix=g;return this},resetAsButton:function(){this.actionPerformed=null;this.mouseEnter=function(){};this.mouseExit=function(){};this.mouseDown=function(){};this.mouseUp=function(){};this.mouseClick=function(){};this.mouseDrag=function(){};return this},setAsButton:function(a,c,d,e,f,g){this.setBackgroundImage(a,
!0);this.iNormal=c||0;this.iOver=d||this.iNormal;this.iPress=e||this.iNormal;this.iDisabled=f||this.iNormal;this.fnOnClick=g;this.enabled=!0;this.setSpriteIndex(c);this.setEnabled=function(a){this.enabled=a;this.setSpriteIndex(this.enabled?this.iNormal:this.iDisabled);return this};this.actionPerformed=function(a){this.enabled&&this.fnOnClick&&this.fnOnClick(this)};this.mouseEnter=function(a){this.enabled&&(this.dragging?this.setSpriteIndex(this.iPress):this.setSpriteIndex(this.iOver),CAAT.setCursor("pointer"))};
this.mouseExit=function(a){this.enabled&&(this.setSpriteIndex(this.iNormal),CAAT.setCursor("default"))};this.mouseDown=function(a){this.enabled&&this.setSpriteIndex(this.iPress)};this.mouseUp=function(a){this.enabled&&(this.setSpriteIndex(this.iNormal),this.dragging=!1)};this.mouseClick=function(a){};this.mouseDrag=function(a){this.enabled&&(this.dragging=!0)};this.setButtonImageIndex=function(a,b,c,d){this.iNormal=a||0;this.iOver=b||this.iNormal;this.iPress=c||this.iNormal;this.iDisabled=d||this.iNormal;
this.setSpriteIndex(this.iNormal);return this};return this},findActorById:function(a){return this.id===a?this:null}}}});
CAAT.Module({defines:"CAAT.Foundation.ActorContainer",aliases:["CAAT.ActorContainer"],depends:["CAAT.Foundation.Actor","CAAT.Math.Point","CAAT.Math.Rectangle"],constants:{ADDHINT:{CONFORM:1},AddHint:{CONFORM:1}},extendsClass:"CAAT.Foundation.Actor",extendsWith:function(){var a=CAAT.Foundation.Actor.CACHE_DEEP,b=CAAT.Foundation.ActorContainer.superclass,c=b.drawScreenBoundingBox,d=b.paintActor,e=b.paintActorGL,f=b.animate,g=b.findActorAtPosition,h=b.destroy;return{__init:function(a){this.__super();
this.childrenList=[];this.activeChildren=[];this.pendingChildrenList=[];"undefined"!==typeof a&&(this.addHint=a,this.boundingBox=new CAAT.Math.Rectangle);return this},childrenList:null,activeChildren:null,pendingChildrenList:null,addHint:0,boundingBox:null,runion:new CAAT.Math.Rectangle,layoutManager:null,layoutInvalidated:!0,setLayout:function(a){this.layoutManager=a;return this},setBounds:function(a,b,c,d){CAAT.Foundation.ActorContainer.superclass.setBounds.call(this,a,b,c,d);CAAT.currentDirector&&
!CAAT.currentDirector.inValidation&&this.invalidateLayout();return this},__validateLayout:function(){this.__validateTree();this.layoutInvalidated=!1},__validateTree:function(){if(this.layoutManager&&this.layoutManager.isInvalidated()){CAAT.currentDirector.inValidation=!0;this.layoutManager.doLayout(this);for(var a=0;a<this.getNumChildren();a+=1)this.getChildAt(a).__validateLayout()}},invalidateLayout:function(){this.layoutInvalidated=!0;if(this.layoutManager){this.layoutManager.invalidateLayout(this);
for(var a=0;a<this.getNumChildren();a+=1)this.getChildAt(a).invalidateLayout()}},getLayout:function(){return this.layoutManager},drawScreenBoundingBox:function(a,b){if(this.inFrame){for(var d=this.activeChildren,e=0;e<d.length;e++)d[e].drawScreenBoundingBox(a,b);c.call(this,a,b)}},emptyChildren:function(){this.childrenList=[];return this},paintActor:function(b,c){if(!this.visible)return!1;var e=b.ctx;e.save();if(!d.call(this,b,c)||this.cached===a)return!1;this.isGlobalAlpha||(this.frameAlpha=this.parent?
this.parent.frameAlpha:1);for(var f=0,g=this.activeChildren.length;f<g;++f){var h=this.activeChildren[f];h.visible&&(e.save(),h.paintActor(b,c),e.restore())}this.postPaint&&this.postPaint(b,c);e.restore();return!0},__paintActor:function(a,b){if(!this.visible)return!0;var c=a.ctx;this.frameAlpha=this.parent?this.parent.frameAlpha*this.alpha:1;var d=this.worldModelViewMatrix.matrix;c.setTransform(d[0],d[3],d[1],d[4],d[2],d[5],this.frameAlpha);this.paint(a,b);this.isGlobalAlpha||(this.frameAlpha=this.parent?
this.parent.frameAlpha:1);c=0;for(d=this.activeChildren.length;c<d;++c)this.activeChildren[c].paintActor(a,b);return!0},paintActorGL:function(a,b){var c;if(!this.visible)return!0;e.call(this,a,b);this.isGlobalAlpha||(this.frameAlpha=this.parent.frameAlpha);var d=0;for(c=this.activeChildren.length;d<c;++d){var f=this.activeChildren[d];f.paintActorGL(a,b)}},animate:function(b,c){if(!this.visible)return!1;this.activeChildren=[];if(!1===f.call(this,b,c))return!1;if(this.cached===a)return!0;this.__validateLayout();
CAAT.currentDirector.inValidation=!1;var d,e=this.pendingChildrenList;for(d=0;d<e.length;d++){var g=e[d];this.addChildImmediately(g.child,g.constraint)}this.pendingChildrenList=[];e=[];g=this.childrenList;this.size_total=this.size_active=1;for(d=0;d<g.length;d++){var h=g[d];h.time=c;this.size_total+=h.size_total;h.animate(b,c)?(this.activeChildren.push(h),this.size_active+=h.size_active):h.expired&&h.discardable&&e.push(h)}d=0;for(g=e.length;d<g;d++)h=e[d],h.destroy(c),b.dirtyRectsEnabled&&b.addDirtyRect(h.AABB);
return!0},endAnimate:function(a,b){},addChildImmediately:function(a,b){return this.addChild(a,b)},addChild:function(a,b){if(null!=a.parent)throw"adding to a container an element with parent.";a.parent=this;this.childrenList.push(a);a.dirty=!0;this.layoutManager?(this.layoutManager.addChild(a,b),this.invalidateLayout()):this.addHint===CAAT.Foundation.ActorContainer.AddHint.CONFORM&&this.recalcSize();return this},recalcSize:function(){var a=this.boundingBox;a.setEmpty();for(var b=this.childrenList,
c,d=0;d<b.length;d++)c=b[d],this.runion.setBounds(0>c.x?0:c.x,0>c.y?0:c.y,c.width,c.height),a.unionRectangle(this.runion);this.setSize(a.x1,a.y1);return this},addChildDelayed:function(a,b){this.pendingChildrenList.push({child:a,constraint:b});return this},addChildAt:function(a,b){if(0>=b)return a.parent=this,a.dirty=!0,this.childrenList.splice(0,0,a),this.invalidateLayout(),this;b>=this.childrenList.length&&(b=this.childrenList.length);a.parent=this;a.dirty=!0;this.childrenList.splice(b,0,a);this.invalidateLayout();
return this},findActorById:function(a){if(CAAT.Foundation.ActorContainer.superclass.findActorById.call(this,a))return this;for(var b=this.childrenList,c=0,d=b.length;c<d;c++){var e=b[c].findActorById(a);if(null!=e)return e}return null},findChild:function(a){var b=this.childrenList,c,d=b.length;for(c=0;c<d;c++)if(b[c]===a)return c;return-1},removeChildAt:function(a){var b=this.childrenList;return-1!==a&&0<=a&&a<this.childrenList.length?(b[a].setParent(null),a=b.splice(a,1),a[0].isVisible()&&CAAT.currentDirector.dirtyRectsEnabled&&
CAAT.currentDirector.scheduleDirtyRect(a[0].AABB),this.invalidateLayout(),a[0]):null},removeChild:function(a){a=this.findChild(a);return this.removeChildAt(a)},removeFirstChild:function(){var a=this.childrenList.shift();a.parent=null;a.isVisible()&&CAAT.currentDirector.dirtyRectsEnabled&&CAAT.currentDirector.scheduleDirtyRect(a.AABB);this.invalidateLayout();return a},removeLastChild:function(){if(this.childrenList.length){var a=this.childrenList.pop();a.parent=null;a.isVisible()&&CAAT.currentDirector.dirtyRectsEnabled&&
CAAT.currentDirector.scheduleDirtyRect(a.AABB);this.invalidateLayout();return a}return null},findActorAtPosition:function(a){if(null===g.call(this,a))return null;for(var b=this.childrenList.length-1;0<=b;b--){var c=this.childrenList[b],d=new CAAT.Math.Point(a.x,a.y,0);c=c.findActorAtPosition(d);if(null!==c)return c}return this},destroy:function(){for(var a=this.childrenList,b=a.length-1;0<=b;b--)a[b].destroy();h.call(this);return this},getNumChildren:function(){return this.childrenList.length},getNumActiveChildren:function(){return this.activeChildren.length},
getChildAt:function(a){return this.childrenList[a]},setZOrder:function(a,b){var c=this.findChild(a);if(-1!==c){var d=this.childrenList;b!==c&&(b>=d.length?(d.splice(c,1),d.push(a)):(c=d.splice(c,1),0>b?b=0:b>d.length&&(b=d.length),d.splice(b,0,c[0])),this.invalidateLayout())}}}}});
CAAT.Module({defines:"CAAT.Foundation.Scene",depends:"CAAT.Math.Point CAAT.Math.Matrix CAAT.PathUtil.Path CAAT.Behavior.GenericBehavior CAAT.Behavior.ContainerBehavior CAAT.Behavior.ScaleBehavior CAAT.Behavior.AlphaBehavior CAAT.Behavior.RotateBehavior CAAT.Behavior.PathBehavior CAAT.Foundation.ActorContainer CAAT.Foundation.Timer.TimerManager".split(" "),aliases:["CAAT.Scene"],extendsClass:"CAAT.Foundation.ActorContainer",constants:{EASE_ROTATION:1,EASE_SCALE:2,EASE_TRANSLATE:3},extendsWith:function(){return{__init:function(){this.__super();
this.timerManager=new CAAT.TimerManager;this.fillStyle=null;this.isGlobalAlpha=!0;return this},easeContainerBehaviour:null,easeContainerBehaviourListener:null,easeIn:!1,paused:!1,timerManager:null,isPaused:function(){return this.paused},setPaused:function(a){this.paused=a},createTimer:function(a,b,c,d,e){return this.timerManager.createTimer(a,b,c,d,e,this)},setTimeout:function(a,b,c,d){return this.timerManager.createTimer(this.time,a,b,c,d,this)},createAlphaBehaviour:function(a,b){var c=new CAAT.Behavior.AlphaBehavior;
c.setFrameTime(0,a);c.startAlpha=b?0:1;c.endAlpha=b?1:0;this.easeContainerBehaviour.addBehavior(c)},easeTranslationIn:function(a,b,c,d){this.easeTranslation(a,b,c,!0,d)},easeTranslationOut:function(a,b,c,d){this.easeTranslation(a,b,c,!1,d)},easeTranslation:function(a,b,c,d,e){this.easeContainerBehaviour=new CAAT.Behavior.ContainerBehavior;this.easeIn=d;var f=new CAAT.Behavior.PathBehavior;e&&f.setInterpolator(e);f.setFrameTime(0,a);1>c?c=1:4<c&&(c=4);switch(c){case CAAT.Foundation.Actor.ANCHOR_TOP:d?
(f.setPath((new CAAT.PathUtil.Path).setLinear(0,-this.height+1,0,0)),this.setPosition(0,-this.height+1)):(f.setPath((new CAAT.PathUtil.Path).setLinear(0,0,0,-this.height+1)),this.setPosition(0,0));break;case CAAT.Foundation.Actor.ANCHOR_BOTTOM:d?(f.setPath((new CAAT.PathUtil.Path).setLinear(0,this.height-1,0,0)),this.setPosition(0,this.height-1)):(f.setPath((new CAAT.PathUtil.Path).setLinear(0,0,0,this.height-1)),this.setPosition(0,0));break;case CAAT.Foundation.Actor.ANCHOR_LEFT:d?(f.setPath((new CAAT.PathUtil.Path).setLinear(-this.width+
1,0,0,0)),this.setPosition(-this.width+1,0)):(f.setPath((new CAAT.PathUtil.Path).setLinear(0,0,-this.width+1,0)),this.setPosition(0,0));break;case CAAT.Foundation.Actor.ANCHOR_RIGHT:d?(f.setPath((new CAAT.PathUtil.Path).setLinear(this.width-1,0,0,0)),this.setPosition(this.width-1,0)):(f.setPath((new CAAT.PathUtil.Path).setLinear(0,0,this.width-1,0)),this.setPosition(0,0))}b&&this.createAlphaBehaviour(a,d);this.easeContainerBehaviour.addBehavior(f);this.easeContainerBehaviour.setFrameTime(this.time,
a);this.easeContainerBehaviour.addListener(this);this.emptyBehaviorList();CAAT.Foundation.Scene.superclass.addBehavior.call(this,this.easeContainerBehaviour)},easeScaleIn:function(a,b,c,d,e){this.easeScale(a,b,c,d,!0,e);this.easeIn=!0},easeScaleOut:function(a,b,c,d,e){this.easeScale(a,b,c,d,!1,e);this.easeIn=!1},easeScale:function(a,b,c,d,e,f){this.easeContainerBehaviour=new CAAT.Behavior.ContainerBehavior;var g=0,h=0,k=0,n=0;switch(d){case CAAT.Foundation.Actor.ANCHOR_TOP_LEFT:case CAAT.Foundation.Actor.ANCHOR_TOP_RIGHT:case CAAT.Foundation.Actor.ANCHOR_BOTTOM_LEFT:case CAAT.Foundation.Actor.ANCHOR_BOTTOM_RIGHT:case CAAT.Foundation.Actor.ANCHOR_CENTER:n=
k=1;break;case CAAT.Foundation.Actor.ANCHOR_TOP:case CAAT.Foundation.Actor.ANCHOR_BOTTOM:k=g=1;h=0;n=1;break;case CAAT.Foundation.Actor.ANCHOR_LEFT:case CAAT.Foundation.Actor.ANCHOR_RIGHT:n=h=1;g=0;k=1;break;default:alert("scale anchor ?? "+d)}if(!e){var m=g;g=k;k=m;m=h;h=n;n=m}c&&this.createAlphaBehaviour(b,e);c=this.getAnchorPercent(d);a=(new CAAT.Behavior.ScaleBehavior).setFrameTime(a,b).setValues(g,k,h,n,c.x,c.y);f&&a.setInterpolator(f);this.easeContainerBehaviour.addBehavior(a);this.easeContainerBehaviour.setFrameTime(this.time,
b);this.easeContainerBehaviour.addListener(this);this.emptyBehaviorList();CAAT.Foundation.Scene.superclass.addBehavior.call(this,this.easeContainerBehaviour)},addBehavior:function(a){return this},easeRotationIn:function(a,b,c,d){this.easeRotation(a,b,c,!0,d);this.easeIn=!0},easeRotationOut:function(a,b,c,d){this.easeRotation(a,b,c,!1,d);this.easeIn=!1},easeRotation:function(a,b,c,d,e){this.easeContainerBehaviour=new CAAT.Behavior.ContainerBehavior;var f=0,g=0;c==CAAT.Foundation.Actor.ANCHOR_CENTER&&
(c=CAAT.Foundation.Actor.ANCHOR_TOP);switch(c){case CAAT.Foundation.Actor.ANCHOR_TOP:case CAAT.Foundation.Actor.ANCHOR_BOTTOM:case CAAT.Foundation.Actor.ANCHOR_LEFT:case CAAT.Foundation.Actor.ANCHOR_RIGHT:f=Math.PI*(.5>Math.random()?1:-1);break;case CAAT.Foundation.Actor.ANCHOR_TOP_LEFT:case CAAT.Foundation.Actor.ANCHOR_TOP_RIGHT:case CAAT.Foundation.Actor.ANCHOR_BOTTOM_LEFT:case CAAT.Foundation.Actor.ANCHOR_BOTTOM_RIGHT:f=Math.PI/2*(.5>Math.random()?1:-1);break;default:alert("rot anchor ?? "+c)}if(!1===
d){var h=f;f=g;g=h}b&&this.createAlphaBehaviour(a,d);b=this.getAnchorPercent(c);f=(new CAAT.Behavior.RotateBehavior).setFrameTime(0,a).setValues(f,g,b.x,b.y);e&&f.setInterpolator(e);this.easeContainerBehaviour.addBehavior(f);this.easeContainerBehaviour.setFrameTime(this.time,a);this.easeContainerBehaviour.addListener(this);this.emptyBehaviorList();CAAT.Foundation.Scene.superclass.addBehavior.call(this,this.easeContainerBehaviour)},setEaseListener:function(a){this.easeContainerBehaviourListener=a},
behaviorExpired:function(a){this.easeContainerBehaviourListener.easeEnd(this,this.easeIn)},activated:function(){},setExpired:function(a){this.expired=a},paint:function(a,b){if(this.fillStyle){var c=a.ctx;c.fillStyle=this.fillStyle;c.fillRect(0,0,this.width,this.height)}},findActorAtPosition:function(a){var b,c,d=new CAAT.Math.Point;if(this.inputList){var e=this.inputList;for(b=0;b<e.length;b++){var f=e[b];for(c=0;c<f.length;c++)if(f[c].visible&&(d.set(a.x,a.y),f[c].worldModelViewMatrix.getInverse().transformCoord(d),
f[c].contains(d.x,d.y)))return f[c]}}d.set(a.x,a.y);return CAAT.Foundation.Scene.superclass.findActorAtPosition.call(this,d)},enableInputList:function(a){this.inputList=[];for(var b=0;b<a;b++)this.inputList.push([]);return this},addActorToInputList:function(a,b,c){0>b?b=0:b>=this.inputList.length&&(b=this.inputList.length-1);b=this.inputList[b];"undefined"===typeof c||c>=b.length?b.push(a):0>=c?b.unshift(a):b.splice(c,0,a);return this},emptyInputList:function(a){0>a?a=0:a>=this.inputList.length&&
(a=this.inputList.length-1);this.inputList[a]=[];return this},removeActorFromInputList:function(a,b){if("undefined"===typeof b){var c,d;for(c=0;c<this.inputList.length;c++){var e=this.inputList[c];for(d=0;d<e.length;d++)e[d]==a&&e.splice(d,1)}return this}0>b?b=0:b>=this.inputList.length&&(b=this.inputList.length-1);e=this.inputList[b];for(d=0;d<e.length;d++)e[d]==a&&e.splice(d,1);return this},getIn:function(a){},goOut:function(a){}}}});
CAAT.Module({defines:"CAAT.Foundation.Director",aliases:["CAAT.Director"],extendsClass:"CAAT.Foundation.ActorContainer",depends:"CAAT.Core.Class CAAT.Core.Constants CAAT.Foundation.ActorContainer CAAT.Module.Audio.AudioManager CAAT.Module.Runtime.BrowserInfo CAAT.Module.Debug.Debug CAAT.Math.Point CAAT.Math.Rectangle CAAT.Math.Matrix CAAT.Foundation.Timer.TimerManager CAAT.Foundation.Actor CAAT.Foundation.Scene CAAT.Event.AnimationLoop CAAT.Event.Input CAAT.Event.KeyEvent CAAT.Event.MouseEvent CAAT.Event.TouchEvent CAAT.WebGL.Program CAAT.WebGL.ColorProgram CAAT.WebGL.TextureProgram CAAT.WebGL.GLU CAAT.Module.TexturePacker.TexturePageManager".split(" "),
constants:{RENDER_MODE_CONTINUOUS:1,RENDER_MODE_DIRTY:2,CLEAR_DIRTY_RECTS:1,CLEAR_ALL:!0,CLEAR_NONE:!1,RESIZE_NONE:1,RESIZE_WIDTH:2,RESIZE_HEIGHT:4,RESIZE_BOTH:8,RESIZE_PROPORTIONAL:16},extendsWith:function(){return{__init:function(){this.__super();this.browserInfo=CAAT.Module.Runtime.BrowserInfo;this.audioManager=(new CAAT.Module.Audio.AudioManager).initialize(8);this.scenes=[];this.imagesCache=[];this.mousePoint=new CAAT.Math.Point(0,0,0);this.prevMousePoint=new CAAT.Math.Point(0,0,0);this.screenMousePoint=
new CAAT.Math.Point(0,0,0);this.isMouseDown=!1;this.lastSelectedActor=null;this.dragging=!1;this.cDirtyRects=[];this.sDirtyRects=[];this.dirtyRects=[];for(var a=0;64>a;a++)this.dirtyRects.push(new CAAT.Math.Rectangle);this.dirtyRectsIndex=0;this.touches={};this.timerManager=new CAAT.Foundation.Timer.TimerManager;this.__map={};return this},debug:!1,renderMode:CAAT.Foundation.Director.RENDER_MODE_CONTINUOUS,onRenderStart:null,onRenderEnd:null,mousePoint:null,prevMousePoint:null,screenMousePoint:null,
isMouseDown:!1,lastSelectedActor:null,dragging:!1,scenes:null,currentScene:null,canvas:null,ctx:null,time:0,timeline:0,imagesCache:null,audioManager:null,clear:CAAT.Foundation.Director.CLEAR_ALL,transitionScene:null,browserInfo:null,gl:null,glEnabled:!1,glTextureManager:null,glTtextureProgram:null,glColorProgram:null,pMatrix:null,coords:null,coordsIndex:0,uv:null,uvIndex:0,front_to_back:!1,statistics:{size_total:0,size_active:0,size_dirtyRects:0,draws:0,size_discarded_by_dirty_rects:0},currentTexturePage:0,
currentOpacity:1,intervalId:null,frameCounter:0,resize:1,onResizeCallback:null,__gestureScale:0,__gestureRotation:0,dirtyRects:null,cDirtyRects:null,sDirtyRects:null,dirtyRectsIndex:0,dirtyRectsEnabled:!1,nDirtyRects:0,drDiscarded:0,stopped:!1,needsRepaint:!1,touches:null,timerManager:null,SCREEN_RATIO:1,__map:null,clean:function(){this.audioManager=this.imagesCache=this.currentScene=this.scenes=null;this.isMouseDown=!1;this.lastSelectedActor=null;this.dragging=!1;this.__gestureRotation=this.__gestureScale=
0;this.dirty=!0;this.cDirtyRects=this.dirtyRects=null;this.dirtyRectsIndex=0;this.dirtyRectsEnabled=!1;this.nDirtyRects=0;this.onResizeCallback=null;this.__map={};return this},cancelPlay:function(a){return this.audioManager.cancelPlay(a)},cancelPlayByChannel:function(a){return this.audioManager.cancelPlayByChannel(a)},setValueForKey:function(a,b){this.__map[a]=b;return this},getValueForKey:function(a){return this.__map[a]},createTimer:function(a,b,c,d,e){return this.timerManager.createTimer(a,b,c,
d,e,this)},requestRepaint:function(){this.needsRepaint=!0},getCurrentScene:function(){return this.currentScene},checkDebug:function(){if(!navigator.isCocoonJS&&CAAT.DEBUG){var a=(new CAAT.Module.Debug.Debug).initialize(this.width,60);this.debugInfo=a.debugInfo.bind(a)}},getRenderType:function(){return this.glEnabled?"WEBGL":"CANVAS"},windowResized:function(a,b){var c=CAAT.Foundation.Director;switch(this.resize)

{case c.RESIZE_WIDTH:this.setBounds(0,0,a,this.height);break;case c.RESIZE_HEIGHT:c=document.getElementById("azoom-animID");
"undefined"!=typeof c&&null!=c?this.setScaleProportionalXR(a,b):this.setBounds(0,0,this.width,b);break;case c.RESIZE_BOTH:this.setBounds(0,0,a,b);break;case c.RESIZE_PROPORTIONAL:c=jQuery(this.canvas).parents("#azoom-animID"),"undefined"!=typeof c&&null!=c?this.setScaleProportional(c.outerWidth(),9999):this.setScaleProportional(a-300,b)}this.glEnabled&&this.glReset();if(this.onResizeCallback)this.onResizeCallback(this,a,b)},setScaleProportional:function(a,b){var c=Math.min(a/this.referenceWidth,b/
this.referenceHeight);this.canvas.width=this.referenceWidth*c;this.canvas.height=this.referenceHeight*c;this.ctx=this.canvas.getContext(this.glEnabled?"experimental-webgl":"2d");this.__setupRetina();this.setScaleAnchored(c*this.scaleX,c*this.scaleY,0,0);this.glEnabled&&this.glReset()},setScaleProportionalXR:function(a,b){var c=Math.max(a/this.referenceWidth,b/this.referenceHeight);this.canvas.width=this.referenceWidth*c;this.canvas.height=b;this.ctx=this.canvas.getContext(this.glEnabled?"experimental-webgl":
"2d");this.__setupRetina();var d=parseInt((this.referenceWidth*c-a)/2);parseInt((this.referenceHeight*c-b)/2);d=0!==d?-d:0;this.setScaleAnchored(c*this.scaleX,c*this.scaleY,0,0);c=document.getElementsByTagName("body");var e=document.getElementsByTagName("html");"rtl"==c[0].dir||"rtl"==c[0].style.direction||"rtl"==e[0].dir||"rtl"==e[0].style.direction?(this.canvas.style.left="0px",this.canvas.style.right=d+"px"):this.canvas.style.left=d+"px";this.canvas.style.top="0px";this.glEnabled&&this.glReset()},
enableResizeEvents:function(a,b){var c=CAAT.Foundation.Director;a===c.RESIZE_BOTH||a===c.RESIZE_WIDTH||a===c.RESIZE_HEIGHT||a===c.RESIZE_PROPORTIONAL?(this.referenceWidth=this.width,this.referenceHeight=this.height,this.resize=a,CAAT.registerResizeListener(this),this.onResizeCallback=b,this.windowResized(window.innerWidth,window.innerHeight)):(CAAT.unregisterResizeListener(this),this.onResizeCallback=null);return this},__setupRetina:function(){if(CAAT.RETINA_DISPLAY_ENABLED){var a=CAAT.Module.Runtime.BrowserInfo.DevicePixelRatio,
b=this.ctx.webkitBackingStorePixelRatio||this.ctx.mozBackingStorePixelRatio||this.ctx.msBackingStorePixelRatio||this.ctx.oBackingStorePixelRatio||this.ctx.backingStorePixelRatio||1,c=a/b,d=CAAT.Module.Runtime.BrowserInfo.OS;if("undefined"!==typeof CAAT.IOS_RETINA_LIMIT&&-1<d.toString().toLowerCase().indexOf("iphone")){a=Math.min(a,CAAT.IOS_RETINA_LIMIT);d=0;for(var e=parseInt(this.canvas.width)*parseInt(this.canvas.height)*c*c>CAAT.IOS_RETINA_LIMIT;e&&8>d;)0<a-1&&a--,c=a/b,e=parseInt(this.canvas.width)*
parseInt(this.canvas.height)*c*c>CAAT.IOS_RETINA_LIMIT,d++}a!==b?(a=this.canvas.width,b=this.canvas.height,this.canvas.width=a*c,this.canvas.height=b*c,this.canvas.style.width=a+"px",this.canvas.style.height=b+"px",this.setScaleAnchored(c,c,0,0)):this.setScaleAnchored(1,1,0,0);this.SCREEN_RATIO=c}else this.setScaleAnchored(1,1,0,0);for(c=0;c<this.scenes.length;c++)this.scenes[c].setBounds(0,0,this.width,this.height)},setBounds:function(a,b,c,d){CAAT.Foundation.Director.superclass.setBounds.call(this,
a,b,c,d);this.canvas.width!==c&&(this.canvas.width=c);this.canvas.height!==d&&(this.canvas.height=d);this.ctx=this.canvas.getContext(this.glEnabled?"experimental-webgl":"2d");this.__setupRetina();this.glEnabled&&this.glReset();return this},initialize:function(a,b,c,d){"undefined"!==typeof c&&isString(c)&&(c=document.getElementById(c));c||(c=document.createElement("canvas"),document.body.appendChild(c));this.canvas=c;"undefined"===typeof d&&(d=c);this.setBounds(0,0,a,b);this.enableEvents(d);this.timeline=
(new Date).getTime();CAAT.CACHE_SCENE_ON_CHANGE&&(this.transitionScene=(new CAAT.Foundation.Scene).setBounds(0,0,a,b),c=document.createElement("canvas"),c.width=a,c.height=b,a=(new CAAT.Foundation.Actor).setBackgroundImage(c),this.transitionScene.ctx=c.getContext("2d"),this.transitionScene.addChildImmediately(a),this.transitionScene.setEaseListener(this));this.checkDebug();return this},glReset:function(){this.pMatrix=CAAT.WebGL.GLU.makeOrtho(0,this.referenceWidth,this.referenceHeight,0,-1,1);this.gl.viewport(0,
0,this.canvas.width,this.canvas.height);this.glColorProgram.setMatrixUniform(this.pMatrix);this.glTextureProgram.setMatrixUniform(this.pMatrix);this.gl.viewportWidth=this.canvas.width;this.gl.viewportHeight=this.canvas.height},initializeGL:function(a,b,c,d){c||(c=document.createElement("canvas"),document.body.appendChild(c));c.width=a;c.height=b;this.referenceWidth=a;this.referenceHeight=b;try{this.gl=c.getContext("experimental-webgl"),this.gl.viewportWidth=a,this.gl.viewportHeight=b,CAAT.GLRENDER=
!0}catch(e){}if(this.gl)this.canvas=c,this.setBounds(0,0,a,b),this.enableEvents(c),this.timeline=(new Date).getTime(),this.glColorProgram=(new CAAT.WebGL.ColorProgram(this.gl)).create().initialize(),this.glTextureProgram=(new CAAT.WebGL.TextureProgram(this.gl)).create().initialize(),this.glTextureProgram.useProgram(),this.glReset(),this.coords=new Float32Array(6144),this.uv=new Float32Array(4096),this.gl.clearColor(0,0,0,255),this.front_to_back?(this.gl.clearDepth(1),this.gl.enable(this.gl.DEPTH_TEST),
this.gl.depthFunc(this.gl.LESS)):this.gl.disable(this.gl.DEPTH_TEST),this.gl.enable(this.gl.BLEND),this.gl.blendFunc(this.gl.ONE,this.gl.ONE_MINUS_SRC_ALPHA),this.glEnabled=!0,this.checkDebug();else return this.initialize(a,b,c);return this},createScene:function(){var a=new CAAT.Scene;this.addScene(a);return a},setImagesCache:function(a,b,c){if(!a||!a.length)return this;var d;null!==this.glTextureManager&&(this.glTextureManager.deletePages(),this.glTextureManager=null);if(this.imagesCache){var e=
[];for(d=0;d<this.imagesCache.length;d++)e.push(this.imagesCache[d].id);for(d=0;d<e.length;d++)delete this.imagesCache[e[d]]}if(this.imagesCache=a)for(d=0;d<a.length;d++)this.imagesCache[a[d].id]=a[d].image;this.tpW=b||2048;this.tpH=c||2048;this.updateGLPages();return this},updateGLPages:function(){this.glEnabled&&(this.glTextureManager=new CAAT.Module.TexturePacker.TexturePageManager,this.glTextureManager.createPages(this.gl,this.tpW,this.tpH,this.imagesCache),this.currentTexturePage=this.glTextureManager.pages[0],
this.glTextureProgram.setTexture(this.currentTexturePage.texture))},setGLTexturePage:function(a){this.currentTexturePage=a;this.glTextureProgram.setTexture(a.texture);return this},addImage:function(a,b,c){if(this.getImage(a))for(var d in this.imagesCache){if(this.imagesCache[d].id===a){this.imagesCache[d].image=b;break}}else this.imagesCache.push({id:a,image:b});this.imagesCache[a]=b;c||this.updateGLPages()},deleteImage:function(a,b){for(var c=0;c<this.imagesCache.length;c++)if(this.imagesCache[c].id===
a){delete this.imagesCache[a];this.imagesCache.splice(c,1);break}b||this.updateGLPages()},setGLCurrentOpacity:function(a){this.currentOpacity=a;this.glTextureProgram.setAlpha(a)},glRender:function(a,b,c){a=a||this.coords;c=c||this.uv;b=b||this.coordsIndex;var d=this.gl;b=b/12*2;this.glTextureProgram.updateVertexBuffer(a);this.glTextureProgram.updateUVBuffer(c);d.drawElements(d.TRIANGLES,3*b,d.UNSIGNED_SHORT,0)},glFlush:function(){0!==this.coordsIndex&&this.glRender(this.coords,this.coordsIndex,this.uv);
this.uvIndex=this.coordsIndex=0;this.statistics.draws++},findActorAtPosition:function(a){for(var b=this.childrenList.length-1;0<=b;b--){var c=this.childrenList[b],d=new CAAT.Math.Point(a.x,a.y,0);c=c.findActorAtPosition(d);if(null!==c)return c}return this},resetStats:function(){this.statistics.size_total=0;this.statistics.size_active=0;this.statistics.draws=0;this.statistics.size_discarded_by_dirty_rects=0},render:function(a){if(!this.currentScene||!this.currentScene.isPaused()){this.time+=a;var b=
0;for(l=this.childrenList.length;b<l;b++){var c=this.childrenList[b];if(c.isInAnimationFrame(this.time)&&!c.isPaused()){var d=c.time-c.start_time;c.timerManager.checkTimers(d);c.timerManager.removeExpiredTimers()}}this.animate(this,this.time);!navigator.isCocoonJS&&CAAT.DEBUG&&this.resetStats();var e=this.childrenList.length,f=this.ctx;if(this.glEnabled){this.gl.clear(this.gl.COLOR_BUFFER_BIT|this.gl.DEPTH_BUFFER_BIT);for(b=this.uvIndex=this.coordsIndex=0;b<e;b++)if(c=this.childrenList[b],c.isInAnimationFrame(this.time)){d=
c.time-c.start_time;if(c.onRenderStart)c.onRenderStart(d);c.paintActorGL(this,d);if(c.onRenderEnd)c.onRenderEnd(d);c.isPaused()||(c.time+=a);!navigator.isCocoonJS&&CAAT.DEBUG&&(this.statistics.size_total+=c.size_total,this.statistics.size_active+=c.size_active)}this.glFlush()}else{f.globalAlpha=1;f.globalCompositeOperation="source-over";f.save();if(this.dirtyRectsEnabled)if(this.modelViewMatrix.transformRenderingContext(f),CAAT.DEBUG_DIRTYRECTS)f.clearRect(0,0,this.canvas.width,this.canvas.height);
else{f.beginPath();this.nDirtyRects=0;c=this.cDirtyRects;for(b=0;b<c.length;b++)d=c[b],d.isEmpty()||(f.rect(d.x|0,d.y|0,1+(d.width|0),1+(d.height|0)),this.nDirtyRects++);f.clip()}else this.clear===CAAT.Foundation.Director.CLEAR_ALL&&f.clearRect(0,0,this.canvas.width,this.canvas.height);for(b=0;b<e;b++)if(c=this.childrenList[b],c.isInAnimationFrame(this.time)){d=c.time-c.start_time;f.save();if(c.onRenderStart)c.onRenderStart(d);!CAAT.DEBUG_DIRTYRECTS&&this.dirtyRectsEnabled?this.nDirtyRects&&c.paintActor(this,
d):c.paintActor(this,d);if(c.onRenderEnd)c.onRenderEnd(d);f.restore();CAAT.DEBUGAABB&&(f.globalAlpha=1,f.globalCompositeOperation="source-over",this.modelViewMatrix.transformRenderingContextSet(f),c.drawScreenBoundingBox(this,d));c.isPaused()||(c.time+=a);!navigator.isCocoonJS&&CAAT.DEBUG&&(this.statistics.size_total+=c.size_total,this.statistics.size_active+=c.size_active,this.statistics.size_dirtyRects=this.nDirtyRects)}if(0<this.nDirtyRects&&!navigator.isCocoonJS&&CAAT.DEBUG&&CAAT.DEBUG_DIRTYRECTS){f.beginPath();
this.nDirtyRects=0;c=this.cDirtyRects;for(b=0;b<c.length;b++)d=c[b],d.isEmpty()||(f.rect(d.x|0,d.y|0,1+(d.width|0),1+(d.height|0)),this.nDirtyRects++);f.clip();f.fillStyle="rgba(160,255,150,.4)";f.fillRect(0,0,this.canvas.width,this.canvas.height)}f.restore()}this.frameCounter++}},inDirtyRect:function(a){if(!this.dirtyRectsEnabled||CAAT.DEBUG_DIRTYRECTS)return!0;var b=this.cDirtyRects,c,d=a.AABB;for(c=0;c<b.length;c++)if(b[c].intersects(d))return!0;this.statistics.size_discarded_by_dirty_rects+=a.size_total;
return!1},animate:function(a,b){this.timerManager.checkTimers(b);this.setModelViewMatrix(this);this.modelViewMatrixI=this.modelViewMatrix.getInverse();this.setScreenBounds();this.invalid=this.dirty=!1;this.dirtyRectsIndex=-1;this.cDirtyRects=[];var c=this.childrenList,d;if(this.dirtyRectsEnabled){var e=this.sDirtyRects;if(e.length){var f=0;for(d=e.length;f<d;f++)this.addDirtyRect(e[f]);this.sDirtyRects=[]}}for(f=0;f<c.length;f++)d=c[f],d.animate(this,d.time-d.start_time);this.timerManager.removeExpiredTimers();
return this},scheduleDirtyRect:function(a){this.sDirtyRects.push(a)},addDirtyRect:function(a){if(!a.isEmpty()){var b,c,d=this.cDirtyRects;for(b=0;b<d.length;b++){var e=d[b];if(!e.isEmpty()&&e.intersects(a)){for(var f=!0;f;){e.unionRectangle(a);for(c=0;c<d.length;c++)if(c!==b){var g=d[c];if(!g.isEmpty()&&g.intersects(e)){e.unionRectangle(g);g.setEmpty();break}}c==d.length&&(f=!1)}for(c=0;c<d.length;c++)d[c].isEmpty()&&d.splice(c,1);return}}this.dirtyRectsIndex++;if(this.dirtyRectsIndex>=this.dirtyRects.length)for(b=
0;32>b;b++)this.dirtyRects.push(new CAAT.Math.Rectangle);b=this.dirtyRects[this.dirtyRectsIndex];b.x=a.x;b.y=a.y;b.x1=a.x1;b.y1=a.y1;b.width=a.width;b.height=a.height;this.cDirtyRects.push(b)}},renderToContext:function(a,b){if(b.isInAnimationFrame(this.time)){a.setTransform(1,0,0,1,0,0);a.globalAlpha=1;a.globalCompositeOperation="source-over";a.clearRect(0,0,this.width,this.height);var c=this.ctx;this.ctx=a;a.save();var d=this.modelViewMatrix,e=this.worldModelViewMatrix;this.modelViewMatrix=this.worldModelViewMatrix=
new CAAT.Math.Matrix;this.wdirty=!0;b.animate(this,b.time);if(b.onRenderStart)b.onRenderStart(b.time);b.paintActor(this,b.time);if(b.onRenderEnd)b.onRenderEnd(b.time);this.worldModelViewMatrix=e;this.modelViewMatrix=d;a.restore();this.ctx=c}},addScene:function(a){a.setBounds(0,0,this.width,this.height);this.scenes.push(a);a.setEaseListener(this);null===this.currentScene&&this.setScene(0)},getNumScenes:function(){return this.scenes.length},easeInOut:function(a,b,c,d,e,f,g,h,k,n){a!==this.getCurrentSceneIndex()&&
(a=this.scenes[a],d=this.scenes[d],!CAAT.__CSS__&&CAAT.CACHE_SCENE_ON_CHANGE&&(this.renderToContext(this.transitionScene.ctx,d),d=this.transitionScene),a.setExpired(!1),d.setExpired(!1),a.mouseEnabled=!1,d.mouseEnabled=!1,a.resetTransform(),d.resetTransform(),a.setLocation(0,0),d.setLocation(0,0),a.alpha=1,d.alpha=1,b===CAAT.Foundation.Scene.EASE_ROTATION?a.easeRotationIn(g,h,c,k):b===CAAT.Foundation.Scene.EASE_SCALE?a.easeScaleIn(0,g,h,c,k):a.easeTranslationIn(g,h,c,k),e===CAAT.Foundation.Scene.EASE_ROTATION?
d.easeRotationOut(g,h,f,n):e===CAAT.Foundation.Scene.EASE_SCALE?d.easeScaleOut(0,g,h,f,n):d.easeTranslationOut(g,h,f,n),this.childrenList=[],d.goOut(a),a.getIn(d),this.addChild(d),this.addChild(a))},easeInOutRandom:function(a,b,c,d){var e=Math.random(),f=Math.random();if(.33>e){e=CAAT.Foundation.Scene.EASE_ROTATION;var g=(new CAAT.Behavior.Interpolator).createExponentialInOutInterpolator(4)}else.66>e?(e=CAAT.Foundation.Scene.EASE_SCALE,g=(new CAAT.Behavior.Interpolator).createElasticOutInterpolator(1.1,
.4)):(e=CAAT.Foundation.Scene.EASE_TRANSLATE,g=(new CAAT.Behavior.Interpolator).createBounceOutInterpolator());if(.33>f){f=CAAT.Foundation.Scene.EASE_ROTATION;var h=(new CAAT.Behavior.Interpolator).createExponentialInOutInterpolator(4)}else.66>f?(f=CAAT.Foundation.Scene.EASE_SCALE,h=(new CAAT.Behavior.Interpolator).createExponentialOutInterpolator(4)):(f=CAAT.Foundation.Scene.EASE_TRANSLATE,h=(new CAAT.Behavior.Interpolator).createBounceOutInterpolator());this.easeInOut(a,e,8.99*Math.random()>>0,
b,f,8.99*Math.random()>>0,c,d,g,h)},easeIn:function(a,b,c,d,e,f){a=this.scenes[a];b===CAAT.Foundation.Scene.EASE_ROTATION?a.easeRotationIn(c,d,e,f):b===CAAT.Foundation.Scene.EASE_SCALE?a.easeScaleIn(0,c,d,e,f):a.easeTranslationIn(c,d,e,f);this.childrenList=[];this.addChild(a);a.resetTransform();a.setLocation(0,0);a.alpha=1;a.mouseEnabled=!1;a.setExpired(!1)},setScene:function(a){a=this.scenes[a];this.childrenList=[];this.addChild(a);this.currentScene=a;a.setExpired(!1);a.mouseEnabled=!0;a.resetTransform();
a.setLocation(0,0);a.alpha=1;a.getIn();a.activated()},switchToScene:function(a,b,c,d){var e=this.getSceneIndex(this.currentScene);d?this.easeInOutRandom(a,e,b,c):this.setScene(a)},switchToPrevScene:function(a,b,c){var d=this.getSceneIndex(this.currentScene);1>=this.getNumScenes()||0===d||(c?this.easeInOutRandom(d-1,d,a,b):this.setScene(d-1))},switchToNextScene:function(a,b,c){var d=this.getSceneIndex(this.currentScene);1>=this.getNumScenes()||d===this.getNumScenes()-1||(c?this.easeInOutRandom(d+1,
d,a,b):this.setScene(d+1))},mouseEnter:function(a){},mouseExit:function(a){},mouseMove:function(a){},mouseDown:function(a){},mouseUp:function(a){},mouseDrag:function(a){},easeEnd:function(a,b){b?(this.currentScene=a,this.currentScene.activated()):a.setExpired(!0);a.mouseEnabled=!0;a.emptyBehaviorList()},getSceneIndex:function(a){for(var b=0;b<this.scenes.length;b++)if(this.scenes[b]===a)return b;return-1},getScene:function(a){return this.scenes[a]},getSceneById:function(a){for(var b=0;b<this.scenes.length;b++)if(this.scenes[b].id===
a)return this.scenes[b];return null},getCurrentSceneIndex:function(){return this.getSceneIndex(this.currentScene)},getBrowserName:function(){return this.browserInfo.browser},getBrowserVersion:function(){return this.browserInfo.version},getOSName:function(){return this.browserInfo.OS},getImage:function(a){var b=this.imagesCache[a];if(b)return b;for(var c in this.imagesCache)if(this.imagesCache[c].id===a)return this.imagesCache[c].image;return null},musicPlay:function(a){return this.audioManager.playMusic(a)},
musicStop:function(){this.audioManager.stopMusic()},addAudio:function(a,b){this.audioManager.addAudio(a,b);return this},audioPlay:function(a){return this.audioManager.play(a)},audioLoop:function(a){return this.audioManager.loop(a)},endSound:function(){return this.audioManager.endSound()},setSoundEffectsEnabled:function(a){return this.audioManager.setSoundEffectsEnabled(a)},setMusicEnabled:function(a){return this.audioManager.setMusicEnabled(a)},isMusicEnabled:function(){return this.audioManager.isMusicEnabled()},
isSoundEffectsEnabled:function(){return this.audioManager.isSoundEffectsEnabled()},setVolume:function(a,b){return this.audioManager.setVolume(a,b)},emptyScenes:function(){this.scenes=[]},addChild:function(a){a.parent=this;this.childrenList.push(a)},loop:function(a,b,c){c?(this.onRenderStart=b,this.onRenderEnd=c):b&&(this.onRenderEnd=b);CAAT.loop()},renderFrame:function(){CAAT.currentDirector=this;if(!this.stopped){var a=(new Date).getTime(),b=a-this.timeline;500<b&&(b=500);if(this.onRenderStart)this.onRenderStart(b);
this.render(b);this.debugInfo&&this.debugInfo(this.statistics);this.timeline=a;if(this.onRenderEnd)this.onRenderEnd(b);this.needsRepaint=!1}},resetTimeline:function(){this.timeline=(new Date).getTime()},endLoop:function(){},setClear:function(a){this.clear=a;this.dirtyRectsEnabled=this.clear===CAAT.Foundation.Director.CLEAR_DIRTY_RECTS?!0:!1;return this},getAudioManager:function(){return this.audioManager},cumulateOffset:function(a,b,c){var d=c+"Left";c+="Top";for(var e=0,f=0,g;"iOS"!==navigator.browser&&
a&&a.style&&(g=a.currentStyle?a.currentStyle.position:(g=(a.ownerDocument.defaultView||a.ownerDocument.parentWindow).getComputedStyle(a,null))?g.getPropertyValue("position"):null,!/^(fixed)$/.test(g));)e+=a[d],f+=a[c],a=a[b];return{x:e,y:f,style:g}},getOffset:function(a){var b=this.cumulateOffset(a,"offsetParent","offset");return"fixed"===b.style?(a=this.cumulateOffset(a,a.parentNode?"parentNode":"parentElement","scroll"),{x:b.x+a.x,y:b.y+a.y}):{x:b.x,y:b.y}},getCanvasCoord:function(a,b){var c=new CAAT.Math.Point,
d=0,e=0;b||(b=window.event);if(b.pageX||b.pageY)d=b.pageX,e=b.pageY;else if(b.clientX||b.clientY)d=b.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,e=b.clientY+document.body.scrollTop+document.documentElement.scrollTop;var f=this.getOffset(this.canvas);d-=f.x;e-=f.y;d*=this.SCREEN_RATIO;e*=this.SCREEN_RATIO;c.x=d;c.y=e;this.modelViewMatrixI||(this.modelViewMatrixI=this.modelViewMatrix.getInverse());this.modelViewMatrixI.transformCoord(c);d=c.x;e=c.y;a.set(d,e);this.screenMousePoint.set(d,
e)},__mouseDownHandler:function(a){if(this.dragging&&this.lastSelectedActor)this.__mouseUpHandler(a);else{this.getCanvasCoord(this.mousePoint,a);this.isMouseDown=!0;var b=this.findActorAtPosition(this.mousePoint);if(null!==b){var c=b.viewToModel(new CAAT.Math.Point(this.screenMousePoint.x,this.screenMousePoint.y,0));b.mouseDown((new CAAT.Event.MouseEvent).init(c.x,c.y,a,b,new CAAT.Math.Point(this.screenMousePoint.x,this.screenMousePoint.y)))}this.lastSelectedActor=b}},__mouseUpHandler:function(a){this.isMouseDown=
!1;this.getCanvasCoord(this.mousePoint,a);var b=null,c=this.lastSelectedActor;null!==c&&(b=c.viewToModel(new CAAT.Math.Point(this.screenMousePoint.x,this.screenMousePoint.y,0)),c.actionPerformed&&c.contains(b.x,b.y)&&c.actionPerformed(a),c.mouseUp((new CAAT.Event.MouseEvent).init(b.x,b.y,a,c,this.screenMousePoint,this.currentScene.time)));this.dragging||null===c||c.contains(b.x,b.y)&&c.mouseClick((new CAAT.Event.MouseEvent).init(b.x,b.y,a,c,this.screenMousePoint,this.currentScene.time));this.in_=
this.dragging=!1},__mouseMoveHandler:function(a){var b=this.currentScene?this.currentScene.time:0;if(this.isMouseDown&&null!==this.lastSelectedActor){var c=this.lastSelectedActor;var d=c.viewToModel(new CAAT.Math.Point(this.screenMousePoint.x,this.screenMousePoint.y,0));if(this.dragging||!(Math.abs(this.prevMousePoint.x-d.x)<CAAT.DRAG_THRESHOLD_X&&Math.abs(this.prevMousePoint.y-d.y)<CAAT.DRAG_THRESHOLD_Y)){this.dragging=!0;var e=c.x,f=c.y;c.mouseDrag((new CAAT.Event.MouseEvent).init(d.x,d.y,a,c,new CAAT.Math.Point(this.screenMousePoint.x,
this.screenMousePoint.y),b));this.prevMousePoint.x=d.x;this.prevMousePoint.y=d.y;e===c.x&&f===c.y&&(e=c.contains(d.x,d.y),this.in_&&!e&&(c.mouseExit((new CAAT.Event.MouseEvent).init(d.x,d.y,a,c,this.screenMousePoint,b)),this.in_=!1),!this.in_&&e&&(c.mouseEnter((new CAAT.Event.MouseEvent).init(d.x,d.y,a,c,this.screenMousePoint,b)),this.in_=!0))}}else this.in_=!0,c=this.findActorAtPosition(this.mousePoint),c!==this.lastSelectedActor&&(null!==this.lastSelectedActor&&(d=this.lastSelectedActor.viewToModel(new CAAT.Math.Point(this.screenMousePoint.x,
this.screenMousePoint.y,0)),this.lastSelectedActor.mouseExit((new CAAT.Event.MouseEvent).init(d.x,d.y,a,this.lastSelectedActor,this.screenMousePoint,b))),null!==c&&(d=c.viewToModel(new CAAT.Math.Point(this.screenMousePoint.x,this.screenMousePoint.y,0)),c.mouseEnter((new CAAT.Event.MouseEvent).init(d.x,d.y,a,c,this.screenMousePoint,b)))),d=c.viewToModel(new CAAT.Math.Point(this.screenMousePoint.x,this.screenMousePoint.y,0)),null!==c&&c.mouseMove((new CAAT.Event.MouseEvent).init(d.x,d.y,a,c,this.screenMousePoint,
b)),this.prevMousePoint.x=d.x,this.prevMousePoint.y=d.y,this.lastSelectedActor=c},__mouseOutHandler:function(a){if(!this.dragging)if(null!==this.lastSelectedActor){this.getCanvasCoord(this.mousePoint,a);var b=new CAAT.Math.Point(this.mousePoint.x,this.mousePoint.y,0);this.lastSelectedActor.viewToModel(b);a=(new CAAT.Event.MouseEvent).init(b.x,b.y,a,this.lastSelectedActor,this.screenMousePoint,this.currentScene.time);this.lastSelectedActor.mouseExit(a);this.lastSelectedActor.mouseOut(a);this.dragging||
(this.lastSelectedActor=null)}else this.in_=this.isMouseDown=!1},__mouseOverHandler:function(a){if(!this.dragging)if(null==this.lastSelectedActor){var b=this.findActorAtPosition(this.mousePoint);if(null!==b){var c=b.viewToModel(new CAAT.Math.Point(this.screenMousePoint.x,this.screenMousePoint.y,0));a=(new CAAT.Event.MouseEvent).init(c.x,c.y,a,b,this.screenMousePoint,this.currentScene?this.currentScene.time:0);b.mouseOver(a);b.mouseEnter(a)}this.lastSelectedActor=b}else b=this.lastSelectedActor,c=
b.viewToModel(new CAAT.Math.Point(this.screenMousePoint.x,this.screenMousePoint.y,0)),a=(new CAAT.Event.MouseEvent).init(c.x,c.y,a,b,this.screenMousePoint,this.currentScene.time),b.mouseOver(a),b.mouseEnter(a)},__mouseDBLClickHandler:function(a){this.getCanvasCoord(this.mousePoint,a);null!==this.lastSelectedActor&&this.lastSelectedActor.mouseDblClick((new CAAT.Event.MouseEvent).init(this.mousePoint.x,this.mousePoint.y,a,this.lastSelectedActor,this.screenMousePoint,this.currentScene.time))},__touchStartHandler:function(a){if(a.target===
this.canvas){a=a.targetTouches[0];var b=this.mousePoint;this.getCanvasCoord(b,a);0>b.x||0>b.y||b.x>=this.width||b.y>=this.height||(this.touching=!0,this.__mouseDownHandler(a))}},__touchEndHandler:function(a){this.touching&&(a=a.changedTouches[0],this.getCanvasCoord(this.mousePoint,a),this.touching=!1,this.__mouseUpHandler(a))},__touchMoveHandler:function(a){if(this.touching&&!this.gesturing)for(var b=0;b<a.targetTouches.length;b++){var c=a.targetTouches[b];this.getCanvasCoord(this.mousePoint,c);this.__mouseMoveHandler(c)}},
__gestureStart:function(a,b){this.gesturing=!0;this.__gestureRotation=this.lastSelectedActor.rotationAngle;this.__gestureSX=this.lastSelectedActor.scaleX-1;this.__gestureSY=this.lastSelectedActor.scaleY-1},__gestureChange:function(a,b){"undefined"!==typeof a&&"undefined"!==typeof b&&null!==this.lastSelectedActor&&this.lastSelectedActor.isGestureEnabled()&&(this.lastSelectedActor.setRotation(b*Math.PI/180+this.__gestureRotation),this.lastSelectedActor.setScale(this.__gestureSX+a,this.__gestureSY+a))},
__gestureEnd:function(a,b){this.gesturing=!1;this.__gestureScale=this.__gestureRotation=0},__touchEndHandlerMT:function(a){a.preventDefault();a.returnValue=!1;var b,c=[];for(b=0;b<a.changedTouches.length;b++){var d=a.changedTouches[b].identifier;c.push(d)}var e={};for(b=0;b<c.length;b++){var f=c[b];this.touches[f]&&(d=this.touches[f].actor,e[d.id]||(e[d.id]={actor:d,touch:(new CAAT.Event.TouchEvent).init(a,d,this.currentScene.time)}),e[d.id].touch.addChangedTouch(this.touches[f].touch))}for(b=0;b<
a.changedTouches.length;b++)c=a.changedTouches[b],d=c.identifier,delete this.touches[d];for(var g in e){a=e[g];d=a.actor;c=a.touch;for(var h in this.touches)a=this.touches[h],a.actor.id===d.id&&c.addTouch(a.touch);d.touchEnd(c)}},__touchMoveHandlerMT:function(a){a.preventDefault();a.returnValue=!1;var b,c=[];for(b=0;b<a.changedTouches.length;b++){var d=a.changedTouches[b],e=d.identifier;if(this.touches[e]){var f=this.mousePoint;this.getCanvasCoord(f,d);var g=this.touches[e].actor;f=g.viewToModel(f);
this.touches[e]={actor:g,touch:new CAAT.Event.TouchInfo(e,f.x,f.y,g)};c.push(e)}}e={};for(b=0;b<c.length;b++)d=c[b],g=this.touches[d].actor,e[g.id]||(e[g.id]={actor:g,touch:(new CAAT.Event.TouchEvent).init(a,g,this.currentScene.time)}),g=e[g.id].touch,g.addTouch(this.touches[d].touch),g.addChangedTouch(this.touches[d].touch);for(var h in e){a=e[h];g=a.actor;d=a.touch;for(var k in this.touches)a=this.touches[k],a.actor.id===g.id&&d.addTouch(a.touch);g.touchMove(d)}},__touchCancelHandleMT:function(a){this.__touchEndHandlerMT(a)},
__touchStartHandlerMT:function(a){a.preventDefault();a.returnValue=!1;var b,c=[];for(b=0;b<a.changedTouches.length;b++){var d=a.changedTouches[b],e=d.identifier,f=this.mousePoint;this.getCanvasCoord(f,d);if(!(0>f.x||0>f.y||f.x>=this.width||f.y>=this.height)){var g=this.findActorAtPosition(f);null!==g&&(f=g.viewToModel(f),this.touches[e]||(this.touches[e]={actor:g,touch:new CAAT.Event.TouchInfo(e,f.x,f.y,g)},c.push(e)))}}e={};for(b=0;b<c.length;b++)d=c[b],g=this.touches[d].actor,e[g.id]||(e[g.id]=
{actor:g,touch:(new CAAT.Event.TouchEvent).init(a,g,this.currentScene.time)}),g=e[g.id].touch,g.addTouch(this.touches[d].touch),g.addChangedTouch(this.touches[d].touch);for(var h in e){a=e[h];g=a.actor;d=a.touch;for(var k in this.touches)a=this.touches[k],a.actor.id===g.id&&d.addTouch(a.touch);g.touchStart(d)}},__findTouchFirstActor:function(){var a=Number.MAX_VALUE,b=null,c;for(c in this.touches){var d=this.touches[c];d.touch.time&&d.touch.time<a&&d.actor.isGestureEnabled()&&(b=d.actor,a=d.touch.time)}return b},
__gesturedActor:null,__touchGestureStartHandleMT:function(a){var b=this.__findTouchFirstActor();null!==b&&b.isGestureEnabled()&&(this.__gesturedActor=b,this.__gestureRotation=b.rotationAngle,this.__gestureSX=b.scaleX-1,this.__gestureSY=b.scaleY-1,b.gestureStart(a.rotation*Math.PI/180,a.scale+this.__gestureSX,a.scale+this.__gestureSY))},__touchGestureEndHandleMT:function(a){null!==this.__gesturedActor&&this.__gesturedActor.isGestureEnabled()&&this.__gesturedActor.gestureEnd(a.rotation*Math.PI/180,
a.scale+this.__gestureSX,a.scale+this.__gestureSY);this.__gestureScale=this.__gestureRotation=0},__touchGestureChangeHandleMT:function(a){null!==this.__gesturedActor&&this.__gesturedActor.isGestureEnabled()&&this.__gesturedActor.gestureChange(a.rotation*Math.PI/180,this.__gestureSX+a.scale,this.__gestureSY+a.scale)},addHandlers:function(a){var b=this;window.addEventListener("mouseup",function(a){b.touching&&(a.preventDefault(),a.cancelBubble=!0,a.stopPropagation&&a.stopPropagation(),b.getCanvasCoord(b.mousePoint,
a),b.__mouseUpHandler(a),b.touching=!1)},!1);window.addEventListener("mousedown",function(c){if(c.target===a){c.preventDefault();c.cancelBubble=!0;c.stopPropagation&&c.stopPropagation();var d=b.mousePoint;b.getCanvasCoord(d,c);0>d.x||0>d.y||d.x>=b.width||d.y>=b.height||(b.touching=!0,b.__mouseDownHandler(c))}},!1);window.addEventListener("mouseover",function(c){if(c.target===a&&!b.dragging){c.preventDefault();c.cancelBubble=!0;c.stopPropagation&&c.stopPropagation();var d=b.mousePoint;b.getCanvasCoord(d,
c);0>d.x||0>d.y||d.x>=b.width||d.y>=b.height||b.__mouseOverHandler(c)}},!1);window.addEventListener("mouseout",function(c){c.target!==a||b.dragging||(c.preventDefault(),c.cancelBubble=!0,c.stopPropagation&&c.stopPropagation(),b.getCanvasCoord(b.mousePoint,c),b.__mouseOutHandler(c))},!1);window.addEventListener("mousemove",function(c){if(c.target==a){c.preventDefault();c.cancelBubble=!0;c.stopPropagation&&c.stopPropagation();var d=b.mousePoint;b.getCanvasCoord(d,c);!b.dragging&&(0>d.x||0>d.y||d.x>=
b.width||d.y>=b.height)||b.__mouseMoveHandler(c)}},!1);window.addEventListener("dblclick",function(c){if(c.target===a){c.preventDefault();c.cancelBubble=!0;c.stopPropagation&&c.stopPropagation();var d=b.mousePoint;b.getCanvasCoord(d,c);0>d.x||0>d.y||d.x>=b.width||d.y>=b.height||b.__mouseDBLClickHandler(c)}},!1);CAAT.TOUCH_BEHAVIOR===CAAT.TOUCH_AS_MOUSE?(a.addEventListener("touchstart",this.__touchStartHandler.bind(this),!1),a.addEventListener("touchmove",this.__touchMoveHandler.bind(this),!1),a.addEventListener("touchend",
this.__touchEndHandler.bind(this),!1),a.addEventListener("gesturestart",function(c){c.target===a&&(c.preventDefault(),c.returnValue=!1,b.__gestureStart(c.scale,c.rotation))},!1),a.addEventListener("gestureend",function(c){c.target===a&&(c.preventDefault(),c.returnValue=!1,b.__gestureEnd(c.scale,c.rotation))},!1),a.addEventListener("gesturechange",function(c){c.target===a&&(c.preventDefault(),c.returnValue=!1,b.__gestureChange(c.scale,c.rotation))},!1)):CAAT.TOUCH_BEHAVIOR===CAAT.TOUCH_AS_MULTITOUCH&&
(a.addEventListener("touchstart",this.__touchStartHandlerMT.bind(this),!1),a.addEventListener("touchmove",this.__touchMoveHandlerMT.bind(this),!1),a.addEventListener("touchend",this.__touchEndHandlerMT.bind(this),!1),a.addEventListener("touchcancel",this.__touchCancelHandleMT.bind(this),!1),a.addEventListener("gesturestart",this.__touchGestureStartHandleMT.bind(this),!1),a.addEventListener("gestureend",this.__touchGestureEndHandleMT.bind(this),!1),a.addEventListener("gesturechange",this.__touchGestureChangeHandleMT.bind(this),
!1))},enableEvents:function(a){CAAT.RegisterDirector(this);this.in_=!1;this.createEventHandler(a)},createEventHandler:function(a){this.in_=!1;this.addHandlers(a)}}},onCreate:function(){"undefined"!==typeof CAAT.__CSS__&&(CAAT.Foundation.Director.prototype.clip=!0,CAAT.Foundation.Director.prototype.glEnabled=!1,CAAT.Foundation.Director.prototype.getRenderType=function(){return"CSS"},CAAT.Foundation.Director.prototype.setScaleProportional=function(a,b){var c=Math.min(a/this.referenceWidth,b/this.referenceHeight);
this.setScaleAnchored(c,c,0,0);this.eventHandler.style.width=""+this.referenceWidth+"px";this.eventHandler.style.height=""+this.referenceHeight+"px"},CAAT.Foundation.Director.prototype.setBounds=function(a,b,c,d){CAAT.Foundation.Director.superclass.setBounds.call(this,a,b,c,d);for(a=0;a<this.scenes.length;a++)this.scenes[a].setBounds(0,0,c,d);this.eventHandler.style.width=c+"px";this.eventHandler.style.height=d+"px";return this},CAAT.Foundation.Director.prototype.initialize=function(a,b,c,d){this.timeline=
(new Date).getTime();this.domElement=c;this.style("position","absolute");this.style("width",""+a+"px");this.style("height",""+b+"px");this.style("overflow","hidden");this.enableEvents(c);this.setBounds(0,0,a,b);this.checkDebug();return this},CAAT.Foundation.Director.prototype.render=function(a){this.time+=a;this.animate(this,a);var b;!navigator.isCocoonJS&&CAAT.DEBUG&&this.resetStats();var c=0;for(b=this.childrenList.length;c<b;c++){var d=this.childrenList[c];if(d.isInAnimationFrame(this.time)&&!d.isPaused()){var e=
d.time-d.start_time;d.timerManager.checkTimers(e);d.timerManager.removeExpiredTimers()}}c=0;for(b=this.childrenList.length;c<b;c++)if(d=this.childrenList[c],d.isInAnimationFrame(this.time)){e=d.time-d.start_time;if(d.onRenderStart)d.onRenderStart(e);d.paintActor(this,e);if(d.onRenderEnd)d.onRenderEnd(e);d.isPaused()||(d.time+=a);!navigator.isCocoonJS&&CAAT.DEBUG&&(this.statistics.size_discarded_by_dirtyRects+=this.drDiscarded,this.statistics.size_total+=d.size_total,this.statistics.size_active+=d.size_active,
this.statistics.size_dirtyRects=this.nDirtyRects)}this.frameCounter++},CAAT.Foundation.Director.prototype.addScene=function(a){a.setVisible(!0);a.setBounds(0,0,this.width,this.height);this.scenes.push(a);a.setEaseListener(this);null===this.currentScene&&this.setScene(0);this.domElement.appendChild(a.domElement)},CAAT.Foundation.Director.prototype.emptyScenes=function(){this.scenes=[];this.domElement.innerHTML="";this.createEventHandler()},CAAT.Foundation.Director.prototype.setClear=function(a){return this},
CAAT.Foundation.Director.prototype.createEventHandler=function(){this.eventHandler=document.createElement("div");this.domElement.appendChild(this.eventHandler);this.eventHandler.style.position="absolute";this.eventHandler.style.left="0";this.eventHandler.style.top="0";this.eventHandler.style.zIndex=999999;this.eventHandler.style.width=""+this.width+"px";this.eventHandler.style.height=""+this.height+"px";this.canvas=this.eventHandler;this.in_=!1;this.addHandlers(this.canvas)},CAAT.Foundation.Director.prototype.inDirtyRect=
function(){return!0})}});
CAAT.Module({defines:"CAAT.Foundation.UI.Dock",aliases:["CAAT.Dock"],extendsClass:"CAAT.Foundation.ActorContainer",depends:["CAAT.Foundation.ActorContainer","CAAT.Behavior.GenericBehavior"],constants:{OP_LAYOUT_BOTTOM:0,OP_LAYOUT_TOP:1,OP_LAYOUT_LEFT:2,OP_LAYOUT_RIGHT:3},extendsWith:{scene:null,ttask:null,minSize:0,maxSize:0,range:2,layoutOp:0,initialize:function(a){this.scene=a;return this},setApplicationRange:function(a){this.range=a;return this},setLayoutOp:function(a){this.layoutOp=a;return this},
setSizes:function(a,b){this.minSize=a;this.maxSize=b;for(var c=0;c<this.childrenList.length;c++)this.childrenList[c].width=a,this.childrenList[c].height=a;return this},layout:function(){var a,b=CAAT.Foundation.UI.Dock;if(this.layoutOp===b.OP_LAYOUT_BOTTOM||this.layoutOp===b.OP_LAYOUT_TOP){var c=0;for(a=0;a<this.getNumChildren();a++)c+=this.getChildAt(a).width;var d=(this.width-c)/2;for(a=0;a<this.getNumChildren();a++)c=this.getChildAt(a),c.x=d,d+=c.width,c.y=this.layoutOp===b.OP_LAYOUT_BOTTOM?this.maxSize-
c.height:0}else{for(a=c=0;a<this.getNumChildren();a++)c+=this.getChildAt(a).height;d=(this.height-c)/2;for(a=0;a<this.getNumChildren();a++)c=this.getChildAt(a),c.y=d,d+=c.height,c.x=this.layoutOp===b.OP_LAYOUT_LEFT?0:this.width-c.width}},mouseMove:function(a){this.actorNotPointed()},mouseExit:function(a){this.actorNotPointed()},actorNotPointed:function(){var a,b=this;for(a=0;a<this.getNumChildren();a++){var c=this.getChildAt(a);c.emptyBehaviorList();c.addBehavior((new CAAT.Behavior.GenericBehavior).setValues(c.width,
this.minSize,c,"width").setFrameTime(this.scene.time,250)).addBehavior((new CAAT.Behavior.GenericBehavior).setValues(c.height,this.minSize,c,"height").setFrameTime(this.scene.time,250));a===this.getNumChildren()-1&&c.behaviorList[0].addListener({behaviorApplied:function(a,b,c,g,h){g.parent.layout()},behaviorExpired:function(d,e,f){for(a=0;a<b.getNumChildren();a++)c=b.getChildAt(a),c.width=b.minSize,c.height=b.minSize;f.parent.layout()}})}},actorPointed:function(a,b,c){var d=this.findChild(c),e=CAAT.Foundation.UI.Dock;
a=this.layoutOp===e.OP_LAYOUT_BOTTOM||this.layoutOp===e.OP_LAYOUT_TOP?a/c.width:b/c.height;for(b=0;b<this.childrenList.length;b++)c=this.childrenList[b],c.emptyBehaviorList(),e=b<d-this.range||b>d+this.range?this.minSize:b===d?this.maxSize:b<d?this.minSize+(this.maxSize-this.minSize)*(Math.cos((b-d-a+1)/this.range*Math.PI)+1)/2:this.minSize+(this.maxSize-this.minSize)*(Math.cos((b-d-a)/this.range*Math.PI)+1)/2,c.height=e,c.width=e;this.layout()},actorMouseExit:function(a){null!==this.ttask&&this.ttask.cancel();
var b=this;this.ttask=this.scene.createTimer(this.scene.time,100,function(a,d,e){b.actorNotPointed()},null,null)},actorMouseEnter:function(a){null!==this.ttask&&(this.ttask.cancel(),this.ttask=null)},addChild:function(a){var b=this;a.__Dock_mouseEnter=a.mouseEnter;a.__Dock_mouseExit=a.mouseExit;a.__Dock_mouseMove=a.mouseMove;a.mouseEnter=function(a){b.actorMouseEnter(a);this.__Dock_mouseEnter(a)};a.mouseExit=function(a){b.actorMouseExit(a);this.__Dock_mouseExit(a)};a.mouseMove=function(a){b.actorPointed(a.point.x,
a.point.y,a.source);this.__Dock_mouseMove(a)};a.width=this.minSize;a.height=this.minSize;return CAAT.Foundation.UI.Dock.superclass.addChild.call(this,a)}}});
CAAT.Module({defines:"CAAT.Foundation.UI.InterpolatorActor",aliases:["CAAT.InterpolatorActor"],depends:["CAAT.Foundation.Actor"],extendsClass:"CAAT.Foundation.Actor",extendsWith:{interpolator:null,contour:null,S:50,gap:5,setGap:function(a){this.gap=a;return this},setInterpolator:function(a,b){this.interpolator=a;this.contour=a.getContour(b||this.S);return this},paint:function(a,b){CAAT.InterpolatorActor.superclass.paint.call(this,a,b);if(this.backgroundImage)return this;if(this.interpolator){var c=
a.ctx,d=this.width-2*this.gap,e=this.height-2*this.gap;c.beginPath();c.moveTo(this.gap+d*this.contour[0].x,-this.gap+this.height-e*this.contour[0].y);for(var f=1;f<this.contour.length;f++)c.lineTo(this.gap+d*this.contour[f].x,-this.gap+this.height-e*this.contour[f].y);c.strokeStyle=this.strokeStyle;c.stroke()}},getInterpolator:function(){return this.interpolator}}});
CAAT.Module({defines:"CAAT.Foundation.UI.Label",depends:["CAAT.Foundation.Actor","CAAT.Foundation.SpriteImage","CAAT.Module.Font.Font","CAAT.Foundation.UI.Layout.LayoutManager"],aliases:["CAAT.UI.Label"],extendsClass:"CAAT.Foundation.Actor",extendsWith:function(){var a=function(a){this.ctx=a;return this};a.prototype={ctx:null,defaultFS:null,font:null,fontSize:null,fill:null,stroke:null,filled:null,stroked:null,strokeSize:null,italic:null,bold:null,alignment:null,tabSize:null,shadow:null,shadowBlur:null,
shadowColor:null,sfont:null,chain:null,setDefault:function(a){this.defaultFS=24;this.font="Arial";this.fontSize=this.defaultFS;this.fill="#000";this.stroke="#f00";this.filled=!0;this.stroked=!1;this.strokeSize=1;this.bold=this.italic=!1;this.alignment="left";this.tabSize=75;this.shadow=!1;this.shadowBlur=0;this.shadowColor="#000";for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);this.__setFont();return this},setStyle:function(a){if("undefined"!==typeof a)for(var b in a)this[b]=a[b];return this},
applyStyle:function(){this.__setFont();return this},clone:function(){var b=new a(this.ctx),c;for(c in this)this.hasOwnProperty(c)&&(b[c]=this[c]);for(var d=this;d.chain;)for(c in d=d.chain,d)null===b[c]&&d.hasOwnProperty(c)&&(b[c]=d[c]);b.__setFont();return b},__getProperty:function(a){var b=this;do{var c=b[a];if(null!==c)return c;b=b.chain}while(b);return null},image:function(a){this.__setShadow(a)},text:function(a,b,c,d){this.__setShadow(a);a.font=this.__getProperty("sfont");this.filled&&this.__fillText(a,
b,c,d);this.stroked&&this.__strokeText(a,b,c,d)},__setShadow:function(a){this.__getProperty("shadow")&&(a.shadowBlur=this.__getProperty("shadowBlur"),a.shadowColor=this.__getProperty("shadowColor"))},__fillText:function(a,b,c,d){a.fillStyle=this.__getProperty("fill");a.fillText(b,c,d)},__strokeText:function(a,b,c,d){a.strokeStyle=this.__getProperty("stroke");a.lineWidth=this.__getProperty("strokeSize");a.beginPath();a.strokeText(b,c,d)},__setFont:function(){var a=this.__getProperty("italic"),b=this.__getProperty("bold"),
c=this.__getProperty("fontSize"),d=this.__getProperty("font");this.sfont=(a?"italic ":"")+(b?"bold ":"")+c+"px "+d;this.ctx.font=this.__getProperty("sfont")},setBold:function(a){a!=this.bold&&(this.bold=a,this.__setFont())},setItalic:function(a){a!=this.italic&&(this.italic=a,this.__setFont())},setStroked:function(a){this.stroked=a},setFilled:function(a){this.filled=a},getTabPos:function(a){var b=this.__getProperty("tabSize");return((a/b>>0)+1)*b},setFillStyle:function(a){this.fill=a},setStrokeStyle:function(a){this.stroke=
a},setStrokeSize:function(a){this.strokeSize=a},setAlignment:function(a){this.alignment=a},setFontSize:function(a){a!==this.fontSize&&(this.fontSize=a,this.__setFont())}};var b=function(){this.text="";return this};b.prototype={x:0,y:0,width:0,text:null,crcs:null,rcs:null,styles:null,images:null,lines:null,documentHeight:0,anchorStack:null,__nextLine:function(){this.x=0;this.currentLine=new f(CAAT.Module.Font.Font.getFontMetrics(this.crcs.sfont));this.lines.push(this.currentLine)},__image:function(a,
b,c){var e=b&&c?a.getWidth():a.getWrappedImageWidth();this.width&&e+this.x>this.width&&0<this.x&&this.__nextLine();this.currentLine.addElementImage(new d(this.x,a,b,c,this.crcs.clone(),this.__getCurrentAnchor()));this.x+=e},__text:function(){if(0!==this.text.length){var a=this.ctx.measureText(this.text).width;this.width&&a+this.x>this.width&&0<this.x&&this.__nextLine();this.currentLine.addElement(new e(this.text,this.x,a,0,this.crcs.clone(),this.__getCurrentAnchor()));this.x+=a;this.text=""}},fchar:function(a){" "===
a?(this.__text(),this.x+=this.ctx.measureText(a).width,this.width&&this.x>this.width&&this.__nextLine()):this.text+=a},end:function(){0<this.text.length&&this.__text();for(var a=0,b=0,c=0;c<this.lines.length;c++){var d=this.lines[c].getHeight();0===d&&(d=this.styles["default"].fontSize);a+=d;c===this.lines.length-1&&(b=.25*d>>0);this.lines[c].setY(a)}this.documentHeight=a+b},getDocumentHeight:function(){return this.documentHeight},__getCurrentAnchor:function(){return this.anchorStack.length?this.anchorStack[this.anchorStack.length-
1]:null},__resetAppliedStyles:function(){this.rcs=[];this.__pushDefaultStyles()},__pushDefaultStyles:function(){this.crcs=(new a(this.ctx)).setDefault(this.styles["default"]);this.rcs.push(this.crcs)},__pushStyle:function(b){var c=this.crcs;this.crcs=new a(this.ctx);this.crcs.chain=c;this.crcs.setStyle(b);this.crcs.applyStyle();this.rcs.push(this.crcs)},__popStyle:function(){1<this.rcs.length&&(this.rcs.pop(),this.crcs=this.rcs[this.rcs.length-1],this.crcs.applyStyle())},__popAnchor:function(){0<
this.anchorStack.length&&this.anchorStack.pop()},__pushAnchor:function(a){this.anchorStack.push(a)},start:function(a,b,c,d){this.y=this.x=0;this.width="undefined"!==typeof d?d:0;this.ctx=a;this.lines=[];this.styles=b;this.images=c;this.anchorStack=[];this.__resetAppliedStyles();this.__nextLine()},setTag:function(a){this.__text();a=a.toLowerCase();if("b"===a)this.crcs.setBold(!0);else if("/b"===a)this.crcs.setBold(!1);else if("i"===a)this.crcs.setItalic(!0);else if("/i"===a)this.crcs.setItalic(!1);
else if("stroked"===a)this.crcs.setStroked(!0);else if("/stroked"===a)this.crcs.setStroked(!1);else if("filled"===a)this.crcs.setFilled(!0);else if("/filled"===a)this.crcs.setFilled(!1);else if("tab"===a)this.x=this.crcs.getTabPos(this.x);else if("br"===a)this.__nextLine();else if("/a"===a)this.__popAnchor();else if("/style"===a)1<this.rcs.length&&this.__popStyle();else if(0===a.indexOf("fillcolor"))a=a.split("="),this.crcs.setFillStyle(a[1]);else if(0===a.indexOf("strokecolor"))a=a.split("="),this.crcs.setStrokeStyle(a[1]);
else if(0===a.indexOf("strokesize"))a=a.split("="),this.crcs.setStrokeSize(a[1]|0);else if(0===a.indexOf("fontsize"))a=a.split("="),this.crcs.setFontSize(a[1]|0);else if(0===a.indexOf("style"))a=a.split("="),(a=this.styles[a[1]])&&this.__pushStyle(a);else if(0===a.indexOf("image")){a=a.split("=")[1].split(",");var b=a[0];if(this.images[b]){var c=0,d=0;3<=a.length&&(c=a[1]|0,d=a[2]|0);this.__image(this.images[b],c,d)}}else 0===a.indexOf("a=")&&(a=a.split("="),this.__pushAnchor(a[1]))}};var c=function(a,
b){this.link=a;this.style=b;return this};c.prototype={x:null,y:null,width:null,height:null,style:null,link:null,isLink:function(){return this.link},setLink:function(a){this.link=a;return this},getLink:function(){return this.link},contains:function(a,b){return!1}};var d=function(a,b,c,e,f,p){d.superclass.constructor.call(this,p,f);this.x=a;this.image=b;this.row=c;this.column=e;this.width=b.getWidth();this.height=b.getHeight();if(this.image instanceof CAAT.SpriteImage||this.image instanceof CAAT.Foundation.SpriteImage)this.spriteIndex=
c*b.columns+e,this.paint=this.paintSI;return this};d.prototype={image:null,row:null,column:null,spriteIndex:null,paint:function(a){this.style.image(a);a.drawImage(this.image,this.x,-this.height+1)},paintSI:function(a){this.style.image(a);this.image.setSpriteIndex(this.spriteIndex);this.image.paint({ctx:a},0,this.x,-this.height+1)},getHeight:function(){return this.image instanceof CAAT.Foundation.SpriteImage?this.image.singleHeight:this.image.height},getFontMetrics:function(){return null},contains:function(a,
b){return a>=this.x&&a<=this.x+this.width&&b>=this.y&&b<this.y+this.height},setYPosition:function(a){this.y=a-this.height+1}};var e=function(a,b,c,d,f,p){e.superclass.constructor.call(this,p,f);this.x=b;this.y=0;this.width=c;this.text=a;this.style=f;this.fm=CAAT.Module.Font.Font.getFontMetrics(f.sfont);this.height=this.fm.height;return this};e.prototype={text:null,style:null,fm:null,bl:null,paint:function(a){this.style.text(a,this.text,this.x,0)},getHeight:function(){return this.fm.height},getFontMetrics:function(){return this.fm},
contains:function(a,b){return a>=this.x&&a<=this.x+this.width&&b>=this.y&&b<=this.y+this.height},setYPosition:function(a){this.bl=a;this.y=a-this.fm.ascent}};extend(d,c);extend(e,c);var f=function(a){this.elements=[];this.defaultFontMetrics=a;return this};f.prototype={elements:null,width:0,height:0,defaultHeight:0,y:0,x:0,alignment:null,baselinePos:0,addElement:function(a){this.width=Math.max(this.width,a.x+a.width);this.height=Math.max(this.height,a.height);this.elements.push(a);this.alignment=a.style.__getProperty("alignment")},
addElementImage:function(a){this.width=Math.max(this.width,a.x+a.width);this.height=Math.max(this.height,a.height);this.elements.push(a)},getHeight:function(){return this.height},setY:function(a){this.y=a},getY:function(){return this.y},paint:function(a){a.save();a.translate(this.x,this.y+this.baselinePos);for(var b=0;b<this.elements.length;b++)this.elements[b].paint(a);a.restore()},setAlignment:function(a){var b;if("center"===this.alignment)this.x=(a-this.width)/2;else if("right"===this.alignment)this.x=
a-this.width;else if("justify"===this.alignment&&.6<=this.width/a&&1<this.elements.length){var c=a-this.width;c=c/(this.elements.length-1)|0;for(b=1;b<this.elements.length;b++)this.elements[b].x+=b*c;c=a-this.width-c*(this.elements.length-1);for(b=0;b<c;b++)this.elements[this.elements.length-1-b].x+=c-b}},adjustHeight:function(){var a=null,b=null,c;for(c=0;c<this.elements.length;c+=1){var d=this.elements[c],e=d.getFontMetrics();null!=e?a?e.ascent>a.ascent&&(a=e):a=e:b?d.getHeight()>d.getHeight()&&
(b=d):b=d}this.baselinePos=Math.max(a?a.ascent:this.defaultFontMetrics.ascent,b?b.getHeight():this.defaultFontMetrics.ascent);this.height=this.baselinePos+(null!=a?a.descent:this.defaultFontMetrics.descent);for(c=0;c<this.elements.length;c++)this.elements[c].setYPosition(this.baselinePos);return this.height},__getElementAt:function(a,b){for(var c=0;c<this.elements.length;c++){var d=this.elements[c];if(d.contains(a,b))return d}return null}};return{__init:function(){this.__super();this.rc=new b;this.lines=
[];this.styles={};this.images={};return this},halignment:CAAT.Foundation.UI.Layout.LayoutManager.ALIGNMENT.LEFT,valignment:CAAT.Foundation.UI.Layout.LayoutManager.ALIGNMENT.TOP,text:null,rc:null,styles:null,documentWidth:0,documentHeight:0,documentX:0,documentY:0,reflow:!0,lines:null,images:null,clickCallback:null,setStyle:function(a,b){this.styles[a]=b;return this},addImage:function(a,b){this.images[a]=b;return this},setSize:function(a,b){CAAT.Foundation.UI.Label.superclass.setSize.call(this,a,b);
this.setText(this.text,this.width);return this},setBounds:function(a,b,c,d){CAAT.Foundation.UI.Label.superclass.setBounds.call(this,a,b,c,d);this.setText(this.text,this.width);return this},setText:function(a,b){if(null!==a){var c=this.cached;c&&this.stopCacheAsBitmap();this.documentHeight=this.documentWidth=0;this.text=a;var d=CAAT.currentDirector.ctx;d.save();var e=this.text;var f=0;var g=e.length;for(this.rc.start(d,this.styles,this.images,b);f<g;){var h=e.charAt(f);if("\\"===h)f+=1,this.rc.fchar(e.charAt(f)),
f+=1;else if("<"===h){var t=e.indexOf(">",f+1);if(-1!==t){var u=e.substr(f+1,t-f-1);-1!==u.indexOf("<")?(this.rc.fchar(h),f+=1):(this.rc.setTag(u),f=t+1)}}else this.rc.fchar(h),f+=1}this.rc.end();this.lines=this.rc.lines;this.__calculateDocumentDimension("undefined"===typeof b?0:b);this.setLinesAlignment();d.restore();this.setPreferredSize(this.documentWidth,this.documentHeight);this.invalidateLayout();this.setDocumentPosition();c&&this.cacheAsBitmap(0,c);return this}},setVerticalAlignment:function(a){this.valignment=
a;this.setDocumentPosition();return this},setHorizontalAlignment:function(a){this.halignment=a;this.setDocumentPosition();return this},setDocumentPosition:function(){var a=0,b=0;this.valignment===CAAT.Foundation.UI.Layout.LayoutManager.ALIGNMENT.CENTER?b=(this.height-this.documentHeight)/2:this.valignment===CAAT.Foundation.UI.Layout.LayoutManager.ALIGNMENT.BOTTOM&&(b=this.height-this.documentHeight);this.halignment===CAAT.Foundation.UI.Layout.LayoutManager.ALIGNMENT.CENTER?a=(this.width-this.documentWidth)/
2:this.halignment===CAAT.Foundation.UI.Layout.LayoutManager.ALIGNMENT.RIGHT&&(a=this.width-this.documentWidth);this.documentX=a;this.documentY=b},__calculateDocumentDimension:function(a){var b,c=0;for(b=this.documentHeight=this.documentWidth=0;b<this.lines.length;b++)this.lines[b].y=c,this.documentWidth=Math.max(this.documentWidth,this.lines[b].width),this.documentHeight+=this.lines[b].adjustHeight(),c+=this.lines[b].getHeight();this.documentWidth=Math.max(this.documentWidth,a);return this},setLinesAlignment:function(){for(var a=
0;a<this.lines.length;a++)this.lines[a].setAlignment(this.documentWidth)},paint:function(a,b){if(this.cached===CAAT.Foundation.Actor.CACHE_NONE){var c=a.ctx;c.save();c.textBaseline="alphabetic";c.translate(this.documentX,this.documentY);for(var d=0;d<this.lines.length;d++)this.lines[d].paint(a.ctx);c.restore()}else this.backgroundImage&&this.backgroundImage.paint(a,b,0,0)},__getDocumentElementAt:function(a,b){a-=this.documentX;b-=this.documentY;for(var c=0;c<this.lines.length;c++){var d=this.lines[c];
if(d.x<=a&&d.y<=b&&d.x+d.width>=a&&d.y+d.height>=b)return d.__getElementAt(a-d.x,b-d.y)}return null},mouseExit:function(a){CAAT.setCursor("default")},mouseMove:function(a){(a=this.__getDocumentElementAt(a.x,a.y))&&a.getLink()?CAAT.setCursor("pointer"):CAAT.setCursor("default")},mouseClick:function(a){this.clickCallback&&(a=this.__getDocumentElementAt(a.x,a.y),a.getLink()&&this.clickCallback(a.getLink()))},setClickCallback:function(a){this.clickCallback=a;return this}}}});
CAAT.Module({defines:"CAAT.Foundation.UI.PathActor",aliases:["CAAT.PathActor"],depends:["CAAT.Foundation.Actor"],extendsClass:"CAAT.Foundation.Actor",extendsWith:{path:null,pathBoundingRectangle:null,bOutline:!1,outlineColor:"black",onUpdateCallback:null,interactive:!1,getPath:function(){return this.path},setPath:function(a){this.path=a;null!=a&&(this.pathBoundingRectangle=a.getBoundingBox(),this.setInteractive(this.interactive));return this},paint:function(a,b){CAAT.Foundation.UI.PathActor.superclass.paint.call(this,
a,b);if(this.path){var c=a.ctx;c.strokeStyle="#000";this.path.paint(a,this.interactive);this.bOutline&&(c.strokeStyle=this.outlineColor,c.strokeRect(this.pathBoundingRectangle.x,this.pathBoundingRectangle.y,this.pathBoundingRectangle.width,this.pathBoundingRectangle.height))}},showBoundingBox:function(a,b){(this.bOutline=a)&&b&&(this.outlineColor=b);return this},setInteractive:function(a){this.interactive=a;this.path&&this.path.setInteractive(a);return this},setOnUpdateCallback:function(a){this.onUpdateCallback=
a;return this},mouseDrag:function(a){this.path.drag(a.point.x,a.point.y,this.onUpdateCallback)},mouseDown:function(a){this.path.press(a.point.x,a.point.y)},mouseUp:function(a){this.path.release()}}});
CAAT.Module({defines:"CAAT.Foundation.UI.ShapeActor",aliases:["CAAT.ShapeActor"],extendsClass:"CAAT.Foundation.ActorContainer",depends:["CAAT.Foundation.ActorContainer"],constants:{SHAPE_CIRCLE:0,SHAPE_RECTANGLE:1},extendsWith:{__init:function(){this.__super();this.compositeOp="source-over";this.setShape(CAAT.Foundation.UI.ShapeActor.SHAPE_CIRCLE);return this},shape:0,compositeOp:null,lineWidth:1,lineCap:null,lineJoin:null,miterLimit:null,setLineWidth:function(a){this.lineWidth=a;return this},setLineCap:function(a){this.lineCap=
a;return this},setLineJoin:function(a){this.lineJoin=a;return this},setMiterLimit:function(a){this.miterLimit=a;return this},getLineCap:function(){return this.lineCap},getLineJoin:function(){return this.lineJoin},getMiterLimit:function(){return this.miterLimit},getLineWidth:function(){return this.lineWidth},setShape:function(a){this.shape=a;this.paint=this.shape===CAAT.Foundation.UI.ShapeActor.SHAPE_CIRCLE?this.paintCircle:this.paintRectangle;return this},setCompositeOp:function(a){this.compositeOp=
a;return this},paint:function(a,b){},paintCircle:function(a,b){if(this.cached)CAAT.Foundation.ActorContainer.prototype.paint.call(this,a,b);else{var c=a.ctx;c.lineWidth=this.lineWidth;c.globalCompositeOperation=this.compositeOp;null!==this.fillStyle&&(c.fillStyle=this.fillStyle,c.beginPath(),c.arc(this.width/2,this.height/2,Math.min(this.width,this.height)/2-this.lineWidth/2,0,2*Math.PI,!1),c.fill());null!==this.strokeStyle&&(c.strokeStyle=this.strokeStyle,c.beginPath(),c.arc(this.width/2,this.height/
2,Math.min(this.width,this.height)/2-this.lineWidth/2,0,2*Math.PI,!1),c.stroke())}},paintRectangle:function(a,b){if(this.cached)CAAT.Foundation.ActorContainer.prototype.paint.call(this,a,b);else{var c=a.ctx;c.lineWidth=this.lineWidth;this.lineCap&&(c.lineCap=this.lineCap);this.lineJoin&&(c.lineJoin=this.lineJoin);this.miterLimit&&(c.miterLimit=this.miterLimit);c.globalCompositeOperation=this.compositeOp;null!==this.fillStyle&&(c.fillStyle=this.fillStyle,c.beginPath(),c.fillRect(0,0,this.width,this.height),
c.fill());null!==this.strokeStyle&&(c.strokeStyle=this.strokeStyle,c.beginPath(),c.strokeRect(0,0,this.width,this.height),c.stroke())}}}});
CAAT.Module({defines:"CAAT.Foundation.UI.StarActor",aliases:["CAAT.StarActor"],depends:["CAAT.Foundation.ActorContainer"],extendsClass:"CAAT.Foundation.ActorContainer",extendsWith:{__init:function(){this.__super();this.compositeOp="source-over";return this},nPeaks:0,maxRadius:0,minRadius:0,initialAngle:0,compositeOp:null,lineWidth:1,lineCap:null,lineJoin:null,miterLimit:null,setLineWidth:function(a){this.lineWidth=a;return this},setLineCap:function(a){this.lineCap=a;return this},setLineJoin:function(a){this.lineJoin=
a;return this},setMiterLimit:function(a){this.miterLimit=a;return this},getLineCap:function(){return this.lineCap},getLineJoin:function(){return this.lineJoin},getMiterLimit:function(){return this.miterLimit},getLineWidth:function(){return this.lineWidth},setFilled:function(a){return this},setOutlined:function(a){return this},setCompositeOp:function(a){this.compositeOp=a;return this},setInitialAngle:function(a){this.initialAngle=a;return this},initialize:function(a,b,c){this.setSize(2*b,2*b);this.nPeaks=
a;this.maxRadius=b;this.minRadius=c;return this},paint:function(a,b){var c=a.ctx,d=this.width/2,e=this.height/2,f=this.maxRadius,g=this.minRadius,h=d+f*Math.cos(this.initialAngle),k=e+f*Math.sin(this.initialAngle);c.lineWidth=this.lineWidth;this.lineCap&&(c.lineCap=this.lineCap);this.lineJoin&&(c.lineJoin=this.lineJoin);this.miterLimit&&(c.miterLimit=this.miterLimit);c.globalCompositeOperation=this.compositeOp;c.beginPath();c.moveTo(h,k);for(h=1;h<2*this.nPeaks;h++){k=Math.PI/this.nPeaks*h+this.initialAngle;
var n=0===h%2?f:g;c.lineTo(d+n*Math.cos(k),e+n*Math.sin(k))}c.lineTo(d+f*Math.cos(this.initialAngle),e+f*Math.sin(this.initialAngle));c.closePath();this.fillStyle&&(c.fillStyle=this.fillStyle,c.fill());this.strokeStyle&&(c.strokeStyle=this.strokeStyle,c.stroke())}}});
CAAT.Module({defines:"CAAT.Foundation.UI.TextActor",aliases:["CAAT.TextActor"],extendsClass:"CAAT.Foundation.Actor",constants:{TRAVERSE_PATH_FORWARD:1,TRAVERSE_PATH_BACKWARD:-1},depends:["CAAT.Foundation.Actor","CAAT.Foundation.SpriteImage","CAAT.Module.Font.Font","CAAT.Math.Point","CAAT.Behavior.Interpolator"],extendsWith:{__init:function(){this.__super();this.font="10px sans-serif";this.textAlign="left";this.outlineColor="black";this.clip=!1;this.__calcFontData();return this},font:null,fontData:null,
textAlign:null,textBaseline:"top",enable_shadow:!1,shadowColor:"#787878",shadowOffsetX:1,shadowOffsetY:1,shadowBlur:5,fill:!0,textFillStyle:"#eee",text:null,textWidth:0,textHeight:0,outline:!1,outlineColor:null,lineWidth:1,path:null,pathInterpolator:null,pathDuration:1E4,sign:1,lx:0,ly:0,setFill:function(a){this.stopCacheAsBitmap();this.fill=a;return this},setLineWidth:function(a){this.stopCacheAsBitmap();this.lineWidth=a;return this},setTextFillStyle:function(a){this.stopCacheAsBitmap();this.textFillStyle=
a;return this},setShadow:function(a){this.stopCacheAsBitmap();this.enable_shadow=a;return this},setShadowStyle:function(a,b,c,d){this.stopCacheAsBitmap();this.shadowColor="undefined"!==typeof a?a:this.shadowColor;this.shadowOffsetX="undefined"!==typeof b?b:this.shadowOffsetX;this.shadowOffsetY="undefined"!==typeof c?c:this.shadowOffsetY;this.shadowBlur="undefined"!==typeof d?d:this.shadowBlur;return this},setOutline:function(a){this.stopCacheAsBitmap();this.outline=a;return this},setPathTraverseDirection:function(a){this.sign=
a;return this},setOutlineColor:function(a){this.stopCacheAsBitmap();this.outlineColor=a;return this},setText:function(a){this.stopCacheAsBitmap();this.text=a;if(null===this.text||""===this.text)this.width=this.height=0;this.calcTextSize(CAAT.currentDirector);this.invalidate();return this},setTextAlign:function(a){this.textAlign=a;this.__setLocation();return this},setAlign:function(a){return this.setTextAlign(a)},setTextBaseline:function(a){this.stopCacheAsBitmap();this.textBaseline=a;return this},
setBaseline:function(a){this.stopCacheAsBitmap();return this.setTextBaseline(a)},setFont:function(a){this.stopCacheAsBitmap();a||(a="10px sans-serif");a instanceof CAAT.Module.Font.Font&&a.setAsSpriteImage();this.font=a;this.__calcFontData();this.calcTextSize(CAAT.director[0]);return this},setLocation:function(a,b){this.lx=a;this.ly=b;this.__setLocation();return this},setPosition:function(a,b){this.lx=a;this.ly=b;this.__setLocation();return this},setBounds:function(a,b,c,d){this.lx=a;this.ly=b;this.setSize(c,
d);this.__setLocation();return this},setSize:function(a,b){CAAT.Foundation.UI.TextActor.superclass.setSize.call(this,a,b);this.__setLocation();return this},__setLocation:function(){CAAT.Foundation.UI.TextActor.superclass.setLocation.call(this,"center"===this.textAlign?this.lx-this.width/2:"right"===this.textAlign||"end"===this.textAlign?this.lx-this.width:this.lx,"bottom"===this.textBaseline?this.ly-this.height:"middle"===this.textBaseline?this.ly-this.height/2:"alphabetic"===this.textBaseline?this.ly-
this.fontData.ascent:this.ly)},centerAt:function(a,b){this.textAlign="left";this.textBaseline="top";return CAAT.Foundation.UI.TextActor.superclass.centerAt.call(this,a,b)},calcTextSize:function(a){if("undefined"===typeof this.text||null===this.text||""===this.text)return this.textHeight=this.textWidth=0,this;if(a.glEnabled)return this;if(this.font instanceof CAAT.Foundation.SpriteImage||this.font instanceof CAAT.Module.Font.Font)return this.textWidth=this.font.stringWidth(this.text),this.textHeight=
this.font.stringHeight(),this.width=this.textWidth,this.height=this.textHeight,this.fontData=this.font.getFontData(),this;a=a.ctx;a.save();a.font=this.font;this.textWidth=a.measureText(this.text).width;0===this.width&&(this.width=this.textWidth);this.textHeight=this.fontData.height;this.setSize(this.textWidth,this.textHeight);a.restore();return this},__calcFontData:function(){this.fontData=CAAT.Module.Font.Font.getFontMetrics(this.font)},paint:function(a,b){if(this.text&&(CAAT.Foundation.UI.TextActor.superclass.paint.call(this,
a,b),!this.cached&&null!==this.text)){0!==this.textWidth&&0!==this.textHeight||this.calcTextSize(a);var c=a.ctx;if(this.font instanceof CAAT.Module.Font.Font||this.font instanceof CAAT.Foundation.SpriteImage)this.drawSpriteText(a,b);else if(null!==this.font&&(c.font=this.font),c.textBaseline="alphabetic",null===this.path){null!==this.textAlign&&(c.textAlign=this.textAlign);var d=0;"center"===this.textAlign?d=this.width/2|0:"right"===this.textAlign&&(d=this.width);this.enable_shadow&&(c.shadowColor=
this.shadowColor,c.shadowOffsetX=this.shadowOffsetX,c.shadowOffsetY=this.shadowOffsetY,c.shadowBlur=this.shadowBlur);this.fill&&(null!==this.textFillStyle&&(c.fillStyle=this.textFillStyle),c.fillText(this.text,d,this.fontData.ascent));this.outline&&(null!==this.outlineColor&&(c.strokeStyle=this.outlineColor),c.lineWidth=this.lineWidth,c.beginPath(),c.strokeText(this.text,d,this.fontData.ascent))}else this.drawOnPath(a,b)}},drawOnPath:function(a,b){var c=a.ctx;this.fill&&null!==this.textFillStyle&&
(c.fillStyle=this.textFillStyle);this.outline&&null!==this.outlineColor&&(c.strokeStyle=this.outlineColor);var d=this.sign*this.pathInterpolator.getPosition(b%this.pathDuration/this.pathDuration).y*this.path.getLength();new CAAT.Math.Point(0,0,0);new CAAT.Math.Point(0,0,0);for(var e=0;e<this.text.length;e++){var f=this.text[e].toString(),g=c.measureText(f).width;var h=d;var k=this.path.getPositionFromLength(h).clone();h=this.path.getPositionFromLength(h-.1).clone();h=Math.atan2(k.y-h.y,k.x-h.x);c.save();
CAAT.CLAMP?c.translate(k.x>>0,k.y>>0):c.translate(k.x,k.y);c.rotate(h);this.fill&&c.fillText(f,0,0);this.outline&&(c.beginPath(),c.lineWidth=this.lineWidth,c.strokeText(f,0,0));c.restore();d+=g}},drawSpriteText:function(a,b){null===this.path?this.font.drawText(this.text,a.ctx,0,0):this.drawSpriteTextOnPath(a,b)},drawSpriteTextOnPath:function(a,b){var c=a.ctx,d=this.sign*this.pathInterpolator.getPosition(b%this.pathDuration/this.pathDuration).y*this.path.getLength();new CAAT.Math.Point(0,0,0);new CAAT.Math.Point(0,
0,0);for(var e=0;e<this.text.length;e++){var f=this.text[e].toString(),g=this.font.stringWidth(f);var h=g/2+d;var k=this.path.getPositionFromLength(h).clone();h=this.path.getPositionFromLength(h-.1).clone();h=Math.atan2(k.y-h.y,k.x-h.x);c.save();CAAT.CLAMP?c.translate(k.x|0,k.y|0):c.translate(k.x,k.y);c.rotate(h);k="bottom"===this.textBaseline?0-this.font.getHeight():0;this.font.drawText(f,c,0,k);c.restore();d+=g}},setPath:function(a,b,c){this.path=a;this.pathInterpolator=b||(new CAAT.Behavior.Interpolator).createLinearInterpolator();
this.pathDuration=c||1E4;this.mouseEnabled=!1;return this}}});CAAT.ModuleManager.solveAll();
(function() {
  jQuery.curvySlider = function(fa, ga, ha, ia, ja, U) {
    function ka() {
      2 < f.length && f.splice(2, 1);
      for (var d = a = 0;d < f.scenes.length;d++) {
        if ("" != f.scenes[d].sceneDetails.fallbackURL) {
          c[a] = {};
          c[a].sceneID = "curvy-fallback-" + a;
          c[a].sceneDetails = {};
          c[a].sceneDetails.sceneTime = f.scenes[d].sceneDetails.sceneTime;
          c[a].sceneDetails.sceneDelay = f.scenes[d].sceneDetails.sceneDelay;
          var b = '<img src="' + f.scenes[d].sceneDetails.fallbackURL + '" />';
          c[a].imageString = 0 === a ? '<div class="' + c[a].sceneID + '">' + b + "</div>" : '<div class="' + c[a].sceneID + ' hide">' + b + "</div>";
          jQuery(h + " .curvy-slider-fallback-canvas").append(c[a].imageString);
          V(a);
          a++;
        }
      }
      a = c.length - 1;
    }
    function V(d) {
      d = '<div class="curvy-nav-elem ' + (0 === d ? "active" : "") + '" data-ref="nav-elem-' + d + '"></div>';
      jQuery(h + " .curvy-slider-nav-container .curvy-slider-nav").append(d);
    }
    function K(d) {
      d >= c.length || (jQuery(h + " .curvy-fallback-" + a).animate({opacity:"0"}, Number(c[a].sceneDetails.sceneTime), function() {
        jQuery(this).addClass("hide");
      }), jQuery(h + " .curvy-fallback-" + d).css("opacity", "0").removeClass("hide"), jQuery(h + " .curvy-fallback-" + d).animate({opacity:"1"}, 1E3 * Number(c[d].sceneDetails.sceneTime), function() {
        a = d;
      }));
    }
    function la() {
      var d = jQuery("#" + m).parents(".rockthemes-curvy-slider"), b = parseInt(d.width() * f.slider_height / f.slider_width);
      d.parents(".rockthemes-unique-grid").length && "true" === d.parents(".rockthemes-unique-grid").attr("data-rsb-fullscreen") && (b = d.parents(".rockthemes-unique-grid").height());
      d.css({height:b + "px", position:"relative"});
    }
    function E() {
      return navigator.userAgent.match(/msie [7]/i) || navigator.userAgent.match(/msie [8]/i) ? !0 : !1;
    }
    function ma() {
      c = [];
      var d = f.fonts ? f.fonts : [];
      if (0 < d.length) {
        for (var b = 0;b < d.length;b++) {
          L.push(d[b]);
        }
        WebFont.load({google:{families:L}, fontactive:function(b, d) {
          W++;
          W >= L.length && !C && (C = !0, M());
        }, active:function() {
          C || (C = !0, M());
        }});
      } else {
        C = !0, M();
      }
    }
    function M() {
      for (var d = [], b = 0;b < f.scenes.length;b++) {
        if (N && -1 < f.scenes[b].bg.bgType.indexOf("video") && "" !== f.scenes[b].sceneDetails.fallbackURL && f.scenes[b].imageArray.push({id:"scene_fallback_" + b, url:f.scenes[b].sceneDetails.fallbackURL}), -1 < f.scenes[b].bg.bgType.indexOf("image") && "" !== f.scenes[b].bg.bgURL && f.scenes[b].imageArray.push({id:"scene_bg_" + b, url:f.scenes[b].bg.bgURL}), "undefined" != typeof f.scenes[b].imageArray) {
          for (var a = 0;a < f.scenes[b].imageArray.length;a++) {
            d.push({id:f.scenes[b].imageArray[a].id, url:f.scenes[b].imageArray[a].url});
          }
        }
      }
      if (0 < d.length) {
        b = new CAAT.Module.Preloader.Preloader;
        for (a = 0;a < d.length;a++) {
          b.addElement(d[a].id, d[a].url);
        }
        b.load(function(b) {
          X(b);
        });
      } else {
        X();
      }
    }
    function F(d) {
      d >= c.length || (n.easeInOut(d, c[d].sceneDetails.incomingMotion, c[d].sceneDetails.incomingAnchor, a, c[a].sceneDetails.incomingMotion, c[a].sceneDetails.incomingAnchor, 1E3 * c[a].sceneDetails.sceneTime, 1, p(c[d].sceneDetails.incomingEasing), p(c[a].sceneDetails.incomingEasing)), a = d, "activate_nav" === t && (jQuery("#scenes-navigation ul li.scene-nav-elem.active").removeClass("active"), jQuery("#scene-nav-" + d).addClass("active")));
    }
    function A(d, b, l) {
      d = (d = "undefined" === typeof d || null == d ? null : d) ? (new CAAT.PathUtil.Path).beginPath(parseInt(d[0].x) - 240, parseInt(d[0].y) - 150).addQuadricTo(parseInt(d[1].x) - 240, parseInt(d[1].y) - 150, parseInt(d[2].x) - 240, parseInt(d[2].y) - 150).endPath() : (new CAAT.PathUtil.Path).beginPath(1150, 219).addQuadricTo(1130, 350, 780, 280).endPath();
      c[a].path.addSegment(d);
      c[a].pa.setPath(c[a].path);
      return d;
    }
    function X(d) {
      CAAT.RETINA_DISPLAY_ENABLED = !0;
      CAAT.IOS_RETINA_LIMIT = 5242880;
      CAAT.DEBUG_DIRTYRECTS = !0;
      jQuery("#" + m).parents(".rockthemes-curvy-slider").find(".loader-container").length && jQuery("#" + m).parents(".rockthemes-curvy-slider").find(".loader-container").remove();
      jQuery("#" + m).parents(".rockthemes-curvy-slider").css({height:"", position:""});
      jQuery("#" + m).parents(".rockthemes-curvy-slider").addClass("curvy-loaded");
      n = (new CAAT.Foundation.Director).initialize(q, r, m);
      O ? n.enableResizeEvents(CAAT.Foundation.Director.RESIZE_HEIGHT) : n.enableResizeEvents(CAAT.Foundation.Director.RESIZE_PROPORTIONAL);
      n.setImagesCache(d);
      if (O) {
        var b;
        jQuery(window).resize(function() {
          "undefined" != typeof b && clearTimeout(b);
          b = setTimeout(function() {
            jQuery(document).trigger("rockthemes:sticky_menu_resize");
            "true" !== v || u ? y() : (P(), G());
          }, 800);
        });
      }
      Y = (new CAAT.PathUtil.Path).endPath();
      (new CAAT.Foundation.UI.PathActor).enableEvents(!0).setBounds(0, 0, n.width, n.height).setInteractive(!0).setPath(Y).showBoundingBox(!1);
      na();
      0 < c.length || (a = c.length, c[a] = {}, c[a].theScene = n.createScene(), c[a].theSceneID = "scene-" + a, c[a].path = (new CAAT.PathUtil.Path).endPath(), c[a].pa = (new CAAT.Foundation.UI.PathActor).setBounds(0, 0, n.width, n.height).setInteractive(!0).setPath(c[a].path).showBoundingBox(!1), c[a].bg = {}, c[a].bg.bgActor = Z("", c[a].theSceneID), c[a].theScene.addChildAt(c[a].bg.bgActor, 0), c[a].imageArray = [], c[a].sceneDetails = {}, c[a].sceneDetails.sceneTime = .65, c[a].sceneDetails.sceneDelay = 
      6, c[a].sceneDetails.incomingMotion = 0, c[a].sceneDetails.incomingAnchor = 0, c[a].sceneDetails.incomingEasing = "easeOut", c[a].theSceneID.split("-"), c[a].actorElems = []);
      CAAT.loop(60);
      "true" == v ? (F(0), "activate_nav" === t ? (jQuery(h + ' .curvy-nav-elem[data-ref="nav-elem-0"]').addClass("active"), jQuery(h + " #playAllScenesBtn").trigger("click")) : G()) : (F(0), "activate_nav" === t && jQuery(h + ' .curvy-nav-elem[data-ref="nav-elem-0"]').addClass("active"));
      var l = 0, e = 0;
      jQuery("#" + m).on("touchstart", function(b) {
        l = b.originalEvent.touches[0].pageX;
      }).on("touchmove", function(b) {
        e = l - b.originalEvent.touches[0].pageX;
      }).on("touchend", function(b) {
        15 > Math.abs(e) || (0 > e ? aa() : ba());
      });
      jQuery(h).animate({opacity:1}, 180);
      jQuery(document).trigger("rockthemes:sticky_menu_resize");
      jQuery(document).trigger("rockthemes:intro_effect_canvas_resize");
      jQuery(document).trigger("curvyslider:reset_side_nav");
      jQuery(document).trigger("curvyslider:curvy_ready");
    }
    function Z(d, b, a) {
      jQuery(h).append('<div class="curvyslider-video" style="display:none;"><video id="' + Q + "_" + a + '" class="curvybgvideo_' + a + '" loop="true" preload="auto"><source src="' + d + '" type="video/mp4" /></video></div>');
      jQuery(".curvybgvideo_" + a).on("canplay canplaythrough", function() {
        jQuery(".curvybgvideo_" + a).off("canplay canplaythrough");
        jQuery(".curvybgvideo_" + a)[0].currentTime = 0;
        jQuery(".curvybgvideo_" + a)[0].oncanplay = !1;
        jQuery(".curvybgvideo_" + a).attr("data-video-ready-to-start", "true");
      }).load();
      var c = document.getElementById(Q + "_" + a);
      d = document.createElement("canvas");
      d.width = q;
      d.height = r;
      var l = d.getContext("2d");
      d = (new CAAT.Foundation.SpriteImage).initialize(d, 1, 1);
      b.createTimer(0, 33, function(b, d, a) {
        a.reset(b);
        l.drawImage(c, 0, 0, q, r);
      });
      b = (new CAAT.Foundation.ActorContainer).setBounds(0, 0, n.width, n.height);
      d = (new CAAT.Foundation.Actor).setBackgroundImage(d.getRef(), !0);
      b.addChild(d);
      return b;
    }
    function na() {
      2 < f.length && f.splice(2, 1);
      for (var d = a = 0;d < f.scenes.length;d++) {
        var b = f.scenes[d];
        c[a] = {};
        c[a].theScene = n.createScene();
        c[a].path = (new CAAT.PathUtil.Path).endPath();
        c[a].pa = (new CAAT.Foundation.UI.PathActor).setBounds(0, 0, n.width, n.height).setInteractive(!0).setPath(c[a].path).showBoundingBox(!1);
        c[a].imageArray = "undefined" != typeof f.scenes[d].imageArray ? f.scenes[d].imageArray : [];
        c[a].bg = {};
        c[a].bg.bgType = f.scenes[d].bg.bgType;
        c[a].bg.bgURL = f.scenes[d].bg.bgURL;
        c[a].bg.bgColor = f.scenes[d].bg.bgColor;
        c[a].bg.bgVideoURL = f.scenes[d].bg.bgVideoURL;
        c[a].bg.bgColorAlpha = f.scenes[d].bg.bgColorAlpha;
        c[a].bg.fallbackURL = f.scenes[d].sceneDetails.fallbackURL;
        c[a].sceneDetails = {};
        c[a].sceneDetails.sceneTime = f.scenes[d].sceneDetails.sceneTime;
        c[a].sceneDetails.sceneDelay = f.scenes[d].sceneDetails.sceneDelay;
        c[a].sceneDetails.incomingMotion = f.scenes[d].sceneDetails.incomingMotion;
        c[a].sceneDetails.incomingAnchor = f.scenes[d].sceneDetails.incomingAnchor;
        c[a].sceneDetails.incomingEasing = f.scenes[d].sceneDetails.incomingEasing;
        c[a].theSceneID = "scene-" + a;
        c[a].theSceneID.split("-");
        N && -1 < c[a].bg.bgType.indexOf("video") && (c[a].bg.bgURL = c[a].bg.fallbackURL);
        if ("transparent" == c[a].bg.bgType) {
          c[a].bg.bgActor = (new CAAT.Foundation.UI.ShapeActor).setShape(CAAT.Foundation.UI.ShapeActor.SHAPE_RECTANGLE).centerAt(0, 0).setSize(q, r), c[a].theScene.addChildAt(c[a].bg.bgActor, 0);
        } else {
          if ("image" == c[a].bg.bgType || N && "" !== c[a].bg.bgURL) {
            var l = q / 2, e = r / 2;
            c[a].bg.bgActor = (new CAAT.Foundation.ActorContainer).setBounds(0, 0, n.width, n.height).setSize(q, r).centerAt(l, e);
            c[a].theScene.addChildAt(c[a].bg.bgActor, 0);
            oa(c[a].bg.bgActor, c[a].theSceneID, c[a].bg.bgURL);
          } else {
            "color" == c[a].bg.bgType ? (c[a].bg.bgActor = (new CAAT.Foundation.UI.ShapeActor).setShape(CAAT.Foundation.UI.ShapeActor.SHAPE_RECTANGLE).centerAt(0, 0).setSize(q, r), c[a].theScene.addChildAt(c[a].bg.bgActor, 0), c[a].bg.bgActor.setFillStyle(c[a].bg.bgColor)) : -1 < c[a].bg.bgType.indexOf("video") && (c[a].bg.bgActor = Z(c[a].bg.bgVideoURL, c[a].theScene, c[a].theSceneID), -1 < c[a].bg.bgType.indexOf("color") && (l = (new CAAT.Foundation.UI.ShapeActor).setShape(CAAT.Foundation.UI.ShapeActor.SHAPE_RECTANGLE).centerAt(0, 
            0).setSize(q, r).setAlpha(c[a].bg.bgColorAlpha), c[a].bg.bgActor.addChild(l), l.setFillStyle(c[a].bg.bgColor)), c[a].theScene.addChildAt(c[a].bg.bgActor, 0));
          }
        }
        c[a].actorElems = [];
        for (l = 0;l < b.actorElems.length;l++) {
          switch(b.actorElems[l].objType) {
            case "singleText":
              ca("scene-0", b.actorElems[l]);
              break;
            case "singleBoxedText":
              pa("scene-0", b.actorElems[l]);
              break;
            case "image":
              var h, e = b.actorElems[l], g = (e = "undefined" === typeof e || null == e ? null : e) ? e.elemID : R();
              e && e.objSrc.substr(e.objSrc.lastIndexOf("/") + 1);
              var w = (new CAAT.Foundation.Actor).setLocation(e ? e.coordsArray[0].x - 240 : 1800, e ? e.coordsArray[0].y - 150 : 400).enableEvents(!0).setPositionAnchor(.5, .5).emptyBehaviorList();
              e && w.setBackgroundImage(n.getImage(e.elemID));
              h = e ? A(e.coordsArray, w, e.elemID) : A(null, w, g);
              e && 1 == e.hideBeginning && w.setAlpha(0);
              var k = !1;
              if (e && 1 == e.autoRotate && (jQuery("#" + g + " label.autoRotate input").attr("checked", "checked"), e.auto_rotation_mode)) {
                switch(e.auto_rotation_mode) {
                  case "LEFT_TO_RIGHT":
                    k = CAAT.PathBehavior.autorotate.LEFT_TO_RIGHT;
                    break;
                  case "RIGHT_TO_LEFT":
                    k = CAAT.PathBehavior.autorotate.RIGHT_TO_LEFT;
                    break;
                  case "FREE":
                    k = CAAT.PathBehavior.autorotate.FREE;
                    break;
                  default:
                    k = CAAT.PathBehavior.autorotate.FREE;
                }
              }
              "true" != v && w.addBehavior((new CAAT.Behavior.PathBehavior).setValues(h).setDelayTime(e ? parseInt(e.delayTime) : 1800, e ? parseInt(e.motionTime) : 1E3).setCycle(!1).setAutoRotate(e && e.autoRotate ? !0 : !1, e && e.autoRotate ? k : !1).setInterpolator(e ? p(e.easingName) : (new CAAT.Interpolator).createExponentialOutInterpolator(4))).addBehavior((new CAAT.Behavior.AlphaBehavior).setInterpolator(e ? p(e.easingName) : (new CAAT.Interpolator).createExponentialOutInterpolator(4)).setValues(e ? 
              e.startAlpha : 1, e ? e.endAlpha : 1).setDelayTime(e ? parseInt(e.delayTime) : 1800, e ? parseInt(e.motionTime) : 1E3)).addBehavior((new CAAT.Behavior.ScaleBehavior).setInterpolator(e ? p(e.easingName) : (new CAAT.Interpolator).createExponentialOutInterpolator(4)).setValues(e ? e.scaleStart : 1, e ? e.scaleEnd : 1, e ? e.scaleStart : 1, e ? e.scaleEnd : 1).setDelayTime(e ? parseInt(e.delayTime) : 1800, e ? parseInt(e.motionTime) : 1E3));
              k = e ? e : {};
              e || (k.coordsArray = [], k.delayTime = 650, k.motionTime = 650, k.outOfSceneTime = 650, k.waitOnSceneTime = 3, k.outOfSceneMotion = "noMotion", k.objType = "image", k.objText = "New Text", k.fontStyle = "", k.objSrc = "", k.linkActive = !1, k.objLink = "", k.objBorderColor = "", k.objColor = "#3e3e3e", k.objFontSize = "40px", k.objFont = "sans", k.elemID = g, k.autoRotate = !1, k.hideBeginning = !1, k.easingName = "", k.startAlpha = 1, k.endAlpha = 1, k.scaleStart = 1, k.scaleEnd = 
              1);
              k.pathRemoved = !1;
              k.path = h;
              h = k.path.numControlPoints();
              for (var m = 0;m < h;m++) {
              }
              if (0 >= k.coordsArray.length) {
                for (m = 0;m < h;m++) {
                  k.coordsArray.push(k.path.getControlPoint(m));
                }
              }
              for (m = 0;m < h;m++) {
              }
              k.Actor = w;
              k.easing = e ? p(e.easingName) : (new CAAT.Interpolator).createExponentialOutInterpolator(4);
              c[a].actorElems || (c[a].actorElems = []);
              c[a].actorElems.push(k);
              e && e.linkActive && S(w, e.objLink);
              c[a].theScene.addChildAt(w, c[a].theScene.childrenList.length);
              e && "noMotion" != e.outOfSceneMotion && H(k, k.outOfSceneMotion);
              for (m = 0;m < h;m++) {
              }
              T(g);
              break;
            case "button":
              addButton("scene-0");
              break;
            default:
              ca("scene-0");
          }
        }
        "nav_regular" === t && V(a);
        a++;
      }
      a = c.length - 1;
    }
    function ca(d, b) {
      var l = (b = "undefined" === typeof b || null == b ? null : b) ? b.elemID : R(), e = "Baumans";
      b && b.objFont && (e = b.objFont, e.indexOf(":") && (e = e.split(":"), e = e[0]));
      var e = (new CAAT.Foundation.UI.TextActor).setFont(b ? b.fontStyle + " " + b.objFontSize + " " + e : "40px Baumans").setText(b ? b.objText : jQuery("#" + l + " .text-holder").val()).setLocation(b ? b.coordsArray[0].x - 240 : 1800, b ? b.coordsArray[0].y - 150 : 400).setAlpha(b ? b.startAlpha : 1).setTextFillStyle(b ? b.objColor : "#3e3e3e").setShadow(b && b.enable_shadow ? b.enable_shadow : !1).enableEvents(!0).emptyBehaviorList(), f;
      f = b ? A(b.coordsArray, e, b.elemID) : A(null, e, l);
      b && 1 == b.hideBeginning && e.setAlpha(0);
      "true" != v && e.addBehavior((new CAAT.Behavior.PathBehavior).setPath(f).setDelayTime(b ? parseInt(b.delayTime) : 1800, b ? parseInt(b.motionTime) : 1E3).setCycle(!1).setAutoRotate(b && b.autoRotate ? !0 : !1, b && b.autoRotate ? CAAT.PathBehavior.autorotate.FREE : !1).setInterpolator(b ? p(b.easingName) : (new CAAT.Interpolator).createExponentialOutInterpolator(4))).addBehavior((new CAAT.Behavior.AlphaBehavior).setInterpolator(b ? p(b.easingName) : (new CAAT.Interpolator).createExponentialOutInterpolator(4)).setValues(b ? 
      b.startAlpha : 1, b ? b.endAlpha : 1).setDelayTime(b ? parseInt(b.delayTime) : 1800, b ? parseInt(b.motionTime) : 1E3)).addBehavior((new CAAT.Behavior.ScaleBehavior).setInterpolator(b ? p(b.easingName) : (new CAAT.Interpolator).createExponentialOutInterpolator(4)).setValues(b ? b.scaleStart : 1, b ? b.scaleEnd : 1, b ? b.scaleStart : 1, b ? b.scaleEnd : 1).setDelayTime(b ? parseInt(b.delayTime) : 1800, b ? parseInt(b.motionTime) : 1E3));
      var g = b ? b : {};
      b || (g.coordsArray = [], g.delayTime = 650, g.motionTime = 650, g.outOfSceneTime = 650, g.waitOnSceneTime = 3, g.outOfSceneMotion = "noMotion", g.objType = "singleText", g.objText = "New Text", g.fontStyle = "", g.objSrc = "", g.linkActive = !1, g.objLink = "", g.objBorderColor = "", g.objColor = "#3e3e3e", g.objFontSize = "40px", g.objFont = "sans", g.elemID = l, g.autoRotate = !1, g.hideBeginning = !1, g.easingName = "", g.startAlpha = 1, g.endAlpha = 1, g.scaleStart = 1, g.scaleEnd = 1);
      g.pathRemoved = !1;
      g.path = f;
      f = g.path.numControlPoints();
      if (0 >= g.coordsArray.length) {
        for (var h = 0;h < f;h++) {
          g.coordsArray.push(g.path.getControlPoint(h));
        }
      }
      g.Actor = e;
      g.easing = b ? p(b.easingName) : (new CAAT.Interpolator).createExponentialOutInterpolator(4);
      c[a].actorElems || (c[a].actorElems = []);
      c[a].actorElems.push(g);
      b && b.linkActive && S(e, b.objLink);
      c[a].theScene.addChildAt(e, c[a].theScene.childrenList.length);
      b && "noMotion" != b.outOfSceneMotion && H(g, g.outOfSceneMotion);
      T(l);
    }
    function pa(d, b) {
      var l = (b = "undefined" === typeof b || null == b ? null : b) ? b.elemID : R(), e = "Baumans";
      b && b.objFont && (e = b.objFont, e.indexOf(":") && (e = e.split(":"), e = e[0]));
      var f = (new CAAT.Foundation.UI.TextActor).setFont(b ? b.fontStyle + " " + b.objFontSize + " " + e : "40px Baumans").setText(b ? b.objText : jQuery("#" + l + " .text-holder").val()).setShadow(b && b.enable_shadow ? b.enable_shadow : !1).setTextFillStyle(b ? b.objColor : "#f0f0f0").emptyBehaviorList();
      f.centerAt((f.textWidth + parseInt(b ? b.paddingH : 40)) / 2, (f.textHeight + parseInt(b ? b.paddingV : 30)) / 2);
      var g = (new CAAT.Foundation.ActorContainer(CAAT.Foundation.ActorContainer.AddHint.CONFORM)).setLocation(b ? b.coordsArray[0].x - 240 : 1800, b ? b.coordsArray[0].y - 150 : 400).setAlpha(b ? b.startAlpha : 1).enableEvents(!0).emptyBehaviorList();
      setTimeout(function() {
        g.addChild(f);
      }, 10);
      var h = qa(f.textWidth + parseInt(b ? b.paddingH : 40), f.textHeight + parseInt(b ? b.paddingV : 30), parseInt(b ? b.bgRadius : 10), b ? b.objBGColor : "#333333");
      g.setBackgroundImage(h);
      var k;
      k = b ? A(b.coordsArray, g, b.elemID) : A(null, g, l);
      b && 1 == b.hideBeginning && g.setAlpha(0);
      "true" != v && g.setGlobalAlpha(!0).addBehavior((new CAAT.Behavior.PathBehavior).setPath(k).setDelayTime(b ? parseInt(b.delayTime) : 1800, b ? parseInt(b.motionTime) : 1E3).setCycle(!1).setAutoRotate(b && b.autoRotate ? !0 : !1, b && b.autoRotate ? CAAT.PathBehavior.autorotate.FREE : !1).setInterpolator(b ? p(b.easingName) : (new CAAT.Interpolator).createExponentialOutInterpolator(4))).addBehavior((new CAAT.Behavior.AlphaBehavior).setInterpolator(b ? p(b.easingName) : (new CAAT.Interpolator).createExponentialOutInterpolator(4)).setValues(b ? 
      b.startAlpha : 1, b ? b.endAlpha : 1).setDelayTime(b ? parseInt(b.delayTime) : 1800, b ? parseInt(b.motionTime) : 1E3)).addBehavior((new CAAT.Behavior.ScaleBehavior).setInterpolator(b ? p(b.easingName) : (new CAAT.Interpolator).createExponentialOutInterpolator(4)).setValues(b ? b.scaleStart : 1, b ? b.scaleEnd : 1, b ? b.scaleStart : 1, b ? b.scaleEnd : 1).setDelayTime(b ? parseInt(b.delayTime) : 1800, b ? parseInt(b.motionTime) : 1E3));
      e = b ? b : {};
      b || (e.coordsArray = [], e.delayTime = 650, e.motionTime = 650, e.outOfSceneTime = 650, e.waitOnSceneTime = 3, e.outOfSceneMotion = "noMotion", e.objType = "singleBoxedText", e.objText = "New Text", e.fontStyle = "", e.objSrc = "", e.linkActive = !1, e.objLink = "", e.objBorderColor = "", e.objColor = "#3e3e3e", e.objFontSize = "40px", e.objFont = "sans", e.elemID = l, e.autoRotate = !1, e.hideBeginning = !1, e.easingName = "", e.startAlpha = 1, e.endAlpha = 1, e.scaleStart = 1, e.scaleEnd = 
      1);
      e.actor_bg_shape = h;
      e.pathRemoved = !1;
      e.path = k;
      h = e.path.numControlPoints();
      if (0 >= e.coordsArray.length) {
        for (k = 0;k < h;k++) {
          e.coordsArray.push(e.path.getControlPoint(k));
        }
      }
      e.Actor = g;
      e.textActor = f;
      e.easing = b ? p(b.easingName) : (new CAAT.Interpolator).createExponentialOutInterpolator(4);
      c[a].actorElems || (c[a].actorElems = []);
      c[a].actorElems.push(e);
      b && b.linkActive && S(g, b.objLink, b);
      c[a].theScene.addChildAt(g, c[a].theScene.childrenList.length);
      b && "noMotion" != b.outOfSceneMotion && "true" != v && H(e, e.outOfSceneMotion);
      T(l);
    }
    function qa(d, b, a, c) {
      var e = document.createElement("canvas");
      a = "undefined" == typeof a ? a = 20 : a;
      var g = e.getContext("2d");
      e.width = d;
      e.height = b;
      g.fillStyle = c;
      g.clearRect(0, 0, d, b);
      g.beginPath();
      g.moveTo(a, 0);
      g.lineTo(d - a, 0);
      g.quadraticCurveTo(d, 0, d, a);
      g.lineTo(d, b - a);
      g.quadraticCurveTo(d, b, d - a, b);
      g.lineTo(a, b);
      g.quadraticCurveTo(0, b, 0, b - a);
      g.lineTo(0, a);
      g.quadraticCurveTo(0, 0, a, 0);
      g.closePath();
      g.fill();
      return e;
    }
    function oa(d, b, l, e) {
      var f = {};
      f.url = l;
      f.id = b;
      "undefined" != typeof c[a] && c[a].imageArray.push(f);
      (new CAAT.Module.Preloader.Preloader).addElement(b, l).load(function(b) {
        d.setBackgroundImage(b[b.length - 1].image);
        "undefined" != typeof callback && e();
      });
    }
    function S(a, b, c) {
      "undefined" == typeof c ? (a.mouseClick = function(d) {
        1 === a.frameAlpha && (window.location.href = b);
      }, a.touchEnd = function(d) {
        1 === a.frameAlpha && (window.location.href = b);
      }, a.mouseEnter = function(b) {
        1 === a.frameAlpha && (document.getElementById(m).style.cursor = "pointer");
      }, a.mouseExit = function(b) {
        1 === a.frameAlpha && (document.getElementById(m).style.cursor = "default");
      }) : "singleBoxedText" != c.objType || c.buttonCover || (c.buttonCover = (new CAAT.Foundation.UI.ShapeActor).setShape(CAAT.Foundation.UI.ShapeActor.SHAPE_RECTANGLE).setBounds(0, 0, a.width, a.height).setFillStyle("blue").setAlpha(0), c.buttonCover.mouseClick = function(d) {
        1 === a.frameAlpha && (window.location.href = b);
      }, c.buttonCover.touchEnd = function(d) {
        1 === a.frameAlpha && (window.location.href = b);
      }, c.buttonCover.mouseEnter = function(b) {
        1 === a.frameAlpha && (document.getElementById(m).style.cursor = "pointer", c.objBGHoverColor && (b = c.actor_bg_shape.getContext("2d"), b.fillStyle = c.objBGHoverColor, b.fill()));
      }, c.buttonCover.mouseExit = function(b) {
        1 === a.frameAlpha && (document.getElementById(m).style.cursor = "default", c.objBGHoverColor && (b = c.actor_bg_shape.getContext("2d"), b.fillStyle = c.objBGColor, b.fill()));
      }, a.addChild(c.buttonCover), c.actor_bg_shape.fillStyle = "red");
    }
    function G() {
      B || (B = !0, u = !1, I());
    }
    function P() {
      u = !0;
      for (var a = 0;a < D.length;a++) {
        D[a].pause();
      }
      "undefined" != typeof x && clearInterval(x);
      B = !1;
    }
    function I() {
      x = setTimeout(da, 1E3 * c[a].sceneDetails.sceneDelay);
      ea = (new Date).getTime();
      E() || y();
    }
    function da() {
      var d = a;
      d++;
      d >= c.length && (d = 0);
      E() ? K(d) : F(d);
      a = d;
      jQuery(h + " .curvy-nav-elem.active").removeClass("active");
      jQuery(h + ' .curvy-nav-elem[data-ref="nav-elem-' + a + '"]').addClass("active");
      u || I();
    }
    function y() {
      for (var d = 0;d < D.length;d++) {
        D[d].pause();
      }
      for (d = 0;d < c[a].actorElems.length;d++) {
        c[a].actorElems[d].Actor.setLocation(c[a].actorElems[d].coordsArray[0].x - 240, c[a].actorElems[d].coordsArray[0].y - 150).setAlpha(1 == c[a].actorElems[d].hideBeginning ? 0 : c[a].actorElems[d].startAlpha);
      }
      -1 < c[a].bg.bgType.indexOf("video") && jQuery(".curvybgvideo_scene-" + a).length && jQuery(".curvybgvideo_scene-" + a)[0] && jQuery(".curvybgvideo_scene-" + a).attr("data-video-ready-to-start") && "true" === jQuery(".curvybgvideo_scene-" + a).attr("data-video-ready-to-start") && (jQuery(".curvybgvideo_scene-" + a)[0].currentTime = 0, jQuery(".curvybgvideo_scene-" + a)[0].play(), D.push(jQuery(".curvybgvideo_scene-" + a)[0]));
      for (d = 0;d < c[a].actorElems.length;d++) {
        var b = !1;
        if (c[a].actorElems[d] && 1 == c[a].actorElems[d].autoRotate && c[a].actorElems[d].auto_rotation_mode) {
          switch(c[a].actorElems[d].auto_rotation_mode) {
            case "LEFT_TO_RIGHT":
              b = CAAT.PathBehavior.autorotate.LEFT_TO_RIGHT;
              break;
            case "RIGHT_TO_LEFT":
              b = CAAT.PathBehavior.autorotate.RIGHT_TO_LEFT;
              break;
            case "FREE":
              b = CAAT.PathBehavior.autorotate.FREE;
              break;
            default:
              b = CAAT.PathBehavior.autorotate.FREE;
          }
        }
        c[a].actorElems[d].Actor.emptyBehaviorList().setRotation(0).setGlobalAlpha(!0).setScale(c[a].actorElems[d].scaleStart, c[a].actorElems[d].scaleStart).addBehavior((new CAAT.Behavior.PathBehavior).setValues(c[a].actorElems[d].path).setDelayTime(c[a].actorElems[d].delayTime, c[a].actorElems[d].motionTime).setCycle(!1).setAutoRotate(c[a].actorElems[d].autoRotate ? !0 : !1, c[a].actorElems[d].autoRotate ? b : !1).setInterpolator(c[a].actorElems[d].easing)).addBehavior((new CAAT.Behavior.AlphaBehavior).setValues(c[a].actorElems[d].startAlpha, 
        c[a].actorElems[d].endAlpha).setDelayTime(c[a].actorElems[d].delayTime, c[a].actorElems[d].motionTime).setInterpolator(c[a].actorElems[d].easing)).addBehavior((new CAAT.Behavior.ScaleBehavior).setValues(c[a].actorElems[d].scaleStart, c[a].actorElems[d].scaleEnd, c[a].actorElems[d].scaleStart, c[a].actorElems[d].scaleEnd).setDelayTime(c[a].actorElems[d].delayTime, c[a].actorElems[d].motionTime).setInterpolator(c[a].actorElems[d].easing));
        "noMotion" != c[a].actorElems[d].outOfSceneMotion && H(c[a].actorElems[d], c[a].actorElems[d].outOfSceneMotion);
      }
    }
    function p(a) {
      switch(a) {
        case "Linear":
          return (new CAAT.Behavior.Interpolator).createLinearInterpolator(!1, !1);
        case "LinearBounce":
          return (new CAAT.Behavior.Interpolator).createLinearInterpolator(!0, !1);
        case "ExpoIn":
          return (new CAAT.Behavior.Interpolator).createExponentialInInterpolator(2, !1);
        case "ExpoOut":
          return (new CAAT.Behavior.Interpolator).createExponentialOutInterpolator(2, !1);
        case "ExpoInOut":
          return (new CAAT.Behavior.Interpolator).createExponentialInOutInterpolator(2, !1);
        case "ExpoInBounce":
          return (new CAAT.Behavior.Interpolator).createExponentialInInterpolator(2, !0);
        case "ExpoOutBounce":
          return (new CAAT.Behavior.Interpolator).createExponentialOutInterpolator(2, !0);
        case "ExpoInOutBounce":
          return (new CAAT.Behavior.Interpolator).createExponentialInOutInterpolator(2, !0);
        case "ExpoIn4":
          return (new CAAT.Behavior.Interpolator).createExponentialInInterpolator(4, !1);
        case "ExpoOut4":
          return (new CAAT.Behavior.Interpolator).createExponentialOutInterpolator(4, !1);
        case "ExpoInOut4":
          return (new CAAT.Behavior.Interpolator).createExponentialInOutInterpolator(4, !1);
        case "ExpoIn4Bounce":
          return (new CAAT.Behavior.Interpolator).createExponentialInInterpolator(4, !0);
        case "ExpoOut4Bounce":
          return (new CAAT.Behavior.Interpolator).createExponentialOutInterpolator(4, !0);
        case "ExpoInOut4Bounce":
          return (new CAAT.Behavior.Interpolator).createExponentialInOutInterpolator(4, !0);
        case "ExpoIn6":
          return (new CAAT.Behavior.Interpolator).createExponentialInInterpolator(6, !1);
        case "ExpoOut6":
          return (new CAAT.Behavior.Interpolator).createExponentialOutInterpolator(6, !1);
        case "ExpoInOut6":
          return (new CAAT.Behavior.Interpolator).createExponentialInOutInterpolator(6, !1);
        case "ExpoIn6Bounce":
          return (new CAAT.Behavior.Interpolator).createExponentialInInterpolator(6, !0);
        case "ExpoOut6Bounce":
          return (new CAAT.Behavior.Interpolator).createExponentialOutInterpolator(6, !0);
        case "ExpoInOut6Bounce":
          return (new CAAT.Behavior.Interpolator).createExponentialInOutInterpolator(6, !0);
        case "BounceIn":
          return (new CAAT.Behavior.Interpolator).createBounceInInterpolator(!1);
        case "BounceOut":
          return (new CAAT.Behavior.Interpolator).createBounceOutInterpolator(!1);
        case "BounceInOut":
          return (new CAAT.Behavior.Interpolator).createBounceInOutInterpolator(!1);
        case "BounceInBounce":
          return (new CAAT.Behavior.Interpolator).createBounceInInterpolator(!0);
        case "BounceOutBounce":
          return (new CAAT.Behavior.Interpolator).createBounceOutInterpolator(!0);
        case "BounceInOutBounce":
          return (new CAAT.Behavior.Interpolator).createBounceInOutInterpolator(!0);
        case "easeIn":
          return (new CAAT.Behavior.Interpolator).createExponentialInInterpolator(6, !1);
        case "easeOut":
          return (new CAAT.Behavior.Interpolator).createExponentialOutInterpolator(6, !1);
        case "easeInOut":
          return (new CAAT.Behavior.Interpolator).createExponentialInOutInterpolator(6, !1);
        case "bounce":
          return (new CAAT.Behavior.Interpolator).createBounceOutInterpolator(!1);
        case "elastic":
          return (new CAAT.Behavior.Interpolator).createElasticOutInterpolator(1, .2, !1);
        case "linear":
          return (new CAAT.Behavior.Interpolator).createLinearInterpolator(!1, !1);
        default:
          return (new CAAT.Behavior.Interpolator).createLinearInterpolator(!1, !1);
      }
    }
    function R() {
      if (0 < jQuery("#elem-" + z).length) {
        for (;0 < jQuery("#elem-" + z).length;) {
          if (z++, 0 >= jQuery("#elem-" + z).length) {
            return "elem-" + z;
          }
        }
      } else {
        return z++, "elem-" + (z - 1);
      }
    }
    function T(d) {
      for (var b = 0;b < c[a].actorElems.length;b++) {
        if (c[a].actorElems[b].elemID == d) {
          return b;
        }
      }
    }
    function ba() {
      var d = parseInt(a) + 1;
      d >= c.length && (d = 0);
      n.easeInOut(d, c[d].sceneDetails.incomingMotion, c[d].sceneDetails.incomingAnchor, a, c[a].sceneDetails.incomingMotion, c[a].sceneDetails.incomingAnchor, 1E3 * c[a].sceneDetails.sceneTime, 1, p(c[d].sceneDetails.incomingEasing), p(c[a].sceneDetails.incomingEasing));
      a = d;
      jQuery(h + " .curvy-slider-nav .active").length && (jQuery(h + " .curvy-slider-nav .active").removeClass("active"), jQuery(h + ' .curvy-nav-elem[data-ref="nav-elem-' + a + '"]').addClass("active"));
      u ? y() : (clearInterval(x), I());
    }
    function aa() {
      var d = parseInt(a) - 1;
      0 > a - 1 && (d = c.length - 1);
      n.easeInOut(d, c[d].sceneDetails.incomingMotion, c[d].sceneDetails.incomingAnchor, a, c[a].sceneDetails.incomingMotion, c[a].sceneDetails.incomingAnchor, 1E3 * c[a].sceneDetails.sceneTime, 1, p(c[d].sceneDetails.incomingEasing), p(c[a].sceneDetails.incomingEasing));
      a = d;
      jQuery(h + " .curvy-slider-nav .active").length && (jQuery(h + " .curvy-slider-nav .active").removeClass("active"), jQuery(h + ' .curvy-nav-elem[data-ref="nav-elem-' + a + '"]').addClass("active"));
      u ? y() : (clearInterval(x), I());
    }
    function H(a, b) {
      var c;
      c = a.Actor.width;
      var d = a.Actor.height, f = a.path.numControlPoints();
      a.outCoordsArray = [];
      for (var g = 0;g < f;g++) {
        a.outCoordsArray.push(a.path.getControlPoint(g));
      }
      if ("noMotion" != b) {
        if ("toRight" == b) {
          c = "image" == a.objType ? parseInt(q) + 240 + parseInt(c) / 2 + 40 : parseInt(q) + 240 + 40, c = (new CAAT.LinearPath).setInitialPosition(parseInt(a.outCoordsArray[2].x), parseInt(a.outCoordsArray[2].y)).setFinalPosition(parseInt(c), parseInt(a.outCoordsArray[2].y));
        } else {
          if ("toLeft" == b) {
            c = "image" == a.objType ? -40 - parseInt(c) / 2 : -40 - parseInt(c), c = (new CAAT.LinearPath).setInitialPosition(parseInt(a.outCoordsArray[2].x), parseInt(a.outCoordsArray[2].y)).setFinalPosition(parseInt(c), parseInt(a.outCoordsArray[2].y));
          } else {
            if ("toTop" == b) {
              c = "image" == a.objType ? -40 - parseInt(d) / 2 : -40 - parseInt(d), c = (new CAAT.LinearPath).setInitialPosition(parseInt(a.outCoordsArray[2].x), parseInt(a.outCoordsArray[2].y)).setFinalPosition(parseInt(a.outCoordsArray[2].x), parseInt(c));
            } else {
              if ("toBottom" == b) {
                c = "image" == a.objType ? 150 + parseInt(r) + 40 + parseInt(d) / 2 : 150 + parseInt(r) + 40, c = (new CAAT.LinearPath).setInitialPosition(parseInt(a.outCoordsArray[2].x), parseInt(a.outCoordsArray[2].y)).setFinalPosition(parseInt(a.outCoordsArray[2].x), parseInt(c));
              } else {
                "alpha" == b && a.Actor.setGlobalAlpha(!0).addBehavior((new CAAT.Behavior.AlphaBehavior).setValues(a.endAlpha, 0).setDelayTime(parseInt(a.motionTime) + parseInt(a.delayTime) + parseInt(a.waitOnSceneTime), parseInt(a.outOfSceneTime)));
                return;
              }
            }
          }
        }
        a.Actor.addBehavior((new CAAT.Behavior.PathBehavior).setValues(c).setDelayTime(a.motionTime + a.delayTime + a.waitOnSceneTime, a.outOfSceneTime).setCycle(!1).setAutoRotate(!1).setInterpolator(a.easing));
      }
    }
    var c = [], a = 0, N = "ontouchstart" in window, Q, h, m, v, L = [], W = 0, C = !1, q = 1920, r = 700, t = ja, O = !1, D = [];
    Q = fa;
    h = "#" + ga;
    m = ha;
    v = ia;
    (function() {
      jQuery(h + " .curvy-slider-side-nav-container").length && (jQuery(document).on("click touchend", h + " .curvy-side-nav-left", function() {
        aa();
      }), jQuery(document).on("click touchend", h + " .curvy-side-nav-right", function() {
        ba();
      }), jQuery(window).resize(function() {
        jQuery(document).trigger("curvyslider:reset_side_nav");
      }), jQuery(document).on("curvyslider:curvy_ready", function() {
        jQuery(h + " .curvy-slider-side-nav-container").css("display", "inline");
      }));
      if ("nav_regular" === t && jQuery(h + " .curvy-slider-nav-container").length) {
        jQuery(document).on("click touchend", h + " .curvy-nav-elem", function() {
          var c = parseInt(jQuery(this).attr("data-ref").toString().replace("nav-elem-", ""));
          if (c != a) {
            var b = !1;
            "true" === v && !1 === u && (b = !0, "activate_nav" == t ? jQuery(h + " #stopAllScenesBtn").trigger("click") : P());
            E() ? K(c) : (F(c), y());
            b && ("activate_nav" === t ? jQuery(h + " #playAllScenesBtn").trigger("click") : G());
            jQuery(h + " .curvy-nav-elem.active").removeClass("active");
            jQuery(this).addClass("active");
          }
        });
      } else {
        if ("replay" === t) {
          jQuery(document).on("click touchend", h + " .curvy-replay-button", function() {
            y();
          });
        }
      }
    })();
    (function() {
      jQuery(document).on("click", h + " #stopAllScenesBtn", function() {
        P();
      });
    })();
    (function() {
      jQuery(document).on("click", h + " #playAllScenesBtn", function() {
        G();
      });
    })();
    null != U && (f = U, "undefined" == typeof f.slider_width && (f.slider_width = 1920), "undefined" == typeof f.slider_height && (f.slider_height = 700), q = f.slider_width, r = f.slider_height, "fullscreen" == f.slider_size_mode && (O = !0), la(), E() ? (ka(), K(0), "activate_nav" === t && jQuery(h + ' .curvy-nav-elem[data-ref="nav-elem-0"]').addClass("active")) : ma());
    var f, n, Y, B = !1;
    jQuery(h + " #playBtn").live("click", function() {
      B || (B = !0, y(), setTimeout(function() {
        B = !1;
      }, 1E3 * c[a].sceneDetails.sceneDelay));
    });
    var u = !1, x, ea = 0, J = 0;
    jQuery(window).blur(function() {
      u || "undefined" === typeof x || (J = 1E3 * c[a].sceneDetails.sceneDelay - ((new Date).getTime() - ea), clearTimeout(x));
    });
    jQuery(window).focus(function() {
      u || 0 === J || (x = setTimeout(da, J), J = 0);
    });
    var z = 0;
  };
})();
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(t=t||self).LazyLoad=n()}(this,(function(){"use strict";function t(){return(t=Object.assign||function(t){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t}).apply(this,arguments)}var n="undefined"!=typeof window,e=n&&!("onscroll"in window)||"undefined"!=typeof navigator&&/(gle|ing|ro)bot|crawl|spider/i.test(navigator.userAgent),i=n&&"IntersectionObserver"in window,a=n&&"classList"in document.createElement("p"),o=n&&window.devicePixelRatio>1,r={elements_selector:"IMG",container:e||n?document:null,threshold:300,thresholds:null,data_src:"src",data_srcset:"srcset",data_sizes:"sizes",data_bg:"bg",data_bg_hidpi:"bg-hidpi",data_bg_multi:"bg-multi",data_bg_multi_hidpi:"bg-multi-hidpi",data_poster:"poster",class_applied:"applied",class_loading:"loading",class_loaded:"loaded",class_error:"error",unobserve_completed:!0,unobserve_entered:!1,cancel_on_exit:!1,callback_enter:null,callback_exit:null,callback_applied:null,callback_loading:null,callback_loaded:null,callback_error:null,callback_finish:null,callback_cancel:null,use_native:!1},c=function(n){return t({},r,n)},l=function(t,n){var e,i=new t(n);try{e=new CustomEvent("LazyLoad::Initialized",{detail:{instance:i}})}catch(t){(e=document.createEvent("CustomEvent")).initCustomEvent("LazyLoad::Initialized",!1,!1,{instance:i})}window.dispatchEvent(e)},s=function(t,n){return t.getAttribute("data-"+n)},u=function(t,n,e){var i="data-"+n;null!==e?t.setAttribute(i,e):t.removeAttribute(i)},d=function(t){return s(t,"ll-status")},f=function(t,n){return u(t,"ll-status",n)},_=function(t){return f(t,null)},g=function(t){return null===d(t)},v=function(t){return"native"===d(t)},b=function(t,n,e,i){t&&(void 0===i?void 0===e?t(n):t(n,e):t(n,e,i))},p=function(t,n){a?t.classList.add(n):t.className+=(t.className?" ":"")+n},h=function(t,n){a?t.classList.remove(n):t.className=t.className.replace(new RegExp("(^|\\s+)"+n+"(\\s+|$)")," ").replace(/^\s+/,"").replace(/\s+$/,"")},m=function(t){return t.llTempImage},E=function(t,n){if(n){var e=n._observer;e&&e.unobserve(t)}},I=function(t,n){t&&(t.loadingCount+=n)},A=function(t,n){t&&(t.toLoadCount=n)},L=function(t){for(var n,e=[],i=0;n=t.children[i];i+=1)"SOURCE"===n.tagName&&e.push(n);return e},y=function(t,n,e){e&&t.setAttribute(n,e)},w=function(t,n){t.removeAttribute(n)},k=function(t){return!!t.llOriginalAttrs},z=function(t){if(!k(t)){var n={};n.src=t.getAttribute("src"),n.srcset=t.getAttribute("srcset"),n.sizes=t.getAttribute("sizes"),t.llOriginalAttrs=n}},O=function(t){if(k(t)){var n=t.llOriginalAttrs;y(t,"src",n.src),y(t,"srcset",n.srcset),y(t,"sizes",n.sizes)}},C=function(t,n){y(t,"sizes",s(t,n.data_sizes)),y(t,"srcset",s(t,n.data_srcset)),y(t,"src",s(t,n.data_src))},M=function(t){w(t,"src"),w(t,"srcset"),w(t,"sizes")},N=function(t,n){var e=t.parentNode;e&&"PICTURE"===e.tagName&&L(e).forEach(n)},x=function(t,n){L(t).forEach(n)},R={IMG:function(t,n){N(t,(function(t){z(t),C(t,n)})),z(t),C(t,n)},IFRAME:function(t,n){y(t,"src",s(t,n.data_src))},VIDEO:function(t,n){x(t,(function(t){y(t,"src",s(t,n.data_src))})),y(t,"poster",s(t,n.data_poster)),y(t,"src",s(t,n.data_src)),t.load()}},G=function(t,n){var e=R[t.tagName];e&&e(t,n)},T=function(t,n,e){I(e,1),p(t,n.class_loading),f(t,"loading"),b(n.callback_loading,t,e)},D={IMG:function(t,n){u(t,n.data_src,null),u(t,n.data_srcset,null),u(t,n.data_sizes,null),N(t,(function(t){u(t,n.data_srcset,null),u(t,n.data_sizes,null)}))},IFRAME:function(t,n){u(t,n.data_src,null)},VIDEO:function(t,n){u(t,n.data_src,null),u(t,n.data_poster,null),x(t,(function(t){u(t,n.data_src,null)}))}},F=function(t,n){u(t,n.data_bg_multi,null),u(t,n.data_bg_multi_hidpi,null)},V=function(t,n){var e=D[t.tagName];e?e(t,n):function(t,n){u(t,n.data_bg,null),u(t,n.data_bg_hidpi,null)}(t,n)},j=["IMG","IFRAME","VIDEO"],P=function(t,n){!n||function(t){return t.loadingCount>0}(n)||function(t){return t.toLoadCount>0}(n)||b(t.callback_finish,n)},S=function(t,n,e){t.addEventListener(n,e),t.llEvLisnrs[n]=e},U=function(t,n,e){t.removeEventListener(n,e)},$=function(t){return!!t.llEvLisnrs},q=function(t){if($(t)){var n=t.llEvLisnrs;for(var e in n){var i=n[e];U(t,e,i)}delete t.llEvLisnrs}},H=function(t,n,e){!function(t){delete t.llTempImage}(t),I(e,-1),function(t){t&&(t.toLoadCount-=1)}(e),h(t,n.class_loading),n.unobserve_completed&&E(t,e)},B=function(t,n,e){var i=m(t)||t;$(i)||function(t,n,e){$(t)||(t.llEvLisnrs={});var i="VIDEO"===t.tagName?"loadeddata":"load";S(t,i,n),S(t,"error",e)}(i,(function(a){!function(t,n,e,i){var a=v(n);H(n,e,i),p(n,e.class_loaded),f(n,"loaded"),V(n,e),b(e.callback_loaded,n,i),a||P(e,i)}(0,t,n,e),q(i)}),(function(a){!function(t,n,e,i){var a=v(n);H(n,e,i),p(n,e.class_error),f(n,"error"),b(e.callback_error,n,i),a||P(e,i)}(0,t,n,e),q(i)}))},J=function(t,n,e){!function(t){t.llTempImage=document.createElement("IMG")}(t),B(t,n,e),function(t,n,e){var i=s(t,n.data_bg),a=s(t,n.data_bg_hidpi),r=o&&a?a:i;r&&(t.style.backgroundImage='url("'.concat(r,'")'),m(t).setAttribute("src",r),T(t,n,e))}(t,n,e),function(t,n,e){var i=s(t,n.data_bg_multi),a=s(t,n.data_bg_multi_hidpi),r=o&&a?a:i;r&&(t.style.backgroundImage=r,function(t,n,e){p(t,n.class_applied),f(t,"applied"),F(t,n),n.unobserve_completed&&E(t,n),b(n.callback_applied,t,e)}(t,n,e))}(t,n,e)},K=function(t,n,e){!function(t){return j.indexOf(t.tagName)>-1}(t)?J(t,n,e):function(t,n,e){B(t,n,e),G(t,n),T(t,n,e)}(t,n,e)},Q=["IMG","IFRAME"],W=function(t){return t.use_native&&"loading"in HTMLImageElement.prototype},X=function(t,n,e){t.forEach((function(t){return function(t){return t.isIntersecting||t.intersectionRatio>0}(t)?function(t,n,e,i){b(e.callback_enter,t,n,i),function(t,n,e){n.unobserve_entered&&E(t,e)}(t,e,i),function(t){return!g(t)}(t)||K(t,e,i)}(t.target,t,n,e):function(t,n,e,i){g(t)||(function(t,n,e,i){e.cancel_on_exit&&function(t){return"loading"===d(t)}(t)&&"IMG"===t.tagName&&(q(t),function(t){N(t,(function(t){M(t)})),M(t)}(t),function(t){N(t,(function(t){O(t)})),O(t)}(t),h(t,e.class_loading),I(i,-1),_(t),b(e.callback_cancel,t,n,i))}(t,n,e,i),b(e.callback_exit,t,n,i))}(t.target,t,n,e)}))},Y=function(t){return Array.prototype.slice.call(t)},Z=function(t){return t.container.querySelectorAll(t.elements_selector)},tt=function(t){return function(t){return"error"===d(t)}(t)},nt=function(t,n){return function(t){return Y(t).filter(g)}(t||Z(n))},et=function(t,e){var a=c(t);this._settings=a,this.loadingCount=0,function(t,n){i&&!W(t)&&(n._observer=new IntersectionObserver((function(e){X(e,t,n)}),function(t){return{root:t.container===document?null:t.container,rootMargin:t.thresholds||t.threshold+"px"}}(t)))}(a,this),function(t,e){n&&window.addEventListener("online",(function(){!function(t,n){var e;(e=Z(t),Y(e).filter(tt)).forEach((function(n){h(n,t.class_error),_(n)})),n.update()}(t,e)}))}(a,this),this.update(e)};return et.prototype={update:function(t){var n,a,o=this._settings,r=nt(t,o);A(this,r.length),!e&&i?W(o)?function(t,n,e){t.forEach((function(t){-1!==Q.indexOf(t.tagName)&&(t.setAttribute("loading","lazy"),function(t,n,e){B(t,n,e),G(t,n),V(t,n),f(t,"native")}(t,n,e))})),A(e,0)}(r,o,this):(a=r,function(t){t.disconnect()}(n=this._observer),function(t,n){n.forEach((function(n){t.observe(n)}))}(n,a)):this.loadAll(r)},destroy:function(){this._observer&&this._observer.disconnect(),Z(this._settings).forEach((function(t){delete t.llOriginalAttrs})),delete this._observer,delete this._settings,delete this.loadingCount,delete this.toLoadCount},loadAll:function(t){var n=this,e=this._settings;nt(t,e).forEach((function(t){K(t,e,n)}))}},et.load=function(t,n){var e=c(n);K(t,e)},et.resetStatus=function(t){_(t)},n&&function(t,n){if(n)if(n.length)for(var e,i=0;e=n[i];i+=1)l(t,e);else l(t,n)}(et,window.lazyLoadOptions),et}));